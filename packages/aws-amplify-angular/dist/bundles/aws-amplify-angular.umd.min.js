!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("url"),require("buffer"),require("http"),require("fs"),require("os"),require("path"),require("child_process"),require("crypto"),require("uuid"),require("https"),require("stream"),require("http2"),require("process"),require("@aws-crypto/crc32"),require("lodash/isEmpty"),require("lodash/isEqual"),require("lodash/get"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("isomorphic-unfetch"),require("js-cookie"),require("fast-xml-parser"),require("axios"),require("events"),require("zen-observable"),require("paho-mqtt"),require("util"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","url","buffer","http","fs","os","path","child_process","crypto","uuid","https","stream","http2","process","@aws-crypto/crc32","lodash/isEmpty","lodash/isEqual","lodash/get","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","isomorphic-unfetch","js-cookie","fast-xml-parser","axios","events","zen-observable","paho-mqtt","util","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.url,e.buffer,e.http,e.fs,e.os,e.path,e.child_process,e.crypto$1,e.uuid,e.https,e.stream,e.http2,e.process$1,e.crc32,e.isEmpty,e.isEqual,e.get,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,0,e.Cookies,e.fastXmlParser,e.axios,e.events,e.zenObservable,e.Paho,e.util,e.AmplifyUI)}(this,function(e,f,t,_,v,S,d,m,s,i,o,a,n,h,y,u,r,c,l,p,g,b,w,C,E,A,I,k,T,P,O,x,N,R,M,U){"use strict";var D="default"in _?_.default:_;p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,g=g&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g,b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b,w=w&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w,C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C,E=E&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E,A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A,I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,N=N&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N;var L=function(e,t){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function F(e,t){function n(){this.constructor=e}L(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function B(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}function z(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(i<3?o(a):3<i?o(t,n,a):o(t,n))||a);return 3<i&&a&&Object.defineProperty(t,n,a),a}function V(n,r){return function(e,t){r(e,t,n)}}function q(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function K(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function H(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function G(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function $(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}function Y(e){return this instanceof Y?(this.v=e,this):new Y(e)}function J(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(e,t||[]),i=[],a={};return r("next"),r("throw"),r("return"),a[Symbol.asyncIterator]=function(){return this},a;function r(r){o[r]&&(a[r]=function(n){return new Promise(function(e,t){1<i.push([r,n,e,t])||s(r,n)})})}function s(e,t){try{(n=o[e](t)).value instanceof Y?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function Z(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=a[Symbol.asyncIterator];return t?t.call(a):(a=G(a),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=a[i]&&function(o){return new Promise(function(e,t){var n,r;o=a[i](o),n=e,e=t,r=o.done,t=o.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function X(e){return"function"==typeof e}var Q=!1,ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,Q=e},get useDeprecatedSynchronousErrorHandling(){return Q}};function te(e){setTimeout(function(){throw e},0)}var ne={closed:!0,next:function(e){},error:function(e){if(ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)},complete:function(){}},re=Array.isArray||function(e){return e&&"number"==typeof e.length};function oe(e){return null!==e&&"object"==typeof e}var ie,ae=(ce.prototype=Object.create(Error.prototype),ce),se=(ue.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof ue)t.remove(this);else if(null!==t)for(var i=0;i<t.length;++i)t[i].remove(this);if(X(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(t){e=t instanceof ae?le(t.errors):[t]}}if(re(o))for(var i=-1,a=o.length;++i<a;){var s=o[i];if(oe(s))try{s.unsubscribe()}catch(t){e=e||[],t instanceof ae?e=e.concat(le(t.errors)):e.push(t)}}if(e)throw new ae(e)}},ue.prototype.add=function(e){var t,n=e;if(!e)return ue.EMPTY;switch(typeof e){case"function":n=new ue(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof ue||(t=n,(n=new ue)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof ue){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}return null===(r=this._subscriptions)?this._subscriptions=[n]:r.push(n),n},ue.prototype.remove=function(e){var t=this._subscriptions;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},ue.EMPTY=((ie=new ue).closed=!0,ie),ue);function ue(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}function ce(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}function le(e){return e.reduce(function(e,t){return e.concat(t instanceof ae?t.errors:t)},[])}var pe,de,fe="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),he=(F(ye,de=se),ye.prototype[fe]=function(){return this},ye.create=function(e,t,n){return(n=new ye(e,t,n)).syncErrorThrowable=!1,n},ye.prototype.next=function(e){this.isStopped||this._next(e)},ye.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},ye.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},ye.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,de.prototype.unsubscribe.call(this))},ye.prototype._next=function(e){this.destination.next(e)},ye.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},ye.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},ye.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},ye),ge=(F(me,pe=he),me.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,ee.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},me.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=ee.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):te(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;te(e)}}},me.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},ee.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},me.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)}},me.prototype.__tryOrSetError=function(e,t,n){if(!ee.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return ee.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(te(t),!0)}return!1},me.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},me);function me(e,t,n,r){var o,i=pe.call(this)||this;return i._parentSubscriber=e,e=i,X(t)?o=t:t&&(o=t.next,n=t.error,r=t.complete,t!==ne&&(X((e=Object.create(t)).unsubscribe)&&i.add(e.unsubscribe.bind(e)),e.unsubscribe=i.unsubscribe.bind(i))),i._context=e,i._next=o,i._error=n,i._complete=r,i}function ye(e,t,n){var r=de.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=ne;break;case 1:if(!e){r.destination=ne;break}if("object"==typeof e){e instanceof ye?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new ge(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new ge(r,e,t,n)}return r}var ve="function"==typeof Symbol&&Symbol.observable||"@@observable";var be=(we.prototype.lift=function(e){var t=new we;return t.source=this,t.operator=e,t},we.prototype.subscribe=function(e,t,n){var r=this.operator,n=function(e,t,n){if(e){if(e instanceof he)return e;if(e[fe])return e[fe]()}return e||t||n?new he(e,t,n):new he(ne)}(e,t,n);if(r?n.add(r.call(n,this.source)):n.add(this.source||ee.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),ee.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},we.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){ee.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return;e=n&&n instanceof he?n:null}return 1}(t)?t.error(e):console.warn(e)}},we.prototype.forEach=function(r,e){var o=this;return new(e=Se(e))(function(e,t){var n=o.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},we.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},we.prototype[ve]=function(){return this},we.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?function(e){return e}:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},we.prototype.toPromise=function(e){var r=this;return new(e=Se(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},we.create=function(e){return new we(e)},we);function we(e){this._isScalar=!1,e&&(this._subscribe=e)}function Se(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var Ce,_e,Ee,Ae,Ie=(Ue.prototype=Object.create(Error.prototype),Ue),ke=(F(Me,Ae=se),Me.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},Me),Te=(F(Re,Ee=he),Re),Pe=(F(Ne,_e=be),Ne.prototype[fe]=function(){return new Te(this)},Ne.prototype.lift=function(e){var t=new Oe(this,this);return t.operator=e,t},Ne.prototype.next=function(e){if(this.closed)throw new Ie;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].next(e)},Ne.prototype.error=function(e){if(this.closed)throw new Ie;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),o=0;o<n;o++)r[o].error(e);this.observers.length=0},Ne.prototype.complete=function(){if(this.closed)throw new Ie;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},Ne.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},Ne.prototype._trySubscribe=function(e){if(this.closed)throw new Ie;return _e.prototype._trySubscribe.call(this,e)},Ne.prototype._subscribe=function(e){if(this.closed)throw new Ie;return this.hasError?(e.error(this.thrownError),se.EMPTY):this.isStopped?(e.complete(),se.EMPTY):(this.observers.push(e),new ke(this,e))},Ne.prototype.asObservable=function(){var e=new be;return e.source=this,e},Ne.create=function(e,t){return new Oe(e,t)},Ne),Oe=(F(xe,Ce=Pe),xe.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},xe.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},xe.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},xe.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):se.EMPTY},xe);function xe(e,t){var n=Ce.call(this)||this;return n.destination=e,n.source=t,n}function Ne(){var e=_e.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}function Re(e){var t=Ee.call(this,e)||this;return t.destination=e,t}function Me(e,t){var n=Ae.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}function Ue(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}function De(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new Fe(t,n))}}var Le,Fe=(ze.prototype.call=function(e,t){return t.subscribe(new je(e,this.project,this.thisArg))},ze),je=(F(Be,Le=he),Be.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},Be);function Be(e,t,n){return(e=Le.call(this,e)||this).project=t,e.count=0,e.thisArg=n||e,e}function ze(e,t){this.project=e,this.thisArg=t}var Ve="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",qe=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ke(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var He=function(e){if(e&&"function"==typeof e[ve])return i=e,function(e){var t=i[ve]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(qe(e))return o=e,function(e){for(var t=0,n=o.length;t<n&&!e.closed;t++)e.next(o[t]);e.complete()};if(Ke(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,te),t};if(e&&"function"==typeof e[Ve])return r=e,function(e){for(var t=r[Ve]();;){var n=void 0;try{n=t.next()}catch(t){return e.error(t),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var r,n,o,i,e=oe(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Ge(e,t){return t?function(e,t){if(null!=e){if((n=e)&&"function"==typeof n[ve])return s=e,u=t,new be(function(t){var n=new se;return n.add(u.schedule(function(){var e=s[ve]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(Ke(e))return i=e,a=t,new be(function(t){var n=new se;return n.add(a.schedule(function(){return i.then(function(e){n.add(a.schedule(function(){t.next(e),n.add(a.schedule(function(){return t.complete()}))}))},function(e){n.add(a.schedule(function(){return t.error(e)}))})})),n});if(qe(e))return r=e,o=t,new be(function(e){var t=new se,n=0;return t.add(o.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if((n=e)&&"function"==typeof n[Ve]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new be(function(r){var o,e=new se;return e.add(function(){o&&"function"==typeof o.return&&o.return()}),e.add(n.schedule(function(){o=t[Ve](),e.add(n.schedule(function(){if(!r.closed){try{var e=o.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var r,o,i,a,s,u,n;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof be?e:new be(He(e))}function We(u,c){return new be(function(r){var o=u.length;if(0!==o)for(var i=new Array(o),a=0,s=0,e=0;e<o;e++)!function(t){var e=Ge(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,s++),i[t]=e},error:function(e){return r.error(e)},complete:function(){++a!==o&&n||(s===o&&r.next(c?c.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),r.complete())}}))}(e);else r.complete()})}var $e=null,Ye=(Object.defineProperty(Je.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),Je);function Je(){this.resourceLoaderType=null}var Ze,Xe=(F(Qe,Ze=Ye),Qe.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Qe.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Qe.prototype.supportsDOMEvents=function(){return!0},Qe.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Qe.prototype.getAnimationPrefix=function(){return this._animationPrefix||""},Qe.prototype.getTransitionEnd=function(){return this._transitionEnd||""},Qe.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Qe);function Qe(){var t=Ze.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var et,tt={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},nt={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","":"NumLock"};f["ɵglobal"].Node&&(et=f["ɵglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var ot,it=(F(at,ot=Xe),at.prototype.parse=function(e){throw new Error("parse not implemented")},at.makeCurrent=function(){var e=new at;$e=$e||e},at.prototype.hasProperty=function(e,t){return t in e},at.prototype.setProperty=function(e,t,n){e[t]=n},at.prototype.getProperty=function(e,t){return e[t]},at.prototype.invoke=function(e,t,n){e[t].apply(e,n)},at.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},at.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},at.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},at.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(at.prototype,"attrToPropMap",{get:function(){return tt},enumerable:!0,configurable:!0}),at.prototype.contains=function(e,t){return et.call(e,t)},at.prototype.querySelector=function(e,t){return e.querySelector(t)},at.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},at.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},at.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},at.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},at.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},at.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},at.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},at.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},at.prototype.getInnerHTML=function(e){return e.innerHTML},at.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},at.prototype.getOuterHTML=function(e){return e.outerHTML},at.prototype.nodeName=function(e){return e.nodeName},at.prototype.nodeValue=function(e){return e.nodeValue},at.prototype.type=function(e){return e.type},at.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},at.prototype.firstChild=function(e){return e.firstChild},at.prototype.nextSibling=function(e){return e.nextSibling},at.prototype.parentElement=function(e){return e.parentNode},at.prototype.childNodes=function(e){return e.childNodes},at.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},at.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},at.prototype.appendChild=function(e,t){e.appendChild(t)},at.prototype.removeChild=function(e,t){e.removeChild(t)},at.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},at.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},at.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},at.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},at.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},at.prototype.setInnerHTML=function(e,t){e.innerHTML=t},at.prototype.getText=function(e){return e.textContent},at.prototype.setText=function(e,t){e.textContent=t},at.prototype.getValue=function(e){return e.value},at.prototype.setValue=function(e,t){e.value=t},at.prototype.getChecked=function(e){return e.checked},at.prototype.setChecked=function(e,t){e.checked=t},at.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},at.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},at.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},at.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},at.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},at.prototype.createScriptTag=function(e,t,n){return(n=(n=n||this.getDefaultDocument()).createElement("SCRIPT")).setAttribute(e,t),n},at.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},at.prototype.createShadowRoot=function(e){return e.createShadowRoot()},at.prototype.getShadowRoot=function(e){return e.shadowRoot},at.prototype.getHost=function(e){return e.host},at.prototype.clone=function(e){return e.cloneNode(!0)},at.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},at.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},at.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},at.prototype.addClass=function(e,t){e.classList.add(t)},at.prototype.removeClass=function(e,t){e.classList.remove(t)},at.prototype.hasClass=function(e,t){return e.classList.contains(t)},at.prototype.setStyle=function(e,t,n){e.style[t]=n},at.prototype.removeStyle=function(e,t){e.style[t]=""},at.prototype.getStyle=function(e,t){return e.style[t]},at.prototype.hasStyle=function(e,t,n){return t=this.getStyle(e,t)||"",n?t==n:0<t.length},at.prototype.tagName=function(e){return e.tagName},at.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var o=n.item(r);t.set(o.name,o.value)}return t},at.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},at.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},at.prototype.getAttribute=function(e,t){return e.getAttribute(t)},at.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},at.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},at.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},at.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},at.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},at.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},at.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},at.prototype.getDefaultDocument=function(){return document},at.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},at.prototype.getTitle=function(e){return e.title},at.prototype.setTitle=function(e,t){e.title=t||""},at.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},at.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},at.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},at.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},at.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},at.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},at.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},at.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},at.prototype.adoptNode=function(e){return document.adoptNode(e)},at.prototype.getHref=function(e){return e.getAttribute("href")},at.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&rt.hasOwnProperty(t)&&(t=rt[t]))}return nt[t]||t},at.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},at.prototype.getHistory=function(){return window.history},at.prototype.getLocation=function(){return window.location},at.prototype.getBaseHref=function(e){var t,n=(ut=ut||document.querySelector("base"))?ut.getAttribute("href"):null;return null==n?null:(t=n,(st=st||document.createElement("a")).setAttribute("href",t),"/"===st.pathname.charAt(0)?st.pathname:"/"+st.pathname)},at.prototype.resetBaseElement=function(){ut=null},at.prototype.getUserAgent=function(){return window.navigator.userAgent},at.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},at.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},at.prototype.getComputedStyle=function(e){return getComputedStyle(e)},at.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},at.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},at.prototype.supportsCookies=function(){return!0},at.prototype.getCookie=function(e){return t["ɵparseCookieValue"](document.cookie,e)},at.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},at);function at(){return null!==ot&&ot.apply(this,arguments)||this}var st,ut=null,ct=t.DOCUMENT;function lt(){return window.history.pushState}var pt,dt=(F(ft,pt=t.PlatformLocation),ft.prototype._init=function(){this.location=$e.getLocation(),this._history=$e.getHistory()},ft.prototype.getBaseHrefFromDOM=function(){return $e.getBaseHref(this._doc)},ft.prototype.onPopState=function(e){$e.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},ft.prototype.onHashChange=function(e){$e.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(ft.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(ft.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(ft.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),ft.prototype.pushState=function(e,t,n){lt()?this._history.pushState(e,t,n):this.location.hash=n},ft.prototype.replaceState=function(e,t,n){lt()?this._history.replaceState(e,t,n):this.location.hash=n},ft.prototype.forward=function(){this._history.forward()},ft.prototype.back=function(){this._history.back()},ft.decorators=[{type:f.Injectable}],ft.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]}]},ft);function ft(e){var t=pt.call(this)||this;return t._doc=e,t._init(),t}f.Injectable,new f.InjectionToken("TRANSITION_ID");var ht=(gt.init=function(){f.setTestabilityGetter(new gt)},gt.prototype.addToWindow=function(n){f["ɵglobal"].getAngularTestability=function(e,t){if(null==(t=n.findTestabilityInTree(e,t=void 0===t||t)))throw new Error("Could not find testability for element.");return t},f["ɵglobal"].getAllAngularTestabilities=function(){return n.getAllTestabilities()},f["ɵglobal"].getAllAngularRootElements=function(){return n.getAllRootElements()},f["ɵglobal"].frameworkStabilizers||(f["ɵglobal"].frameworkStabilizers=[]),f["ɵglobal"].frameworkStabilizers.push(function(t){function n(e){o=o||e,0==--r&&t(o)}var e=f["ɵglobal"].getAllAngularTestabilities(),r=e.length,o=!1;e.forEach(function(e){e.whenStable(n)})})},gt.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?$e.isShadowRoot(t)?this.findTestabilityInTree(e,$e.getHost(t),!0):this.findTestabilityInTree(e,$e.parentElement(t),!0):null},gt);function gt(){}f.Injectable;f.ApplicationRef,f.NgZone;f.APP_INITIALIZER,f.NgProbeToken,new f.Optional;var mt=new f.InjectionToken("EventManagerPlugins");yt.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},yt.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},yt.prototype.getZone=function(){return this._zone},yt.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var o=n[r];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error("No event manager plugin found for event "+e)},yt.decorators=[{type:f.Injectable}],yt.ctorParameters=function(){return[{type:Array,decorators:[{type:f.Inject,args:[mt]}]},{type:f.NgZone}]};function yt(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var vt=(bt.prototype.addGlobalEventListener=function(e,t,n){if(!(e=$e.getGlobalEventTarget(this._doc,e)))throw new Error("Unsupported event target "+e+" for event "+t);return this.addEventListener(e,t,n)},bt);function bt(e){this._doc=e}var wt=(St.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},St.prototype.onStylesAdded=function(e){},St.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},St.decorators=[{type:f.Injectable}],St.ctorParameters=function(){return[]},St);function St(){this._stylesSet=new Set}var Ct;F(_t,Ct=wt),_t.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},_t.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},_t.prototype.removeHost=function(e){this._hostNodes.delete(e)},_t.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},_t.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return $e.remove(e)})},_t.decorators=[{type:f.Injectable}],_t.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]}]};function _t(e){var t=Ct.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var Et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},At=/%COMP%/g;function It(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?It(e,o,n):(o=o.replace(At,e),n.push(o))}return n}function kt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}f.Injectable;var Tt=(Pt.prototype.destroy=function(){},Pt.prototype.createElement=function(e,t){return t?document.createElementNS(Et[t],e):document.createElement(e)},Pt.prototype.createComment=function(e){return document.createComment(e)},Pt.prototype.createText=function(e){return document.createTextNode(e)},Pt.prototype.appendChild=function(e,t){e.appendChild(t)},Pt.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},Pt.prototype.removeChild=function(e,t){e&&e.removeChild(t)},Pt.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},Pt.prototype.parentNode=function(e){return e.parentNode},Pt.prototype.nextSibling=function(e){return e.nextSibling},Pt.prototype.setAttribute=function(e,t,n,r){r?(t=r+":"+t,(r=Et[r])?e.setAttributeNS(r,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},Pt.prototype.removeAttribute=function(e,t,n){var r;n?(r=Et[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},Pt.prototype.addClass=function(e,t){e.classList.add(t)},Pt.prototype.removeClass=function(e,t){e.classList.remove(t)},Pt.prototype.setStyle=function(e,t,n,r){r&f.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&f.RendererStyleFlags2.Important?"important":""):e.style[t]=n},Pt.prototype.removeStyle=function(e,t,n){n&f.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},Pt.prototype.setProperty=function(e,t,n){xt(t,"property"),e[t]=n},Pt.prototype.setValue=function(e,t){e.nodeValue=t},Pt.prototype.listen=function(e,t,n){return xt(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,kt(n)):this.eventManager.addEventListener(e,t,kt(n))},Pt);function Pt(e){this.eventManager=e,this.data=Object.create(null)}var Ot="@".charCodeAt(0);function xt(e,t){if(e.charCodeAt(0)===Ot)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var Nt;F(Rt,Nt=Tt),Rt.prototype.applyToHost=function(e){Nt.prototype.setAttribute.call(this,e,this.hostAttr,"")},Rt.prototype.createElement=function(e,t){return t=Nt.prototype.createElement.call(this,e,t),Nt.prototype.setAttribute.call(this,t,this.contentAttr,""),t};function Rt(e,t,n){var r=Nt.call(this,e)||this,e=It((r.component=n).id,n.styles,[]);return t.addStyles(e),r.contentAttr=(e=n.id,"_ngcontent-%COMP%".replace(At,e)),r.hostAttr=(n=n.id,"_nghost-%COMP%".replace(At,n)),r}var Mt;F(Ut,Mt=Tt),Ut.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},Ut.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},Ut.prototype.appendChild=function(e,t){return Mt.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},Ut.prototype.insertBefore=function(e,t,n){return Mt.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},Ut.prototype.removeChild=function(e,t){return Mt.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},Ut.prototype.parentNode=function(e){return this.nodeOrShadowRoot(Mt.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))};function Ut(e,t,n,r){var o=Mt.call(this,e)||this;o.sharedStylesHost=t,o.hostEl=n,o.component=r,o.shadowRoot=n.createShadowRoot(),o.sharedStylesHost.addHost(o.shadowRoot);for(var i=It(r.id,r.styles,[]),a=0;a<i.length;a++){var s=document.createElement("style");s.textContent=i[a],o.shadowRoot.appendChild(s)}return o}var Dt,Lt,Ft="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},jt=Ft("addEventListener"),Bt=Ft("removeEventListener"),zt={},Vt="removeEventListener",qt="__zone_symbol__propagationStopped",Kt="__zone_symbol__stopImmediatePropagation";function Ht(e){return Dt&&Dt.hasOwnProperty(e)}function Gt(e){var t=zt[e.type];if(t=t&&this[t]){var n=[e];if(1===t.length)return(r=t[0]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n);for(var r,o=t.slice(),i=0;i<o.length&&!0!==e[qt];i++)(r=o[i]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n)}}function Wt(e,t){return(e=Lt.call(this,e)||this).ngZone=t,e.patchEvent(),e}(ur="undefined"!=typeof Zone&&Zone[Ft("BLACK_LISTED_EVENTS")])&&(Dt={},ur.forEach(function(e){Dt[e]=e})),F(Wt,Lt=vt),Wt.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[Kt]||(e=Event.prototype[Kt]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[qt]=!0),e&&e.apply(this,arguments)}))},Wt.prototype.supports=function(e){return!0},Wt.prototype.addEventListener=function(e,t,n){var r=this,o=e[jt],i=n;if(!o||f.NgZone.isInAngularZone()&&!Ht(t))e.addEventListener(t,i,!1);else{var n=(n=zt[t])||(zt[t]=Ft("ANGULAR"+t+"FALSE")),o=(a=e[n])&&0<a.length,a=a||(e[n]=[]),n=Ht(t)?Zone.root:Zone.current;if(0===a.length)a.push({zone:n,handler:i});else{for(var s=!1,u=0;u<a.length;u++)if(a[u].handler===i){s=!0;break}s||a.push({zone:n,handler:i})}o||e[jt](t,Gt,!1)}return function(){return r.removeEventListener(e,t,i)}},Wt.prototype.removeEventListener=function(e,t,n){var r=e[Bt];if(!r)return e[Vt].apply(e,[t,n,!1]);var o=zt[t],i=o&&e[o];if(!i)return e[Vt].apply(e,[t,n,!1]);for(var a=!1,s=0;s<i.length;s++)if(i[s].handler===n){a=!0,i.splice(s,1);break}a?0===i.length&&r.apply(e,[t,Gt,!1]):e[Vt].apply(e,[t,n,!1])},Wt.decorators=[{type:f.Injectable}],Wt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]},{type:f.NgZone}]};var $t,Yt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Jt=new f.InjectionToken("HammerGestureConfig"),Zt=(Xt.prototype.buildHammer=function(e){var t,n=new Hammer(e);for(t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},Xt.decorators=[{type:f.Injectable}],Xt.ctorParameters=function(){return[]},Xt);function Xt(){this.events=[],this.overrides={}}function Qt(e,t){return(e=$t.call(this,e)||this)._config=t,e}F(Qt,$t=vt),Qt.prototype.supports=function(e){if(!Yt.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},Qt.prototype.addEventListener=function(n,r,o){var i=this,a=this.manager.getZone();return r=r.toLowerCase(),a.runOutsideAngular(function(){function e(e){a.runGuarded(function(){o(e)})}var t=i._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},Qt.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},Qt.decorators=[{type:f.Injectable}],Qt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]},{type:Zt,decorators:[{type:f.Inject,args:[Jt]}]}]};var en,tn=["alt","control","meta","shift"],nn={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};function rn(e){return en.call(this,e)||this}F(rn,en=vt),rn.prototype.supports=function(e){return null!=rn.parseEventName(e)},rn.prototype.addEventListener=function(e,t,n){var r=rn.parseEventName(t),o=rn.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return $e.onAndCancel(e,r.domEventName,o)})},rn.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var e=rn._normalizeKey(n.pop()),r="";return tn.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),r+=e+".")}),r+=e,0!=n.length||0===e.length?null:((e={}).domEventName=t,e.fullKey=r,e)},rn.getEventFullKey=function(t){var n="",r=$e.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),tn.forEach(function(e){e!=r&&(0,nn[e])(t)&&(n+=e+".")}),n+=r},rn.eventCallback=function(t,n,r){return function(e){rn.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},rn._normalizeKey=function(e){return"esc"!==e?e:"escape"},rn.decorators=[{type:f.Injectable}],rn.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]}]};var on=(an.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;return t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null),(t=t.response.body).removeChild(t.firstChild),t},an.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},an.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},an.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var o=t[e];this.DOM.isElementNode(o)&&this.stripCustomNsAttrs(o)}},an);function an(e,t){this.defaultDoc=e,this.DOM=t,e=this.DOM.createHtmlDocument(),this.inertBodyElement=e.body,null==this.inertBodyElement&&(t=this.DOM.createElement("html",e),this.inertBodyElement=this.DOM.createElement("body",e),this.DOM.appendChild(t,this.inertBodyElement),this.DOM.appendChild(e,t)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return window.DOMParser}catch(e){return}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var sn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,un=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function cn(e){return(e=String(e)).match(sn)||e.match(un)?e:(f.isDevMode()&&$e.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function ln(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function pn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,o=e;r<o.length;r++){var i,a=o[r];for(i in a)a.hasOwnProperty(i)&&(n[i]=!0)}return n}var dn=ln("area,br,col,hr,img,wbr"),fn=ln("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hn=pn(ja=ln("rp,rt"),fn),gn=pn(fn,ln("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),mn=pn(ja,ln("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yn=pn(dn,gn,mn,hn),vn=ln("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bn=ln("srcset"),wn=ln("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Sn=pn(vn,bn,wn),Cn=(_n.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},_n.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();yn.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();Sn.hasOwnProperty(n)?(vn[n]&&(e=cn(e)),bn[n]&&(e=String(e).split(",").map(function(e){return cn(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(kn(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},_n.prototype.endElement=function(e){e=this.DOM.nodeName(e).toLowerCase(),yn.hasOwnProperty(e)&&!dn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},_n.prototype.chars=function(e){this.buf.push(kn(e))},_n.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},_n);function _n(){this.sanitizedSomething=!1,this.buf=[],this.DOM=$e}var En,An=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,In=/([^\#-~ |!])/g;function kn(e){return e.replace(/&/g,"&amp;").replace(An,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(In,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Tn,Pn=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),On=/^url\(([^)]+)\)$/;function xn(e){var t=Tn.call(this)||this;return t._doc=e,t}F(xn,Tn=function(){}),xn.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case f.SecurityContext.NONE:return t;case f.SecurityContext.HTML:return t instanceof Un?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=$e,r=null;try{En=En||new on(e,n);var o=t?String(t):"",r=En.getInertBodyElement(o),i=5,a=o;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable")}while(i--,o=a,a=n.getInnerHTML(r),r=En.getInertBodyElement(o),o!==a);var s=new Cn,u=s.sanitizeChildren(n.getTemplateContent(r)||r);return f.isDevMode()&&s.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var d=p[l];n.removeChild(c,d)}}}(this._doc,String(t)));case f.SecurityContext.STYLE:return t instanceof Fn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),function(e){if(!(e=String(e).trim()))return"";var t=e.match(On);return t&&cn(t[1])===t[1]||e.match(Pn)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var o=e.charAt(r);"'"===o&&n?t=!t:'"'===o&&t&&(n=!n)}return t&&n}(e)?e:(f.isDevMode()&&$e.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}(t));case f.SecurityContext.SCRIPT:if(t instanceof zn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case f.SecurityContext.URL:return t instanceof Wn||t instanceof Kn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),cn(String(t)));case f.SecurityContext.RESOURCE_URL:if(t instanceof Wn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},xn.prototype.checkNotSafeValue=function(e,t){if(e instanceof Nn)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},xn.prototype.bypassSecurityTrustHtml=function(e){return new Un(e)},xn.prototype.bypassSecurityTrustStyle=function(e){return new Fn(e)},xn.prototype.bypassSecurityTrustScript=function(e){return new zn(e)},xn.prototype.bypassSecurityTrustUrl=function(e){return new Kn(e)},xn.prototype.bypassSecurityTrustResourceUrl=function(e){return new Wn(e)},xn.decorators=[{type:f.Injectable}],xn.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[ct]}]}]};var Nn=(Rn.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},Rn);function Rn(e){this.changingThisBreaksApplicationSecurity=e}var Mn,Un=(F(Dn,Mn=Nn),Dn.prototype.getTypeName=function(){return"HTML"},Dn);function Dn(){return null!==Mn&&Mn.apply(this,arguments)||this}var Ln,Fn=(F(jn,Ln=Nn),jn.prototype.getTypeName=function(){return"Style"},jn);function jn(){return null!==Ln&&Ln.apply(this,arguments)||this}var Bn,zn=(F(Vn,Bn=Nn),Vn.prototype.getTypeName=function(){return"Script"},Vn);function Vn(){return null!==Bn&&Bn.apply(this,arguments)||this}var qn,Kn=(F(Hn,qn=Nn),Hn.prototype.getTypeName=function(){return"URL"},Hn);function Hn(){return null!==qn&&qn.apply(this,arguments)||this}var Gn,Wn=(F($n,Gn=Nn),$n.prototype.getTypeName=function(){return"ResourceURL"},$n);function $n(){return null!==Gn&&Gn.apply(this,arguments)||this}var Yn=[{provide:f.PLATFORM_ID,useValue:t["ɵPLATFORM_BROWSER_ID"]},{provide:f.PLATFORM_INITIALIZER,useValue:function(){it.makeCurrent(),ht.init()},multi:!0},{provide:t.PlatformLocation,useClass:dt,deps:[ct]},{provide:ct,useFactory:function(){return document},deps:[]}];function Jn(){}f.createPlatformFactory(f.platformCore,"browser",Yn),f.Injectable,new f.Version("5.2.11"),Object.defineProperty(Jn.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Jn.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},Jn.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},Jn.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null};var Zn,g=(F(Xn,Zn=p=Jn),Object.defineProperty(Xn.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Xn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Xn);function Xn(){return null!==Zn&&Zn.apply(this,arguments)||this}function Qn(e){return null==e||0===e.length}var b=new f.InjectionToken("NgValidators"),C=new f.InjectionToken("NgAsyncValidators"),er=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,tr=(nr.min=function(n){return function(e){if(Qn(e.value)||Qn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},nr.max=function(n){return function(e){if(Qn(e.value)||Qn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},nr.required=function(e){return Qn(e.value)?{required:!0}:null},nr.requiredTrue=function(e){return!0===e.value?null:{required:!0}},nr.email=function(e){return Qn(e.value)||er.test(e.value)?null:{email:!0}},nr.minLength=function(t){return function(e){return!Qn(e.value)&&(e=e.value?e.value.length:0)<t?{minlength:{requiredLength:t,actualLength:e}}:null}},nr.maxLength=function(t){return function(e){return e=e.value?e.value.length:0,t<e?{maxlength:{requiredLength:t,actualLength:e}}:null}},nr.pattern=function(e){if(!e)return nr.nullValidator;var t,n="string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),new RegExp(t)):(t=e.toString(),e);return function(e){return Qn(e.value)?null:(e=e.value,n.test(e)?null:{pattern:{requiredPattern:t,actualValue:e}})}},nr.nullValidator=function(e){return null},nr.compose=function(e){if(!e)return null;var n=e.filter(rr);return 0==n.length?null:function(e){return ir((t=e,n.map(function(e){return e(t)})));var t}},nr.composeAsync=function(e){if(!e)return null;var n=e.filter(rr);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(re(n))return We(n,null);if(oe(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return We(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return We(e,null);var o=e.pop();return We(e=1===e.length&&re(e[0])?e[0]:e,null).pipe(De(function(e){return o.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(or))).pipe(De(ir))}},nr);function nr(){}function rr(e){return null!=e}function or(e){if(e=f["ɵisPromise"](e)?Ge(e):e,!f["ɵisObservable"](e))throw new Error("Expected validator to return Promise or Observable.");return e}function ir(e){return e=e.reduce(function(e,t){return null!=t?j({},e,t):e},{}),0===Object.keys(e).length?null:e}var Xe={provide:Ye=new f.InjectionToken("NgValueAccessor"),useExisting:f.forwardRef(function(){return ar}),multi:!0},ar=(sr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},sr.prototype.registerOnChange=function(e){this.onChange=e},sr.prototype.registerOnTouched=function(e){this.onTouched=e},sr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},z([f.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[Xe]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],sr));function sr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}wt={provide:Ye,useExisting:f.forwardRef(function(){return cr}),multi:!0};var ur=new f.InjectionToken("CompositionEventMode"),cr=(lr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},lr.prototype.registerOnChange=function(e){this.onChange=e},lr.prototype.registerOnTouched=function(e){this.onTouched=e},lr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},lr.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},lr.prototype._compositionStart=function(){this._composing=!0},lr.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},z([f.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[wt]}),V(2,f.Optional()),V(2,f.Inject(ur)),q("design:paramtypes",[f.Renderer2,f.ElementRef,Boolean])],lr));function lr(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(n=$e?$e.getUserAgent():"",!/android (\d+)/.test(n.toLowerCase())))}function pr(t){return t.validate?function(e){return t.validate(e)}:t}function dr(t){return t.validate?function(e){return t.validate(e)}:t}var vt={provide:Ye,useExisting:f.forwardRef(function(){return fr}),multi:!0},fr=(hr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},hr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},hr.prototype.registerOnTouched=function(e){this.onTouched=e},hr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},z([f.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[vt]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],hr));function hr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function gr(){throw new Error("unimplemented")}var mr,yr=(F(vr,mr=p),Object.defineProperty(vr.prototype,"validator",{get:gr,enumerable:!0,configurable:!0}),Object.defineProperty(vr.prototype,"asyncValidator",{get:gr,enumerable:!0,configurable:!0}),vr);function vr(){var e=null!==mr&&mr.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}function br(){this._accessors=[]}fn={provide:Ye,useExisting:f.forwardRef(function(){return wr}),multi:!0},br.prototype.add=function(e,t){this._accessors.push([e,t])},br.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},br.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},br.prototype._isSameGroup=function(e,t){return!!e[0].control&&e[0]._parent===t._control._parent&&e[1].name===t.name},ja=z([f.Injectable()],br);var wr=(Sr.prototype.ngOnInit=function(){this._control=this._injector.get(yr),this._checkName(),this._registry.add(this._control,this)},Sr.prototype.ngOnDestroy=function(){this._registry.remove(this)},Sr.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},Sr.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},Sr.prototype.fireUncheck=function(e){this.writeValue(e)},Sr.prototype.registerOnTouched=function(e){this.onTouched=e},Sr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Sr.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},Sr.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},z([f.Input(),q("design:type",String)],Sr.prototype,"name",void 0),z([f.Input(),q("design:type",String)],Sr.prototype,"formControlName",void 0),z([f.Input(),q("design:type",Object)],Sr.prototype,"value",void 0),z([f.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[fn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef,ja,f.Injector])],Sr));function Sr(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var gn={provide:Ye,useExisting:f.forwardRef(function(){return Cr}),multi:!0},Cr=(_r.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},_r.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},_r.prototype.registerOnTouched=function(e){this.onTouched=e},_r.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},z([f.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[gn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],_r));function _r(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Er='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Ar='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Ir='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',kr=(Tr.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Er)},Tr.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+Ar+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+Ir)},Tr.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Er)},Tr.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Ar)},Tr.arrayParentException=function(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')},Tr.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Tr.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Tr);function Tr(){}function Pr(e,t){return null==e?""+t:(e+": "+(t=t&&"object"==typeof t?"Object":t)).slice(0,50)}mn={provide:Ye,useExisting:f.forwardRef(function(){return Or}),multi:!0};var Or=(Object.defineProperty(xr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),xr.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1),e=Pr(t,e),this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},xr.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},xr.prototype.registerOnTouched=function(e){this.onTouched=e},xr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},xr.prototype._registerOption=function(){return(this._idCounter++).toString()},xr.prototype._getOptionId=function(e){var t,n;try{for(var r=G(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i),e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},xr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},z([f.Input(),q("design:type",Function),q("design:paramtypes",[Function])],xr.prototype,"compareWith",null),z([f.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[mn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],xr));function xr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ɵlooseIdentical"]}function Nr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}function Rr(e,t){return null==e?""+t:(e+": "+(t=(t="string"==typeof t?"'"+t+"'":t)&&"object"==typeof t?"Object":t)).slice(0,50)}Object.defineProperty(Nr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Pr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Nr.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),Nr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Nr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},z([f.Input("ngValue"),q("design:type",Object),q("design:paramtypes",[Object])],Nr.prototype,"ngValue",null),z([f.Input("value"),q("design:type",Object),q("design:paramtypes",[Object])],Nr.prototype,"value",null),hn=z([f.Directive({selector:"option"}),V(2,f.Optional()),V(2,f.Host()),q("design:paramtypes",[f.ElementRef,f.Renderer2,Or])],Nr),wn={provide:Ye,useExisting:f.forwardRef(function(){return Mr}),multi:!0};var Mr=(Object.defineProperty(Ur.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Ur.prototype.writeValue=function(e){var n,t=this;this.value=e,e=Array.isArray(e)?(n=e.map(function(e){return t._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(e)},Ur.prototype.registerOnChange=function(a){var s=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var o=n.item(r),i=s._getOptionValue(o.value);t.push(i)}else for(n=e.options,r=0;r<n.length;r++)(o=n.item(r)).selected&&(i=s._getOptionValue(o.value),t.push(i));s.value=t,a(t)}},Ur.prototype.registerOnTouched=function(e){this.onTouched=e},Ur.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Ur.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},Ur.prototype._getOptionId=function(e){var t,n;try{for(var r=G(Array.from(this._optionMap.keys())),o=r.next();!o.done;o=r.next()){var i=o.value;if(this._compareWith(this._optionMap.get(i)._value,e))return i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Ur.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},z([f.Input(),q("design:type",Function),q("design:paramtypes",[Function])],Ur.prototype,"compareWith",null),z([f.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[wn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],Ur));function Ur(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ɵlooseIdentical"]}function Dr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function Lr(e,t){return $(t.path,[e])}function Fr(t,n){var r,o,i,e,a;t||Vr(n,"Cannot find control with"),n.valueAccessor||Vr(n,"No value accessor for form control with"),t.validator=tr.compose([t.validator,n.validator]),t.asyncValidator=tr.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(o=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&jr(r,o)}),i=n,t.registerOnChange(function(e,t){i.valueAccessor.writeValue(e),t&&i.viewToModelUpdate(e)}),e=t,(a=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&jr(e,a),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function jr(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Br(e,t){null==e&&Vr(t,"Cannot find control with"),e.validator=tr.compose([e.validator,t.validator]),e.asyncValidator=tr.composeAsync([e.asyncValidator,t.asyncValidator])}function zr(e){return Vr(e,"There is no FormControl instance attached to form control element with")}function Vr(e,t){throw e=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute",new Error(t+" "+e)}function qr(e){return null!=e?tr.compose(e.map(pr)):null}function Kr(e){return null!=e?tr.composeAsync(e.map(dr)):null}function Hr(e,t){return e.hasOwnProperty("model")&&((e=e.model).isFirstChange()||!f["ɵlooseIdentical"](t,e.currentValue))}Object.defineProperty(Dr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Rr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Dr.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Rr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),Dr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Dr.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},Dr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},z([f.Input("ngValue"),q("design:type",Object),q("design:paramtypes",[Object])],Dr.prototype,"ngValue",null),z([f.Input("value"),q("design:type",Object),q("design:paramtypes",[Object])],Dr.prototype,"value",null),dt=z([f.Directive({selector:"option"}),V(2,f.Optional()),V(2,f.Host()),q("design:paramtypes",[f.ElementRef,f.Renderer2,Mr])],Dr);var Gr=[ar,Cr,fr,Or,Mr,wr];function Wr(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function $r(n,e){if(!e)return null;Array.isArray(e)||Vr(n,"Value accessor was not provided as an array for form control with");var r=void 0,o=void 0,i=void 0;return e.forEach(function(e){var t;e.constructor===cr?r=e:(t=e,Gr.some(function(e){return t.constructor===e})?(o&&Vr(n,"More than one built-in value accessor matches form control with"),o=e):(i&&Vr(n,"More than one custom value accessor matches form control with"),i=e))}),i||o||r||(Vr(n,"No valid value accessor for form control with"),null)}function Yr(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function Jr(e,t,n,r){f.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(kr.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var Zr,Xr=(F(Qr,Zr=g),Qr.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},Qr.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(Qr.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"path",{get:function(){return Lr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"validator",{get:function(){return qr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"asyncValidator",{get:function(){return Kr(this._asyncValidators)},enumerable:!0,configurable:!0}),Qr.prototype._checkParentType=function(){},Qr);function Qr(){return null!==Zr&&Zr.apply(this,arguments)||this}function eo(e){this._cd=e}Object.defineProperty(eo.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0});var to,Xe={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},wt=(F(no,to=Yn=eo),z([f.Directive({selector:"[formControlName],[ngModel],[formControl]",host:Xe}),V(0,f.Self()),q("design:paramtypes",[yr])],no));function no(e){return to.call(this,e)||this}var ro,ur=(F(oo,ro=Yn),z([f.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:Xe}),V(0,f.Self()),q("design:paramtypes",[g])],oo));function oo(e){return ro.call(this,e)||this}var io="VALID",ao="INVALID",so="PENDING",uo="DISABLED";function co(e){return e=po(e)?e.validators:e,Array.isArray(e)?qr(e):e||null}function lo(e,t){return e=po(t)?t.asyncValidators:e,Array.isArray(e)?Kr(e):e||null}function po(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function fo(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}Object.defineProperty(fo.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"valid",{get:function(){return this.status===io},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"invalid",{get:function(){return this.status===ao},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"pending",{get:function(){return this.status==so},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"disabled",{get:function(){return this.status===uo},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"enabled",{get:function(){return this.status!==uo},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(fo.prototype,"updateOn",{get:function(){return this._updateOn||(this.parent?this.parent.updateOn:"change")},enumerable:!0,configurable:!0}),fo.prototype.setValidators=function(e){this.validator=co(e)},fo.prototype.setAsyncValidators=function(e){this.asyncValidator=lo(e)},fo.prototype.clearValidators=function(){this.validator=null},fo.prototype.clearAsyncValidators=function(){this.asyncValidator=null},fo.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},fo.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},fo.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},fo.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},fo.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=so)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},fo.prototype.disable=function(t){void 0===t&&(t={}),this.status=uo,this.errors=null,this._forEachChild(function(e){e.disable(j({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},fo.prototype.enable=function(t){void 0===t&&(t={}),this.status=io,this._forEachChild(function(e){e.enable(j({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},fo.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},fo.prototype.setParent=function(e){this._parent=e},fo.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==io&&this.status!==so||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},fo.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},fo.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?uo:io},fo.prototype._runValidator=function(){return this.validator?this.validator(this):null},fo.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=so,e=or(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},fo.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},fo.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},fo.prototype.get=function(e){return null==e||(e=e instanceof Array?e:e.split("."))instanceof Array&&0===e.length?null:e.reduce(function(e,t){return e instanceof vo?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof So&&e.at(t)||null},this)},fo.prototype.getError=function(e,t){return(t=t?this.get(t):this)&&t.errors?t.errors[e]:null},fo.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(fo.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),fo.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},fo.prototype._initObservables=function(){this.valueChanges=new f.EventEmitter,this.statusChanges=new f.EventEmitter},fo.prototype._calculateStatus=function(){return this._allControlsDisabled()?uo:this.errors?ao:this._anyControlsHaveStatus(so)?so:this._anyControlsHaveStatus(ao)?ao:io},fo.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},fo.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},fo.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},fo.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},fo.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},fo.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},fo.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},fo.prototype._setUpdateStrategy=function(e){po(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)};var ho,go=(F(mo,ho=vt=fo),mo.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},mo.prototype.patchValue=function(e,t){this.setValue(e,t=void 0===t?{}:t)},mo.prototype.reset=function(e,t){void 0===t&&(t={}),this._applyFormState(e=void 0===e?null:e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},mo.prototype._updateValue=function(){},mo.prototype._anyControls=function(e){return!1},mo.prototype._allControlsDisabled=function(){return this.disabled},mo.prototype.registerOnChange=function(e){this._onChange.push(e)},mo.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},mo.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},mo.prototype._forEachChild=function(e){},mo.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))},mo.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},mo);function mo(e,t,n){return void 0===e&&(e=null),(n=ho.call(this,co(t),lo(n,t))||this)._onChange=[],n._applyFormState(e),n._setUpdateStrategy(t),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n._initObservables(),n}var yo,vo=(F(bo,yo=vt),bo.prototype.registerControl=function(e,t){return this.controls[e]||((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},bo.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},bo.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},bo.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},bo.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},bo.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},bo.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},bo.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},bo.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof go?t.value:t.getRawValue(),e})},bo.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},bo.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},bo.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},bo.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},bo.prototype._updateValue=function(){this.value=this._reduceValue()},bo.prototype._anyControls=function(n){var r=this,o=!1;return this._forEachChild(function(e,t){o=o||r.contains(t)&&n(e)}),o},bo.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},bo.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},bo.prototype._allControlsDisabled=function(){var e,t;try{for(var n=G(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var o=r.value;if(this.controls[o].enabled)return!1}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<Object.keys(this.controls).length||this.disabled},bo.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},bo);function bo(e,t,n){return(n=yo.call(this,co(t),lo(n,t))||this).controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var wo,So=(F(Co,wo=vt),Co.prototype.at=function(e){return this.controls[e]},Co.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},Co.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},Co.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},Co.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(Co.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),Co.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Co.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},Co.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},Co.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof go?e.value:e.getRawValue()})},Co.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},Co.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},Co.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},Co.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},Co.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},Co.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},Co.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},Co.prototype._allControlsDisabled=function(){var e,t;try{for(var n=G(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return 0<this.controls.length||this.disabled},Co.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},Co);function Co(e,t,n){return(n=wo.call(this,co(t),lo(n,t))||this).controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var _o,p={provide:g,useExisting:f.forwardRef(function(){return Ao})},Eo=Promise.resolve(null),Ao=(F(Io,_o=g),Io.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(Io.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Io.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Io.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Io.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),Io.prototype.addControl=function(t){var n=this;Eo.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Fr(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},Io.prototype.getControl=function(e){return this.form.get(e.path)},Io.prototype.removeControl=function(t){var n=this;Eo.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),Yr(n._directives,t)})},Io.prototype.addFormGroup=function(n){var r=this;Eo.then(function(){var e=r._findContainer(n.path),t=new vo({});Br(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},Io.prototype.removeFormGroup=function(t){var n=this;Eo.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},Io.prototype.getFormGroup=function(e){return this.form.get(e.path)},Io.prototype.updateModel=function(e,t){var n=this;Eo.then(function(){n.form.get(e.path).setValue(t)})},Io.prototype.setValue=function(e){this.control.setValue(e)},Io.prototype.onSubmit=function(e){return this.submitted=!0,Wr(this.form,this._directives),this.ngSubmit.emit(e),!1},Io.prototype.onReset=function(){this.resetForm()},Io.prototype.resetForm=function(e){this.form.reset(e=void 0===e?void 0:e),this.submitted=!1},Io.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},Io.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},z([f.Input("ngFormOptions"),q("design:type",Object)],Io.prototype,"options",void 0),z([f.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[p],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),V(0,f.Optional()),V(0,f.Self()),V(0,f.Inject(b)),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(C)),q("design:paramtypes",[Array,Array])],Io));function Io(e,t){var n=_o.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new f.EventEmitter,n.form=new vo({},qr(e),Kr(t)),n}var ko=(To.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Er+'\n\n      Or, if you\'d like to avoid registering this form control, indicate that it\'s standalone in ngModelOptions:\n\n      Example:\n\n      \n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ')},To.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+Ar+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Ir)},To.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},To.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+Ar+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Ir)},To);function To(){}var Po,Oo,fn={provide:g,useExisting:f.forwardRef(function(){return xo})},xo=(F(No,Po=Xr),(Oo=No).prototype._checkParentType=function(){this._parent instanceof Oo||this._parent instanceof Ao||ko.modelGroupParentException()},z([f.Input("ngModelGroup"),q("design:type",String)],No.prototype,"name",void 0),Oo=z([f.Directive({selector:"[ngModelGroup]",providers:[fn],exportAs:"ngModelGroup"}),V(0,f.Host()),V(0,f.SkipSelf()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(b)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),q("design:paramtypes",[g,Array,Array])],No));function No(e,t,n){var r=Po.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Ro,gn={provide:yr,useExisting:f.forwardRef(function(){return Uo})},Mo=Promise.resolve(null),Uo=(F(Do,Ro=yr),Do.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Hr(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},Do.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(Do.prototype,"path",{get:function(){return this._parent?Lr(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(Do.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Do.prototype,"validator",{get:function(){return qr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Do.prototype,"asyncValidator",{get:function(){return Kr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Do.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Do.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},Do.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},Do.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},Do.prototype._setUpStandalone=function(){Fr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},Do.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},Do.prototype._checkParentType=function(){!(this._parent instanceof xo)&&this._parent instanceof Xr?ko.formGroupNameException():this._parent instanceof xo||this._parent instanceof Ao||ko.modelParentException()},Do.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||ko.missingNameException()},Do.prototype._updateValue=function(e){var t=this;Mo.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},Do.prototype._updateDisabled=function(e){var t=this,n=""===(e=e.isDisabled.currentValue)||e&&"false"!==e;Mo.then(function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()})},z([f.Input(),q("design:type",String)],Do.prototype,"name",void 0),z([f.Input("disabled"),q("design:type",Boolean)],Do.prototype,"isDisabled",void 0),z([f.Input("ngModel"),q("design:type",Object)],Do.prototype,"model",void 0),z([f.Input("ngModelOptions"),q("design:type",Object)],Do.prototype,"options",void 0),z([f.Output("ngModelChange"),q("design:type",Object)],Do.prototype,"update",void 0),z([f.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[gn],exportAs:"ngModel"}),V(0,f.Optional()),V(0,f.Host()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(b)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),V(3,f.Optional()),V(3,f.Self()),V(3,f.Inject(Ye)),q("design:paramtypes",[g,Array,Array,Array])],Do));function Do(e,t,n,r){var o=Ro.call(this)||this;return o.control=new go,o._registered=!1,o.update=new f.EventEmitter,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=$r(o,r),o}var Lo,Fo,jo=new f.InjectionToken("NgModelWithFormControlWarning"),mn={provide:yr,useExisting:f.forwardRef(function(){return Bo})},Bo=(F(zo,Lo=yr),Fo=zo,Object.defineProperty(zo.prototype,"isDisabled",{set:function(e){kr.disabledAttrWarning()},enumerable:!0,configurable:!0}),zo.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(Fr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Hr(e,this.viewModel)&&(Jr("formControl",Fo,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(zo.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(zo.prototype,"validator",{get:function(){return qr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(zo.prototype,"asyncValidator",{get:function(){return Kr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(zo.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),zo.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},zo.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},zo._ngModelWarningSentOnce=!1,z([f.Input("formControl"),q("design:type",go)],zo.prototype,"form",void 0),z([f.Input("disabled"),q("design:type",Boolean),q("design:paramtypes",[Boolean])],zo.prototype,"isDisabled",null),z([f.Input("ngModel"),q("design:type",Object)],zo.prototype,"model",void 0),z([f.Output("ngModelChange"),q("design:type",Object)],zo.prototype,"update",void 0),Fo=z([f.Directive({selector:"[formControl]",providers:[mn],exportAs:"ngForm"}),V(0,f.Optional()),V(0,f.Self()),V(0,f.Inject(b)),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(C)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(Ye)),V(3,f.Optional()),V(3,f.Inject(jo)),q("design:paramtypes",[Array,Array,Array,Object])],zo));function zo(e,t,n,r){var o=Lo.call(this)||this;return o._ngModelWarningConfig=r,o.update=new f.EventEmitter,o._ngModelWarningSent=!1,o._rawValidators=e||[],o._rawAsyncValidators=t||[],o.valueAccessor=$r(o,n),o}var Vo,wn={provide:g,useExisting:f.forwardRef(function(){return qo})},qo=(F(Ko,Vo=g),Ko.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(Ko.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Ko.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Ko.prototype.addControl=function(e){var t=this.form.get(e.path);return Fr(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},Ko.prototype.getControl=function(e){return this.form.get(e.path)},Ko.prototype.removeControl=function(e){Yr(this.directives,e)},Ko.prototype.addFormGroup=function(e){var t=this.form.get(e.path);Br(t,e),t.updateValueAndValidity({emitEvent:!1})},Ko.prototype.removeFormGroup=function(e){},Ko.prototype.getFormGroup=function(e){return this.form.get(e.path)},Ko.prototype.addFormArray=function(e){var t=this.form.get(e.path);Br(t,e),t.updateValueAndValidity({emitEvent:!1})},Ko.prototype.removeFormArray=function(e){},Ko.prototype.getFormArray=function(e){return this.form.get(e.path)},Ko.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},Ko.prototype.onSubmit=function(e){return this.submitted=!0,Wr(this.form,this.directives),this.ngSubmit.emit(e),!1},Ko.prototype.onReset=function(){this.resetForm()},Ko.prototype.resetForm=function(e){this.form.reset(e=void 0===e?void 0:e),this.submitted=!1},Ko.prototype._updateDomValue=function(){var o=this;this.directives.forEach(function(e){var t,n,r=o.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return zr(n)}),n.valueAccessor.registerOnTouched(function(){return zr(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&Fr(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},Ko.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},Ko.prototype._updateValidators=function(){var e=qr(this._validators);this.form.validator=tr.compose([this.form.validator,e]),e=Kr(this._asyncValidators),this.form.asyncValidator=tr.composeAsync([this.form.asyncValidator,e])},Ko.prototype._checkFormPresent=function(){this.form||kr.missingFormException()},z([f.Input("formGroup"),q("design:type",vo)],Ko.prototype,"form",void 0),z([f.Output(),q("design:type",Object)],Ko.prototype,"ngSubmit",void 0),z([f.Directive({selector:"[formGroup]",providers:[wn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),V(0,f.Optional()),V(0,f.Self()),V(0,f.Inject(b)),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(C)),q("design:paramtypes",[Array,Array])],Ko));function Ko(e,t){var n=Vo.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new f.EventEmitter,n}var Ho,Yn={provide:g,useExisting:f.forwardRef(function(){return Go})},Go=(F(Wo,Ho=Xr),Wo.prototype._checkParentType=function(){Zo(this._parent)&&kr.groupParentException()},z([f.Input("formGroupName"),q("design:type",String)],Wo.prototype,"name",void 0),z([f.Directive({selector:"[formGroupName]",providers:[Yn]}),V(0,f.Optional()),V(0,f.Host()),V(0,f.SkipSelf()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(b)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),q("design:paramtypes",[g,Array,Array])],Wo));function Wo(e,t,n){var r=Ho.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var $o,Xe={provide:g,useExisting:f.forwardRef(function(){return Yo})},Yo=(F(Jo,$o=g),Jo.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},Jo.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(Jo.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Jo.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Jo.prototype,"path",{get:function(){return Lr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Jo.prototype,"validator",{get:function(){return qr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Jo.prototype,"asyncValidator",{get:function(){return Kr(this._asyncValidators)},enumerable:!0,configurable:!0}),Jo.prototype._checkParentType=function(){Zo(this._parent)&&kr.arrayParentException()},z([f.Input("formArrayName"),q("design:type",String)],Jo.prototype,"name",void 0),z([f.Directive({selector:"[formArrayName]",providers:[Xe]}),V(0,f.Optional()),V(0,f.Host()),V(0,f.SkipSelf()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(b)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),q("design:paramtypes",[g,Array,Array])],Jo));function Jo(e,t,n){var r=$o.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function Zo(e){return!(e instanceof Go||e instanceof qo||e instanceof Yo)}var Xo,Qo,vt={provide:yr,useExisting:f.forwardRef(function(){return ei})},ei=(F(ti,Xo=yr),Qo=ti,Object.defineProperty(ti.prototype,"isDisabled",{set:function(e){kr.disabledAttrWarning()},enumerable:!0,configurable:!0}),ti.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),Hr(e,this.viewModel)&&(Jr("formControlName",Qo,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},ti.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},ti.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(ti.prototype,"path",{get:function(){return Lr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(ti.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(ti.prototype,"validator",{get:function(){return qr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(ti.prototype,"asyncValidator",{get:function(){return Kr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),ti.prototype._checkParentType=function(){!(this._parent instanceof Go)&&this._parent instanceof Xr?kr.ngModelGroupException():this._parent instanceof Go||this._parent instanceof qo||this._parent instanceof Yo||kr.controlParentException()},ti.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},ti._ngModelWarningSentOnce=!1,z([f.Input("formControlName"),q("design:type",String)],ti.prototype,"name",void 0),z([f.Input("disabled"),q("design:type",Boolean),q("design:paramtypes",[Boolean])],ti.prototype,"isDisabled",null),z([f.Input("ngModel"),q("design:type",Object)],ti.prototype,"model",void 0),z([f.Output("ngModelChange"),q("design:type",Object)],ti.prototype,"update",void 0),Qo=z([f.Directive({selector:"[formControlName]",providers:[vt]}),V(0,f.Optional()),V(0,f.Host()),V(0,f.SkipSelf()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(b)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),V(3,f.Optional()),V(3,f.Self()),V(3,f.Inject(Ye)),V(4,f.Optional()),V(4,f.Inject(jo)),q("design:paramtypes",[g,Array,Array,Array,Object])],ti));function ti(e,t,n,r,o){var i=Xo.call(this)||this;return i._ngModelWarningConfig=o,i._added=!1,i.update=new f.EventEmitter,i._ngModelWarningSent=!1,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=$r(i,r),i}var p={provide:b,useExisting:f.forwardRef(function(){return ni}),multi:!0},fn={provide:b,useExisting:f.forwardRef(function(){return ii}),multi:!0},ni=(Object.defineProperty(ri.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),ri.prototype.validate=function(e){return this.required?tr.required(e):null},ri.prototype.registerOnValidatorChange=function(e){this._onChange=e},z([f.Input(),q("design:type",Object),q("design:paramtypes",[Object])],ri.prototype,"required",null),z([f.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[p],host:{"[attr.required]":'required ? "" : null'}})],ri));function ri(){}var oi,ii=(F(ai,oi=ni),ai.prototype.validate=function(e){return this.required?tr.requiredTrue(e):null},z([f.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[fn],host:{"[attr.required]":'required ? "" : null'}})],ai));function ai(){return null!==oi&&oi.apply(this,arguments)||this}var gn={provide:b,useExisting:f.forwardRef(function(){return si}),multi:!0},si=(Object.defineProperty(ui.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),ui.prototype.validate=function(e){return this._enabled?tr.email(e):null},ui.prototype.registerOnValidatorChange=function(e){this._onChange=e},z([f.Input(),q("design:type",Object),q("design:paramtypes",[Object])],ui.prototype,"email",null),z([f.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[gn]})],ui));function ui(){}var mn={provide:b,useExisting:f.forwardRef(function(){return ci}),multi:!0},ci=(li.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},li.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},li.prototype.registerOnValidatorChange=function(e){this._onChange=e},li.prototype._createValidator=function(){this._validator=tr.minLength(parseInt(this.minlength,10))},z([f.Input(),q("design:type",String)],li.prototype,"minlength",void 0),z([f.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[mn],host:{"[attr.minlength]":"minlength ? minlength : null"}})],li));function li(){}var wn={provide:b,useExisting:f.forwardRef(function(){return pi}),multi:!0},pi=(di.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},di.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},di.prototype.registerOnValidatorChange=function(e){this._onChange=e},di.prototype._createValidator=function(){this._validator=tr.maxLength(parseInt(this.maxlength,10))},z([f.Input(),q("design:type",String)],di.prototype,"maxlength",void 0),z([f.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[wn],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],di));function di(){}var fi,Yn={provide:b,useExisting:f.forwardRef(function(){return hi}),multi:!0},hi=(gi.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},gi.prototype.validate=function(e){return this._validator(e)},gi.prototype.registerOnValidatorChange=function(e){this._onChange=e},gi.prototype._createValidator=function(){this._validator=tr.pattern(this.pattern)},z([f.Input(),q("design:type",Object)],gi.prototype,"pattern",void 0),z([f.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Yn],host:{"[attr.pattern]":"pattern ? pattern : null"}})],gi));function gi(){}function mi(){}function yi(){}function vi(e){this.viewContainerRef=e}mi.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),e=null!=t?t.validator:null,t=null!=t?t.asyncValidator:null;return new vo(n,e,t)},mi.prototype.control=function(e,t,n){return new go(e,t,n)},mi.prototype.array=function(e,t,n){var r=this,e=e.map(function(e){return r._createControl(e)});return new So(e,t,n)},mi.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},mi.prototype._createControl=function(e){if(e instanceof go||e instanceof vo||e instanceof So)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},Xe=z([f.Injectable()],mi),new f.Version("6.1.10"),vt=[z([f.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],function(){}),hn,dt,cr,fr,Cr,ar,Or,Mr,wr,wt,ur,ni,ci,pi,hi,ii,si],C=[Uo,xo,Ao],Ye=[Bo,qo,ei,Go,Yo],g=z([f.NgModule({declarations:vt,exports:vt})],function(){}),p=z([f.NgModule({declarations:C,providers:[ja],exports:[g,C]})],function(){}),(fi=yi).withConfig=function(e){return{ngModule:fi,providers:[{provide:jo,useValue:e.warnOnNgModelWithFormControl}]}},fi=z([f.NgModule({declarations:[Ye],providers:[Xe,ja],exports:[g,Ye]})],yi),vi.decorators=[{type:f.Directive,args:[{selector:"[component-host]"}]}],vi.ctorParameters=function(){return[{type:f.ViewContainerRef}]},fn=vi;function bi(e,t){this.component=e,this.data=t}var wi=new _.Logger("AuthDecorator");var Si=function(e,t){return(Si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Ci(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Si(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var _i=function(){return(_i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Ei(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Ai(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Ii(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function ki(e){var t;return j(j({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Pi(e):function(){return Oi(e)},isCustomEndpoint:!!e.endpoint})}function Ti(e){if(!e.region)throw new Error("Region is missing");return j(j({},e),{region:xi(e.region)})}var gn="3.6.1",Pi=function(e){var t=e.endpoint,e=e.urlParser;if("string"==typeof t){var n=Promise.resolve(e(t));return function(){return n}}if("object"!=typeof t)return t;var r=Promise.resolve(t);return function(){return r}},Oi=function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=void 0===(t=r.tls)||t,[4,r.region()];case 1:if(n=e.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(n)];case 2:if(!(n=(null!==(n=e.sent())&&void 0!==n?n:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+n)]}})})},mn={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},wn={preferredFile:"credentials"},xi=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},b="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Ni(){throw new Error("setTimeout has not been defined")}function Ri(){throw new Error("clearTimeout has not been defined")}var Mi=Ni,Ui=Ri;function Di(t){if(Mi===setTimeout)return setTimeout(t,0);if((Mi===Ni||!Mi)&&setTimeout)return Mi=setTimeout,setTimeout(t,0);try{return Mi(t,0)}catch(e){try{return Mi.call(null,t,0)}catch(e){return Mi.call(this,t,0)}}}"function"==typeof b.setTimeout&&(Mi=setTimeout),"function"==typeof b.clearTimeout&&(Ui=clearTimeout);var Li,Fi=[],ji=!1,Bi=-1;function zi(){ji&&Li&&(ji=!1,Li.length?Fi=Li.concat(Fi):Bi=-1,Fi.length&&Vi())}function Vi(){if(!ji){var e=Di(zi);ji=!0;for(var t=Fi.length;t;){for(Li=Fi,Fi=[];++Bi<t;)Li&&Li[Bi].run();Bi=-1,t=Fi.length}Li=null,ji=!1,function(t){if(Ui===clearTimeout)return clearTimeout(t);if((Ui===Ri||!Ui)&&clearTimeout)return Ui=clearTimeout,clearTimeout(t);try{Ui(t)}catch(e){try{return Ui.call(null,t)}catch(e){return Ui.call(this,t)}}}(e)}}function qi(e,t){this.fun=e,this.array=t}function Ki(){}qi.prototype.run=function(){this.fun.apply(null,this.array)},C=vt=ur=wt=dt=hn=Yn=Ki;var Hi,Gi=b.performance||{},Wi=Gi.now||Gi.mozNow||Gi.msNow||Gi.oNow||Gi.webkitNow||function(){return(new Date).getTime()},$i=new Date,Yi={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Fi.push(new qi(e,t)),1!==Fi.length||ji||Di(Vi)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Yn,addListener:hn,once:dt,off:wt,removeListener:ur,removeAllListeners:vt,emit:C,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Wi.call(Gi),n=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(n-=e[0],(t-=e[1])<0&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-$i)/1e3}},Ji=(F(Zi,Hi=Error),Zi);function Zi(e,t){return void 0===t&&(t=!0),(e=Hi.call(this,e)||this).tryNextLink=t,e}var Xi,Qi=(F(ea,Xi=Error),ea);function ea(e,t){return void 0===t&&(t=!0),(e=Xi.call(this,e)||this).tryNextLink=t,e}function ta(t){return new Promise(function(r,o){var e=m.request(j({method:"GET"},t));e.on("error",function(e){o(Object.assign(new Qi("Unable to connect to instance metadata service"),e))}),e.on("timeout",function(){o(new Error("TimeoutError"))}),e.on("response",function(e){var t=e.statusCode;((t=void 0===t?400:t)<200||300<=t)&&o(Object.assign(new Qi("Error response received from instance metadata service"),{statusCode:t}));var n=[];e.on("data",function(e){n.push(e)}),e.on("end",function(){r(d.Buffer.concat(n))})}),e.end()})}function na(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration}function ra(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}}function oa(e){var t=e.maxRetries;return{maxRetries:void 0===t?0:t,timeout:void 0===(e=e.timeout)?1e3:e}}function ia(e,t){for(var n=e(),r=0;r<t;r++)n=n.catch(e);return n}var aa="AWS_CONTAINER_CREDENTIALS_FULL_URI",sa="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",ua="AWS_CONTAINER_AUTHORIZATION_TOKEN";function ca(e){var t=this,s=(e=oa(e=void 0===e?{}:e)).timeout,n=e.maxRetries;return function(){return function(){if(Yi.env[sa])return Promise.resolve({hostname:"169.254.170.2",path:Yi.env[sa]});if(Yi.env[aa]){var e=S.parse(Yi.env[aa]);return e.hostname&&e.hostname in la?e.protocol&&e.protocol in pa?Promise.resolve(j(j({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new Qi(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new Qi(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new Qi("The container metadata credential provider cannot be used unless the "+sa+" or "+aa+" environment variable is set",!1))}().then(function(a){return ia(function(){return K(t,void 0,void 0,function(){var o,i;return H(this,function(e){switch(e.label){case 0:return i=(o=JSON).parse,[4,(t=s,n=a,Yi.env[ua]&&((r=void 0===(r=n.headers)?{}:r).Authorization=Yi.env[ua],n.headers=r),ta(j(j({},n),{timeout:t})).then(function(e){return e.toString()}))];case 1:if(!na(o=i.apply(o,[e.sent()])))throw new Qi("Invalid response received from instance metadata service.");return[2,ra(o)]}var t,n,r})})},n)})}}var la={localhost:!0,"127.0.0.1":!0},pa={"http:":!0,"https:":!0};function da(e){function o(t,a){return K(void 0,void 0,void 0,function(){var i;return H(this,function(e){switch(e.label){case 0:return[4,ia(function(){return K(void 0,void 0,void 0,function(){var n,r;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(t=a,K(void 0,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,ta(j(j({},t),{host:ha,path:ga}))];case 1:return[2,e.sent().toString()]}})}))];case 1:return n=e.sent(),[3,3];case 2:throw 401===(r=e.sent()).statusCode&&(s=!1),r;case 3:return[2,n]}var t})})},t)];case 1:return i=e.sent().trim(),[2,ia(function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,(r=i,o=a,K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return n=(t=JSON).parse,[4,ta(j(j({},o),{host:ha,path:ga+r}))];case 1:if(!na(t=n.apply(t,[e.sent().toString()])))throw new Qi("Invalid response received from instance metadata service.");return[2,ra(t)]}})}))];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(s=!1),n;case 3:return[2,t]}var r,o})})},t)]}})})}var s=!1,i=(e=oa(e=void 0===e?{}:e)).timeout,a=e.maxRetries;return function(){return K(void 0,void 0,void 0,function(){var n,r;return H(this,function(e){switch(e.label){case 0:return s?[2,o(a,{timeout:i})]:[3,1];case 1:n=void 0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,(t={timeout:i},K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,ta(j(j({},t),{host:ha,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]})}))];case 3:return n=e.sent().toString(),[3,5];case 4:if(400===(null==(r=e.sent())?void 0:r.statusCode))throw Object.assign(r,{message:"EC2 Metadata token request returned error"});return"TimeoutError"!==r.message&&![403,404,405].includes(r.statusCode)||(s=!0),[2,o(a,{timeout:i})];case 5:return[2,o(a,{timeout:i,headers:{"x-aws-ec2-metadata-token":n}})]}var t})})}}var fa,ha="169.254.169.254",ga="/latest/meta-data/iam/security-credentials/",ma=(F(ya,fa=Error),ya);function ya(e,t){return void 0===t&&(t=!0),(e=fa.call(this,e)||this).tryNextLink=t,e}function va(){return{}}function ba(e){var t=void 0===(t=(e=void 0===e?{}:e).filepath)?Yi.env.AWS_SHARED_CREDENTIALS_FILE||o.join(Ta(),".aws","credentials"):t,e=void 0===(e=e.configFilepath)?Yi.env.AWS_CONFIG_FILE||o.join(Ta(),".aws","config"):e;return Promise.all([ka(e).then(Ia).then(Ea).catch(va),ka(t).then(Ia).catch(va)]).then(function(e){return{configFile:(e=W(e,2))[0],credentialsFile:e[1]}})}function wa(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&-1<["undefined","string"].indexOf(typeof e.aws_session_token)}function Sa(e){return e.profile||Yi.env[Pa]||"default"}var Ca,_a=/^profile\s(["'])?([^\1]+)\1$/,Ea=function(e){var t,n,r={};try{for(var o=G(Object.keys(e)),i=o.next();!i.done;i=o.next()){var a,s,u,c=i.value;"default"===c?r.default=e.default:(a=_a.exec(c))&&((s=W(a,3))[0],s[1],(u=s[2])&&(r[u]=e[c]))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},Aa=["__proto__","profile __proto__"],Ia=function(e){var t,n,r,o={};try{for(var i=G(e.split(/\r?\n/)),a=i.next();!a.done;a=i.next()){var s,u=a.value,c=(u=u.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(c){if(r=c[1],Aa.includes(r))throw new Error('Found invalid profile name "'+r+'"')}else!r||(s=u.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(o[r]=o[r]||{},o[r][s[1]]=s[2])}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},ka=function(e){return new Promise(function(n,r){s.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})},Ta=function(){var e=(r=Yi.env).HOME,t=r.USERPROFILE,n=r.HOMEPATH,r=void 0===(r=r.HOMEDRIVE)?"C:"+o.sep:r;return e||t||(n?""+r+n:i.homedir())},Pa="AWS_PROFILE",Oa=function(p,d,f,h){return void 0===h&&(h={}),K(void 0,void 0,void 0,function(){var n,r,o,i,a,s,u,c,l;return H(this,function(e){switch(e.label){case 0:if(n=d[p],0<Object.keys(h).length&&wa(n))return[2,xa(n)];if(t=n,!(Boolean(t)&&"object"==typeof t&&"string"==typeof t.role_arn&&"string"==typeof t.source_profile&&-1<["undefined","string"].indexOf(typeof t.role_session_name)&&-1<["undefined","string"].indexOf(typeof t.external_id)&&-1<["undefined","string"].indexOf(typeof t.mfa_serial)))return[3,4];if(s=n.external_id,r=n.mfa_serial,o=n.role_arn,l=n.role_session_name,a=void 0===l?"aws-sdk-js-"+Date.now():l,i=n.source_profile,!f.roleAssumer)throw new ma("Profile "+p+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(i in h)throw new ma("Detected a cycle attempting to resolve credentials for profile "+Sa(f)+". Profiles visited: "+Object.keys(h).join(", "),!1);if(l=Oa(i,d,f,j(j({},h),((l={})[i]=!0,l))),a={RoleArn:o,RoleSessionName:a,ExternalId:s},!r)return[3,2];if(!f.mfaCodeProvider)throw new ma("Profile "+p+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return a.SerialNumber=r,s=a,[4,f.mfaCodeProvider(r)];case 1:s.TokenCode=e.sent(),e.label=2;case 2:return c=(u=f).roleAssumer,[4,l];case 3:return[2,c.apply(u,[e.sent(),a])];case 4:if(wa(n))return[2,xa(n)];throw new ma("Profile "+p+" could not be found or parsed in shared credentials file.")}var t})})},xa=function(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})},Na=(F(Ra,Ca=Error),Ra);function Ra(e,t){return void 0===t&&(t=!0),(e=Ca.call(this,e)||this).tryNextLink=t,e}function Ma(o){return void 0===o&&(o={}),function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return[4,(r=o,K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return[4,void 0===(t=r.loadedConfig)?ba(r):t];case 1:return t=e.sent(),[2,j(j({},t.configFile),t.credentialsFile)]}})}))];case 1:return t=e.sent(),[2,(a=o.profile||Yi.env.AWS_PROFILE||"default",n=t,K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return t=n[a],n[a]?void 0===(t=t.credential_process)?[3,2]:[4,Ua(t).then(function(e){try{o=JSON.parse(e)}catch(e){throw Error("Profile "+a+" credential_process returned invalid JSON.")}var t=o.Version,n=o.AccessKeyId,r=o.SecretAccessKey,e=o.SessionToken,o=o.Expiration;if(1!==t)throw Error("Profile "+a+" credential_process did not return Version 1.");if(void 0===n||void 0===r)throw Error("Profile "+a+" credential_process returned invalid credentials.");if(o){var i=new Date;if(new Date(o)<i)throw Error("Profile "+a+" credential_process returned expired credentials.");i=Math.floor(new Date(o).valueOf()/1e3)}return{accessKeyId:n,secretAccessKey:r,sessionToken:e,expirationUnix:i}}).catch(function(e){throw new Na(e.message)})]:[3,4];case 1:return[2,e.sent()];case 2:throw new Na("Profile "+a+" did not contain credential_process.");case 3:return[3,5];case 4:throw new Na("Profile "+a+" could not be found in shared credentials file.");case 5:return[2]}})}))]}var a,n,r})})}}var Ua=function(e){return new Promise(function(n,r){a.exec(e,function(e,t){e?r(e):n(t.trim())})})},Xe=function(e){var t=j({profile:Yi.env[Pa]},e=void 0===e?{}:e);t.loadedConfig||(t.loadedConfig=ba(e));var r,o,i,a,s,u,e=[(void 0===(r=t)&&(r={}),function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return[4,(n=r,K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return[4,void 0===(t=n.loadedConfig)?ba(n):t];case 1:return t=e.sent(),[2,j(j({},t.configFile),t.credentialsFile)]}})}))];case 1:return t=e.sent(),[2,Oa(Sa(r),t,r)]}var n})})}),Ma(t),Da(t)];return t.profile||e.unshift(function(){var e=Yi.env.AWS_ACCESS_KEY_ID,t=Yi.env.AWS_SECRET_ACCESS_KEY,n=Yi.env.AWS_CREDENTIAL_EXPIRATION;return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:Yi.env.AWS_SESSION_TOKEN,expiration:n?new Date(n):void 0}):Promise.reject(new Ji("Unable to find environment variable credentials."))}),o=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return function(){var e,t,n=Promise.reject(new ma("No providers in chain"));try{for(var r=G(i),o=r.next();!o.done;o=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(o.value)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n}}.apply(void 0,$(e)),u=!(i=function(e){return void 0!==e.expiration}),function(){return K(void 0,void 0,void 0,function(){var n;return H(this,function(e){switch(e.label){case 0:return s||(a=o(),s=!0),u?[2,a]:[4,a];case 1:return n=e.sent(),i(n)?void 0!==(t=n).expiration&&t.expiration.getTime()-Date.now()<3e5?[2,a=o()]:[2,n]:(u=!0,[2,n])}var t})})}},Da=function(e){return Yi.env[sa]||Yi.env[aa]?ca(e):Yi.env.AWS_EC2_METADATA_DISABLED?function(){return Promise.reject(new ma("EC2 Instance Metadata Service access disabled"))}:da(e)},La=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!("function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return d.Buffer.from(e,t,n)},Fa=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?d.Buffer.from(e,t):d.Buffer.from(e)},ja=(Ba.prototype.update=function(e,t){this.hash.update(za(e,t))},Ba.prototype.digest=function(){return Promise.resolve(this.hash.digest())},Ba);function Ba(e,t){this.hash=t?n.createHmac(e,za(t)):n.createHash(e)}function za(e,t){return d.Buffer.isBuffer(e)?e:"string"==typeof e?Fa(e,t):ArrayBuffer.isView(e)?La(e.buffer,e.byteOffset,e.byteLength):La(e)}function Va(t){return{applyToStack:function(e){var i;e.add((i=t,function(r,o){return function(n){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){return null!==(t=null==i?void 0:i.retryStrategy)&&void 0!==t&&t.mode&&(o.userAgent=$(o.userAgent||[],[["cfg/retry-mode",i.retryStrategy.mode]])),[2,i.retryStrategy.retry(r,n)]})})}}),qa)}}}var qa={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ka=(Ha.isInstance=function(e){return!!e&&"number"==typeof e.statusCode&&"object"==typeof e.headers},Ha);function Ha(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}var Ga=(Wa.isInstance=function(e){return!!e&&("method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers)},Wa.prototype.clone=function(){var r,e=new Wa(j(j({},this),{headers:j({},this.headers)}));return e.query&&(e.query=(r=e.query,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{}))),e},Wa);function Wa(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}function $a(e){var t;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||Xa.includes(e.name)||1==(null===(e=e.$retryable)||void 0===e?void 0:e.throttling)}function Ya(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))}function Ja(e){return!!e&&(void 0!==e.$retryable||Za.includes(e.name)||$a(e)||Qa.includes(e.name)||es.includes((null===(e=e.$metadata)||void 0===e?void 0:e.httpStatusCode)||0))}var Za=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Xa=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Qa=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],es=[500,502,503,504],ts=(ns.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},ns.prototype.getMaxAttempts=function(){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),[t=3,3];case 3:return[2,t]}})})},ns.prototype.retry=function(p,d){return K(this,void 0,void 0,function(){var i,a,s,u,c,l,t;return H(this,function(e){switch(e.label){case 0:return s=a=0,[4,this.getMaxAttempts()];case 1:u=e.sent(),c=d.request,Ga.isInstance(c)&&(c.headers["amz-sdk-invocation-id"]=h.v4()),t=function(){var t,n,r,o;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),Ga.isInstance(c)&&(c.headers["amz-sdk-request"]="attempt="+(a+1)+"; max="+u),[4,p(d)];case 1:return n=e.sent(),t=n.response,n=n.output,l.retryQuota.releaseRetryTokens(i),n.$metadata.attempts=a+1,n.$metadata.totalRetryDelay=s,[2,{value:{response:t,output:n}}];case 2:return r=e.sent(),a++,l.shouldRetry(r,a,u)?(i=l.retryQuota.retrieveRetryTokens(r),o=l.delayDecider($a(r)?500:100,a),s+=o,[4,new Promise(function(e){return setTimeout(e,o)})]):[3,4];case 3:return e.sent(),[2,"continue"];case 4:throw r.$metadata||(r.$metadata={}),r.$metadata.attempts=a,r.$metadata.totalRetryDelay=s,r;case 5:return[2]}})},l=this,e.label=2;case 2:return[5,t()];case 3:return"object"==typeof(t=e.sent())?[2,t.value]:[3,2];case 4:return[2]}})})},ns);function ns(e,t){function n(e){return"TimeoutError"===e.name?10:5}function r(e){return n(e)<=i}var o,i;this.maxAttemptsProvider=e,this.mode="standard",this.retryDecider=null!==(e=null==t?void 0:t.retryDecider)&&void 0!==e?e:Ja,this.delayDecider=null!==(e=null==t?void 0:t.delayDecider)&&void 0!==e?e:Ya,this.retryQuota=null!==(t=null==t?void 0:t.retryQuota)&&void 0!==t?t:(i=o=500,Object.freeze({hasRetryTokens:r,retrieveRetryTokens:function(e){if(!r(e))throw new Error("No retry token available");return e=n(e),i-=e,e},releaseRetryTokens:function(e){i+=null!=e?e:1,i=Math.min(i,o)}}))}function rs(e){var t=ss(e.maxAttempts);return j(j({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new ts(t)})}var os,is="AWS_MAX_ATTEMPTS",as="max_attempts",g={environmentVariableSelector:function(e){var t=e[is];if(t){if(e=parseInt(t),Number.isNaN(e))throw new Error("Environment variable "+is+' mast be a number, got "'+t+'"');return e}},configFileSelector:function(e){var t=e[as];if(t){if(e=parseInt(t),Number.isNaN(e))throw new Error("Shared config file entry "+as+' mast be a number, got "'+t+'"');return e}},default:3},ss=function(e){if("number"!=typeof(e=void 0===e?3:e))return e;var t=Promise.resolve(e);return function(){return t}},us=(F(cs,os=Error),cs);function cs(e,t){return void 0===t&&(t=!0),(e=os.call(this,e)||this).tryNextLink=t,e}function ls(e,t){var i,a,s,n,r,o,u,c,l,p=e.environmentVariableSelector,d=e.configFileSelector,e=e.default;return r=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return function(){var e,t,n=Promise.reject(new us("No providers in chain"));try{for(var r=G(i),o=r.next();!o.done;o=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(o.value)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n}}((n=p,function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){try{if(void 0===(t=n(Yi.env)))throw new Error;return[2,t]}catch(e){throw new us(e.message||"Cannot load config from environment variables with getter: "+n)}return[2]})})}),(i=d,t=(d=void 0===(d=t=void 0===t?{}:t)?{}:d).preferredFile,a=void 0===t?"config":t,s=B(d,["preferredFile"]),function(){return K(void 0,void 0,void 0,function(){var t,n,r,o;return H(this,function(e){switch(e.label){case 0:return t=s.loadedConfig,n=void 0===t?ba(s):t,r=s.profile,t=void 0===r?Yi.env.AWS_PROFILE||"default":r,[4,n];case 1:r=e.sent(),n=r.configFile,r=(r=r.credentialsFile)[t]||{},n=n[t]||{},r="config"===a?j(j({},r),n):j(j({},n),r);try{if(void 0===(o=i(r)))throw new Error;return[2,o]}catch(e){throw new us(e.message||"Cannot load config for profile "+t+" in SDK configuration files with getter: "+i)}return[2]}})})}),"function"==typeof(c=e)?function(){return K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,c()]})})}:(l=c,function(){return Promise.resolve(l)})),function(){return u||(o=r(),u=!0),o}}function ps(e){return encodeURIComponent(e).replace(/[!'()*]/g,ds)}var ds=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},fs=["ECONNRESET","EPIPE","ETIMEDOUT"],hs=[],gs=[],ms="undefined"!=typeof Uint8Array?Uint8Array:Array,ys=!1;function vs(){ys=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)hs[t]=e[t],gs[e.charCodeAt(t)]=t;gs["-".charCodeAt(0)]=62,gs["_".charCodeAt(0)]=63}function bs(e){var t;ys||vs();for(var n=e.length,r=n%3,o="",i=[],a=0,s=n-r;a<s;a+=16383)i.push(function(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(hs[r>>18&63]+hs[r>>12&63]+hs[r>>6&63]+hs[63&r]);return o.join("")}(e,a,s<a+16383?s:a+16383));return 1==r?(t=e[n-1],o+=hs[t>>2],o+=hs[t<<4&63],o+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],o+=hs[t>>10],o+=hs[t>>4&63],o+=hs[t<<2&63],o+="="),i.push(o),i.join("")}function ws(e,t,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,c=u>>1,l=-7,p=n?o-1:0,d=n?-1:1,n=e[t+p];for(p+=d,i=n&(1<<-l)-1,n>>=-l,l+=s;0<l;i=256*i+e[t+p],p+=d,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;0<l;a=256*a+e[t+p],p+=d,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(n?-1:1);a+=Math.pow(2,r),i-=c}return(n?-1:1)*a*Math.pow(2,i-r)}function Ss(e,t,n,r,o,i){var a,s,u=8*i-o-1,c=(1<<u)-1,l=c>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,f=r?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-a))<1&&(a--,r*=2),2<=(t+=1<=a+l?p/r:p*Math.pow(2,1-l))*r&&(a++,r/=2),c<=a+l?(s=0,a=c):1<=a+l?(s=(t*r-1)*Math.pow(2,o),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,o),a=0));8<=o;e[n+d]=255&s,d+=f,s/=256,o-=8);for(a=a<<o|s,u+=o;0<u;e[n+d]=255&a,d+=f,a/=256,u-=8);e[n+d-f]|=128*i}var Cs={}.toString,_s=Array.isArray||function(e){return"[object Array]"==Cs.call(e)};function Es(){return Is.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function As(e,t){if(Es()<t)throw new RangeError("Invalid typed array length");return Is.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Is.prototype:(e=null===e?new Is(t):e).length=t,e}function Is(e,t,n){if(!(Is.TYPED_ARRAY_SUPPORT||this instanceof Is))return new Is(e,t,n);if("number"!=typeof e)return ks(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Ps(this,e)}function ks(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Is.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Is.prototype:e=Os(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Is.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Rs(t,n);return(n=(e=As(e,r)).write(t,n))!==r&&(e=e.slice(0,n)),e}(e,t,n):function(e,t){if(Ns(t)){var n=0|xs(t.length);return 0===(e=As(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?As(e,0):Os(e,t);if("Buffer"===t.type&&_s(t.data))return Os(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Ts(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ps(e,t){if(Ts(t),e=As(e,t<0?0:0|xs(t)),!Is.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Os(e,t){var n=t.length<0?0:0|xs(t.length);e=As(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function xs(e){if(e>=Es())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Es().toString(16)+" bytes");return 0|e}function Ns(e){return null!=e&&e._isBuffer}function Rs(e,t){if(Ns(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Ys(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Js(e).length;default:if(r)return Ys(e).length;t=(""+t).toLowerCase(),r=!0}}function Ms(e,o,i){var t,n,r=!1;if((o=void 0===o||o<0?0:o)>this.length)return"";if((i=void 0===i||i>this.length?this.length:i)<=0)return"";if((i>>>=0)<=(o>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||r<n)&&(n=r);for(var o,i="",a=t;a<n;++a)i+=(o=e[a])<16?"0"+o.toString(16):o.toString(16);return i}(this,o,i);case"utf8":case"utf-8":return js(this,o,i);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}(this,o,i);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}(this,o,i);case"base64":return n=i,0===(t=o)&&n===this.length?bs(this):bs(this.slice(t,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e){for(var t=e.slice(o,i),n="",r=0;r<t.length;r+=2)n+=String.fromCharCode(t[r]+256*t[r+1]);return n}(this);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function Us(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Ds(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?o?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if(Ns(t="string"==typeof t?Is.from(t,r):t))return 0===t.length?-1:Ls(e,t,n,r,o);if("number"==typeof t)return t&=255,Is.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):Ls(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function Ls(e,t,n,r,o){var i=1,a=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a/=i=2,s/=2,n/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,l=n;l<a;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===s)return c*i}else-1!==c&&(l-=l-c),c=-1;else for(l=n=a<n+s?a-s:n;0<=l;l--){for(var p=!0,d=0;d<s;d++)if(u(e,l+d)!==u(t,d)){p=!1;break}if(p)return l}return-1}function Fs(e,t,n,r){return Zs(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function js(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,u,c=e[o],l=null,p=239<c?4:223<c?3:191<c?2:1;if(o+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&2047<(u=(15&c)<<12|(63&i)<<6|63&a)&&(u<55296||57343<u)&&(l=u);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=p}return function(e){var t=e.length;if(t<=Bs)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Bs));return n}(r)}Is.TYPED_ARRAY_SUPPORT=void 0===b.TYPED_ARRAY_SUPPORT||b.TYPED_ARRAY_SUPPORT,Is.poolSize=8192,Is._augment=function(e){return e.__proto__=Is.prototype,e},Is.from=function(e,t,n){return ks(null,e,t,n)},Is.TYPED_ARRAY_SUPPORT&&(Is.prototype.__proto__=Uint8Array.prototype,Is.__proto__=Uint8Array),Is.alloc=function(e,t,n){return r=null,Ts(e),e<=0||void 0===t?As(r,e):"string"==typeof n?As(r,e).fill(t,n):As(r,e).fill(t);var r},Is.allocUnsafe=function(e){return Ps(null,e)},Is.allocUnsafeSlow=function(e){return Ps(null,e)},Is.isBuffer=function(e){return null!=e&&(!!e._isBuffer||Xs(e)||"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Xs(e.slice(0,0)))},Is.compare=function(e,t){if(!Ns(e)||!Ns(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},Is.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Is.concat=function(e,t){if(!_s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Is.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var n=Is.allocUnsafe(t),r=0,o=0;o<e.length;++o){var i=e[o];if(!Ns(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,r),r+=i.length}return n},Is.byteLength=Rs,Is.prototype._isBuffer=!0,Is.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Us(this,t,t+1);return this},Is.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Us(this,t,t+3),Us(this,t+1,t+2);return this},Is.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Us(this,t,t+7),Us(this,t+1,t+6),Us(this,t+2,t+5),Us(this,t+3,t+4);return this},Is.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?js(this,0,e):Ms.apply(this,arguments)},Is.prototype.equals=function(e){if(!Ns(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Is.compare(this,e)},Is.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},Is.prototype.compare=function(e,t,n,r,o){if(!Ns(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(o<=r&&n<=t)return 0;if(o<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(r,o),c=e.slice(t,n),l=0;l<s;++l)if(u[l]!==c[l]){i=u[l],a=c[l];break}return i<a?-1:a<i?1:0},Is.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Is.prototype.indexOf=function(e,t,n){return Ds(this,e,t,n,!0)},Is.prototype.lastIndexOf=function(e,t,n){return Ds(this,e,t,n,!1)},Is.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||o<n)&&(n=o),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var i,a,s,u,c,l,p=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var o=e.length-n;if((!r||o<(r=Number(r)))&&(r=o),(o=t.length)%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var i=0;i<r;++i){var a=parseInt(t.substr(2*i,2),16);if(isNaN(a))return i;e[n+i]=a}return i}(this,e,t,n);case"utf8":case"utf-8":return a=t,s=n,Zs(Ys(e,(i=this).length-a),i,a,s);case"ascii":return Fs(this,e,t,n);case"latin1":case"binary":return Fs(this,e,t,n);case"base64":return i=this,a=t,s=n,Zs(Js(e),i,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,l=n,Zs(function(e,t){for(var n,r,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=(r=e.charCodeAt(i))>>8,r%=256,o.push(r),o.push(n);return o}(e,(u=this).length-c),u,c,l);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},Is.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Bs=4096;function zs(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function Vs(e,t,n,r,o,i){if(!Ns(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function qs(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function Ks(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function Hs(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Gs(e,t,n,r,o){return o||Hs(e,0,n,4),Ss(e,t,n,r,23,4),n+4}function Ws(e,t,n,r,o){return o||Hs(e,0,n,8),Ss(e,t,n,r,52,8),n+8}Is.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),Is.TYPED_ARRAY_SUPPORT)(o=this.subarray(e,t)).__proto__=Is.prototype;else for(var r=t-e,o=new Is(r,void 0),i=0;i<r;++i)o[i]=this[i+e];return o},Is.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||zs(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},Is.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||zs(e,t,this.length);for(var r=this[e+--t],o=1;0<t&&(o*=256);)r+=this[e+--t]*o;return r},Is.prototype.readUInt8=function(e,t){return t||zs(e,1,this.length),this[e]},Is.prototype.readUInt16LE=function(e,t){return t||zs(e,2,this.length),this[e]|this[e+1]<<8},Is.prototype.readUInt16BE=function(e,t){return t||zs(e,2,this.length),this[e]<<8|this[e+1]},Is.prototype.readUInt32LE=function(e,t){return t||zs(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Is.prototype.readUInt32BE=function(e,t){return t||zs(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Is.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||zs(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return(o*=128)<=r&&(r-=Math.pow(2,8*t)),r},Is.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||zs(e,t,this.length);for(var r=t,o=1,i=this[e+--r];0<r&&(o*=256);)i+=this[e+--r]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},Is.prototype.readInt8=function(e,t){return t||zs(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Is.prototype.readInt16LE=function(e,t){return t||zs(e,2,this.length),32768&(e=this[e]|this[e+1]<<8)?4294901760|e:e},Is.prototype.readInt16BE=function(e,t){return t||zs(e,2,this.length),32768&(e=this[e+1]|this[e]<<8)?4294901760|e:e},Is.prototype.readInt32LE=function(e,t){return t||zs(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Is.prototype.readInt32BE=function(e,t){return t||zs(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Is.prototype.readFloatLE=function(e,t){return t||zs(e,4,this.length),ws(this,e,!0,23,4)},Is.prototype.readFloatBE=function(e,t){return t||zs(e,4,this.length),ws(this,e,!1,23,4)},Is.prototype.readDoubleLE=function(e,t){return t||zs(e,8,this.length),ws(this,e,!0,52,8)},Is.prototype.readDoubleBE=function(e,t){return t||zs(e,8,this.length),ws(this,e,!1,52,8)},Is.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Vs(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},Is.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Vs(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+n},Is.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,1,255,0),Is.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Is.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,2,65535,0),Is.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):qs(this,e,t,!0),t+2},Is.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,2,65535,0),Is.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):qs(this,e,t,!1),t+2},Is.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,4,4294967295,0),Is.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Ks(this,e,t,!0),t+4},Is.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,4,4294967295,0),Is.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Ks(this,e,t,!1),t+4},Is.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||Vs(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=0,i=1,a=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+n},Is.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||Vs(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var o=n-1,i=1,a=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+n},Is.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,1,127,-128),Is.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},Is.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,2,32767,-32768),Is.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):qs(this,e,t,!0),t+2},Is.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,2,32767,-32768),Is.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):qs(this,e,t,!1),t+2},Is.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,4,2147483647,-2147483648),Is.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Ks(this,e,t,!0),t+4},Is.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Vs(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Is.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Ks(this,e,t,!1),t+4},Is.prototype.writeFloatLE=function(e,t,n){return Gs(this,e,t,!0,n)},Is.prototype.writeFloatBE=function(e,t,n){return Gs(this,e,t,!1,n)},Is.prototype.writeDoubleLE=function(e,t,n){return Ws(this,e,t,!0,n)},Is.prototype.writeDoubleBE=function(e,t,n){return Ws(this,e,t,!1,n)},Is.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var o,i=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(o=i-1;0<=o;--o)e[o+t]=this[o+n];else if(i<1e3||!Is.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},Is.prototype.fill=function(e,t,n,r){if("string"==typeof e){var o;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(o=e.charCodeAt(0))<256&&(e=o),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Is.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(s=t;s<n;++s)this[s]=e;else for(var i=Ns(e)?e:Ys(new Is(e,r).toString()),a=i.length,s=0;s<n-t;++s)this[s+t]=i[s%a];return this};var $s=/[^+\/0-9A-Za-z-_]/g;function Ys(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if(55295<(n=e.charCodeAt(a))&&n<57344){if(!o){if(56319<n){-1<(t-=3)&&i.push(239,191,189);continue}if(a+1===r){-1<(t-=3)&&i.push(239,191,189);continue}o=n;continue}if(n<56320){-1<(t-=3)&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,n<128){if(--t<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Js(e){return function(e){var t;ys||vs();var n=e.length;if(0<n%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var r="="===e[n-2]?2:"="===e[n-1]?1:0,o=new ms(3*n/4-r),i=0<r?n-4:n,a=0,s=0;s<i;s+=4)t=gs[e.charCodeAt(s)]<<18|gs[e.charCodeAt(s+1)]<<12|gs[e.charCodeAt(s+2)]<<6|gs[e.charCodeAt(s+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;return 2==r?(t=gs[e.charCodeAt(s)]<<2|gs[e.charCodeAt(s+1)]>>4,o[a++]=255&t):1==r&&(t=gs[e.charCodeAt(s)]<<10|gs[e.charCodeAt(s+1)]<<4|gs[e.charCodeAt(s+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t),o}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace($s,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Zs(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function Xs(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Qs(e,t){t instanceof u.Readable?t.pipe(e):t?e.end(Is.from(t)):e.end()}function eu(e){var t=(r=void 0===e?{}:e).connectionTimeout,n=r.socketTimeout,e=r.httpAgent,r=r.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=t,this.socketTimeout=n,this.httpAgent=e||new m.Agent({keepAlive:!0,maxSockets:50}),this.httpsAgent=r||new y.Agent({keepAlive:!0,maxSockets:50})}eu.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},eu.prototype.handle=function(f,e){var h=this,g=(void 0===e?{}:e).abortSignal;return new Promise(function(t,n){if(null!=g&&g.aborted)return(p=new Error("Request aborted")).name="AbortError",void n(p);var r,o,i,e,a,s,u,c,l="https:"===f.protocol,p=function(e){var t,n,r=[];try{for(var o=G(Object.keys(e).sort()),i=o.next();!i.done;i=o.next()){var a=e[s=i.value],s=ps(s);if(Array.isArray(a))for(var u=0,c=a.length;u<c;u++)r.push(s+"="+ps(a[u]));else{var l=s;!a&&"string"!=typeof a||(l+="="+ps(a)),r.push(l)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r.join("&")}(f.query||{}),p={headers:f.headers,host:f.hostname,method:f.method,path:p?f.path+"?"+p:f.path,port:f.port,agent:l?h.httpsAgent:h.httpAgent},d=(0,(l?y:m).request)(p,function(e){e=new Ka({statusCode:e.statusCode||-1,headers:function(e){var t,n,r={};try{for(var o=G(Object.keys(e)),i=o.next();!i.done;i=o.next()){var a=i.value,s=e[a];r[a]=Array.isArray(s)?s.join(","):s}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(e.headers),body:e}),t({response:e})});d.on("error",function(e){fs.includes(e.code)?n(Object.assign(e,{name:"TimeoutError"})):n(e)}),r=d,o=n,(i=void 0===(i=h.connectionTimeout)?0:i)&&r.on("socket",function(e){var t;e.connecting&&(t=setTimeout(function(){r.destroy(),o(Object.assign(new Error("Socket timed out without establishing a connection within "+i+" ms"),{name:"TimeoutError"}))},i),e.on("connect",function(){clearTimeout(t)}))}),e=d,a=n,s=h.socketTimeout,e.setTimeout(s=void 0===s?0:s,function(){e.destroy(),a(Object.assign(new Error("Connection timed out after "+s+" ms"),{name:"TimeoutError"}))}),g&&(g.onabort=function(){d.abort();var e=new Error("Request aborted");e.name="AbortError",n(e)}),u=d,"100-continue"===((c=f).headers.Expect||c.headers.expect)?u.on("continue",function(){Qs(u,c.body)}):Qs(u,c.body)})},Ye=eu;var tu,nu=(F(ru,tu=u.Writable),ru.prototype._write=function(e,t,n){this.bufferedBytes.push(e),n()},ru);function ru(){var e=null!==tu&&tu.apply(this,arguments)||this;return e.bufferedBytes=[],e}function ou(e){return e=function(e){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return d.Buffer.from(e,"base64")}(e),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function iu(e){return function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!("function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return d.Buffer.from(e,t,n)}(e.buffer,e.byteOffset,e.byteLength).toString("base64")}function au(e){return e?"string"==typeof e?Is.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?s.lstatSync(e.path).size:void 0:0}Yn=function(e){return new Promise(function(t,n){var r=new nu;e.pipe(r),e.on("error",function(e){r.end(),n(e)}),r.on("error",n),r.on("finish",function(){var e=new Uint8Array(Is.concat(this.bufferedBytes));t(e)})})};var hn=function(e){var r=e.serviceId,o=e.clientVersion;return function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=[["aws-sdk-js",o],["os/"+i.platform(),i.release()],["lang/js"],["md/nodejs",""+c.versions.node]],r&&t.push(["api/"+r,o]),c.env.AWS_EXECUTION_ENV&&t.push(["exec-env/"+c.env.AWS_EXECUTION_ENV]),[4,ls({environmentVariableSelector:function(e){return e.AWS_SDK_UA_APP_ID},configFileSelector:function(e){return e["sdk-ua-app-id"]},default:void 0})()];case 1:return(n=e.sent())&&t.push(["app/"+n]),[2,t]}})})}},dt=function(e){return e=function(e){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return d.Buffer.from(e,"utf8")}(e),new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},wt=function(e){return function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),!("function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");return d.Buffer.from(e,t,n)}(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},su="pinpoint.{region}.amazonaws.com",uu=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),cu=new Set(["cn-north-1","cn-northwest-1"]),lu=new Set(["us-iso-east-1"]),pu=new Set(["us-isob-east-1"]),du=new Set(["us-gov-east-1","us-gov-west-1"]),vt={apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"pinpoint.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-northeast-2":n={hostname:"pinpoint.ap-northeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-1":n={hostname:"pinpoint.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ca-central-1":n={hostname:"pinpoint.ca-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-2":n={hostname:"pinpoint.eu-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"fips-us-east-1":n={hostname:"pinpoint-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-gov-west-1":n={hostname:"pinpoint-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"pinpoint-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"us-gov-west-1":n={hostname:"pinpoint.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;default:uu.has(e)&&(n={hostname:su.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),cu.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),lu.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),pu.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=du.has(e)?{hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov",signingService:"mobiletargeting"}:n)&&(n={hostname:su.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(_i({signingService:"mobiletargeting"},n))},serviceId:"Pinpoint",urlParser:ur=function(e){var t,n=new URL(e),r=n.hostname,o=n.pathname,i=n.port,e=n.protocol;return(n=n.search)&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var o=G(e.split("&")),i=o.next();!i.done;i=o.next()){var a=W(i.value.split("="),2),s=a[0],u=a[1],c=void 0===u?null:u,s=decodeURIComponent(s),c=c&&decodeURIComponent(c);s in r?Array.isArray(r[s])?r[s].push(c):r[s]=[r[s],c]:r[s]=c}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(n)),{hostname:r,port:i?parseInt(i):void 0,protocol:e,path:o,query:t}}},fu=_i(_i({},vt),{runtime:"node",base64Decoder:ou,base64Encoder:iu,bodyLengthChecker:au,credentialDefaultProvider:Xe,defaultUserAgentProvider:hn({serviceId:vt.serviceId,clientVersion:gn}),maxAttempts:ls(g),region:ls(mn,wn),requestHandler:new Ye,sha256:ja.bind(null,"sha256"),streamCollector:Yn,utf8Decoder:dt,utf8Encoder:wt}),hu="content-length";function gu(t){return{applyToStack:function(e){e.add(function(s){var e=this;return function(a){return function(i){return K(e,void 0,void 0,function(){var t,n,r,o;return H(this,function(e){return t=i.request,Ga.isInstance(t)&&(o=t.body,n=t.headers,o&&-1===Object.keys(n).map(function(e){return e.toLowerCase()}).indexOf(hu)&&void 0!==(r=s(o))&&(t.headers=j(j({},t.headers),((o={})[hu]=String(r),o)))),[2,a(j(j({},i),{request:t}))]})})}}}(t.bodyLengthChecker),mu)}}}for(var mu={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},yu={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},vu=function(t){return{applyToStack:function(e){var i;e.add((i=t,function(o){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){return Ga.isInstance(r.request)&&(t=r.request,0<=(void 0===(n=(i.requestHandler.metadata||{}).handlerProtocol)?"":n).indexOf("h2")&&!t.headers[":authority"]?(delete t.headers.host,t.headers[":authority"]=""):t.headers.host||(t.headers.host=t.hostname)),[2,o(r)]})})}}),yu)}}},bu={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},wu=function(e){return{applyToStack:function(e){e.add(function(l,p){return function(c){return K(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s,u;return H(this,function(e){switch(e.label){case 0:return t=p.clientName,n=p.commandName,r=p.inputFilterSensitiveLog,o=p.logger,i=p.outputFilterSensitiveLog,[4,l(c)];case 1:return a=e.sent(),o&&"function"==typeof o.info&&(u=a.output,s=u.$metadata,u=B(u,["$metadata"]),o.info({clientName:t,commandName:n,input:r(c.input),output:i(u),metadata:s})),[2,a]}})})}},bu)}}},Su={},Cu=0;Cu<256;Cu++){var _u=Cu.toString(16).toLowerCase();1===_u.length&&(_u="0"+_u),Su[Cu]=_u}function Eu(e){for(var t="",n=0;n<e.byteLength;n++)t+=Su[e[n]];return t}var Au="X-Amz-Date",Iu="X-Amz-Signature",ku="X-Amz-Security-Token",Tu="authorization",Pu=Au.toLowerCase(),Ou=[Tu,Pu,"date"],xu=Iu.toLowerCase(),Nu="x-amz-content-sha256",Ru=ku.toLowerCase(),Mu={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Uu=/^proxy-/,Du=/^sec-/,Lu="AWS4-HMAC-SHA256",Fu="AWS4-HMAC-SHA256-PAYLOAD",ju="aws4_request",Bu={},zu=[];function Vu(e,t,n){return e+"/"+t+"/"+n+"/"+ju}function qu(e,t,n){return(t=new e(t)).update(n),t.digest()}function Ku(e,t,n){var r,o,i=e.headers,a={};try{for(var s=G(Object.keys(i).sort()),u=s.next();!u.done;u=s.next()){var c=u.value,l=c.toLowerCase();(l in Mu||null!=t&&t.has(l)||Uu.test(l)||Du.test(l))&&(!n||n&&!n.has(l))||(a[l]=i[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a}function Hu(e){return encodeURIComponent(e).replace(/[!'()*]/g,Gu)}var Gu=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function Wu(e,s){var u=e.headers,c=e.body;return K(this,void 0,void 0,function(){var t,n,r,o,i,a;return H(this,function(e){switch(e.label){case 0:try{for(t=G(Object.keys(u)),n=t.next();!n.done;n=t.next())if((r=n.value).toLowerCase()===Nu)return[2,u[r]]}catch(e){i={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(i)throw i.error}}return null!=c?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof c||ArrayBuffer.isView(c)||("function"==typeof ArrayBuffer&&c instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(c))?((i=new s).update(c),o=Eu,[4,i.digest()]):[3,3];case 2:return[2,o.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function $u(e){var r,t=e.headers,n=e.query,e=B(e,["headers","query"]);return j(j({},e),{headers:j({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{})):void 0})}function Yu(e){var t,n;e="function"==typeof e.clone?e.clone():$u(e);try{for(var r=G(Object.keys(e.headers)),o=r.next();!o.done;o=r.next()){var i=o.value;-1<Ou.indexOf(i.toLowerCase())&&delete e.headers[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var Ju=(Zu.prototype.presign=function(y,v){return void 0===v&&(v={}),K(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g,m;return H(this,function(e){switch(e.label){case 0:return s=v.signingDate,u=void 0===s?new Date:s,i=v.expiresIn,t=void 0===i?3600:i,n=v.unsignableHeaders,r=v.unhoistableHeaders,o=v.signableHeaders,s=v.signingRegion,i=v.signingService,[4,this.credentialProvider()];case 1:return a=e.sent(),null==s?[3,2]:(c=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:c=e.sent(),e.label=4;case 4:return s=c,c=Xu(u),u=c.longDate,c=c.shortDate,604800<t?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=Vu(c,s,null!=i?i:this.service),l=function(e,t){var n,r,o;void 0===t&&(t={});var i="function"==typeof e.clone?e.clone():$u(e),a=i.headers,s=void 0===(i=i.query)?{}:i;try{for(var u=G(Object.keys(a)),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.toLowerCase();"x-amz-"!==p.substr(0,6)||null!==(o=t.unhoistableHeaders)&&void 0!==o&&o.has(p)||(s[l]=a[l],delete a[l])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return j(j({},e),{headers:a,query:s})}(Yu(y),{unhoistableHeaders:r}),a.sessionToken&&(l.query[ku]=a.sessionToken),l.query["X-Amz-Algorithm"]=Lu,l.query["X-Amz-Credential"]=a.accessKeyId+"/"+g,l.query[Au]=u,l.query["X-Amz-Expires"]=t.toString(10),m=Ku(l,n,o),l.query["X-Amz-SignedHeaders"]=Qu(m),p=l.query,d=Iu,f=this.getSignature,h=[u,g,this.getSigningKey(a,s,c,i)],g=this.createCanonicalRequest,m=[l,m],[4,Wu(y,this.sha256)]);case 5:return[4,f.apply(this,h.concat([g.apply(this,m.concat([e.sent()]))]))];case 6:return p[d]=e.sent(),[2,l]}})})},Zu.prototype.sign=function(t,n){return K(this,void 0,void 0,function(){return H(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},Zu.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,l=void 0===(e=t.signingDate)?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,o,i,a,s;return H(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,o=Xu(l),i=o.shortDate,r=o.longDate,o=Vu(i,t,null!=f?f:this.service),[4,Wu({headers:{},body:c},this.sha256)];case 4:return s=e.sent(),(i=new this.sha256).update(u),a=Eu,[4,i.digest()];case 5:return a=a.apply(void 0,[e.sent()]),s=[Fu,r,o,p,a,s].join("\n"),[2,this.signString(s,{signingDate:l,signingRegion:t,signingService:f})]}})})},Zu.prototype.signString=function(s,e){var t=void 0===e?{}:e,u=void 0===(e=t.signingDate)?new Date:e,c=t.signingRegion,l=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,o,i,a;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==c?[3,2]:(r=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,r=Xu(u).shortDate,i=(o=this.sha256).bind,[4,this.getSigningKey(t,n,r,l)];case 5:return(o=new(i.apply(o,[void 0,e.sent()]))).update(s),a=Eu,[4,o.digest()];case 6:return[2,a.apply(void 0,[e.sent()])]}})})},Zu.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,p=void 0===(e=t.signingDate)?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,g=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==h?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,o=Yu(l),s=Xu(p),i=s.longDate,a=s.shortDate,s=Vu(a,n,null!=g?g:this.service),o.headers[Pu]=i,t.sessionToken&&(o.headers[Ru]=t.sessionToken),[4,Wu(o,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var o=G(Object.keys(t)),i=o.next();!i.done;i=o.next())if(e===i.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(Nu,o.headers)&&this.applyChecksum&&(o.headers[Nu]=c),u=Ku(o,f,d),[4,this.getSignature(i,s,this.getSigningKey(t,n,a,g),this.createCanonicalRequest(o,u,c))];case 6:return c=e.sent(),o.headers[Tu]=Lu+" Credential="+t.accessKeyId+"/"+s+", SignedHeaders="+Qu(u)+", Signature="+c,[2,o]}})})},Zu.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=void 0===(e=e.query)?{}:e,o=[],i={};try{for(var a=G(Object.keys(r).sort()),s=a.next();!s.done;s=a.next())!function(n){var e;n.toLowerCase()!==xu&&(o.push(n),"string"==typeof(e=r[n])?i[n]=Hu(n)+"="+Hu(e):Array.isArray(e)&&(i[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([Hu(n)+"="+Hu(t)])},[]).join("&")))}(s.value)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o.map(function(e){return i[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},Zu.prototype.createStringToSign=function(n,r,o){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(o),[4,t.digest()];case 1:return t=e.sent(),[2,Lu+"\n"+n+"\n"+r+"\n"+Eu(t)]}})})},Zu.prototype.getCanonicalPath=function(e){return e=e.path,this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},Zu.prototype.getSignature=function(i,a,s,u){return K(this,void 0,void 0,function(){var t,n,r,o;return H(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(i,a,u)];case 1:return t=e.sent(),r=(n=this.sha256).bind,[4,s];case 2:return(n=new(r.apply(n,[void 0,e.sent()]))).update(t),o=Eu,[4,n.digest()];case 3:return[2,o.apply(void 0,[e.sent()])]}})})},Zu.prototype.getSigningKey=function(e,t,n,r){return u=this.sha256,c=e,l=n,p=t,d=r||this.service,K(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s;return H(this,function(e){switch(e.label){case 0:return[4,qu(u,c.secretAccessKey,c.accessKeyId)];case 1:if(i=e.sent(),(t=l+":"+p+":"+d+":"+Eu(i)+":"+c.sessionToken)in Bu)return[2,Bu[t]];for(zu.push(t);50<zu.length;)delete Bu[zu.shift()];n="AWS4"+c.secretAccessKey,e.label=2;case 2:e.trys.push([2,7,8,9]),r=G([l,p,d,ju]),o=r.next(),e.label=3;case 3:return o.done?[3,6]:(i=o.value,[4,qu(u,n,i)]);case 4:n=e.sent(),e.label=5;case 5:return o=r.next(),[3,3];case 6:return[3,9];case 7:return a={error:a=e.sent()},[3,9];case 8:try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(a)throw a.error}return[7];case 9:return[2,Bu[t]=n]}})});var u,c,l,p,d},Zu);function Zu(e){var t=e.applyChecksum,n=e.credentials,r=e.region,o=e.service,i=e.sha256,e=void 0===(e=e.uriEscapePath)||e;this.service=o,this.sha256=i,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=ec(r),this.credentialProvider=tc(n)}var Xu=function(e){var t;return{longDate:e=("number"==typeof(t=e)?new Date(1e3*t):"string"!=typeof t?t:Number(t)?new Date(1e3*Number(t)):new Date(t)).toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[\-:]/g,""),shortDate:e.substr(0,8)}},Qu=function(e){return Object.keys(e).sort().join(";")},ec=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},tc=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}};function nc(r){var e=this,o=rc(r.credentials||r.credentialDefaultProvider(r)),i=void 0===(t=r.signingEscapePath)||t,t=void 0===(n=r.systemClockOffset)?r.systemClockOffset||0:n,a=r.sha256,n=r.signer?rc(r.signer):function(){return rc(r.region)().then(function(t){return K(e,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,r.regionInfoProvider(t)];case 1:return[2,[e.sent()||{},t]]}})})}).then(function(e){var t=(n=W(e,2))[0],e=n[1],n=t.signingRegion,t=t.signingService;return r.signingRegion=r.signingRegion||n||e,r.signingName=r.signingName||t||r.serviceId,new Ju({credentials:o,region:r.signingRegion,service:r.signingName,sha256:a,uriEscapePath:i})})};return j(j({},r),{systemClockOffset:t,signingEscapePath:i,credentials:o,signer:n})}function rc(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}}var oc=function(e){return new Date(Date.now()+e)};function ic(t){return{applyToStack:function(e){var l;e.addRelativeTo((l=t,function(u,c){return function(s){return K(this,void 0,void 0,function(){var r,o,i,a;return H(this,function(e){switch(e.label){case 0:return Ga.isInstance(s.request)?"function"!=typeof l.signer?[3,2]:[4,l.signer()]:[2,u(s)];case 1:return r=e.sent(),[3,3];case 2:r=l.signer,e.label=3;case 3:return o=u,i=[j({},s)],a={},[4,r.sign(s.request,{signingDate:new Date(Date.now()+l.systemClockOffset),signingRegion:c.signing_region,signingService:c.signing_service})];case 4:return[4,o.apply(void 0,[j.apply(void 0,i.concat([(a.request=e.sent(),a)]))])];case 5:return i=e.sent(),(a=(a=i.response.headers)&&(a.date||a.Date))&&(t=a=Date.parse(a),n=l.systemClockOffset,3e5<=Math.abs(oc(n).getTime()-t)&&(l.systemClockOffset=a-Date.now())),[2,i]}var t,n})})}}),ac)}}}var ac={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};function sc(e){return j(j({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}function uc(t){return{applyToStack:function(e){var c;e.add((c=t,function(s,u){return function(a){return K(void 0,void 0,void 0,function(){var t,n,r,o,i;return H(this,function(e){switch(e.label){case 0:return t=a.request,Ga.isInstance(t)?(n=t.headers,r=(null===(i=null==u?void 0:u.userAgent)||void 0===i?void 0:i.map(pc))||[],[4,c.defaultUserAgentProvider()]):[2,s(a)];case 1:return o=e.sent().map(pc),i=(null===(i=null==c?void 0:c.customUserAgent)||void 0===i?void 0:i.map(pc))||[],n["x-amz-user-agent"]=$(o,r,i).join(" "),i=$(o.filter(function(e){return e.startsWith("aws-sdk-")}),i).join(" "),"browser"!==c.runtime&&i&&(n[cc]=n[cc]?n[cc]+" "+i:i),[2,s(j(j({},a),{request:t}))]}})})}}),dc)}}}var cc="user-agent",lc=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,pc=function(e){var t=(r=W(e,2))[0],n=r[1],e=t.indexOf("/"),r=t.substring(0,e),e=t.substring(e+1);return[r,e="api"===r?e.toLowerCase():e,n].filter(function(e){return e&&0<e.length}).map(function(e){return null==e?void 0:e.replace(lc,"_")}).join("/")},dc={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},fc=function(){function n(t){return c.forEach(function(e){t.add(e.middleware,j({},e))}),l.forEach(function(e){t.addRelativeTo(e.middleware,j({},e))}),t}var c=[],l=[],o=new Set,p=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(p(e)))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(p(e)))}),t},t={add:function(e,t){var n=(t=void 0===t?{}:t).name,r=t.override,e=j({step:"initialize",priority:"normal",middleware:e},t);if(n){if(o.has(n)){if(!r)throw new Error("Duplicate middleware name '"+n+"'");if(t=c.findIndex(function(e){return e.name===n}),(r=c[t]).step!==e.step||r.priority!==e.priority)throw new Error('"'+n+'" middleware with '+r.priority+" priority in "+r.step+" step cannot be overridden by same-name middleware with "+e.priority+" priority in "+e.step+" step.");c.splice(t,1)}o.add(n)}c.push(e)},addRelativeTo:function(e,t){var n=t.name,r=t.override,e=j({middleware:e},t);if(n){if(o.has(n)){if(!r)throw new Error("Duplicate middleware name '"+n+"'");if(t=l.findIndex(function(e){return e.name===n}),(r=l[t]).toMiddleware!==e.toMiddleware||r.relation!==e.relation)throw new Error('"'+n+'" middleware '+r.relation+' "'+r.toMiddleware+'" middleware cannot be overridden by same-name middleware '+e.relation+' "'+e.toMiddleware+'" middleware.');l.splice(t,1)}o.add(n)}l.push(e)},clone:function(){return n(fc())},use:function(e){e.applyToStack(t)},remove:function(e){return("string"==typeof e?function(t){function e(e){return!e.name||e.name!==t||(n=!0,o.delete(t),!1)}var n=!1;return c=c.filter(e),l=l.filter(e),n}:function(t){function e(e){return e.middleware!==t||(n=!0,e.name&&o.delete(e.name),!1)}var n=!1;return c=c.filter(e),l=l.filter(e),n})(e)},removeByTag:function(n){function e(e){var t=e.tags,e=e.name;return!(t&&t.includes(n)&&(e&&o.delete(e),r=!0))}var r=!1;return c=c.filter(e),l=l.filter(e),r},concat:function(e){var t=n(fc());return t.use(e),t},applyToStack:n,resolve:function(e,t){var n,r,o,i,a;try{for(var s=G((o=[],i=[],a={},c.forEach(function(e){(e=j(j({},e),{before:[],after:[]})).name&&(a[e.name]=e),o.push(e)}),l.forEach(function(e){(e=j(j({},e),{before:[],after:[]})).name&&(a[e.name]=e),i.push(e)}),i.forEach(function(e){if(e.toMiddleware){var t=a[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),o.sort(function(e,t){return hc[t.step]-hc[e.step]||gc[t.priority||"normal"]-gc[e.priority||"normal"]}).map(p).reduce(function(e,t){return e.push.apply(e,$(t)),e},[]).map(function(e){return e.middleware}).reverse())),u=s.next();!u.done;u=s.next())e=(0,u.value)(e,t)}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return e}};return t},hc={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},gc={high:3,normal:2,low:1},C=(mc.prototype.send=function(e,t,n){var r="function"==typeof t?t:n,t=e.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!r)return t(e).then(function(e){return e.output});t(e).then(function(e){return r(null,e.output)},function(e){return r(e)}).catch(function(){})},mc.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},mc);function mc(e){this.middlewareStack=fc(),this.config=e}function yc(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function vc(e){return Array.isArray(e)?e:[e]}vt=function(){this.middlewareStack=fc()};var bc=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=bc(e[t]));return e};(gn=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,$([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t}).prototype=Object.create(String.prototype,{constructor:{value:gn,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(gn,String);var wc,Sc=(F(Cc,wc=gn),Cc.prototype.deserializeJSON=function(){return JSON.parse(wc.prototype.toString.call(this))},Cc.prototype.toJSON=function(){return wc.prototype.toString.call(this)},Cc.fromObject=function(e){return e instanceof Cc?e:e instanceof String||"string"==typeof e?new Cc(e):new Cc(JSON.stringify(e))},Cc);function Cc(){return null!==wc&&wc.apply(this,arguments)||this}var _c=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ec=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ac(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),o=e.getUTCDate(),i=e.getUTCHours(),a=e.getUTCMinutes(),e=e.getUTCSeconds();return _c[r]+", "+(o<10?"0"+o:""+o)+" "+Ec[n]+" "+t+" "+(i<10?"0"+i:""+i)+":"+(a<10?"0"+a:""+a)+":"+(e<10?"0"+e:""+e)+" GMT"}var Ic,kc="***SensitiveInformation***",Tc=(Ci(Pc,Ic=C),Pc.prototype.destroy=function(){Ic.prototype.destroy.call(this)},Pc);function Pc(e){var t=this,e=sc(rs(e=nc(ki(e=Ti(e=_i(_i({},fu),e))))));return(t=Ic.call(this,e)||this).config=e,t.middlewareStack.use(ic(t.config)),t.middlewareStack.use(Va(t.config)),t.middlewareStack.use(gu(t.config)),t.middlewareStack.use(vu(t.config)),t.middlewareStack.use(wu(t.config)),t.middlewareStack.use(uc(t.config)),t}function Oc(e){return _i(_i(_i(_i(_i(_i(_i(_i({},void 0!==e.AppVersion&&null!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&null!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&null!==e.Make&&{Make:e.Make}),void 0!==e.Model&&null!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&null!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&null!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&null!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&null!==e.Timezone&&{Timezone:e.Timezone})}function xc(e){return _i(_i(_i(_i(_i(_i({},void 0!==e.City&&null!==e.City&&{City:e.City}),void 0!==e.Country&&null!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&null!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&null!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&null!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&null!==e.Region&&{Region:e.Region})}function Nc(e,t){return Object.entries(e).reduce(function(e,t){var n,r=Ii(t,2),t=r[0];return null===(r=r[1])?e:_i(_i({},e),((e={})[t]=_i(_i(_i(_i(_i(_i(_i(_i(_i(_i({},void 0!==r.AppPackageName&&null!==r.AppPackageName&&{AppPackageName:r.AppPackageName}),void 0!==r.AppTitle&&null!==r.AppTitle&&{AppTitle:r.AppTitle}),void 0!==r.AppVersionCode&&null!==r.AppVersionCode&&{AppVersionCode:r.AppVersionCode}),void 0!==r.Attributes&&null!==r.Attributes&&{Attributes:(n=r.Attributes,Object.entries(n).reduce(function(e,t){var n=Ii(t,2),t=n[0];return null===(n=n[1])?e:_i(_i({},e),((e={})[t]=n,e))},{}))}),void 0!==r.ClientSdkVersion&&null!==r.ClientSdkVersion&&{ClientSdkVersion:r.ClientSdkVersion}),void 0!==r.EventType&&null!==r.EventType&&{EventType:r.EventType}),void 0!==r.Metrics&&null!==r.Metrics&&{Metrics:Hc(r.Metrics)}),void 0!==r.SdkName&&null!==r.SdkName&&{SdkName:r.SdkName}),void 0!==r.Session&&null!==r.Session&&{Session:Yc(r.Session)}),void 0!==r.Timestamp&&null!==r.Timestamp&&{Timestamp:r.Timestamp}),e))},{})}var Rc,Mc,Uc,Dc,Lc=function(r,e){return Ei(void 0,void 0,void 0,function(){var t,n;return Ai(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:Zc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Fc=function(r,e){return Ei(void 0,void 0,void 0,function(){var t,n;return Ai(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:Zc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},jc=function(r,e){return Ei(void 0,void 0,void 0,function(){var t,n;return Ai(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:Zc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Bc=function(r,e){return Ei(void 0,void 0,void 0,function(){var t,n;return Ai(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:Zc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},zc=function(r,e){return Ei(void 0,void 0,void 0,function(){var t,n;return Ai(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:Zc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Vc=function(r,e){return Ei(void 0,void 0,void 0,function(){var t,n;return Ai(this,function(e){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:Zc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},qc=function(r,e){return Ei(void 0,void 0,void 0,function(){var t,n;return Ai(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:Zc(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Kc=function(e,t){return _i(_i({},void 0!==e.UserAttributes&&null!==e.UserAttributes&&{UserAttributes:Wc(e.UserAttributes)}),void 0!==e.UserId&&null!==e.UserId&&{UserId:e.UserId})},Hc=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Ii(t,2),t=n[0];return null===(n=n[1])?e:_i(_i({},e),((e={})[t]=n,e))},{})},Gc=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Ii(t,2),t=n[0];return null===(n=n[1])?e:_i(_i({},e),((e={})[t]=_i(_i({},void 0!==n.Endpoint&&null!==n.Endpoint&&{Endpoint:$c(n.Endpoint)}),void 0!==n.Events&&null!==n.Events&&{Events:Nc(n.Events)}),e))},{})},Wc=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Ii(t,2),t=n[0];return null===(n=n[1])?e:_i(_i({},e),((e={})[t]=n.filter(function(e){return null!=e}).map(function(e){return null===e?null:e}),e))},{})},$c=function(e,t){return _i(_i(_i(_i(_i(_i(_i(_i(_i(_i(_i({},void 0!==e.Address&&null!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:Wc(e.Attributes)}),void 0!==e.ChannelType&&null!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&null!==e.Demographic&&{Demographic:Oc(e.Demographic)}),void 0!==e.EffectiveDate&&null!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&null!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&null!==e.Location&&{Location:xc(e.Location)}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:Hc(e.Metrics)}),void 0!==e.OptOut&&null!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&null!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&null!==e.User&&{User:Kc(e.User)})},Yc=function(e,t){return _i(_i(_i(_i({},void 0!==e.Duration&&null!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&null!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&null!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&null!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},Jc=function(e,t){return Object.entries(e).reduce(function(e,t){var n,r=Ii(t,2),t=r[0];return null===(r=r[1])?e:_i(_i({},e),((e={})[t]={EndpointItemResponse:void 0!==(t=r).EndpointItemResponse&&null!==t.EndpointItemResponse?{Message:void 0!==(r=t.EndpointItemResponse).Message&&null!==r.Message?r.Message:void 0,StatusCode:void 0!==r.StatusCode&&null!==r.StatusCode?r.StatusCode:void 0}:void 0,EventsItemResponse:void 0!==t.EventsItemResponse&&null!==t.EventsItemResponse?(n=t.EventsItemResponse,Object.entries(n).reduce(function(e,t){var n=Ii(t,2),t=n[0];return null===(n=n[1])?e:_i(_i({},e),((e={})[t]={Message:void 0!==n.Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0},e))},{})):void 0},e))},{})},Zc=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Xc=function(e,t){return o=r=t,((n=void 0===(n=e)?new Uint8Array:n)instanceof Uint8Array?Promise.resolve(n):o.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return r.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o},Qc=function(e,t){function n(e){return 0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},el={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},tl={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function nl(t,n,r){return{applyToStack:function(e){var i,a,o,s;e.add((i=t,a=r,function(o,e){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return[4,o(r)];case 1:return t=e.sent().response,[4,a(t,i)];case 2:return n=e.sent(),[2,{response:t,output:n}]}})})}}),el),e.add((o=t,s=n,function(r,e){return function(n){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return[4,s(n.input,o)];case 1:return t=e.sent(),[2,r(j(j({},n),{request:t}))]}})})}}),tl)}}}(Rc=Rc||{}).filterSensitiveLog=function(e){return _i({},e)},(Mc=Mc||{}).filterSensitiveLog=function(e){return _i({},e)},(Uc=Uc||{}).filterSensitiveLog=function(e){return _i({},e)},(Dc=Dc||{}).filterSensitiveLog=function(e){return _i({},e)},(hl||{}).filterSensitiveLog=function(e){return _i({},e)},(vl=vl||{}).filterSensitiveLog=function(e){return _i({},e)},(Xl||{}).filterSensitiveLog=function(e){return _i({},e)};var rl,ol=(Ci(il,rl=vt),il.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"PinpointClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:Rc.filterSensitiveLog,outputFilterSensitiveLog:Mc.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},il.prototype.serialize=function(e,t){return u=e,c=t,Ei(void 0,void 0,void 0,function(){var n,r,o,i,a,s;return Ai(this,function(e){switch(e.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/events",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((a=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return r=r.replace("{ApplicationId}",yc(a)),void 0===(o=void 0!==u.EventsRequest?(t=u.EventsRequest,_i({},void 0!==t.BatchItem&&null!==t.BatchItem&&{BatchItem:Gc(t.BatchItem)})):o)&&(o={}),o=JSON.stringify(o),[4,c.endpoint()];case 1:return s=e.sent(),i=s.hostname,a=void 0===(a=s.protocol)?"https":a,s=s.port,[2,new Ga({protocol:a,hostname:i,port:s,method:"POST",headers:n,path:r,body:o})]}var t})});var u,c},il.prototype.deserialize=function(e,t){return o=e,i=t,Ei(void 0,void 0,void 0,function(){var n,r;return Ai(this,function(e){switch(e.label){case 0:return 202!==o.statusCode&&300<=o.statusCode?[2,(f=o,h=i,Ei(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d;return Ai(this,function(e){switch(e.label){case 0:return t=[_i({},f)],d={},[4,Xc(f.body,h)];case 1:switch(l=_i.apply(void 0,t.concat([(d.body=e.sent(),d)])),p="UnknownError",p=Qc(f,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,Lc(l)];case 3:return n=_i.apply(void 0,[_i.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 4:return o=[{}],[4,Fc(l)];case 5:return n=_i.apply(void 0,[_i.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 6:return i=[{}],[4,jc(l)];case 7:return n=_i.apply(void 0,[_i.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 8:return a=[{}],[4,Bc(l)];case 9:return n=_i.apply(void 0,[_i.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 10:return s=[{}],[4,zc(l)];case 11:return n=_i.apply(void 0,[_i.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 12:return u=[{}],[4,Vc(l)];case 13:return n=_i.apply(void 0,[_i.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 14:return c=[{}],[4,qc(l)];case 15:return n=_i.apply(void 0,[_i.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=_i(_i({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:Zc(f)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})}))]:(n={$metadata:Zc(o),EventsResponse:void 0},[4,Xc(o.body,i)]);case 1:return r=e.sent(),n.EventsResponse={Results:void 0!==(t=r).Results&&null!==t.Results?Jc(t.Results):void 0},[2,Promise.resolve(n)]}var t,f,h})});var o,i},il);function il(e){var t=rl.call(this)||this;return t.input=e,t}var al,sl=(Ci(ul,al=vt),ul.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"PinpointClient",commandName:"UpdateEndpointCommand",inputFilterSensitiveLog:Uc.filterSensitiveLog,outputFilterSensitiveLog:Dc.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},ul.prototype.serialize=function(e,t){return u=e,c=t,Ei(void 0,void 0,void 0,function(){var n,r,o,i,a,s;return Ai(this,function(e){switch(e.label){case 0:if(n={"content-type":"application/json"},r="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===u.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((a=u.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(r=r.replace("{ApplicationId}",yc(a)),void 0===u.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((a=u.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return r=r.replace("{EndpointId}",yc(a)),void 0===(o=void 0!==u.EndpointRequest?(t=u.EndpointRequest,_i(_i(_i(_i(_i(_i(_i(_i(_i(_i(_i({},void 0!==t.Address&&null!==t.Address&&{Address:t.Address}),void 0!==t.Attributes&&null!==t.Attributes&&{Attributes:Wc(t.Attributes)}),void 0!==t.ChannelType&&null!==t.ChannelType&&{ChannelType:t.ChannelType}),void 0!==t.Demographic&&null!==t.Demographic&&{Demographic:Oc(t.Demographic)}),void 0!==t.EffectiveDate&&null!==t.EffectiveDate&&{EffectiveDate:t.EffectiveDate}),void 0!==t.EndpointStatus&&null!==t.EndpointStatus&&{EndpointStatus:t.EndpointStatus}),void 0!==t.Location&&null!==t.Location&&{Location:xc(t.Location)}),void 0!==t.Metrics&&null!==t.Metrics&&{Metrics:Hc(t.Metrics)}),void 0!==t.OptOut&&null!==t.OptOut&&{OptOut:t.OptOut}),void 0!==t.RequestId&&null!==t.RequestId&&{RequestId:t.RequestId}),void 0!==t.User&&null!==t.User&&{User:Kc(t.User)})):o)&&(o={}),o=JSON.stringify(o),[4,c.endpoint()];case 1:return s=e.sent(),i=s.hostname,a=void 0===(a=s.protocol)?"https":a,s=s.port,[2,new Ga({protocol:a,hostname:i,port:s,method:"PUT",headers:n,path:r,body:o})]}var t})});var u,c},ul.prototype.deserialize=function(e,t){return o=e,i=t,Ei(void 0,void 0,void 0,function(){var n,r;return Ai(this,function(e){switch(e.label){case 0:return 202!==o.statusCode&&300<=o.statusCode?[2,(f=o,h=i,Ei(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d;return Ai(this,function(e){switch(e.label){case 0:return t=[_i({},f)],d={},[4,Xc(f.body,h)];case 1:switch(l=_i.apply(void 0,t.concat([(d.body=e.sent(),d)])),p="UnknownError",p=Qc(f,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,Lc(l)];case 3:return n=_i.apply(void 0,[_i.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 4:return o=[{}],[4,Fc(l)];case 5:return n=_i.apply(void 0,[_i.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 6:return i=[{}],[4,jc(l)];case 7:return n=_i.apply(void 0,[_i.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 8:return a=[{}],[4,Bc(l)];case 9:return n=_i.apply(void 0,[_i.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 10:return s=[{}],[4,zc(l)];case 11:return n=_i.apply(void 0,[_i.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 12:return u=[{}],[4,Vc(l)];case 13:return n=_i.apply(void 0,[_i.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 14:return c=[{}],[4,qc(l)];case 15:return n=_i.apply(void 0,[_i.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:Zc(f)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=_i(_i({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:Zc(f)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})}))]:(n={$metadata:Zc(o),MessageBody:void 0},[4,Xc(o.body,i)]);case 1:return r=e.sent(),n.MessageBody={Message:void 0!==(t=r).Message&&null!==t.Message?t.Message:void 0,RequestID:void 0!==t.RequestID&&null!==t.RequestID?t.RequestID:void 0},[2,Promise.resolve(n)]}var t,f,h})});var o,i},ul);function ul(e){var t=al.call(this)||this;return t.input=e,t}var cl={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new _.StorageHelper).getStorage()};function ll(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function pl(){return(new Date).getTime()}function dl(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}var fl=new _.ConsoleLogger("StorageCache"),hl=(gl.prototype.getModuleName=function(){return"Cache"},gl.prototype.checkConfig=function(){dl(this.config.capacityInBytes)||(fl.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=cl.capacityInBytes),dl(this.config.itemMaxSize)||(fl.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=cl.itemMaxSize),dl(this.config.defaultTTL)||(fl.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=cl.defaultTTL),dl(this.config.defaultPriority)||(fl.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=cl.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(fl.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=cl.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(fl.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=cl.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(fl.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=cl.warningThreshold),5242880<this.config.capacityInBytes&&(fl.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=cl.capacityInBytes)},gl.prototype.fillCacheItem=function(e,t,n){return(t={key:e,data:t,timestamp:pl(),visitedTime:pl(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0}).byteSize=ll(JSON.stringify(t)),t.byteSize=ll(JSON.stringify(t)),t},gl.prototype.configure=function(e){return e&&(e.keyPrefix&&fl.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},gl);function gl(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var ml,yl,vl=(ml=function(e,t){return(ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ml(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),bl=new _.ConsoleLogger("Cache");function wl(e){var t=this,e=e?Object.assign({},cl,e):cl;return(t=yl.call(this,e)||this).config.storage=e.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var Sl=(vl(wl,yl=hl),wl.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},wl.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},wl.prototype._refreshItem=function(e,t){return e.visitedTime=pl(),this.config.storage.setItem(t,JSON.stringify(e)),e},wl.prototype._isExpired=function(e){return e=this.config.storage.getItem(e),e=JSON.parse(e),pl()>=e.expires},wl.prototype._removeItem=function(e,t){t=t||JSON.parse(this.config.storage.getItem(e)).byteSize,this._decreaseCurSizeInBytes(t),this.config.storage.removeItem(e)},wl.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),bl.error("Failed to set item "+e)}},wl.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes;return(e=(1-this.config.warningThreshold)*this.config.capacityInBytes)<t?t:e},wl.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},wl.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},wl.prototype._popOutItems=function(e,t){for(var n=[],r=t,o=0;o<e.length;o+=1){var i=this.config.storage.getItem(e[o]);null!=i&&(i=JSON.parse(i),n.push(i))}for(n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1}),o=0;o<n.length;o+=1)if(this._removeItem(n[o].key,n[o].byteSize),(r-=n[o].byteSize)<=0)return},wl.prototype.setItem=function(e,t,n){bl.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t)if((n={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+pl()}).priority<1||5<n.priority)bl.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else if((n=this.fillCacheItem(r,t,n)).byteSize>this.config.itemMaxSize)bl.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var o,i,a=this.config.storage.getItem(r);a&&this._removeItem(r,JSON.parse(a).byteSize),this._isCacheFull(n.byteSize)&&(o=this._findValidKeys(),this._isCacheFull(n.byteSize)&&(i=this._sizeToPop(n.byteSize),this._popOutItems(o,i))),this._setItem(r,n)}catch(e){bl.warn("setItem failed! "+e)}else bl.warn("The value of item should not be undefined!");else bl.warn("Invalid key: should not be empty or 'CurSize'")},wl.prototype.getItem=function(e,t){bl.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return bl.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var o=JSON.parse(n);return(o=this._refreshItem(o,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var i=t.callback();return null!==i&&this.setItem(e,i,t),i}return null}catch(e){return bl.warn("getItem failed! "+e),null}},wl.prototype.removeItem=function(e){if(bl.log("Remove item: key is "+e),(e=this.config.keyPrefix+e)!==this.config.keyPrefix&&e!==this.cacheCurSizeKey)try{var t=this.config.storage.getItem(e);t&&this._removeItem(e,JSON.parse(t).byteSize)}catch(e){bl.warn("removeItem failed! "+e)}},wl.prototype.clear=function(){bl.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){bl.warn("clear failed! "+e)}},wl.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},wl.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},wl.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==cl.keyPrefix||(bl.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=pl.toString()),new wl(e)},new wl);_.Amplify.register(Sl);function Cl(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var _l=new _.ConsoleLogger("EventsBuffer"),El=[429,500],Al=[202],Il=(kl.prototype.push=function(e){if(this._buffer>this._config.bufferSize)return _l.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var t=((t={})[e.params.event.eventId]=e,t);this._buffer.push(t)},kl.prototype.pause=function(){this._pause=!0},kl.prototype.resume=function(){this._pause=!1},kl.prototype.updateClient=function(e){this._client=e},kl.prototype.flush=function(){this._flush=!0},kl.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},kl.prototype._sendBatch=function(){var e,t=this._buffer.length;this._flush&&!t&&clearInterval(this._interval),!this._pause&&t&&(e=this._config.flushSize,t=Math.min(e,t),t=this._buffer.splice(0,t),this._putEvents(t))},kl.prototype._putEvents=function(p){return e=this,u=function(){var t,n,r,o,i,a,s,u,c,e;return o=this,i=function(e){switch(e.label){case 0:t=this._bufferToMap(p),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),n=new ol(n),[4,this._client.send(n)];case 2:return r=e.sent(),this._processPutEventsSuccessResponse(r,t),[3,4];case 3:return r=e.sent(),[2,this._handlePutEventsFailure(r,t)];case 4:return[2]}},c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},e={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function l(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,s&&(u=2&t[0]?s.return:t[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,t[1])).done)return u;switch(s=0,(t=u?[2&t[0],u.value]:t)[0]){case 0:case 1:u=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,s=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(u=0<(u=c.trys).length&&u[u.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){c.label=t[1];break}if(6===t[0]&&c.label<u[1]){c.label=u[1],u=t;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(t);break}u[2]&&c.ops.pop(),c.trys.pop();continue}t=i.call(o,c)}catch(e){t=[6,e],s=0}finally{a=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(s=(s=a=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())});var e,a,s,u},kl.prototype._generateBatchEventParams=function(e){var c={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=(u=e.params).event,n=u.timestamp,r=u.config,o=t.name,i=t.attributes,a=t.metrics,s=t.eventId,e=t.session,u=r.appId,t=r.endpointId,r=c.EventsRequest.BatchItem;c.ApplicationId=c.ApplicationId||u,r[t]||(r[t]={Endpoint:{},Events:{}}),r[t].Events[s]={EventType:o,Timestamp:new Date(n).toISOString(),Attributes:i,Metrics:a,Session:e}}),c},kl.prototype._handlePutEventsFailure=function(e,t){_l.debug("_putEvents Failed: ",e),e=e.$metadata&&e.$metadata.httpStatusCode,El.includes(e)&&(t=Object.values(t),this._retry(t))},kl.prototype._processPutEventsSuccessResponse=function(e,s){var e=e.EventsResponse.Results,u=[];Object.entries(e).forEach(function(e){var a=(e=Cl(e,2))[0],e=e[1].EventsItemResponse;Object.entries(e).forEach(function(e){var t=(i=Cl(e,2))[0],n=i[1],r=n.StatusCode,o=n.Message,e=s[t],i={EventsResponse:{Results:((i={})[a]={EventsItemResponse:((n={})[t]={StatusCode:r,Message:o},n)},i)}};if(Al.includes(r))e.handlers.resolve(i);else{if(!El.includes(r))return r=e.params.event.name,_l.error("event "+t+" : "+r+" failed with error: "+o),e.handlers.reject(i);u.push(e)}})}),u.length&&this._retry(u)},kl.prototype._retry=function(e){var o=[];e.forEach(function(e){var t=e.params,n=(r=t.event).eventId,r=r.name;if(0<t.resendLimit--)return _l.debug("resending event "+n+" : "+r+" with "+t.resendLimit+" retry attempts remaining"),void o.push(((t={})[n]=e,t));_l.debug("no retry attempts remaining for event "+n+" : "+r)}),(e=this._buffer).unshift.apply(e,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Cl(arguments[t]));return e}(o))},kl.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=Cl(Object.entries(t),1),n=(t=Cl(n[0],2))[0],t=t[1];return e[n]=t,e},{})},kl);function kl(e,t){this._pause=!1,this._flush=!1,_l.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function Tl(e,t){_.Hub.dispatch("analytics",{event:e,data:t},"Analytics",Rl)}function Pl(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Ol(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function xl(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var Nl=function(){return(Nl=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Rl="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ml=new _.ConsoleLogger("AWSPinpointProvider"),Ul=[429,500],Dl=[202],Ll="_update_endpoint",Fl="_session.stop",jl="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,Bl=(zl.prototype.getCategory=function(){return zl.category},zl.prototype.getProviderName=function(){return zl.providerName},zl.prototype.configure=function(e){var t=this;return Ml.debug("configure Analytics",e),this._config=Object.assign({},this._config,e||{}),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled?this._config.endpointId?Tl("pinpointProvider_configured",null):(e=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(e).then(function(e){Ml.debug("setting endpoint id from the cache",e),t._config.endpointId=e,Tl("pinpointProvider_configured",null)}).catch(function(e){Ml.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},zl.prototype.record=function(n,r){return Pl(this,void 0,void 0,function(){var t;return Ol(this,function(e){switch(e.label){case 0:return Ml.debug("_public record",n),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),t=(new Date).getTime(),this._generateSession(n),n.event.eventId=h.v1(),Object.assign(n,{timestamp:t,config:this._config}),n.event.immediate?[2,this._send(n,r)]:(this._putToBuffer(n,r),[2])):(Ml.debug("cannot send events without credentials, applicationId or region"),[2,r.reject(new Error("No credentials, applicationId or region"))])}})})},zl.prototype._sendEndpointUpdate=function(n){return Pl(this,void 0,void 0,function(){var t;return Ol(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},zl.prototype._putToBuffer=function(e,t){e.event.name!==Ll?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},zl.prototype._generateSession=function(e){this._sessionId=this._sessionId||h.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=h.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case Fl:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||h.v1(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||h.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},zl.prototype._send=function(t,n){return Pl(this,void 0,void 0,function(){return Ol(this,function(e){switch(t.event.name){case Ll:return[2,this._updateEndpoint({params:t,handlers:n})];case Fl:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},zl.prototype._generateBatchItemContext=function(e){var t=e.event,n=e.timestamp,r=e.config,o=t.name,i=t.attributes,a=t.metrics,s=t.eventId,u=t.session,c=r.appId,e=r.endpointId,t={ApplicationId:c,EventsRequest:{BatchItem:{}}};return(r={Endpoint:{}}).Events=((c={})[s]={EventType:o,Timestamp:new Date(n).toISOString(),Attributes:i,Metrics:a,Session:u},c),t.EventsRequest.BatchItem[e]=r,t},zl.prototype._pinpointPutEvents=function(i,a){return Pl(this,void 0,void 0,function(){var t,n,r,o;return Ol(this,function(e){switch(e.label){case 0:t=i.event.eventId,n=i.config.endpointId,r=this._generateBatchItemContext(i),r=new ol(r),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(r)];case 2:return o=e.sent(),r=o.EventsResponse.Results[n].EventsItemResponse[t],n=r.StatusCode,r=r.Message,Dl.includes(n)?(Ml.debug("record event success. ",o),[2,a.resolve(o)]):Ul.includes(n)?(this._retry(i,a),[3,4]):(Ml.error("Event "+t+" is not accepted, the error is "+r),[2,a.reject(o)]);case 3:return o=e.sent(),this._eventError(o),[2,a.reject(o)];case 4:return[2]}})})},zl.prototype._pinpointSendStopSession=function(e,t){if(jl){var n=this._generateBatchItemContext(e),r=this._config.region,o=n.ApplicationId,i=n.EventsRequest,n={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},o="https://pinpoint."+r+".amazonaws.com/v1/apps/"+o+"/events/legacy",i=JSON.stringify(i),r=_.Signer.signUrl({url:o,body:i,method:"POST"},n,{region:r,service:"mobiletargeting"},null);return navigator.sendBeacon(r,i)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},zl.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(Ml.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Ml.debug("retry times used up for event "+e.eventName)},zl.prototype._updateEndpoint=function(s){return Pl(this,void 0,void 0,function(){var t,n,r,o,i,a;return Ol(this,function(e){switch(e.label){case 0:a=s.params,t=s.handlers,n=a.config,o=a.event,r=n.appId,a=n.endpointId,o=this._endpointRequest(n,_.JS.transferKeyToLowerCase(o,[],["attributes","userAttributes","Attributes","UserAttributes"])),a={ApplicationId:r,EndpointId:a,EndpointRequest:o},e.label=1;case 1:return e.trys.push([1,3,,4]),o=new sl(a),[4,this.pinpointClient.send(o)];case 2:return i=e.sent(),Ml.debug("updateEndpoint success",i),this._endpointGenerating=!1,this._resumeBuffer(),t.resolve(i),[2];case 3:return i=e.sent(),a={err:i,update_params:a,endpointObject:s},[2,this._handleEndpointUpdateFailure(a)];case 4:return[2]}})})},zl.prototype._handleEndpointUpdateFailure=function(o){return Pl(this,void 0,void 0,function(){var t,n,r;return Ol(this,function(e){return t=o.err,n=o.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,Ml.debug("updateEndpoint error",t),403===r?[2,this._handleEndpointUpdateForbidden(o)]:Ul.includes(r)?[2,this._retryEndpointUpdate(n,!0)]:(Ml.error("updateEndpoint failed",t),n.handlers.reject(t),[2])})})},zl.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,e=t.retryable;if("ExpiredTokenException"!==r&&!e)return n.handlers.reject(t);this._retryEndpointUpdate(n)},zl.prototype._retryEndpointUpdate=function(e,t){Ml.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return Ml.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Ml.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Ml.error("Initial endpoint update failed. ")},zl.prototype._initClients=function(r){return Pl(this,void 0,void 0,function(){var t,n;return Ol(this,function(e){return Ml.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?Ml.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,Ml.debug("init clients with credentials",r),this.pinpointClient=new Tc({region:n,credentials:r,customUserAgent:_.getAmplifyUserAgent()}),this.pinpointClient.middlewareStack.addRelativeTo(function(t){return function(e){return delete e.request.headers["amz-sdk-invocation-id"],delete e.request.headers["amz-sdk-request"],t(e)}},{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},zl.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof Il},zl.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new Il(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},zl.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},zl.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},zl.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},zl.prototype._customizePinpointClientReq=function(){},zl.prototype._getEndpointId=function(n){return Pl(this,void 0,void 0,function(){var t;return Ol(this,function(e){switch(e.label){case 0:return[4,Sl.getItem(n)];case 1:return t=e.sent(),Ml.debug("endpointId from cache",t,"type",typeof t),t||(t=h.v1(),Sl.setItem(n,t)),[2,t]}})})},zl.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},o=e.clientContext||{},i=e.endpoint||{},e={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},o=(o.clientId,o.appTitle,o.appVersionName,o.appVersionCode,o.appPackageName,xl(o,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),r=t.address?"android"===r.platform?"GCM":"APNS":void 0,t=((t=Nl(Nl(Nl({channelType:r,requestId:h.v1(),effectiveDate:(new Date).toISOString()},i),t),{attributes:Nl(Nl({},i.attributes),t.attributes),demographic:Nl(Nl(Nl(Nl({},e),o),i.demographic),t.demographic),location:Nl(Nl({},i.location),t.location),metrics:Nl(Nl({},i.metrics),t.metrics),user:{userId:t.userId||i.userId||n.identityId,userAttributes:Nl(Nl({},i.userAttributes),t.userAttributes)}})).userId,t.userAttributes,t.name,t.session,t.eventId,t.immediate,xl(t,["userId","userAttributes","name","session","eventId","immediate"]));return _.JS.transferKeyToUpperCase(t,[],["metrics","userAttributes","attributes"])},zl.prototype._eventError=function(e){Ml.error("record event failed.",e),Ml.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},zl.prototype._getCredentials=function(){return Pl(this,void 0,void 0,function(){var t;return Ol(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,_.Credentials.get()];case 1:return(t=e.sent())?(Ml.debug("set credentials for analytics",t),[2,_.Credentials.shear(t)]):[2,null];case 2:return t=e.sent(),Ml.debug("ensure credentials error",t),[2,null];case 3:return[2]}})})},zl.category="Analytics",zl.providerName="AWSPinpoint",zl);function zl(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=_.ClientDevice.clientInfo()}function Vl(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(arguments[t]));return e}var ql=[],Kl=(Hl.add=function(e,t,n){Gl(e,t).set(n)},Hl.remove=function(e,t){Gl(e,t).remove()},Hl.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,Vl(e)))}},Hl.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},Hl);function Hl(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function Gl(t,n){var e=ql.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new Kl(t,n),ql.push(e)),e}function Wl(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function $l(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Yl=new _.ConsoleLogger("PageViewTracker"),Jl="aws-amplify-analytics-prevUrl",Zl={enable:!1,provider:"AWSPinpoint",getUrl:function(){return _.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},Xl=(Ql.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},Ql.prototype._isSameUrl=function(){return sessionStorage.getItem(Jl)===this._config.getUrl()&&(Yl.debug("the url is same"),!0)},Ql.prototype._pageViewTrackDefault=function(){return Wl(this,void 0,void 0,function(){var t,n;return $l(this,function(e){switch(e.label){case 0:return _.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Yl.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Yl.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Jl,t)),[2]}})})},Ql.prototype._trackFunc=function(){return Wl(this,void 0,void 0,function(){var t,n;return $l(this,function(e){switch(e.label){case 0:return _.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Yl.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Yl.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Jl,t)),[2]}})})},Ql.prototype._pageViewTrackSPA=function(){_.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(Kl.add(history,"pushState",this._trackFunc),Kl.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(Kl.remove(history,"pushState"),Kl.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):Yl.debug("not in the supported web enviroment")},Ql);function Ql(e,t){Yl.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},Zl,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var ep=(vl=_.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null)?vl.matches||vl.matchesSelector||vl.webkitMatchesSelector||vl.mozMatchesSelector||vl.msMatchesSelector||vl.oMatchesSelector:null;function tp(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||np(e,t);if("length"in t)for(var n,r=0;n=t[r];r++)if(e===n||np(e,n))return 1}}function np(e,t){if("string"!=typeof t)return!1;if(ep)return ep.call(e,t);for(var n,r=e.parentNode.querySelectorAll(t),o=0;n=r[o];o++)if(n===e)return!0;return!1}function rp(e,t,i,a,s){function n(e){var t;if(s.composed&&"function"==typeof e.composedPath)for(var n,r=e.composedPath(),o=0;n=r[o];o++)1===n.nodeType&&tp(n,i)&&(t=n);else t=function(n,e,t){if(void 0===t&&(t=!1),n&&1===n.nodeType&&e)for(var r,o=(t?[n]:[]).concat(function(){for(var e=[],t=n;t&&t.parentNode&&1===t.parentNode.nodeType;)t=t.parentNode,e.push(t);return e}()),i=0;r=o[i];i++)if(tp(r,e))return r}(e.target,i,!0);t&&a.call(t,e,t)}return e.addEventListener(t,n,(s=void 0===s?{}:s).useCapture),{destroy:function(){e.removeEventListener(t,n,s.useCapture)}}}var op=new _.ConsoleLogger("EventTracker"),ip={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},hl=(ap.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=rp(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},ap.prototype._trackFunc=function(f,h){return e=this,u=function(){var t,n,r,o,i,a,s,u,c,l,p,e;return a=this,s=function(e){switch(e.label){case 0:return t={},n=h.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=h.getAttribute(this._config.selectorPrefix+"name"),(o=h.getAttribute(this._config.selectorPrefix+"attrs"))&&o.split(/\s*,\s*/).forEach(function(e){e=e.trim().split(/\s*:\s*/),t[e[0]]=e[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return i=e.sent(),[3,3];case 2:i=this._config.attributes,e.label=3;case 3:return i=Object.assign({type:f.type,target:f.target.localName+" with id "+f.target.id},i,t),op.debug("events needed to be recorded",n),op.debug("attributes needed to be attached",t),n.indexOf(f.type)<0?op.debug("event "+f.type+" is not selected to be recorded"):this._tracker({name:r||"event",attributes:i},this._config.provider).catch(function(e){op.debug("Failed to record the "+f.type+" event', "+e)}),[2]}},p={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},e={next:d(0),throw:d(1),return:d(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function d(t){return function(e){return function(t){if(u)throw new TypeError("Generator is already executing.");for(;p;)try{if(u=1,c&&(l=2&t[0]?c.return:t[0]?c.throw||((l=c.return)&&l.call(c),0):c.next)&&!(l=l.call(c,t[1])).done)return l;switch(c=0,(t=l?[2&t[0],l.value]:t)[0]){case 0:case 1:l=t;break;case 4:return p.label++,{value:t[1],done:!1};case 5:p.label++,c=t[1],t=[0];continue;case 7:t=p.ops.pop(),p.trys.pop();continue;default:if(!(l=0<(l=p.trys).length&&l[l.length-1])&&(6===t[0]||2===t[0])){p=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){p.label=t[1];break}if(6===t[0]&&p.label<l[1]){p.label=l[1],l=t;break}if(l&&p.label<l[2]){p.label=l[2],p.ops.push(t);break}l[2]&&p.ops.pop(),p.trys.pop();continue}t=s.call(a,p)}catch(e){t=[6,e],c=0}finally{u=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(s=(s=a=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())});var e,a,s,u},ap);function ap(e,t){_.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},ip,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),op.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):op.debug("not in the supported web environment")}function sp(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function up(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var cp=new _.ConsoleLogger("SessionTracker"),lp={enable:!1,provider:"AWSPinpoint"},pp=!1,vl=(dp.prototype._envCheck=function(){if(!_.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return cp.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return cp.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},dp.prototype._trackFunc=function(){return sp(this,void 0,void 0,function(){var t;return up(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:t},this._config.provider).catch(function(e){cp.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){cp.debug("record session start event failed.",e)}),[2]}})})},dp.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){e=Object.assign({},e),t._tracker({name:"_session.stop",attributes:e,immediate:!0},t._config.provider).catch(function(e){cp.debug("record session stop event failed.",e)})})},dp.prototype._sendInitialEvent=function(){return sp(this,void 0,void 0,function(){var t;return up(this,function(e){switch(e.label){case 0:return pp?(cp.debug("the start session has been sent when the page is loaded"),[2]):(pp=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){cp.debug("record session start event failed.",e)}),[2]}})})},dp.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},dp);function dp(e,t){this._config=Object.assign({},lp,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}function fp(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function hp(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var gp=function(){return(gp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mp=new _.ConsoleLogger("AnalyticsClass"),yp="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",vp={pageView:Xl,event:hl,session:vl},bp=null,vl=(wp.prototype.getModuleName=function(){return"Analytics"},wp.prototype.configure=function(e){var n=this;if(!e)return this._config;mp.debug("configure Analytics",e);var t=_.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(gp({disabled:n._config.disabled,autoSessionRecord:n._config.autoSessionRecord},t))}),0===this._pluggables.length&&this.addPluggable(new Bl),_.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",yp),mp.debug("current configuration",this._config),this._config},wp.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,t=gp({disabled:this._config.disabled},t);return e.configure(t),t}},wp.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return mp.debug("No plugin found with providerName",e),null},wp.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;t===this._pluggables.length?mp.debug("No plugin found with providerName",e):this._pluggables.splice(t,t+1)},wp.prototype.disable=function(){this._disabled=!0},wp.prototype.enable=function(){this._disabled=!1},wp.prototype.startSession=function(n){return fp(this,void 0,void 0,function(){var t;return hp(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},wp.prototype.stopSession=function(n){return fp(this,void 0,void 0,function(){var t;return hp(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},wp.prototype.record=function(n,r,o){return fp(this,void 0,void 0,function(){var t;return hp(this,function(e){return t="string"==typeof n?{event:{name:n,attributes:r,metrics:o},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},wp.prototype.updateEndpoint=function(n,r){return fp(this,void 0,void 0,function(){var t;return hp(this,function(e){return t=gp(gp({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},wp.prototype._sendEvent=function(r){var e=this;if(this._disabled)return mp.debug("Analytics has been disabled"),Promise.resolve();var o=r.provider||"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===o&&e.record(r,{resolve:t,reject:n})})})},wp.prototype.autoTrack=function(e,t){var n;vp[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new vp[e](this.record,t)):mp.debug("invalid tracker type")},wp);function wp(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(bp=this).record=this.record.bind(this),_.Hub.listen("auth",Ep),_.Hub.listen("storage",Ep),_.Hub.listen("analytics",Ep)}var Sp=!1,Cp=!1,_p=!1,Ep=function(e){var t=e.channel,n=e.payload;switch(mp.debug("on hub capsule "+t,n),t){case"auth":Ip(n);break;case"storage":Ap(n);break;case"analytics":kp(n)}},Ap=function(e){var e=(t=e.data).attrs,t=t.metrics;e&&_p&&bp.record({name:"Storage",attributes:e,metrics:t}).catch(function(e){mp.debug("Failed to send the storage event automatically",e)})},Ip=function(e){if(e=e.event){var t=function(n){return fp(void 0,void 0,void 0,function(){var t;return hp(this,function(e){switch(e.label){case 0:if(!Cp||!_p)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,bp.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),mp.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(e){case"signIn":return t("sign_in");case"signUp":return t("sign_up");case"signOut":return t("sign_out");case"signIn_failure":return t("auth_fail");case"configured":Cp=!0,_p&&Tp()}}},kp=function(e){(e=e.event)&&"pinpointProvider_configured"===e&&(_p=!0,Cp&&_p&&Tp())},Tp=function(){var e=bp.configure();!Sp&&e.autoSessionRecord&&(bp.updateEndpoint({immediate:!0}).catch(function(e){mp.debug("Failed to update the endpoint",e)}),Sp=!0),bp.autoTrack("session",{enable:e.autoSessionRecord})},Pp=new vl;_.Amplify.register(Pp);for(var Op={},xp={},Np=0;Np<256;Np++){var Rp=Np.toString(16).toLowerCase();1===Rp.length&&(Rp="0"+Rp),Op[Np]=Rp,xp[Rp]=Np}function Mp(e){for(var t="",n=0;n<e.byteLength;n++)t+=Op[e[n]];return t}var Up=(Dp.fromNumber=function(e){if(0x8000000000000000<e||e<-0x8000000000000000)throw new Error(e+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),n=7,r=Math.abs(Math.round(e));-1<n&&0<r;n--,r/=256)t[n]=r;return e<0&&Lp(t),new Dp(t)},Dp.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&Lp(e),parseInt(Mp(e),16)*(t?-1:1)},Dp.prototype.toString=function(){return String(this.valueOf())},Dp);function Dp(e){if(8!==(this.bytes=e).byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}function Lp(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;-1<t&&(e[t]++,0===e[t]);t--);}var Fp=(jp.prototype.format=function(e){var t,n,r,o,i=[];try{for(var a=G(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value,c=this.fromUtf8(u);i.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var l=new Uint8Array(i.reduce(function(e,t){return e+t.byteLength},0)),p=0;try{for(var d=G(i),f=d.next();!f.done;f=d.next()){var h=f.value;l.set(h,p),p+=h.byteLength}}catch(e){r={error:e}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return l},jp.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":return(n=new Uint8Array(9))[0]=5,n.set(e.value.bytes,1),n;case"binary":var r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(r.buffer);return o.set(e.value,3),o;case"string":return r=this.fromUtf8(e.value),(o=new DataView(new ArrayBuffer(3+r.byteLength))).setUint8(0,7),o.setUint16(1,r.byteLength,!1),(o=new Uint8Array(o.buffer)).set(r,3),o;case"timestamp":var i=new Uint8Array(9);return i[0]=8,i.set(Up.fromNumber(e.value.valueOf()).bytes,1),i;case"uuid":if(!Yp.test(e.value))throw new Error("Invalid UUID received: "+e.value);return(i=new Uint8Array(17))[0]=9,i.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in xp))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=xp[r]}return t}(e.value.replace(/\-/g,"")),1),i}},jp.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),o=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[o]={type:Bp,value:!0};break;case 1:t[o]={type:Bp,value:!1};break;case 2:t[o]={type:zp,value:e.getInt8(n++)};break;case 3:t[o]={type:Vp,value:e.getInt16(n,!1)},n+=2;break;case 4:t[o]={type:qp,value:e.getInt32(n,!1)},n+=4;break;case 5:t[o]={type:Kp,value:new Up(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var i=e.getUint16(n,!1);n+=2,t[o]={type:Hp,value:new Uint8Array(e.buffer,e.byteOffset+n,i)},n+=i;break;case 7:var a=e.getUint16(n,!1);n+=2,t[o]={type:Gp,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:t[o]={type:Wp,value:new Date(new Up(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:a=new Uint8Array(e.buffer,e.byteOffset+n,16),n+=16,t[o]={type:$p,value:Mp(a.subarray(0,4))+"-"+Mp(a.subarray(4,6))+"-"+Mp(a.subarray(6,8))+"-"+Mp(a.subarray(8,10))+"-"+Mp(a.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},jp);function jp(e,t){this.toUtf8=e,this.fromUtf8=t}(vl={})[vl.boolTrue=0]="boolTrue",vl[vl.boolFalse=1]="boolFalse",vl[vl.byte=2]="byte",vl[vl.short=3]="short",vl[vl.integer=4]="integer",vl[vl.long=5]="long",vl[vl.byteArray=6]="byteArray",vl[vl.string=7]="string",vl[vl.timestamp=8]="timestamp",vl[vl.uuid=9]="uuid";var Bp="boolean",zp="byte",Vp="short",qp="integer",Kp="long",Hp="binary",Gp="string",Wp="timestamp",$p="uuid",Yp=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Jp=(Zp.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),o=r.byteLength+n.byteLength+16,i=new Uint8Array(o),e=new DataView(i.buffer,i.byteOffset,i.byteLength),t=new l.Crc32;return e.setUint32(0,o,!1),e.setUint32(4,r.byteLength,!1),e.setUint32(8,t.update(i.subarray(0,8)).digest(),!1),i.set(r,12),i.set(n,r.byteLength+12),e.setUint32(o-4,t.update(i.subarray(8,o-4)).digest(),!1),i},Zp.prototype.unmarshall=function(e){var e=(t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var o=(s=new DataView(r,n,t)).getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");var i=s.getUint32(4,!1),a=s.getUint32(8,!1),e=s.getUint32(t-4,!1),s=(new l.Crc32).update(new Uint8Array(r,n,8));if(a!==s.digest())throw new Error("The prelude checksum specified in the message ("+a+") does not match the calculated CRC32 checksum ("+s.digest()+")");if(s.update(new Uint8Array(r,n+8,t-12)),e!==s.digest())throw new Error("The message checksum ("+s.digest()+") did not match the expected value of "+e);return{headers:new DataView(r,n+8+4,i),body:new Uint8Array(r,n+8+4+i,o-i-16)}}(e)).headers,t=t.body;return{headers:this.headerMarshaller.parse(e),body:t}},Zp.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},Zp);function Zp(e,t){this.headerMarshaller=new Fp(e,t)}var Xp=(Qp.prototype.deserialize=function(e,t){var a,s,u,c,l,n,p=e=(a=e,u=s=0,l=c=null,(n={})[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,o,i;return H(this,function(e){switch(e.label){case 0:t=a[Symbol.asyncIterator](),e.label=1;case 1:return[4,Y(t.next())];case 2:return o=e.sent(),n=o.value,o.done?s?[3,4]:[4,Y(void 0)]:[3,10];case 3:return[2,e.sent()];case 4:return s!==u?[3,7]:[4,Y(c)];case 5:return[4,e.sent()];case 6:return e.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Y(void 0)];case 9:return[2,e.sent()];case 10:i=n.length,r=0,e.label=11;case 11:if(!(r<i))return[3,15];if(!c){if(o=i-r,l=l||new Uint8Array(4),o=Math.min(4-u,o),l.set(n.slice(r,r+o),u),r+=o,(u+=o)<4)return[3,15];!function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);s=e,u=4,c=new Uint8Array(e),new DataView(c.buffer).setUint32(0,e,!1)}(new DataView(l.buffer).getUint32(0,!1)),l=null}return i=Math.min(s-u,i-r),c.set(n.slice(r,r+i),u),u+=i,r+=i,s&&s===u?[4,Y(c)]:[3,14];case 12:return[4,e.sent()];case 13:e.sent(),c=null,u=s=0,e.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},n),d={eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder};return(t={})[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,o,i,a,s,u,c,l;return H(this,function(e){switch(e.label){case 0:e.trys.push([0,12,13,18]),t=Z(p),e.label=1;case 1:return[4,Y(t.next())];case 2:if((n=e.sent()).done)return[3,11];if(a=n.value,r=d.eventMarshaller.unmarshall(a),"error"!==(o=r.headers[":message-type"].value))return[3,3];throw(a=new Error(r.headers[":error-message"].value||"UnknownError")).name=r.headers[":error-code"].value,a;case 3:return"exception"!==o?[3,5]:(i=r.headers[":exception-type"].value,(s={})[i]=r,[4,Y(d.deserializer(s))]);case 4:if((a=e.sent()).$unknown)throw(s=new Error(d.toUtf8(r.body))).name=i,s;throw a[i];case 5:return"event"!==o?[3,9]:((u={})[r.headers[":event-type"].value]=r,[4,Y(d.deserializer(u))]);case 6:return(u=e.sent()).$unknown?[3,10]:[4,Y(u)];case 7:return[4,e.sent()];case 8:return e.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+r.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return c={error:c=e.sent()},[3,18];case 13:return e.trys.push([13,,16,17]),n&&!n.done&&(l=t.return)?[4,Y(l.call(t))]:[3,15];case 14:e.sent(),e.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[2]}})})},t},Qp.prototype.serialize=function(a,s){var u=this,e={};return e[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,o,i;return H(this,function(e){switch(e.label){case 0:e.trys.push([0,7,8,13]),t=Z(a),e.label=1;case 1:return[4,Y(t.next())];case 2:return(n=e.sent()).done?[3,6]:(r=n.value,[4,Y(u.eventMarshaller.marshall(s(r)))]);case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return o={error:o=e.sent()},[3,13];case 8:return e.trys.push([8,,11,12]),n&&!n.done&&(i=t.return)?[4,Y(i.call(t))]:[3,10];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(o)throw o.error;return[7];case 12:return[7];case 13:return[4,Y(new Uint8Array(0))];case 14:return[4,e.sent()];case 15:return e.sent(),[2]}})})},e},Qp);function Qp(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Jp(t,e),this.utfEncoder=t}var ed,td,nd=(rd.prototype.deserialize=function(e,t){return e="function"==typeof e[Symbol.asyncIterator]?e:function(i){return J(this,arguments,function(){var t,n,r,o;return H(this,function(e){switch(e.label){case 0:n=t=!1,r=new Array,i.on("error",function(e){if(t=t||!0,e)throw e}),i.on("data",function(e){r.push(e)}),i.on("end",function(){t=!0}),e.label=1;case 1:return n?[3,6]:[4,Y(new Promise(function(e){return setTimeout(function(){return e(r.shift())},0)}))];case 2:return(o=e.sent())?[4,Y(o)]:[3,5];case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return n=t&&0===r.length,[3,1];case 6:return[2]}})})}(e),this.universalMarshaller.deserialize(e,t)},rd.prototype.serialize=function(e,t){if(t=this.universalMarshaller.serialize(e,t),"function"==typeof u.Readable.from)return u.Readable.from(t);var r=t[Symbol.asyncIterator](),n=new u.Readable({autoDestroy:!0,objectMode:!0,read:function(){return K(this,void 0,void 0,function(){var n=this;return H(this,function(e){return r.next().then(function(e){var t=e.done,e=e.value;t?n.push(null):n.push(e)}).catch(function(e){n.destroy(e)}),[2]})})}});return n.on("error",function(){n.destroy()}),n.on("end",function(){n.destroy()}),n},rd);function rd(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Jp(t,e),this.universalMarshaller=new Xp({utf8Decoder:e,utf8Encoder:t})}function od(t){return t&&["provider"].find(function(e){return t.hasOwnProperty(e)})}function id(e){return void 0!==e.redirectSignIn}(vl=ed=ed||{}).Cognito="COGNITO",vl.Google="Google",vl.Facebook="Facebook",vl.Amazon="LoginWithAmazon",vl.Apple="SignInWithApple",(vl=td=td||{}).NoConfig="noConfig",vl.MissingAuthConfig="missingAuthConfig",vl.EmptyUsername="emptyUsername",vl.InvalidUsername="invalidUsername",vl.EmptyPassword="emptyPassword",vl.EmptyCode="emptyCode",vl.SignUpError="signUpError",vl.NoMFA="noMFA",vl.InvalidMFA="invalidMFA",vl.EmptyChallengeResponse="emptyChallengeResponse",vl.NoUserSession="noUserSession",vl.Default="default";var ad,sd,ud=((sd=cd.prototype).getUsername=function(){return this.username},sd.getPassword=function(){return this.password},sd.getValidationData=function(){return this.validationData},sd.getAuthParameters=function(){return this.authParameters},sd.getClientMetadata=function(){return this.clientMetadata},cd);function cd(e){var t=(o=e||{}).ValidationData,n=o.Username,r=o.Password,e=o.AuthParameters,o=o.ClientMetadata;this.validationData=t||{},this.authParameters=e||{},this.clientMetadata=o||{},this.username=n,this.password=r}if(!(ad=!(ad=!(ad="undefined"!=typeof window&&window.crypto?window.crypto:ad)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:ad)&&void 0!==b&&b.crypto?b.crypto:ad)&&"function"==typeof require)try{ad=require("crypto")}catch(e){}var ld,pd=((ld=dd.prototype).random=function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(ad){if("function"==typeof ad.getRandomValues)try{return ad.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof ad.randomBytes)try{return ad.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new dd(t,e)},ld.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")}(this)},dd);function dd(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}function fd(e,t){null!=e&&this.fromString(e,t)}function hd(){return new fd(null)}b=(vl="undefined"!=typeof navigator)&&"Microsoft Internet Explorer"==navigator.appName?(fd.prototype.am=function(e,t,n,r,o,i){for(var a=32767&t,s=t>>15;0<=--i;){var u=32767&this[e],c=this[e++]>>15,l=s*u+c*a;o=((u=a*u+((32767&l)<<15)+n[r]+(1073741823&o))>>>30)+(l>>>15)+s*c+(o>>>30),n[r++]=1073741823&u}return o},30):vl&&"Netscape"!=navigator.appName?(fd.prototype.am=function(e,t,n,r,o,i){for(;0<=--i;){var a=t*this[e++]+n[r]+o;o=Math.floor(a/67108864),n[r++]=67108863&a}return o},26):(fd.prototype.am=function(e,t,n,r,o,i){for(var a=16383&t,s=t>>14;0<=--i;){var u=16383&this[e],c=this[e++]>>14,l=s*u+c*a;o=((u=a*u+((16383&l)<<14)+n[r]+o)>>28)+(l>>14)+s*c,n[r++]=268435455&u}return o},28),fd.prototype.DB=b,fd.prototype.DM=(1<<b)-1,fd.prototype.DV=1<<b,fd.prototype.FV=Math.pow(2,52),fd.prototype.F1=52-b,fd.prototype.F2=2*b-52;for(var gd=new Array,md="0".charCodeAt(0),yd=0;yd<=9;++yd)gd[md++]=yd;for(md="a".charCodeAt(0),yd=10;yd<36;++yd)gd[md++]=yd;for(md="A".charCodeAt(0),yd=10;yd<36;++yd)gd[md++]=yd;function vd(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function bd(e){var t=hd();return t.fromInt(e),t}function wd(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function Sd(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Cd(e){return d.Buffer.from((new pd).random(e).toString(),"hex")}Sd.prototype.convert=function(e){var t=hd();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(fd.ZERO)&&this.m.subTo(t,t),t},Sd.prototype.revert=function(e){var t=hd();return e.copyTo(t),this.reduce(t),t},Sd.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},Sd.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},Sd.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},fd.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},fd.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},fd.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,o=!1,i=0;0<=--r;){var a=(a=r,null==(a=gd[e.charCodeAt(a)])?-1:a);a<0?"-"==e.charAt(r)&&(o=!0):(o=!1,0==i?this[this.t++]=a:i+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-i)-1)<<i,this[this.t++]=a>>this.DB-i):this[this.t-1]|=a<<i,(i+=n)>=this.DB&&(i-=this.DB))}this.clamp(),o&&fd.ZERO.subTo(this,this)},fd.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},fd.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},fd.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},fd.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,o=(1<<r)-1,i=Math.floor(e/this.DB),a=this.s<<n&this.DM,s=this.t-1;0<=s;--s)t[s+i+1]=this[s]>>r|a,a=(this[s]&o)<<n;for(s=i-1;0<=s;--s)t[s]=0;t[i]=a,t.t=this.t+i+1,t.s=this.s,t.clamp()},fd.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,o=this.DB-r,i=(1<<r)-1;t[0]=this[n]>>r;for(var a=n+1;a<this.t;++a)t[a-n-1]|=(this[a]&i)<<o,t[a-n]=this[a]>>r;0<r&&(t[this.t-n-1]|=(this.s&i)<<o),t.t=this.t-n,t.clamp()}},fd.prototype.subTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},fd.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),o=n.t;for(t.t=o+r.t;0<=--o;)t[o]=0;for(o=0;o<r.t;++o)t[o+n.t]=n.am(0,r[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&fd.ZERO.subTo(t,t)},fd.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},fd.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){if((c=this.abs()).t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=hd());var o=hd(),i=this.s,a=e.s;0<(e=this.DB-wd(r[r.t-1]))?(r.lShiftTo(e,o),c.lShiftTo(e,n)):(r.copyTo(o),c.copyTo(n));var s=o.t,u=o[s-1];if(0!=u){var c=u*(1<<this.F1)+(1<s?o[s-2]>>this.F2:0),l=this.FV/c,p=(1<<this.F1)/c,d=1<<this.F2,f=n.t,h=f-s,g=null==t?hd():t;for(o.dlShiftTo(h,g),0<=n.compareTo(g)&&(n[n.t++]=1,n.subTo(g,n)),fd.ONE.dlShiftTo(s,g),g.subTo(o,o);o.t<s;)o[o.t++]=0;for(;0<=--h;){var m=n[--f]==u?this.DM:Math.floor(n[f]*l+(n[f-1]+d)*p);if((n[f]+=o.am(0,m,n,h,0,s))<m)for(o.dlShiftTo(h,g),n.subTo(g,n);n[f]<--m;)n.subTo(g,n)}null!=t&&(n.drShiftTo(s,t),i!=a&&fd.ZERO.subTo(t,t)),n.t=s,n.clamp(),0<e&&n.rShiftTo(e,n),i<0&&fd.ZERO.subTo(n,n)}}},fd.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},fd.prototype.addTo=function(e,t){for(var n=0,r=0,o=Math.min(e.t,this.t);n<o;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},fd.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,o=!1,i="",a=this.t,s=this.DB-a*this.DB%t;if(0<a--)for(s<this.DB&&0<(n=this[a]>>s)&&(o=!0,i=vd(n));0<=a;)s<t?(n=(this[a]&(1<<s)-1)<<t-s,n|=this[--a]>>(s+=this.DB-t)):(n=this[a]>>(s-=t)&r,s<=0&&(s+=this.DB,--a)),(o=0<n||o)&&(i+=vd(n));return o?i:"0"},fd.prototype.negate=function(){var e=hd();return fd.ZERO.subTo(this,e),e},fd.prototype.abs=function(){return this.s<0?this.negate():this},fd.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},fd.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+wd(this[this.t-1]^this.s&this.DM)},fd.prototype.mod=function(e){var t=hd();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(fd.ZERO)&&e.subTo(t,t),t},fd.prototype.equals=function(e){return 0==this.compareTo(e)},fd.prototype.add=function(e){var t=hd();return this.addTo(e,t),t},fd.prototype.subtract=function(e){var t=hd();return this.subTo(e,t),t},fd.prototype.multiply=function(e){var t=hd();return this.multiplyTo(e,t),t},fd.prototype.divide=function(e){var t=hd();return this.divRemTo(e,t,null),t},fd.prototype.modPow=function(e,t,n){var r=e.bitLength(),o=bd(1),i=new Sd(t);if(r<=0)return o;var a=r<18?1:r<48?3:r<144?4:r<768?5:6,s=new Array,u=3,c=a-1,l=(1<<a)-1;if(s[1]=i.convert(this),1<a){var p=hd();for(i.sqrTo(s[1],p);u<=l;)s[u]=hd(),i.mulTo(p,s[u-2],s[u]),u+=2}for(var d,f,h=e.t-1,g=!0,m=hd(),r=wd(e[h])-1;0<=h;){for(c<=r?d=e[h]>>r-c&l:(d=(e[h]&(1<<r+1)-1)<<c-r,0<h&&(d|=e[h-1]>>this.DB+r-c)),u=a;0==(1&d);)d>>=1,--u;if((r-=u)<0&&(r+=this.DB,--h),g)s[d].copyTo(o),g=!1;else{for(;1<u;)i.sqrTo(o,m),i.sqrTo(m,o),u-=2;0<u?i.sqrTo(o,m):(f=o,o=m,m=f),i.mulTo(m,s[d],o)}for(;0<=h&&0==(e[h]&1<<r);)i.sqrTo(o,m),f=o,o=m,m=f,--r<0&&(r=this.DB-1,--h)}return n(null,t=i.revert(o)),t},fd.ZERO=bd(0),fd.ONE=bd(1);var _d,Ed,Ad=/^[89a-f]/i,Id=((Ed=Td.prototype).getSmallAValue=function(){return this.smallAValue},Ed.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},Ed.generateRandomSmallA=function(){return new fd(Cd(128).toString("hex"),16)},Ed.generateRandomString=function(){return Cd(40).toString("base64")},Ed.getRandomPassword=function(){return this.randomPassword},Ed.getSaltDevices=function(){return this.SaltToHashDevices},Ed.getVerifierDevices=function(){return this.verifierDevices},Ed.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString(),e=""+e+t+":"+this.randomPassword,t=this.hash(e),e=Cd(16).toString("hex"),this.SaltToHashDevices=this.padHex(new fd(e,16)),this.g.modPow(new fd(this.hexHash(this.SaltToHashDevices+t),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},Ed.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(fd.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},Ed.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new fd(this.UHexHash,16)},Ed.hash=function(e){return e=e instanceof d.Buffer?w.lib.WordArray.create(e):e,e=E(e).toString(),new Array(64-e.length).join("0")+e},Ed.hexHash=function(e){return this.hash(d.Buffer.from(e,"hex"))},Ed.computehkdf=function(e,t){var n=w.lib.WordArray.create(d.Buffer.concat([this.infoBits,d.Buffer.from(String.fromCharCode(1),"utf8")])),e=e instanceof d.Buffer?w.lib.WordArray.create(e):e,t=t instanceof d.Buffer?w.lib.WordArray.create(t):t,t=A(e,t),t=A(n,t);return d.Buffer.from(t.toString(),"hex").slice(0,16)},Ed.getPasswordAuthenticationKey=function(e,t,n,r,o){var i=this;if(n.mod(this.N).equals(fd.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(fd.ZERO))throw new Error("U cannot be zero.");t=""+this.poolName+e+":"+t,t=this.hash(t),t=new fd(this.hexHash(this.padHex(r)+t),16),this.calculateS(t,n,function(e,t){e&&o(e,null),t=i.computehkdf(d.Buffer.from(i.padHex(t),"hex"),d.Buffer.from(i.padHex(i.UValue),"hex")),o(null,t)})},Ed.calculateS=function(n,r,o){var i=this;this.g.modPow(n,this.N,function(e,t){e&&o(e,null),r.subtract(i.k.multiply(t)).modPow(i.smallAValue.add(i.UValue.multiply(n)),i.N,function(e,t){e&&o(e,null),o(null,t.mod(i.N))})})},Ed.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},Ed.padHex=function(e){if(!(e instanceof fd))throw new Error("Not a BigInteger");var t=e.compareTo(fd.ZERO)<0;return e=(e=e.abs().toString(16)).length%2!=0?"0"+e:e,e=Ad.test(e)?"00"+e:e,t&&(e=new fd(e.split("").map(function(e){return e=15&~parseInt(e,16),"0123456789ABCDEF".charAt(e)}).join(""),16).add(fd.ONE).toString(16)).toUpperCase().startsWith("FF8")?e.substring(2):e},Td),vl=((_d=kd.prototype).getJwtToken=function(){return this.jwtToken},_d.getExpiration=function(){return this.payload.exp},_d.getIssuedAt=function(){return this.payload.iat},_d.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(d.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},kd);function kd(e){this.jwtToken=e||"",this.payload=this.decodePayload()}function Td(e){this.N=new fd("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new fd("2",16),this.k=new fd(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=d.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}function Pd(e,t){return(Pd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Od,xd,Nd,Rd=(Nd=Od=vl,(xd=Md).prototype=Object.create(Nd.prototype),Pd(xd.prototype.constructor=xd,Nd),Md);function Md(e){return e=(void 0===e?{}:e).AccessToken,Od.call(this,e||"")||this}function Ud(e,t){return(Ud=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dd,Ld,Fd,jd,Bd,zd,Vd=(zd=jd=vl,(Bd=uf).prototype=Object.create(zd.prototype),Ud(Bd.prototype.constructor=Bd,zd),uf),qd=(sf.prototype.getToken=function(){return this.token},sf),Kd=((Fd=af.prototype).getIdToken=function(){return this.idToken},Fd.getRefreshToken=function(){return this.refreshToken},Fd.getAccessToken=function(){return this.accessToken},Fd.getClockDrift=function(){return this.clockDrift},Fd.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},Fd.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},af),Hd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Gd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Wd=(of.prototype.getNowString=function(){var e=new Date,t=Gd[e.getUTCDay()],n=Hd[e.getUTCMonth()],r=e.getUTCDate(),o=e.getUTCHours();o<10&&(o="0"+o);var i=e.getUTCMinutes();i<10&&(i="0"+i);var a=e.getUTCSeconds();return t+" "+n+" "+r+" "+o+":"+i+":"+(a=a<10?"0"+a:a)+" UTC "+e.getUTCFullYear()},of),$d=((Ld=rf.prototype).getValue=function(){return this.Value},Ld.setValue=function(e){return this.Value=e,this},Ld.getName=function(){return this.Name},Ld.setName=function(e){return this.Name=e,this},Ld.toString=function(){return JSON.stringify(this)},Ld.toJSON=function(){return{Name:this.Name,Value:this.Value}},rf),Yd={},Jd=(nf.setItem=function(e,t){return Yd[e]=t,Yd[e]},nf.getItem=function(e){return Object.prototype.hasOwnProperty.call(Yd,e)?Yd[e]:void 0},nf.removeItem=function(e){return delete Yd[e]},nf.clear=function(){return Yd={}},nf),Zd=(tf.prototype.getStorage=function(){return this.storageWindow},tf),Xd="undefined"!=typeof navigator?navigator.userAgent:"nodejs",Qd=((Dd=ef.prototype).setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},Dd.getSignInUserSession=function(){return this.signInUserSession},Dd.getUsername=function(){return this.username},Dd.getAuthenticationFlowType=function(){return this.authenticationFlowType},Dd.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},Dd.initiateAuth=function(e,r){var o=this,t=e.getAuthParameters();t.USERNAME=this.username,e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){if(e)return r.onFailure(e);var n=t.ChallengeName,e=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(o.Session=t.Session,r.customChallenge(e)):(o.signInUserSession=o.getCognitoUserSession(t.AuthenticationResult),o.cacheTokens(),r.onSuccess(o.signInUserSession))})},Dd.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},Dd.authenticateUserDefaultAuth=function(n,s){var i,u,c=this,l=new Id(this.pool.getUserPoolId().split("_")[1]),p=new Wd,r={};null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey),r.USERNAME=this.username,l.getLargeAValue(function(e,t){e&&s.onFailure(e),r.SRP_A=t.toString(16),"CUSTOM_AUTH"===c.authenticationFlowType&&(r.CHALLENGE_NAME="SRP_A");var a=0!==Object.keys(n.getValidationData()).length?n.getValidationData():n.getClientMetadata(),t={AuthFlow:c.authenticationFlowType,ClientId:c.pool.getClientId(),AuthParameters:r,ClientMetadata:a};c.getUserContextData(c.username)&&(t.UserContextData=c.getUserContextData(c.username)),c.client.request("InitiateAuth",t,function(e,r){if(e)return s.onFailure(e);var o=r.ChallengeParameters;c.username=o.USER_ID_FOR_SRP,c.userDataKey=c.keyPrefix+"."+c.username+".userData",i=new fd(o.SRP_B,16),u=new fd(o.SALT,16),c.getCachedDeviceKeyAndPassword(),l.getPasswordAuthenticationKey(c.username,n.getPassword(),i,u,function(e,t){e&&s.onFailure(e);var n=p.getNowString(),e=w.lib.WordArray.create(d.Buffer.concat([d.Buffer.from(c.pool.getUserPoolId().split("_")[1],"utf8"),d.Buffer.from(c.username,"utf8"),d.Buffer.from(o.SECRET_BLOCK,"base64"),d.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),t=I.stringify(A(e,t)),i={};i.USERNAME=c.username,i.PASSWORD_CLAIM_SECRET_BLOCK=o.SECRET_BLOCK,i.TIMESTAMP=n,i.PASSWORD_CLAIM_SIGNATURE=t,null!=c.deviceKey&&(i.DEVICE_KEY=c.deviceKey),n=function n(r,o){return c.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(i.DEVICE_KEY=null,c.deviceKey=null,c.randomPassword=null,c.deviceGroupKey=null,c.clearCachedDeviceKeyAndPassword(),n(r,o)):o(e,t)})},t={ChallengeName:"PASSWORD_VERIFIER",ClientId:c.pool.getClientId(),ChallengeResponses:i,Session:r.Session,ClientMetadata:a},c.getUserContextData()&&(t.UserContextData=c.getUserContextData()),n(t,function(e,t){return e?s.onFailure(e):c.authenticateUserInternal(t,l,s)})})})})},Dd.authenticateUserPlainUsernamePassword=function(e,n){var r,o=this,t={};t.USERNAME=this.username,t.PASSWORD=e.getPassword(),t.PASSWORD?(r=new Id(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(t.DEVICE_KEY=this.deviceKey),e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData(this.username)&&(e.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",e,function(e,t){return e?n.onFailure(e):o.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},Dd.authenticateUserInternal=function(n,t,r){var o=this,e=n.ChallengeName,i=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,r.mfaRequired(e,i);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,r.selectMFAType(e,i);if("MFA_SETUP"===e)return this.Session=n.Session,r.mfaSetup(e,i);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,r.totpRequired(e,i);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,r.customChallenge(i);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var a=null,s=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(i&&(a=JSON.parse(n.ChallengeParameters.userAttributes),s=JSON.parse(n.ChallengeParameters.requiredAttributes)),s)for(var l=0;l<s.length;l++)u[l]=s[l].substr(c.length);return r.newPasswordRequired(a,u)}if("DEVICE_SRP_AUTH"!==e){this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return r.onSuccess(this.signInUserSession);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){return e?r.onFailure(e):(e={Salt:d.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:d.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")},o.verifierDevices=e.PasswordVerifier,o.deviceGroupKey=p.DeviceGroupKey,o.randomPassword=t.getRandomPassword(),void o.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:o.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:Xd},function(e,t){return e?r.onFailure(e):(o.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,o.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(o.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(o.signInUserSession))}))})}else this.getDeviceResponse(r)},Dd.completeNewPasswordChallenge=function(e,t,n,r){var o=this;if(!e)return n.onFailure(new Error("New password is required."));var i=new Id(this.pool.getUserPoolId().split("_")[1]),a=i.getNewPasswordRequiredChallengeUserAttributePrefix(),s={};t&&Object.keys(t).forEach(function(e){s[a+e]=t[e]}),s.NEW_PASSWORD=e,s.USERNAME=this.username,r={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:s,Session:this.Session,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",r,function(e,t){return e?n.onFailure(e):o.authenticateUserInternal(t,i,n)})},Dd.getDeviceResponse=function(i,n){var a=this,s=new Id(this.deviceGroupKey),u=new Wd,r={};r.USERNAME=this.username,r.DEVICE_KEY=this.deviceKey,s.getLargeAValue(function(e,t){e&&i.onFailure(e),r.SRP_A=t.toString(16),t={ChallengeName:"DEVICE_SRP_AUTH",ClientId:a.pool.getClientId(),ChallengeResponses:r,ClientMetadata:n},a.getUserContextData()&&(t.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",t,function(e,r){if(e)return i.onFailure(e);var o=r.ChallengeParameters,t=new fd(o.SRP_B,16),e=new fd(o.SALT,16);s.getPasswordAuthenticationKey(a.deviceKey,a.randomPassword,t,e,function(e,t){if(e)return i.onFailure(e);var n=u.getNowString(),e=w.lib.WordArray.create(d.Buffer.concat([d.Buffer.from(a.deviceGroupKey,"utf8"),d.Buffer.from(a.deviceKey,"utf8"),d.Buffer.from(o.SECRET_BLOCK,"base64"),d.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),e=I.stringify(A(e,t));(t={}).USERNAME=a.username,t.PASSWORD_CLAIM_SECRET_BLOCK=o.SECRET_BLOCK,t.TIMESTAMP=n,t.PASSWORD_CLAIM_SIGNATURE=e,t.DEVICE_KEY=a.deviceKey,t={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:a.pool.getClientId(),ChallengeResponses:t,Session:r.Session},a.getUserContextData()&&(t.UserContextData=a.getUserContextData()),a.client.request("RespondToAuthChallenge",t,function(e,t){return e?i.onFailure(e):(a.signInUserSession=a.getCognitoUserSession(t.AuthenticationResult),a.cacheTokens(),i.onSuccess(a.signInUserSession))})})})})},Dd.confirmRegistration=function(e,t,n,r){r={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",r,function(e){return e?n(e,null):n(null,"SUCCESS")})},Dd.sendCustomChallengeAnswer=function(e,n,t){var r=this,o={};o.USERNAME=this.username,o.ANSWER=e;var i=new Id(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey),t={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t},this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,i,n)})},Dd.sendMFACode=function(e,r,t,n){var o=this,i={};i.USERNAME=this.username,i.SMS_MFA_CODE=e,"SOFTWARE_TOKEN_MFA"===(t=t||"SMS_MFA")&&(i.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey),n={ChallengeName:t,ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n},this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",n,function(e,n){if(e)return r.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(o.signInUserSession=o.getCognitoUserSession(n.AuthenticationResult),o.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return r.onSuccess(o.signInUserSession);var t=new Id(o.pool.getUserPoolId().split("_")[1]);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){return e?r.onFailure(e):(e={Salt:d.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:d.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")},o.verifierDevices=e.PasswordVerifier,o.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,o.randomPassword=t.getRandomPassword(),void o.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:o.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:Xd},function(e,t){return e?r.onFailure(e):(o.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,o.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(o.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(o.signInUserSession))}))})}else o.getDeviceResponse(r)})},Dd.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},Dd.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Dd.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},Dd.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Dd.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},Dd.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},Dd.getUserAttributes=function(i){if(null==this.signInUserSession||!this.signInUserSession.isValid())return i(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return i(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var o={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},o=new $d(o);n.push(o)}return i(null,n)})},Dd.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},Dd.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},Dd.refreshSessionIfPossible=function(n){var r=this;return void 0===n&&(n={}),new Promise(function(e){var t=r.signInUserSession.getRefreshToken();t&&t.getToken()?r.refreshSession(t,e,n.clientMetadata):e()})},Dd.getUserData=function(t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var e=this.getUserDataFromCache();if(e)if(this.isFetchUserDataAndTokenRequired(n))this.fetchUserData().then(function(e){return r.refreshSessionIfPossible(n).then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(e))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},Dd.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},Dd.isFetchUserDataAndTokenRequired=function(e){return void 0!==(e=(e||{}).bypassCache)&&e},Dd.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},Dd.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},Dd.resendConfirmationCode=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e},this.client.request("ResendConfirmationCode",e,function(e,t){return e?n(e,null):n(null,t)})},Dd.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n=(i="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".idToken",r=i+".accessToken",o=i+".refreshToken",i=i+".clockDrift";if(this.storage.getItem(n)){if(n=new Vd({IdToken:this.storage.getItem(n)}),r=new Rd({AccessToken:this.storage.getItem(r)}),o=new qd({RefreshToken:this.storage.getItem(o)}),i=parseInt(this.storage.getItem(i),0)||0,(i=new Kd({IdToken:n,AccessToken:r,RefreshToken:o,ClockDrift:i})).isValid())return this.signInUserSession=i,e(null,this.signInUserSession);if(!o.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(o,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},Dd.refreshSession=function(n,e,t){var r=this,o=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(e):e,i={};i.REFRESH_TOKEN=n.getToken();var a="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=a+".LastAuthUser";this.storage.getItem(e)&&(this.username=this.storage.getItem(e),a=a+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(a),i.DEVICE_KEY=this.deviceKey),t={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:i,ClientMetadata:t},this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",t,function(e,t){return e?("NotAuthorizedException"===e.code&&r.clearCachedUser(),o(e,null)):t?(t=t.AuthenticationResult,Object.prototype.hasOwnProperty.call(t,"RefreshToken")||(t.RefreshToken=n.getToken()),r.signInUserSession=r.getCognitoUserSession(t),r.cacheTokens(),o(null,r.signInUserSession)):void 0})},Dd.cacheTokens=function(){var e=(o="CognitoIdentityServiceProvider."+this.pool.getClientId())+"."+this.username+".idToken",t=o+"."+this.username+".accessToken",n=o+"."+this.username+".refreshToken",r=o+"."+this.username+".clockDrift",o=o+".LastAuthUser";this.storage.setItem(e,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(t,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(r,""+this.signInUserSession.getClockDrift()),this.storage.setItem(o,this.username)},Dd.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},Dd.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},Dd.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},Dd.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.setItem(e+".deviceKey",this.deviceKey),this.storage.setItem(t,this.randomPassword),this.storage.setItem(n,this.deviceGroupKey)},Dd.getCachedDeviceKeyAndPassword=function(){var e=(n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username)+".deviceKey",t=n+".randomPasswordKey",n=n+".deviceGroupKey";this.storage.getItem(e)&&(this.deviceKey=this.storage.getItem(e),this.randomPassword=this.storage.getItem(t),this.deviceGroupKey=this.storage.getItem(n))},Dd.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.removeItem(e+".deviceKey"),this.storage.removeItem(t),this.storage.removeItem(n)},Dd.clearCachedTokens=function(){var e=(o="CognitoIdentityServiceProvider."+this.pool.getClientId())+"."+this.username+".idToken",t=o+"."+this.username+".accessToken",n=o+"."+this.username+".refreshToken",r=o+".LastAuthUser",o=o+"."+this.username+".clockDrift";this.storage.removeItem(e),this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(o)},Dd.getCognitoUserSession=function(e){var t=new Vd(e),n=new Rd(e),e=new qd(e);return new Kd({IdToken:t,AccessToken:n,RefreshToken:e})},Dd.forgotPassword=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",e,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},Dd.confirmPassword=function(e,t,n,r){r={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r},this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",r,function(e){return e?n.onFailure(e):n.onSuccess()})},Dd.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess()})},Dd.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},Dd.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},Dd.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Dd.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},Dd.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Dd.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},Dd.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));e={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e},t&&(e.PaginationToken=t),this.client.request("ListDevices",e,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},Dd.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},Dd.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},Dd.sendMFASelectionAnswer=function(n,r){var o=this,e={};e.USERNAME=this.username,e.ANSWER=n,e={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session},this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",e,function(e,t){return e?r.onFailure(e):(o.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.ChallengeName,t.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.ChallengeName,t.ChallengeParameters):void 0)})},Dd.getUserContextData=function(){return this.pool.getUserContextData(this.username)},Dd.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},Dd.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,(t={}).USERNAME=r.username,t={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:t,Session:r.Session},r.getUserContextData()&&(t.UserContextData=r.getUserContextData()),void r.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))}))})},ef);function ef(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new Zd).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}function tf(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=Jd}}function nf(){}function rf(e){var e=(t=void 0===e?{}:e).Name,t=t.Value;this.Name=e||"",this.Value=t||""}function of(){}function af(e){var t=(r=void 0===e?{}:e).IdToken,n=r.RefreshToken,e=r.AccessToken,r=r.ClockDrift;if(null==e||null==t)throw new Error("Id token and Access Token must be present.");this.idToken=t,this.refreshToken=n,this.accessToken=e,this.clockDrift=void 0===r?this.calculateClockDrift():r}function sf(e){e=(void 0===e?{}:e).RefreshToken,this.token=e||""}function uf(e){return e=(void 0===e?{}:e).IdToken,jd.call(this,e||"")||this}function cf(){}function lf(e){var n="function"==typeof Map?new Map:void 0;return(lf=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return pf(e,arguments,ff(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),df(t,e)})(e)}function pf(e,t,n){return(pf=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),r=new(Function.bind.apply(e,r)),n&&df(r,n.prototype),r}).apply(null,arguments)}function df(e,t){return(df=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ff(e){return(ff=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hf(e){return(e=window.open(e,"_self"))?Promise.resolve(e):Promise.reject()}function gf(e,t,n){_.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",xf)}cf.prototype.userAgent="aws-amplify/0.1.x js";function mf(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function yf(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function vf(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var bf,wf,Sf,Cf,_f,Ef,Af=(Cf=lf(Error),Ef=Cf,(_f=Lf).prototype=Object.create(Ef.prototype),df(_f.prototype.constructor=_f,Ef),Lf),If=((Sf=Df.prototype).promisifyRequest=function(e,t){var o=this;return new Promise(function(n,r){o.request(e,t,function(e,t){e?r(new Af(e.message,e.code,e.name,e.statusCode)):n(t)})})},Sf.request=function(e,t,o){var i,t=Object.assign({},this.fetchOptions,{headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":cf.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,t).then(function(e){return i=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(i.ok)return o(null,e);var t=(e.__type||e.code).split("#").pop(),e={code:t,name:t,message:e.message||e.Message||null};return o(e)}).catch(function(e){if(!(i&&i.headers&&i.headers.get("x-amzn-errortype"))){if(e instanceof Error&&"Network error"===e.message){var t={code:"NetworkError",name:e.name,message:e.message};return o(t)}return o(e)}try{var n=i.headers.get("x-amzn-errortype").split(":")[0],r={code:n,name:n,statusCode:i.status,message:i.status?i.status.toString():null};return o(r)}catch(t){return o(e)}})},Df),kf=((wf=Uf.prototype).getUserPoolId=function(){return this.userPoolId},wf.getClientId=function(){return this.clientId},wf.signUp=function(n,e,t,r,o,i){var a=this,i={ClientId:this.clientId,Username:n,Password:e,UserAttributes:t,ValidationData:r,ClientMetadata:i};this.getUserContextData(n)&&(i.UserContextData=this.getUserContextData(n)),this.client.request("SignUp",i,function(e,t){return e?o(e,null):(e={Username:n,Pool:a,Storage:a.storage},t={user:new Qd(e),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails},o(null,t))})},wf.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser";return(e=this.storage.getItem(e))?(e={Username:e,Pool:this,Storage:this.storage},new Qd(e)):null},wf.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;return this.advancedSecurityDataCollectionFlag&&(e=t.getData(e,this.userPoolId,this.clientId))?{EncodedData:e}:{}}},Uf),Tf=((bf=Mf.prototype).setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),T.set(e,t,n),T.get(e)},bf.getItem=function(e){return T.get(e)},bf.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),T.remove(e,t)},bf.clear=function(){for(var e=T.get(),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},Mf),Pf=new Map,Of=function(){return(Of=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xf="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Nf=new _.ConsoleLogger("OAuth"),Rf=(Ff.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},Ff.prototype.oauthSignIn=function(e,t,n,r,o,i){void 0===e&&(e="code"),void 0===o&&(o=ed.Cognito);var a=this._generateState(32),s=i?a+"-"+_.urlSafeEncode(i):a;Pf.set("oauth_state",s),i=this._generateRandom(128),Pf.set("ouath_pkce_key",i),a=this._generateChallenge(i),i=this._scopes.join(" "),e="https://"+t+"/oauth2/authorize?"+Object.entries(Of(Of({redirect_uri:n,response_type:e,client_id:r,identity_provider:o,scope:i,state:s},"code"===e?{code_challenge:a}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var e=(t=vf(e,2))[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),Nf.debug("Redirecting to "+e),this._urlOpener(e,n)},Ff.prototype._handleCodeFlow=function(c){return mf(this,void 0,void 0,function(){var n,r,o,i,a,s,u;return yf(this,function(e){switch(e.label){case 0:return n=(S.parse(c).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=vf(t,2))[0],n=n[1];return Of(Of({},e),((e={})[t]=n,e))},{code:void 0}).code,r=S.parse(c).pathname||"/",o=S.parse(this._config.redirectSignIn).pathname||"/",n&&r===o?(gf("codeFlow",{},"Retrieving tokens from "+(a="https://"+this._config.domain+"/oauth2/token")),i=id(this._config)?this._cognitoClientId:this._config.clientID,s=id(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=Pf.get("ouath_pkce_key"),Pf.delete("ouath_pkce_key"),i=Of({grant_type:"authorization_code",code:n,client_id:i,redirect_uri:s},(u=t)?{code_verifier:u}:{}),Nf.debug("Calling token endpoint: "+a+" with",i),s=Object.entries(i).map(function(e){var e=(t=vf(e,2))[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),[4,fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s})]):[2];case 1:return[4,e.sent().json()];case 2:if(u=e.sent(),i=u.access_token,a=u.refresh_token,s=u.id_token,u=u.error)throw new Error(u);return[2,{accessToken:i,refreshToken:a,idToken:s}]}var t})})},Ff.prototype._handleImplicitFlow=function(r){return mf(this,void 0,void 0,function(){var t,n;return yf(this,function(e){return n=(S.parse(r).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=vf(t,2))[0],n=n[1];return Of(Of({},e),((e={})[t]=n,e))},{id_token:void 0,access_token:void 0}),t=n.id_token,n=n.access_token,gf("implicitFlow",{},"Got tokens from "+r),Nf.debug("Retrieving implicit tokens from "+r+" with"),[2,{accessToken:n,idToken:t,refreshToken:null}]})})},Ff.prototype.handleAuthResponse=function(a){return mf(this,void 0,void 0,function(){var t,n,r,o,i;return yf(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),i=a?Of(Of({},(S.parse(a).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=vf(t,2))[0],n=n[1];return e[t]=n,e},{})),(S.parse(a).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var t=(n=vf(t,2))[0],n=n[1];return e[t]=n,e},{})):{},t=i.error,n=i.error_description,t)throw new Error(n);return i=this._validateState(i),Nf.debug("Starting "+this._config.responseType+" flow with "+a),"code"!==this._config.responseType?[3,2]:(r=[{}],[4,this._handleCodeFlow(a)]);case 1:return[2,Of.apply(void 0,[Of.apply(void 0,r.concat([e.sent()])),{state:i}])];case 2:return o=[{}],[4,this._handleImplicitFlow(a)];case 3:return[2,Of.apply(void 0,[Of.apply(void 0,o.concat([e.sent()])),{state:i}])];case 4:return[3,6];case 5:throw i=e.sent(),Nf.error("Error handling auth response.",i),i;case 6:return[2]}})})},Ff.prototype._validateState=function(e){if(e){var t=(t=Pf.get("oauth_state"),Pf.delete("oauth_state"),t),e=e.state;if(t&&t!==e)throw new Error("Invalid state in OAuth flow");return e}},Ff.prototype.signOut=function(){return mf(this,void 0,void 0,function(){var t,n,r;return yf(this,function(e){return t="https://"+this._config.domain+"/logout?",n=id(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=id(this._config)?this._config.redirectSignOut:this._config.returnTo,gf("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+(t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){return(e=vf(e,2))[0]+"="+e[1]}).join("&"))),Nf.debug("Signing out from "+t),[2,this._urlOpener(t)]})})},Ff.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},Ff.prototype._generateChallenge=function(e){return this._base64URL(E(e))},Ff.prototype._base64URL=function(e){return e.toString(I).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Ff.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},Ff.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var o=e[r]%t.length;n.push(t[o])}return n.join("")},Ff);function Mf(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}function Uf(e,t){var n=e||{},r=n.UserPoolId,o=n.ClientId,i=n.endpoint,a=n.fetchOptions,s=n.AdvancedSecurityDataCollectionFlag;if(!r||!o)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(r))throw new Error("Invalid UserPoolId format.");n=r.split("_")[0],this.userPoolId=r,this.clientId=o,this.client=new If(n,i,a),this.advancedSecurityDataCollectionFlag=!1!==s,this.storage=e.Storage||(new Zd).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}function Df(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/",n=(n||{}).credentials,this.fetchOptions=n?{credentials:n}:{}}function Lf(e,t,n,r){return(e=Cf.call(this,e)||this).code=t,e.name=n,e.statusCode=r,e}function Ff(e){var t=e.config,n=e.cognitoClientId,e=void 0===(e=e.scopes)?[]:e;if(this._urlOpener=t.urlOpener||hf,this._config=t,this._cognitoClientId=n,!this.isValidScopes(e))throw Error("scopes must be a String Array");this._scopes=e}(b=Lh=Lh||{}).DEFAULT_MSG="Authentication Error",b.EMPTY_USERNAME="Username cannot be empty",b.INVALID_USERNAME="The username should either be a string or one of the sign in types",b.EMPTY_PASSWORD="Password cannot be empty",b.EMPTY_CODE="Confirmation code cannot be empty",b.SIGN_UP_ERROR="Error creating account",b.NO_MFA="No valid MFA method provided",b.INVALID_MFA="Invalid MFA type",b.EMPTY_CHALLENGE="Challenge response cannot be empty",b.NO_USER_SESSION="Failed to get the session because the user is empty";var jf,Bf,vl=(jf=function(e,t){return(jf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}jf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),zf=new _.ConsoleLogger("AuthError"),Vf=(vl(qf,Bf=Error),qf);function qf(e){var t=this,e=(n=Zf[e]).message,n=n.log;return(t=Bf.call(this,e)||this).constructor=qf,Object.setPrototypeOf(t,qf.prototype),t.name="AuthError",t.log=n||e,zf.error(t.log),t}var Kf,Hf=(vl(Gf,Kf=Vf),Gf);function Gf(e){return(e=Kf.call(this,e)||this).constructor=Gf,Object.setPrototypeOf(e,Gf.prototype),e.name="NoUserPoolError",e}function Wf(e,t,n){_.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",th)}function $f(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Yf(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Jf(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var Zf={noConfig:{message:Lh.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:Lh.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:Lh.EMPTY_USERNAME},invalidUsername:{message:Lh.INVALID_USERNAME},emptyPassword:{message:Lh.EMPTY_PASSWORD},emptyCode:{message:Lh.EMPTY_CODE},signUpError:{message:Lh.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:Lh.NO_MFA},invalidMFA:{message:Lh.INVALID_MFA},emptyChallengeResponse:{message:Lh.EMPTY_CHALLENGE},noUserSession:{message:Lh.NO_USER_SESSION},default:{message:Lh.DEFAULT_MSG}},Xf=function(){return(Xf=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Qf=new _.ConsoleLogger("AuthClass"),eh="aws.cognito.signin.user.admin",th="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function nh(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=_.Credentials,this.wrapRefreshSessionCallback=function(n){return function(e,t){return t?Wf("tokenRefresh",void 0,"New token retrieved"):Wf("tokenRefresh_failure",e,"Failed to retrieve new token"),n(e,t)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),_.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}var rh=(nh.prototype.getModuleName=function(){return"Auth"},nh.prototype.configure=function(e){var t=this;if(!e)return this._config||{};Qf.debug("configure Auth");var n=Object.assign({},this._config,_.Parser.parseMobilehubConfig(e).Auth,e);this._config=n;var r,o=(f=this._config).userPoolId,i=f.userPoolWebClientId,a=f.cookieStorage,s=f.oauth,u=f.region,c=f.identityPoolId,l=f.mandatorySignIn,p=f.refreshHandlers,d=f.identityPoolRegion,n=f.clientMetadata,f=f.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw Qf.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=a?new Tf(a):e.ssr?new _.UniversalStorage:(new _.StorageHelper).getStorage();return this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),o&&((f={UserPoolId:o,ClientId:i,endpoint:f}).Storage=this._storage,this.userPool=new kf(f,this.wrapRefreshSessionCallback)),this.Credentials.configure({mandatorySignIn:l,region:d||u,userPoolId:o,identityPoolId:c,refreshHandlers:p,storage:this._storage}),(s=s?id(this._config.oauth)?s:s.awsCognito:void 0)&&(s=Object.assign({cognitoClientId:i,UserPoolId:o,domain:s.domain,scopes:s.scope,redirectSignIn:s.redirectSignIn,redirectSignOut:s.redirectSignOut,responseType:s.responseType,Storage:this._storage,urlOpener:s.urlOpener,clientMetadata:n},s.options),this._oAuthHandler=new Rf({scopes:s.scopes,config:s,cognitoClientId:s.cognitoClientId}),r={},function(){if(_.JS.browserOrNode().isBrowser&&window.location)e=(e={url:window.location.href}).url,r[e]||(r[e]=!0,t._handleAuthResponse(e));else if(!_.JS.browserOrNode().isNode)throw new Error("Not supported");var e}()),Wf("configured",null,"The Auth category has been configured successfully"),this._config},nh.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var o,i=null,a=null,s=[],u=null;if(e&&"string"==typeof e){var i=e,a=n?n[0]:null,c=n?n[1]:null,l=n?n[2]:null;c&&s.push(new $d({Name:"email",Value:c})),l&&s.push(new $d({Name:"phone_number",Value:l}))}else{if(!e||"object"!=typeof e)return this.rejectAuthError(td.SignUpError);i=e.username,a=e.password,e&&e.clientMetadata?o=e.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){s.push(new $d({Name:e,Value:p[e]}))});var d=e.validationData;d&&(u=[],Object.keys(d).map(function(e){u.push(new $d({Name:e,Value:d[e]}))}))}return i?a?(Qf.debug("signUp attrs:",s),Qf.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(i,a,s,u,function(e,t){e?(Wf("signUp_failure",e,i+" failed to signup"),r(e)):(Wf("signUp",t,i+" has signed up successfully"),n(t))},o)})):this.rejectAuthError(td.EmptyPassword):this.rejectAuthError(td.EmptyUsername)},nh.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(td.EmptyUsername);if(!t)return this.rejectAuthError(td.EmptyCode);var o,i=this.createCognitoUser(e),a=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?o=n.clientMetadata:this._config.clientMetadata&&(o=this._config.clientMetadata),new Promise(function(n,r){i.confirmRegistration(t,a,function(e,t){e?r(e):n(t)},o)})},nh.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(td.EmptyUsername);var o=this.createCognitoUser(e);return new Promise(function(n,r){o.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},nh.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,o=null,i={};if("string"==typeof e)r=e,o=t;else{if(!e.username)return this.rejectAuthError(td.InvalidUsername);void 0!==t&&Qf.warn("The password should be defined under the first parameter object!"),r=e.username,o=e.password,i=e.validationData}return r?(n=new ud({Username:r,Password:o,ValidationData:i,ClientMetadata:n}),o?this.signInWithPassword(n):this.signInWithoutPassword(n)):this.rejectAuthError(td.EmptyUsername)},nh.prototype.authCallbacks=function(o,i,a){var e=this,s=this;return{onSuccess:function(r){return $f(e,void 0,void 0,function(){var t,n;return Yf(this,function(e){switch(e.label){case 0:Qf.debug(r),delete o.challengeName,delete o.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(r,"session")];case 3:return t=e.sent(),Qf.debug("succeed to get cognito credentials",t),[3,9];case 4:return t=e.sent(),Qf.debug("cannot get cognito credentials",t),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return n=e.sent(),Wf("signIn",s.user=n,"A user "+o.getUsername()+" has been signed in"),i(n),[3,8];case 7:return n=e.sent(),Qf.error("Failed to get the signed in user",n),a(n),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){Qf.debug("signIn failure",e),Wf("signIn_failure",e,o.getUsername()+" failed to signin"),a(e)},customChallenge:function(e){Qf.debug("signIn custom challenge answer required"),o.challengeName="CUSTOM_CHALLENGE",o.challengeParam=e,i(o)},mfaRequired:function(e,t){Qf.debug("signIn MFA required"),o.challengeName=e,o.challengeParam=t,i(o)},mfaSetup:function(e,t){Qf.debug("signIn mfa setup",e),o.challengeName=e,o.challengeParam=t,i(o)},newPasswordRequired:function(e,t){Qf.debug("signIn new password"),o.challengeName="NEW_PASSWORD_REQUIRED",o.challengeParam={userAttributes:e,requiredAttributes:t},i(o)},totpRequired:function(e,t){Qf.debug("signIn totpRequired"),o.challengeName=e,o.challengeParam=t,i(o)},selectMFAType:function(e,t){Qf.debug("signIn selectMFAType",e),o.challengeName=e,o.challengeParam=t,i(o)}}},nh.prototype.signInWithPassword=function(e){var r=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var o=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(t,n){o.authenticateUser(e,r.authCallbacks(o,function(e){r.pendingSignIn=null,t(e)},function(e){r.pendingSignIn=null,n(e)}))}),this.pendingSignIn},nh.prototype.signInWithoutPassword=function(n){var r=this,o=this.createCognitoUser(n.getUsername());return o.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){o.initiateAuth(n,r.authCallbacks(o,e,t))})},nh.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(Qf.debug("get MFA Options failed",e),void r(e)):(Qf.debug("get MFA options success",t),void n(t))})})},nh.prototype.getPreferredMFA=function(o,i){var a=this,s=this;return new Promise(function(n,r){var e=a._config.clientMetadata,t=!!i&&i.bypassCache;o.getUserData(function(e,t){return e?(Qf.debug("getting preferred mfa failed",e),void r(e)):void((t=s._getMfaTypeFromUserData(t))?n(t):r("invalid MFA Type"))},{bypassCache:t,clientMetadata:e})})},nh.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;return n?t=n:(n=e.UserMFASettingList)?0===n.length?t="NOMFA":Qf.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA",t},nh.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){e?(Qf.debug("getting user data failed",e),r(e)):n(t)},t)})},nh.prototype.setPreferredMFA=function(a,s){return $f(this,void 0,void 0,function(){var t,n,i,r,o;return Yf(this,function(e){switch(e.label){case 0:return t=this._config.clientMetadata,[4,this._getUserData(a,{bypassCache:!0,clientMetadata:t})];case 1:switch(o=e.sent(),i=n=null,s){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return i={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return n={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=o.UserMFASettingList,[4,this._getMfaTypeFromUserData(o)];case 5:if("NOMFA"===(o=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===o)n={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==o)return[2,this.rejectAuthError(td.InvalidMFA)];i={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?n={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(i={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return Qf.debug("no validmfa method provided"),[2,this.rejectAuthError(td.NoMFA)];case 7:return[2,new Promise(function(r,o){a.setUserMfaPreference(n,i,function(e,n){return e?(Qf.debug("Set user mfa preference error",e),o(e)):(Qf.debug("Set user mfa success",n),Qf.debug("Caching the latest user data into local"),void a.getUserData(function(e,t){return e?(Qf.debug("getting user data failed",e),o(e)):r(n)},{bypassCache:!0,clientMetadata:t}))})})]}})})},nh.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(Qf.debug("disable mfa failed",e),void r(e)):(Qf.debug("disable mfa succeed",t),void n(t))})})},nh.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(Qf.debug("enable mfa failed",e),void r(e)):(Qf.debug("enable mfa succeed",t),void n(t))})})},nh.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){Qf.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){Qf.debug("associateSoftwareToken sucess",e),t(e)}})})},nh.prototype.verifyTotpToken=function(r,e){return Qf.debug("verification totp token",r,e),new Promise(function(t,n){r.verifySoftwareToken(e,"My TOTP device",{onFailure:function(e){Qf.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){Wf("signIn",r,"A user "+r.getUsername()+" has been signed in"),Qf.debug("verifyTotpToken success",e),t(e)}})})},nh.prototype.confirmSignIn=function(o,e,n,i){var a=this;if(void 0===i&&(i=this._config.clientMetadata),!e)return this.rejectAuthError(td.EmptyCode);var s=this;return new Promise(function(r,t){o.sendMFACode(e,{onSuccess:function(n){return $f(a,void 0,void 0,function(){var t;return Yf(this,function(e){switch(e.label){case 0:Qf.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Qf.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Qf.debug("cannot get cognito credentials",t),[3,6];case 5:return Wf("signIn",s.user=o,"A user "+o.getUsername()+" has been signed in"),r(o),[7];case 6:return[2]}})})},onFailure:function(e){Qf.debug("confirm signIn failure",e),t(e)}},n,i)})},nh.prototype.completeNewPassword=function(o,e,n,i){var a=this;if(void 0===n&&(n={}),void 0===i&&(i=this._config.clientMetadata),!e)return this.rejectAuthError(td.EmptyPassword);var s=this;return new Promise(function(r,t){o.completeNewPasswordChallenge(e,n,{onSuccess:function(n){return $f(a,void 0,void 0,function(){var t;return Yf(this,function(e){switch(e.label){case 0:Qf.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),Qf.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),Qf.debug("cannot get cognito credentials",t),[3,6];case 5:return Wf("signIn",s.user=o,"A user "+o.getUsername()+" has been signed in"),r(o),[7];case 6:return[2]}})})},onFailure:function(e){Qf.debug("completeNewPassword failure",e),Wf("completeNewPassword_failure",e,a.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){Qf.debug("signIn MFA required"),o.challengeName=e,o.challengeParam=t,r(o)},mfaSetup:function(e,t){Qf.debug("signIn mfa setup",e),o.challengeName=e,o.challengeParam=t,r(o)},totpRequired:function(e,t){Qf.debug("signIn mfa setup",e),o.challengeName=e,o.challengeParam=t,r(o)}},i)})},nh.prototype.sendCustomChallengeAnswer=function(n,r,o){var i=this;return void 0===o&&(o=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,i.authCallbacks(n,e,t),o)}):this.rejectAuthError(td.EmptyChallengeResponse):this.rejectNoUserPool()},nh.prototype.updateUserAttributes=function(o,i,a){void 0===a&&(a=this._config.clientMetadata);var s=[],e=this;return new Promise(function(n,r){e.userSession(o).then(function(e){for(var t in i)"sub"!==t&&t.indexOf("_verified")<0&&(t={Name:t,Value:i[t]},s.push(t));o.updateAttributes(s,function(e,t){return e?r(e):n(t)},a)})})},nh.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},nh.prototype.verifiedContact=function(e){var r=this;return this.userAttributes(e).then(function(e){var t=r.attributesToObject(e),n={},e={};return t.email&&(t.email_verified?e.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?e.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:e,unverified:n}})},nh.prototype.currentUserPoolUser=function(l){var e=this;return this.userPool?new Promise(function(u,c){e._storageSync.then(function(){return $f(e,void 0,void 0,function(){var s,t,n=this;return Yf(this,function(e){switch(e.label){case 0:return this.isOAuthInProgress()?(Qf.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(t){var n=setTimeout(function(){Qf.debug("OAuth signIn in progress timeout"),_.Hub.remove("auth",r),t()},1e4);function r(e){"cognitoHostedUI"!==(e=e.payload.event)&&"cognitoHostedUI_failure"!==e||(Qf.debug("OAuth signIn resolved: "+e),clearTimeout(n),_.Hub.remove("auth",r),t())}_.Hub.listen("auth",r)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return(s=this.userPool.getCurrentUser())?(t=this._config.clientMetadata,s.getSession(function(o,i){return $f(n,void 0,void 0,function(){var t,n,r,a=this;return Yf(this,function(e){switch(e.label){case 0:return o?(Qf.debug("Failed to get the user session",o),c(o),[2]):(t=!!l&&l.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return n=this._config.clientMetadata,(void 0===(r=i.getAccessToken().decodePayload().scope)?"":r).split(" ").includes(eh)?(s.getUserData(function(e,t){if(e)return Qf.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?c(e):u(s));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],o=0;o<t.UserAttributes.length;o++){var i={Name:t.UserAttributes[o].Name,Value:t.UserAttributes[o].Value},i=new $d(i);r.push(i)}return e=a.attributesToObject(r),Object.assign(s,{attributes:e,preferredMFA:n}),u(s)},{bypassCache:t,clientMetadata:n}),[2]):(Qf.debug("Unable to get the user data because the "+eh+" is not in the scopes of the access token"),[2,u(s)])}})})},{clientMetadata:t})):(Qf.debug("Failed to get user from user pool"),c("No current user")),[2]}})})}).catch(function(e){return Qf.debug("Failed to sync cache info into memory",e),c(e)})}):this.rejectNoUserPool()},nh.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},nh.prototype.currentAuthenticatedUser=function(i){return $f(this,void 0,void 0,function(){var t,n,r,o;return Yf(this,function(e){switch(e.label){case 0:Qf.debug("getting current authenticated user"),o=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),Qf.debug("Failed to sync cache info into memory",t),t;case 4:try{(n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(o=Xf(Xf({},n.user),{token:n.token}))}catch(e){Qf.debug("cannot load federated user from auth storage")}return o?(this.user=o,Qf.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:Qf.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(i)];case 7:return r=e.sent(),[3,9];case 8:return"No userPool"===(o=e.sent())&&Qf.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),Qf.debug("The user is not authenticated by the error",o),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=r,[2,this.user]}})})},nh.prototype.currentSession=function(){var r=this;return Qf.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){Qf.debug("Failed to get the current session",e),n(e)})}).catch(function(e){Qf.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},nh.prototype.userSession=function(o){if(!o)return Qf.debug("the user is null"),this.rejectAuthError(td.NoUserSession);var e=this._config.clientMetadata;return new Promise(function(n,r){Qf.debug("Getting the session from this user:",o),o.getSession(function(e,t){e?(Qf.debug("Failed to get the session from user",o),r(e)):(Qf.debug("Succeed to get the user session",t),n(t))},{clientMetadata:e})})},nh.prototype.currentUserCredentials=function(){return $f(this,void 0,void 0,function(){var t,n=this;return Yf(this,function(e){switch(e.label){case 0:Qf.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),Qf.debug("Failed to sync cache info into memory",t),t;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){Qf.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(e){return Qf.debug("getting session success",e),n.Credentials.set(e,"session")}).catch(function(e){return Qf.debug("getting session failed",e),n.Credentials.set(null,"guest")})]}})})},nh.prototype.currentCredentials=function(){return Qf.debug("getting current credentials"),this.Credentials.get()},nh.prototype.verifyUserAttribute=function(n,r,o){return void 0===o&&(o=this._config.clientMetadata),new Promise(function(e,t){n.getAttributeVerificationCode(r,{onSuccess:function(){return e()},onFailure:function(e){return t(e)}},o)})},nh.prototype.verifyUserAttributeSubmit=function(e,r,o){return o?new Promise(function(t,n){e.verifyAttribute(r,o,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(td.EmptyCode)},nh.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},nh.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},nh.prototype.cognitoIdentitySignOut=function(a,s){return $f(this,void 0,void 0,function(){var t,o,i=this;return Yf(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),Qf.debug("Failed to sync cache info into memory",t),t;case 3:return o=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){if(a&&a.global){Qf.debug("user global sign out",s);var e=i._config.clientMetadata;s.getSession(function(e,t){return e?(Qf.debug("failed to get the user session",e),r(e)):void s.globalSignOut({onSuccess:function(e){if(Qf.debug("global sign out success"),!o)return n();i.oAuthSignOutRedirect(n,r)},onFailure:function(e){return Qf.debug("global sign out failed",e),r(e)}})},{clientMetadata:e})}else{if(Qf.debug("user sign out",s),s.signOut(),!o)return n();i.oAuthSignOutRedirect(n,r)}})]}})})},nh.prototype.oAuthSignOutRedirect=function(e,t){_.JS.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},nh.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},nh.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e("Signout timeout fail")},3e3)},nh.prototype.signOut=function(n){return $f(this,void 0,void 0,function(){var t;return Yf(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),Qf.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:Qf.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:Qf.debug("no Congito User pool"),e.label=8;case 8:return Wf("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},nh.prototype.cleanCachedItems=function(){return $f(this,void 0,void 0,function(){return Yf(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},nh.prototype.changePassword=function(t,o,i,a){var e=this;return void 0===a&&(a=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(o,i,function(e,t){return e?(Qf.debug("change password failure",e),r(e)):n(t)},a)})})},nh.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(td.EmptyUsername);var o=this.createCognitoUser(r);return new Promise(function(t,n){o.forgotPassword({onSuccess:function(){t()},onFailure:function(e){Qf.debug("forgot password failure",e),Wf("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){Wf("forgotPassword",o,r+" has initiated forgot password flow"),t(e)}},e)})},nh.prototype.forgotPasswordSubmit=function(n,r,o,i){if(void 0===i&&(i=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(td.EmptyUsername);if(!r)return this.rejectAuthError(td.EmptyCode);if(!o)return this.rejectAuthError(td.EmptyPassword);var a=this.createCognitoUser(n);return new Promise(function(e,t){a.confirmPassword(r,o,{onSuccess:function(){Wf("forgotPasswordSubmit",a,n+" forgotPasswordSubmit successful"),e()},onFailure:function(e){Wf("forgotPasswordSubmit_failure",e,n+" forgotPasswordSubmit failed"),t(e)}},i)})},nh.prototype.currentUserInfo=function(){return $f(this,void 0,void 0,function(){var t,n,r,o,i;return Yf(this,function(e){switch(e.label){case 0:return(t=this.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return Qf.debug(e)})];case 1:if(!(i=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(i)];case 3:r=e.sent(),o=this.attributesToObject(r),n=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return n=e.sent(),[3,7];case 6:return r=e.sent(),Qf.debug("Failed to retrieve credentials while getting current user info",r),[3,7];case 7:return[2,{id:n?n.identityId:void 0,username:i.getUsername(),attributes:o}];case 8:return o=e.sent(),Qf.debug("currentUserInfo error",o),[2,{}];case 9:return"federated"===t?[2,(i=this.user)||{}]:[2]}})})},nh.prototype.federatedSignIn=function(c,l,p){return $f(this,void 0,void 0,function(){var r,o,i,a,s,u;return Yf(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===c&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return od(c)||(n=c)&&["customProvider"].find(function(e){return n.hasOwnProperty(e)})||(t=c)&&["customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===c?(r=c||{provider:ed.Cognito},o=od(r)?r.provider:r.customProvider,od(r),a=r.customState,this._config.userPoolId&&(i=id(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,r=id(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,r,i,o,a)),[3,4]):[3,1];case 1:o=c;try{(u=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&Qf.warn("There is already a signed in user: "+u+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return i=l.token,a=l.identity_id,u=l.expires_at,[4,this.Credentials.set({provider:o,token:i,identity_id:a,user:p,expires_at:u},"federation")];case 2:return s=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return Wf("signIn",u=e.sent(),"A user "+u.username+" has been signed in"),Qf.debug("federated sign in credentials",s),[2,s];case 4:return[2]}var t,n})})},nh.prototype._handleAuthResponse=function(c){return $f(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u;return Yf(this,function(e){switch(e.label){case 0:if(this.oAuthFlowInProgress)return Qf.debug("Skipping URL "+c+" current flow in progress"),[2];e.label=1;case 1:if(e.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(Wf("parsingCallbackUrl",{url:c},"The callback url is being parsed"),t=c||(_.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(S.parse(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){return"code"===(e=Jf(e,1)[0])||"error"===e}),r=!!(S.parse(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){return"access_token"===(e=Jf(e,1)[0])||"error"===e}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=2;case 2:return e.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return o=e.sent(),a=o.accessToken,u=o.idToken,i=o.refreshToken,s=o.state,o=new Kd({IdToken:new Vd({IdToken:u}),RefreshToken:new qd({RefreshToken:i}),AccessToken:new Rd({AccessToken:a})}),u=void 0,this._config.identityPoolId?[4,this.Credentials.set(o,"session")]:[3,5];case 4:u=e.sent(),Qf.debug("AWS credentials",u),e.label=5;case 5:return i=/-/.test(s),(a=this.createCognitoUser(o.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(o),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),Wf("signIn",a,"A user "+a.getUsername()+" has been signed in"),Wf("cognitoHostedUI",a,"A user "+a.getUsername()+" has been signed in via Cognito Hosted UI"),i&&(s=s.split("-").splice(1).join("-"),Wf("customOAuthState",_.urlSafeDecode(s),"State for user "+a.getUsername())),[2,u];case 6:return u=e.sent(),Qf.debug("Error in cognito hosted auth response",u),Wf("signIn_failure",u,"The OAuth response flow failed"),Wf("cognitoHostedUI_failure",u,"A failure occurred when returning to the Cognito Hosted UI"),Wf("customState_failure",u,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},nh.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},nh.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?n[e.Name]=t.isTruthyString(e.Value)||!0===e.Value:n[e.Name]=e.Value}),n},nh.prototype.isTruthyString=function(e){return"function"==typeof e.toLowerCase&&"true"===e.toLowerCase()},nh.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};return t.Storage=this._storage,e=this._config.authenticationFlowType,t=new Qd(t),e&&t.setAuthenticationFlowType(e),t},nh.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},nh.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?td.NoConfig:td.MissingAuthConfig},nh.prototype.rejectAuthError=function(e){return Promise.reject(new Vf(e))},nh.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new Hf(e))},new nh(null));_.Amplify.register(rh);var oh=function(e,t){return(oh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function ih(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}oh(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ah=function(){return(ah=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function sh(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function uh(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var ch,b="3.6.1",lh=(F(ph,ch=u.Writable),ph.prototype._write=function(e,t,n){try{this.hash.update(e)}catch(e){return n(e)}n()},ph);function ph(e,t){return(t=ch.call(this,t)||this).hash=e,t}function dh(e){return Ah(e)?e.replace(/fips-|-fips/,""):e}function fh(e){var t=e.match(Ch);return[t[2],e.replace(new RegExp("^"+t[0]),"")]}function hh(e,t){if(void 0===t&&(t={tlsCompatible:!0}),64<=e.length||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||null!=t&&t.tlsCompatible&&Sh.test(e))throw new Error("Invalid DNS label "+e)}function gh(e){var t=e.isCustomEndpoint,n=(e.baseHostname,e.dualstackEndpoint),r=e.accelerateEndpoint;if(t){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(r)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return("string"==typeof e.bucketName?kh:Ih)(j(j({},e),{isCustomEndpoint:t}))}function mh(t){return{applyToStack:function(e){var m;e.addRelativeTo((m=t,function(h,g){return function(f){return K(void 0,void 0,void 0,function(){var n,r,o,i,a,s,u,c,l,p,d;return H(this,function(e){switch(e.label){case 0:return n=f.input.Bucket,r=m.bucketEndpoint,o=f.request,Ga.isInstance(o)?m.bucketEndpoint?(o.hostname=n,[3,7]):[3,1]:[3,8];case 1:return"string"==typeof(t=n)&&0===t.indexOf("arn:")&&6<=t.split(":").length?(u=function(e){if((e=e.split(":")).length<6||"arn"!==e[0])throw new Error("Malformed ARN");return{partition:(e=W(e))[1],service:e[2],region:e[3],accountId:e[4],resource:e.slice(5).join(":")}}(n),i=dh,[4,m.region()]):[3,5];case 2:return l=i.apply(void 0,[e.sent()]),[4,m.regionInfoProvider(l)];case 3:return a=e.sent()||{},s=a.partition,a=void 0===(a=a.signingRegion)?l:a,[4,m.useArnRegion()];case 4:return d=e.sent(),u=gh({bucketName:u,baseHostname:o.hostname,accelerateEndpoint:m.useAccelerateEndpoint,dualstackEndpoint:m.useDualstackEndpoint,pathStyleEndpoint:m.forcePathStyle,tlsCompatible:"https:"===o.protocol,useArnRegion:d,clientPartition:s,clientSigningRegion:a,clientRegion:l,isCustomEndpoint:m.isCustomEndpoint}),p=u.hostname,d=u.bucketEndpoint,s=u.signingRegion,u=u.signingService,s&&s!==a&&(g.signing_region=s),u&&"s3"!==u&&(g.signing_service=u),o.hostname=p,r=d,[3,7];case 5:return c=dh,[4,m.region()];case 6:l=c.apply(void 0,[e.sent()]),l=gh({bucketName:n,clientRegion:l,baseHostname:o.hostname,accelerateEndpoint:m.useAccelerateEndpoint,dualstackEndpoint:m.useDualstackEndpoint,pathStyleEndpoint:m.forcePathStyle,tlsCompatible:"https:"===o.protocol,isCustomEndpoint:m.isCustomEndpoint}),p=l.hostname,d=l.bucketEndpoint,o.hostname=p,r=d,e.label=7;case 7:r&&(o.path=o.path.replace(/^(\/)?[^\/]+/,""),""===o.path&&(o.path="/")),e.label=8;case 8:return[2,h(j(j({},f),{request:o}))]}var t})})}}),Th)}}}function yh(e,t){return e===t||dh(e)===t||e===dh(t)}var vh=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,bh=/(\d+\.){3}\d+/,wh=/\.\./,Sh=/\./,Ch=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,_h=/^s3(-external-1)?\.amazonaws\.com$/,Eh="amazonaws.com",Ah=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Ih=function(e){var t=e.isCustomEndpoint,n=e.baseHostname,r=(d=W(t?[e.clientRegion,n]:(l=n,_h.test(l)?[l.replace("."+Eh,""),Eh]:fh(l)),2))[0],o=d[1],i=e.pathStyleEndpoint,a=void 0!==(p=e.dualstackEndpoint)&&p,s=e.accelerateEndpoint,u=e.tlsCompatible,c=void 0===u||u,n=e.useArnRegion,l=e.bucketName,p=void 0===(d=e.clientPartition)?"aws":d,d=void 0===(u=e.clientSigningRegion)?r:u;return function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:i,accelerateEndpoint:void 0!==s&&s,tlsCompatible:c}),e=l.service,u=l.partition,i=l.accountId,s=l.region,l=l.resource,function(){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(),function(e){if(u!==e.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+u+'" but expected "'+e.clientPartition+'"')}({clientPartition:p}),function(){if(!/[0-9]{12}/.exec(i))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!yh(e,t.clientRegion)&&!yh(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&Ah(e))throw new Error("Endpoint does not support FIPS region")}(s,{useArnRegion:n,clientRegion:r,clientSigningRegion:d}),l=(p=function(e){var t=e.includes(":")?":":"/",e=(n=W(e.split(t)))[0],n=n.slice(1);if("accesspoint"===e){if(1!==n.length||""===n[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:n[0]}}if("outpost"!==e)throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'");if(!n[0]||"accesspoint"!==n[1]||!n[2]||3!==n.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");return n=(t=W(n,3))[0],t[1],{outpostId:n,accesspointName:t[2]}}(l)).accesspointName,p=p.outpostId,hh(l+"-"+i,{tlsCompatible:c}),r=n?s:r,d=n?s:d,p?(function(){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(),hh(p,{tlsCompatible:c}),function(){if(a)throw new Error("Dualstack endpoint is not supported with Outpost")}(),function(e){if(Ah(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(r),{bucketEndpoint:!0,hostname:l+"-"+i+"."+p+(t?"":".s3-outposts."+r)+"."+o,signingRegion:d,signingService:"s3-outposts"}):(function(){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(),{bucketEndpoint:!0,hostname:l+"-"+i+(t?"":".s3-accesspoint"+(a?".dualstack":"")+"."+r)+"."+o,signingRegion:d})},kh=function(e){var t=void 0!==(s=e.accelerateEndpoint)&&s,n=e.clientRegion,r=e.baseHostname,o=e.bucketName,i=void 0!==(a=e.dualstackEndpoint)&&a,a=void 0!==(s=e.pathStyleEndpoint)&&s,s=void 0===(s=e.tlsCompatible)||s,u=(n=W(void 0!==(e=e.isCustomEndpoint)&&e?[n,r]:(u=r,_h.test(u)?["us-east-1",Eh]:fh(u)),2))[0],n=n[1];return a||(a=o,!vh.test(a)||bh.test(a)||wh.test(a))||s&&Sh.test(o)?{bucketEndpoint:!1,hostname:i?"s3.dualstack."+u+"."+n:r}:(t?r="s3-accelerate"+(i?".dualstack":"")+"."+n:i&&(r="s3.dualstack."+u+"."+n),{bucketEndpoint:!0,hostname:o+"."+r})},Th={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},Ph="AWS_S3_USE_ARN_REGION",Oh="s3_use_arn_region",vl={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Ph)){if("true"===e[Ph])return!0;if("false"===e[Ph])return!1;throw new Error("Cannot load env "+Ph+'. Expected "true" or "false", got '+e[Ph]+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Oh)){if("true"===e[Oh])return!0;if("false"===e[Oh])return!1;throw new Error("Cannot load shared config entry "+Oh+'. Expected "true" or "false", got '+e[Oh]+".")}},default:!1},xh="s3.{region}.amazonaws.com",Nh=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Rh=new Set(["cn-north-1","cn-northwest-1"]),Mh=new Set(["us-iso-east-1"]),Uh=new Set(["us-isob-east-1"]),Dh=new Set(["us-gov-east-1","us-gov-west-1"]),Lh={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":n={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Nh.has(e)&&(n={hostname:xh.replace("{region}",e),partition:"aws"}),Rh.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Mh.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Uh.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=Dh.has(e)?{hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:xh.replace("{region}",e),partition:"aws"})}return Promise.resolve(ah({signingService:"s3"},n))},serviceId:"S3",signingEscapePath:!1,urlParser:ur,useArnRegion:!1},Fh=ah(ah({},Lh),{runtime:"node",base64Decoder:ou,base64Encoder:iu,bodyLengthChecker:au,credentialDefaultProvider:Xe,defaultUserAgentProvider:hn({serviceId:Lh.serviceId,clientVersion:b}),eventStreamSerdeProvider:function(e){return new nd(e)},maxAttempts:ls(g),md5:ja.bind(null,"md5"),region:ls(mn,wn),requestHandler:new Ye,sha256:ja.bind(null,"sha256"),streamCollector:Yn,streamHasher:function(i,a){return new Promise(function(e,t){var n,r,o;"string"==typeof a.path?(n=s.createReadStream(a.path,{start:a.start,end:a.end}),r=new i,o=new lh(r),n.pipe(o),n.on("error",function(e){o.end(),t(e)}),o.on("error",t),o.on("finish",function(){r.digest().then(e).catch(t)})):t(new Error("Unable to calculate hash for non-file streams."))})},useArnRegion:ls(vl),utf8Decoder:dt,utf8Encoder:wt});var jh={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0};function Bh(t){return{applyToStack:function(e){var c;e.addRelativeTo((c=t,function(u){return function(s){return K(void 0,void 0,void 0,function(){var n,r,o,i,a;return H(this,function(e){switch(e.label){case 0:return[4,u(s)];case 1:return n=e.sent(),r=n.response,Ka.isInstance(r)?(i=r.statusCode,a=r.body,i<200&&300<=i?[2,n]:[4,zh(a,c)]):[2,n];case 2:return o=e.sent(),[4,zh(o,t=c).then(function(e){return t.utf8Encoder(e)})];case 3:if(i=e.sent(),0===o.length)throw(a=new Error("S3 aborted request")).name="InternalError",a;return i&&i.match("<Error>")&&(r.statusCode=400),r.body=o,[2,n]}var t})})}}),Pg)}}}function zh(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}var Vh,qh,Kh,Hh,Gh,Wh,$h,Yh,Jh,Zh,Xh,Qh,eg,tg,ng,rg,og,ig,ag,sg,ug,cg,lg,pg,dg,fg,hg,gg,mg,yg,vg,bg,wg,Sg,Cg,_g,Eg,Ag,Ig,kg={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Tg={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},Pg={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},Og=(ih(xg,Vh=C),xg.prototype.destroy=function(){Vh.prototype.destroy.call(this)},xg);function xg(e){var t,n,r,o,i=this,a=ah(ah({},Fh),e),s=Ti(a),u=rs(c=nc(ki(s))),c=sc((e=void 0!==(t=u.bucketEndpoint)&&t,s=void 0!==(a=u.forcePathStyle)&&a,t=void 0!==(c=u.useAccelerateEndpoint)&&c,c=void 0!==(a=u.useDualstackEndpoint)&&a,n=void 0!==(a=u.useArnRegion)&&a,j(j({},u),{bucketEndpoint:e,forcePathStyle:s,useAccelerateEndpoint:t,useDualstackEndpoint:c,useArnRegion:"function"==typeof n?n:function(){return Promise.resolve(n)}}))),c=j(j({},c),{eventStreamMarshaller:c.eventStreamSerdeProvider(c)});return(i=Vh.call(this,c)||this).config=c,i.middlewareStack.use(ic(i.config)),i.middlewareStack.use(Va(i.config)),i.middlewareStack.use(gu(i.config)),i.middlewareStack.use(vu(i.config)),i.middlewareStack.use(wu(i.config)),i.middlewareStack.use((i.config,{applyToStack:function(e){e.add(function(){var e=this;return function(o){return function(r){return K(e,void 0,void 0,function(){var n;return H(this,function(e){if("string"==typeof(n=r.input.Bucket)&&!("string"==typeof(t=n)&&0===t.indexOf("arn:")&&6<=t.split(":").length)&&0<=n.indexOf("/"))throw(n=new Error("Bucket name shouldn't contain '/', received '"+n+"'")).name="InvalidBucketName",n;var t;return[2,o(j({},r))]})})}}}(),kg)}})),i.middlewareStack.use((o=i.config,{applyToStack:function(e){var i;e.add((i=o,function(o){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=r.request,!Ga.isInstance(t)||i.isCustomEndpoint?[2,o(j({},r))]:"s3.amazonaws.com"!==t.hostname?[3,1]:(t.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return n="aws-global",[4,i.region()];case 2:n===e.sent()&&(t.hostname="s3.amazonaws.com"),e.label=3;case 3:return[2,o(j({},r))]}})})}}),Tg)}})),i.middlewareStack.use((r=i.config,{applyToStack:function(e){e.add(function(o){var e=this;return function(r){return function(n){return K(e,void 0,void 0,function(){var t;return H(this,function(e){return t=n.request,Ga.isInstance(t)&&t.body&&"node"===o.runtime&&(t.headers=j(j({},t.headers),{Expect:"100-continue"})),[2,r(j(j({},n),{request:t}))]})})}}}(r),jh)}})),i.middlewareStack.use(uc(i.config)),i}(qh=qh||{}).filterSensitiveLog=function(e){return ah({},e)},(Kh=Kh||{}).filterSensitiveLog=function(e){return ah({},e)},(Hh=Hh||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:kc})},(Gh=Gh||{}).filterSensitiveLog=function(e){return ah({},e)},(Wh=Wh||{}).filterSensitiveLog=function(e){return ah(ah(ah({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:kc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:kc})},($h=$h||{}).filterSensitiveLog=function(e){return ah(ah(ah(ah({},e),e.SSECustomerKey&&{SSECustomerKey:kc}),e.SSEKMSKeyId&&{SSEKMSKeyId:kc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:kc})},(Yh=Yh||{}).filterSensitiveLog=function(e){return ah({},e)},(Jh=Jh||{}).filterSensitiveLog=function(e){return ah({},e)},(eg=eg||{}).filterSensitiveLog=function(e){return ah({},e)},(Zh=Zh||{}).filterSensitiveLog=function(e){return ah({},e)},(Xh=Xh||{}).filterSensitiveLog=function(e){return ah({},e)},(eg=Qh=Qh||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},eg.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Zh.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Xh.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(tg=tg||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:kc})},(ng=ng||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:tg.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},(rg=rg||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.KeyId&&{KeyId:kc})},(og=og||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.SSEKMS&&{SSEKMS:rg.filterSensitiveLog(e.SSEKMS)})},(ig=ig||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.Encryption&&{Encryption:og.filterSensitiveLog(e.Encryption)})},(ag=ag||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.S3BucketDestination&&{S3BucketDestination:ig.filterSensitiveLog(e.S3BucketDestination)})},(cg=cg||{}).filterSensitiveLog=function(e){return ah({},e)},(sg=sg||{}).filterSensitiveLog=function(e){return ah({},e)},(cg=ug=ug||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},cg.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Zh.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:sg.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(lg=lg||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.Filter&&{Filter:ug.filterSensitiveLog(e.Filter)})},(fg=fg||{}).filterSensitiveLog=function(e){return ah({},e)},(pg=pg||{}).filterSensitiveLog=function(e){return ah({},e)},(fg=dg=dg||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},fg.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Zh.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:pg.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(mg=mg||{}).filterSensitiveLog=function(e){return ah({},e)},(hg=hg||{}).filterSensitiveLog=function(e){return ah({},e)},(mg=gg=gg||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},mg.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Zh.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:hg.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(yg=yg||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.Filter&&{Filter:gg.filterSensitiveLog(e.Filter)})},(vg=vg||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:kc})},(bg=bg||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.SSECustomerKey&&{SSECustomerKey:kc})},(wg=wg||{}).filterSensitiveLog=function(e){return ah({},e)},(Sg=Sg||{}).filterSensitiveLog=function(e){return ah({},e)},(Cg=Cg||{}).filterSensitiveLog=function(e){return ah({},e)},(_g=_g||{}).filterSensitiveLog=function(e){return ah({},e)},(Eg=Eg||{}).filterSensitiveLog=function(e){return ah(ah(ah({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:kc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:kc})},(Ag=Ag||{}).filterSensitiveLog=function(e){return ah(ah(ah(ah({},e),e.SSECustomerKey&&{SSECustomerKey:kc}),e.SSEKMSKeyId&&{SSEKMSKeyId:kc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:kc})},(Ig=Ig||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.KMSKeyId&&{KMSKeyId:kc})};var Ng=(Rg.prototype.withName=function(e){return this.name=e,this},Rg.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},Rg.prototype.addChildNode=function(e){return this.children.push(e),this},Rg.prototype.removeAttribute=function(e){return delete this.attributes[e],this},Rg.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,o=this.attributes;try{for(var i=G(Object.keys(o)),a=i.next();!a.done;a=i.next()){var s=a.value,u=o[s];null!=u&&(r+=" "+s+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map(function(e){return e.toString()}).join("")+"</"+this.name+">":"/>")},Rg);function Rg(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}var Mg=(Ug.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Ug);function Ug(e){this.value=e}function Dg(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}function Lg(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}var Fg,jg=function(r,e){return sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){return t={name:"InvalidObjectState",$fault:"client",$metadata:Hg(r),AccessTier:void 0,StorageClass:void 0},void 0!==(n=r.body).AccessTier&&(t.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),[2,t]})})},Bg=function(n,e){return sh(void 0,void 0,void 0,function(){var t;return uh(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:Hg(n)},n.body,[2,t]})})},zg=function(n,e){return sh(void 0,void 0,void 0,function(){var t;return uh(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:Hg(n)},n.body,[2,t]})})},Vg=function(n,e){return sh(void 0,void 0,void 0,function(){var t;return uh(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:Hg(n)},n.body,[2,t]})})},qg=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:(t=e,e=new Ng("CompletedPart"),void 0!==t.ETag&&null!==t.ETag&&(n=new Ng("ETag").addChildNode(new Mg(t.ETag)).withName("ETag"),e.addChildNode(n)),void 0!==t.PartNumber&&null!==t.PartNumber&&(n=new Ng("PartNumber").addChildNode(new Mg(String(t.PartNumber))).withName("PartNumber"),e.addChildNode(n)),e.withName("member"));var t,n})},Kg=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},Hg=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Gg=function(e,t){return Dg(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=P.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}});return(t=t[e=Object.keys(t)[0]])["#text"]&&(t[e]=t["#text"],delete t["#text"]),bc(t)}return{}});var n},Wg=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},$g=(ih(Yg,Fg=vt),Yg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize)),this.middlewareStack.use(mh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:Kh.filterSensitiveLog,outputFilterSensitiveLog:qh.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},Yg.prototype.serialize=function(e,t){return s=e,u=t,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return uh(this,function(e){switch(e.label){case 0:if(t=ah(ah({},Lg(s.RequestPayer)&&{"x-amz-request-payer":s.RequestPayer}),Lg(s.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":s.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===s.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=s.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",yc(i)),void 0===s.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=s.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(yc).join("/")),r=ah({"x-id":"AbortMultipartUpload"},void 0!==s.UploadId&&{uploadId:s.UploadId}),[4,u.endpoint()];case 1:return a=e.sent(),o=a.hostname,i=void 0===(i=a.protocol)?"https":i,a=a.port,[2,new Ga({protocol:i,hostname:o,port:a,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var s,u},Yg.prototype.deserialize=function(e,t){return n=e,r=t,sh(void 0,void 0,void 0,function(){var t;return uh(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,(s=n,u=r,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return uh(this,function(e){switch(e.label){case 0:return t=[ah({},s)],a={},[4,Gg(s.body,u)];case 1:switch(o=ah.apply(void 0,t.concat([(a.body=e.sent(),a)])),i="UnknownError",i=Wg(s,o.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return r=[{}],[4,Vg(o)];case 3:return n=ah.apply(void 0,[ah.apply(void 0,r.concat([e.sent()])),{name:i,$metadata:Hg(s)}]),[3,5];case 4:o=o.body,i=o.code||o.Code||i,n=ah(ah({},o),{name:""+i,message:o.message||o.Message||i,$fault:"client",$metadata:Hg(s)}),e.label=5;case 5:return i=n.message||n.Message||i,n.message=i,delete n.Message,[2,Promise.reject(Object.assign(new Error(i),n))]}})}))]:(t={$metadata:Hg(n),RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,Dg(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var s,u})});var n,r},Yg);function Yg(e){var t=Fg.call(this)||this;return t.input=e,t}var Jg,Zg=(ih(Xg,Jg=vt),Xg.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Bh(t)),this.middlewareStack.use(mh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:Gh.filterSensitiveLog,outputFilterSensitiveLog:Hh.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},Xg.prototype.serialize=function(e,t){return l=e,p=t,sh(void 0,void 0,void 0,function(){var r,o,i,a,s,u,c;return uh(this,function(e){switch(e.label){case 0:if(r=ah(ah({"content-type":"application/xml"},Lg(l.RequestPayer)&&{"x-amz-request-payer":l.RequestPayer}),Lg(l.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":l.ExpectedBucketOwner}),o="/{Bucket}/{Key+}",void 0===l.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((s=l.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(o=o.replace("{Bucket}",yc(s)),void 0===l.Key)throw new Error("No value provided for input HTTP label: Key.");if((s=l.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return o=o.replace("{Key+}",s.split("/").map(yc).join("/")),i=ah({},void 0!==l.UploadId&&{uploadId:l.UploadId}),void 0!==l.MultipartUpload&&(t=l.MultipartUpload,n=new Ng("CompletedMultipartUpload"),void 0!==t.Parts&&null!==t.Parts&&qg(t.Parts).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),a='<?xml version="1.0" encoding="UTF-8"?>',(u=n).addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=u.toString()),[4,p.endpoint()];case 1:return c=e.sent(),s=c.hostname,u=void 0===(u=c.protocol)?"https":u,c=c.port,[2,new Ga({protocol:u,hostname:s,port:c,method:"POST",headers:r,path:o,query:i,body:a})]}var t,n})});var l,p},Xg.prototype.deserialize=function(e,t){return i=e,a=t,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){switch(e.label){case 0:return 200!==i.statusCode&&300<=i.statusCode?[2,(r=i,o=a,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){switch(e.label){case 0:return t=[ah({},r)],n={},[4,Gg(r.body,o)];case 1:return t=ah.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Wg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ah(ah({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Hg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:Hg(i),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==i.headers["x-amz-expiration"]&&(t.Expiration=i.headers["x-amz-expiration"]),void 0!==i.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=i.headers["x-amz-server-side-encryption"]),void 0!==i.headers["x-amz-version-id"]&&(t.VersionId=i.headers["x-amz-version-id"]),void 0!==i.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=i.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==i.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===i.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==i.headers["x-amz-request-charged"]&&(t.RequestCharged=i.headers["x-amz-request-charged"]),[4,Gg(i.body,a)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}var r,o})});var i,a},Xg);function Xg(e){var t=Jg.call(this)||this;return t.input=e,t}function Qg(t){return{applyToStack:function(e){e.add(function(g){var e=this;return function(h){return function(f){return K(e,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d;return H(this,function(e){switch(e.label){case 0:t=j({},f.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],e.label=1;case 1:e.trys.push([1,6,7,8]),n=G(i),r=n.next(),e.label=2;case 2:return r.done?[3,5]:(o=r.value,(i=t[o.target])?(u=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):"string"==typeof i?g.utf8Decoder(i):new Uint8Array(i),c=g.base64Encoder(u),(i=new g.md5).update(u),a=[j({},t)],(d={})[o.target]=c,s=o.hash,c=(u=g).base64Encoder,[4,i.digest()]):[3,4]);case 3:t=j.apply(void 0,a.concat([(d[s]=c.apply(u,[e.sent()]),d)])),e.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return l={error:l=e.sent()},[3,8];case 7:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(l)throw l.error}return[7];case 8:return[2,h(j(j({},f),{input:t}))]}})})}}}(t),tm)}}}var em,tm={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},nm=(ih(rm,em=vt),rm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Qg(t)),this.middlewareStack.use(mh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:$h.filterSensitiveLog,outputFilterSensitiveLog:Wh.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},rm.prototype.serialize=function(e,t){return s=e,u=t,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return uh(this,function(e){switch(e.label){case 0:if(t=ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah({},Lg(s.ACL)&&{"x-amz-acl":s.ACL}),Lg(s.CacheControl)&&{"cache-control":s.CacheControl}),Lg(s.ContentDisposition)&&{"content-disposition":s.ContentDisposition}),Lg(s.ContentEncoding)&&{"content-encoding":s.ContentEncoding}),Lg(s.ContentLanguage)&&{"content-language":s.ContentLanguage}),Lg(s.ContentType)&&{"content-type":s.ContentType}),Lg(s.Expires)&&{expires:Ac(s.Expires).toString()}),Lg(s.GrantFullControl)&&{"x-amz-grant-full-control":s.GrantFullControl}),Lg(s.GrantRead)&&{"x-amz-grant-read":s.GrantRead}),Lg(s.GrantReadACP)&&{"x-amz-grant-read-acp":s.GrantReadACP}),Lg(s.GrantWriteACP)&&{"x-amz-grant-write-acp":s.GrantWriteACP}),Lg(s.ServerSideEncryption)&&{"x-amz-server-side-encryption":s.ServerSideEncryption}),Lg(s.StorageClass)&&{"x-amz-storage-class":s.StorageClass}),Lg(s.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":s.WebsiteRedirectLocation}),Lg(s.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":s.SSECustomerAlgorithm}),Lg(s.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":s.SSECustomerKey}),Lg(s.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":s.SSECustomerKeyMD5}),Lg(s.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":s.SSEKMSKeyId}),Lg(s.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":s.SSEKMSEncryptionContext}),Lg(s.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":s.BucketKeyEnabled.toString()}),Lg(s.RequestPayer)&&{"x-amz-request-payer":s.RequestPayer}),Lg(s.Tagging)&&{"x-amz-tagging":s.Tagging}),Lg(s.ObjectLockMode)&&{"x-amz-object-lock-mode":s.ObjectLockMode}),Lg(s.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(s.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Lg(s.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":s.ObjectLockLegalHoldStatus}),Lg(s.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":s.ExpectedBucketOwner}),void 0!==s.Metadata&&Object.keys(s.Metadata).reduce(function(e,t){return ah(ah({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=s.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===s.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=s.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",yc(i)),void 0===s.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=s.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(yc).join("/")),r={uploads:""},[4,u.endpoint()];case 1:return a=e.sent(),o=a.hostname,i=void 0===(i=a.protocol)?"https":i,a=a.port,[2,new Ga({protocol:i,hostname:o,port:a,method:"POST",headers:t,path:n,query:r,body:void 0})]}})});var s,u},rm.prototype.deserialize=function(e,t){return i=e,a=t,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){switch(e.label){case 0:return 200!==i.statusCode&&300<=i.statusCode?[2,(r=i,o=a,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){switch(e.label){case 0:return t=[ah({},r)],n={},[4,Gg(r.body,o)];case 1:return t=ah.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Wg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ah(ah({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Hg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:Hg(i),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==i.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(i.headers["x-amz-abort-date"])),void 0!==i.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=i.headers["x-amz-abort-rule-id"]),void 0!==i.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=i.headers["x-amz-server-side-encryption"]),void 0!==i.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=i.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==i.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=i.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==i.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=i.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==i.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=i.headers["x-amz-server-side-encryption-context"]),void 0!==i.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===i.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==i.headers["x-amz-request-charged"]&&(t.RequestCharged=i.headers["x-amz-request-charged"]),[4,Gg(i.body,a)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}var r,o})});var i,a},rm);function rm(e){var t=em.call(this)||this;return t.input=e,t}var om,im=(ih(am,om=vt),am.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize)),this.middlewareStack.use(mh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:Jh.filterSensitiveLog,outputFilterSensitiveLog:Yh.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},am.prototype.serialize=function(e,t){return s=e,u=t,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return uh(this,function(e){switch(e.label){case 0:if(t=ah(ah(ah(ah({},Lg(s.MFA)&&{"x-amz-mfa":s.MFA}),Lg(s.RequestPayer)&&{"x-amz-request-payer":s.RequestPayer}),Lg(s.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":s.BypassGovernanceRetention.toString()}),Lg(s.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":s.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===s.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=s.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",yc(i)),void 0===s.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=s.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(yc).join("/")),r=ah({"x-id":"DeleteObject"},void 0!==s.VersionId&&{versionId:s.VersionId}),[4,u.endpoint()];case 1:return a=e.sent(),o=a.hostname,i=void 0===(i=a.protocol)?"https":i,a=a.port,[2,new Ga({protocol:i,hostname:o,port:a,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var s,u},am.prototype.deserialize=function(e,t){return n=e,i=t,sh(void 0,void 0,void 0,function(){var t;return uh(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,(r=n,o=i,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){switch(e.label){case 0:return t=[ah({},r)],n={},[4,Gg(r.body,o)];case 1:return t=ah.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Wg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ah(ah({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Hg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:Hg(n),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,Dg(n.body,i)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var r,o})});var n,i},am);function am(e){var t=om.call(this)||this;return t.input=e,t}var sm,um=(ih(cm,sm=vt),cm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Qg(t)),this.middlewareStack.use(mh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:bg.filterSensitiveLog,outputFilterSensitiveLog:vg.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},cm.prototype.serialize=function(e,t){return s=e,u=t,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return uh(this,function(e){switch(e.label){case 0:if(t=ah(ah(ah(ah(ah(ah(ah(ah(ah(ah({},Lg(s.IfMatch)&&{"if-match":s.IfMatch}),Lg(s.IfModifiedSince)&&{"if-modified-since":Ac(s.IfModifiedSince).toString()}),Lg(s.IfNoneMatch)&&{"if-none-match":s.IfNoneMatch}),Lg(s.IfUnmodifiedSince)&&{"if-unmodified-since":Ac(s.IfUnmodifiedSince).toString()}),Lg(s.Range)&&{range:s.Range}),Lg(s.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":s.SSECustomerAlgorithm}),Lg(s.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":s.SSECustomerKey}),Lg(s.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":s.SSECustomerKeyMD5}),Lg(s.RequestPayer)&&{"x-amz-request-payer":s.RequestPayer}),Lg(s.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":s.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===s.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=s.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",yc(i)),void 0===s.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=s.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(yc).join("/")),r=ah(ah(ah(ah(ah(ah(ah(ah({"x-id":"GetObject"},void 0!==s.ResponseCacheControl&&{"response-cache-control":s.ResponseCacheControl}),void 0!==s.ResponseContentDisposition&&{"response-content-disposition":s.ResponseContentDisposition}),void 0!==s.ResponseContentEncoding&&{"response-content-encoding":s.ResponseContentEncoding}),void 0!==s.ResponseContentLanguage&&{"response-content-language":s.ResponseContentLanguage}),void 0!==s.ResponseContentType&&{"response-content-type":s.ResponseContentType}),void 0!==s.ResponseExpires&&{"response-expires":(s.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==s.VersionId&&{versionId:s.VersionId}),void 0!==s.PartNumber&&{partNumber:s.PartNumber.toString()}),[4,u.endpoint()];case 1:return a=e.sent(),o=a.hostname,i=void 0===(i=a.protocol)?"https":i,a=a.port,[2,new Ga({protocol:i,hostname:o,port:a,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var s,u},cm.prototype.deserialize=function(e,t){return r=e,o=t,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,(u=r,c=o,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s;return uh(this,function(e){switch(e.label){case 0:return t=[ah({},u)],s={},[4,Gg(u.body,c)];case 1:switch(i=ah.apply(void 0,t.concat([(s.body=e.sent(),s)])),a="UnknownError",a=Wg(u,i.body)){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return r=[{}],[4,jg(i)];case 3:return n=ah.apply(void 0,[ah.apply(void 0,r.concat([e.sent()])),{name:a,$metadata:Hg(u)}]),[3,7];case 4:return o=[{}],[4,zg(i)];case 5:return n=ah.apply(void 0,[ah.apply(void 0,o.concat([e.sent()])),{name:a,$metadata:Hg(u)}]),[3,7];case 6:i=i.body,a=i.code||i.Code||a,n=ah(ah({},i),{name:""+a,message:i.message||i.Message||a,$fault:"client",$metadata:Hg(u)}),e.label=7;case 7:return a=n.message||n.Message||a,n.message=a,delete n.Message,[2,Promise.reject(Object.assign(new Error(a),n))]}})}))]:(t={$metadata:Hg(r),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)]);var u,c})});var r,o},cm);function cm(e){var t=sm.call(this)||this;return t.input=e,t}var lm,pm=(ih(dm,lm=vt),dm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize)),this.middlewareStack.use(mh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:Sg.filterSensitiveLog,outputFilterSensitiveLog:wg.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},dm.prototype.serialize=function(e,t){return s=e,u=t,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return uh(this,function(e){switch(e.label){case 0:if(t=ah(ah({},Lg(s.RequestPayer)&&{"x-amz-request-payer":s.RequestPayer}),Lg(s.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":s.ExpectedBucketOwner}),n="/{Bucket}",void 0===s.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=s.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",yc(i)),r=ah(ah(ah(ah(ah({},void 0!==s.Delimiter&&{delimiter:s.Delimiter}),void 0!==s.EncodingType&&{"encoding-type":s.EncodingType}),void 0!==s.Marker&&{marker:s.Marker}),void 0!==s.MaxKeys&&{"max-keys":s.MaxKeys.toString()}),void 0!==s.Prefix&&{prefix:s.Prefix}),[4,u.endpoint()];case 1:return a=e.sent(),o=a.hostname,i=void 0===(i=a.protocol)?"https":i,a=a.port,[2,new Ga({protocol:i,hostname:o,port:a,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var s,u},dm.prototype.deserialize=function(e,t){return r=e,o=t,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,(s=r,u=o,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return uh(this,function(e){switch(e.label){case 0:return t=[ah({},s)],a={},[4,Gg(s.body,u)];case 1:switch(o=ah.apply(void 0,t.concat([(a.body=e.sent(),a)])),i="UnknownError",i=Wg(s,o.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return r=[{}],[4,Bg(o)];case 3:return n=ah.apply(void 0,[ah.apply(void 0,r.concat([e.sent()])),{name:i,$metadata:Hg(s)}]),[3,5];case 4:o=o.body,i=o.code||o.Code||i,n=ah(ah({},o),{name:""+i,message:o.message||o.Message||i,$fault:"client",$metadata:Hg(s)}),e.label=5;case 5:return i=n.message||n.Message||i,n.message=i,delete n.Message,[2,Promise.reject(Object.assign(new Error(i),n))]}})}))]:(t={$metadata:Hg(r),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,Gg(r.body,o)]);case 1:return""===(n=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==n.CommonPrefixes&&(t.CommonPrefixes=(vc(n.CommonPrefixes)||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:(t={Prefix:void 0},void 0!==e.Prefix&&(t.Prefix=e.Prefix),t);var t})),""===n.Contents&&(t.Contents=[]),void 0!==n.Contents&&(t.Contents=(vc(n.Contents)||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:(t={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0},void 0!==e.Key&&(t.Key=e.Key),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(t.StorageClass=e.StorageClass),void 0!==e.Owner&&(t.Owner=Kg(e.Owner)),t);var t})),void 0!==n.Delimiter&&(t.Delimiter=n.Delimiter),void 0!==n.EncodingType&&(t.EncodingType=n.EncodingType),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Marker&&(t.Marker=n.Marker),void 0!==n.MaxKeys&&(t.MaxKeys=parseInt(n.MaxKeys)),void 0!==n.Name&&(t.Name=n.Name),void 0!==n.NextMarker&&(t.NextMarker=n.NextMarker),void 0!==n.Prefix&&(t.Prefix=n.Prefix),[2,Promise.resolve(t)]}var s,u})});var r,o},dm);function dm(e){var t=lm.call(this)||this;return t.input=e,t}var fm,hm=(ih(gm,fm=vt),gm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize)),this.middlewareStack.use(mh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:_g.filterSensitiveLog,outputFilterSensitiveLog:Cg.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},gm.prototype.serialize=function(e,t){return s=e,u=t,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return uh(this,function(e){switch(e.label){case 0:if(t=ah(ah({},Lg(s.RequestPayer)&&{"x-amz-request-payer":s.RequestPayer}),Lg(s.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":s.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===s.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=s.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",yc(i)),void 0===s.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=s.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(yc).join("/")),r=ah(ah(ah({"x-id":"ListParts"},void 0!==s.MaxParts&&{"max-parts":s.MaxParts.toString()}),void 0!==s.PartNumberMarker&&{"part-number-marker":s.PartNumberMarker}),void 0!==s.UploadId&&{uploadId:s.UploadId}),[4,u.endpoint()];case 1:return a=e.sent(),o=a.hostname,i=void 0===(i=a.protocol)?"https":i,a=a.port,[2,new Ga({protocol:i,hostname:o,port:a,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var s,u},gm.prototype.deserialize=function(e,t){return s=e,u=t,sh(void 0,void 0,void 0,function(){var i,a;return uh(this,function(e){switch(e.label){case 0:return 200!==s.statusCode&&300<=s.statusCode?[2,(r=s,o=u,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){switch(e.label){case 0:return t=[ah({},r)],n={},[4,Gg(r.body,o)];case 1:return t=ah.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Wg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ah(ah({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Hg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(i={$metadata:Hg(s),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==s.headers["x-amz-abort-date"]&&(i.AbortDate=new Date(s.headers["x-amz-abort-date"])),void 0!==s.headers["x-amz-abort-rule-id"]&&(i.AbortRuleId=s.headers["x-amz-abort-rule-id"]),void 0!==s.headers["x-amz-request-charged"]&&(i.RequestCharged=s.headers["x-amz-request-charged"]),[4,Gg(s.body,u)]);case 1:return void 0!==(a=e.sent()).Bucket&&(i.Bucket=a.Bucket),void 0!==a.Initiator&&(i.Initiator=(t=a.Initiator,n={ID:void 0,DisplayName:void 0},void 0!==t.ID&&(n.ID=t.ID),void 0!==t.DisplayName&&(n.DisplayName=t.DisplayName),n)),void 0!==a.IsTruncated&&(i.IsTruncated="true"==a.IsTruncated),void 0!==a.Key&&(i.Key=a.Key),void 0!==a.MaxParts&&(i.MaxParts=parseInt(a.MaxParts)),void 0!==a.NextPartNumberMarker&&(i.NextPartNumberMarker=a.NextPartNumberMarker),void 0!==a.Owner&&(i.Owner=Kg(a.Owner)),void 0!==a.PartNumberMarker&&(i.PartNumberMarker=a.PartNumberMarker),""===a.Part&&(i.Parts=[]),void 0!==a.Part&&(i.Parts=(vc(a.Part)||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:(t={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0},void 0!==e.PartNumber&&(t.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),t);var t})),void 0!==a.StorageClass&&(i.StorageClass=a.StorageClass),void 0!==a.UploadId&&(i.UploadId=a.UploadId),[2,Promise.resolve(i)]}var t,n,r,o})});var s,u},gm);function gm(e){var t=fm.call(this)||this;return t.input=e,t}var mm,ym,vm,bm,wm,Sm,Cm,_m,Em,Am,Im,km,Tm,Pm,Om=(ih(xm,mm=vt),xm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Qg(t)),this.middlewareStack.use(mh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Ag.filterSensitiveLog,outputFilterSensitiveLog:Eg.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},xm.prototype.serialize=function(e,t){return u=e,c=t,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s;return uh(this,function(e){switch(e.label){case 0:if(t=ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah(ah({"content-type":"application/octet-stream"},Lg(u.ACL)&&{"x-amz-acl":u.ACL}),Lg(u.CacheControl)&&{"cache-control":u.CacheControl}),Lg(u.ContentDisposition)&&{"content-disposition":u.ContentDisposition}),Lg(u.ContentEncoding)&&{"content-encoding":u.ContentEncoding}),Lg(u.ContentLanguage)&&{"content-language":u.ContentLanguage}),Lg(u.ContentLength)&&{"content-length":u.ContentLength.toString()}),Lg(u.ContentMD5)&&{"content-md5":u.ContentMD5}),Lg(u.ContentType)&&{"content-type":u.ContentType}),Lg(u.Expires)&&{expires:Ac(u.Expires).toString()}),Lg(u.GrantFullControl)&&{"x-amz-grant-full-control":u.GrantFullControl}),Lg(u.GrantRead)&&{"x-amz-grant-read":u.GrantRead}),Lg(u.GrantReadACP)&&{"x-amz-grant-read-acp":u.GrantReadACP}),Lg(u.GrantWriteACP)&&{"x-amz-grant-write-acp":u.GrantWriteACP}),Lg(u.ServerSideEncryption)&&{"x-amz-server-side-encryption":u.ServerSideEncryption}),Lg(u.StorageClass)&&{"x-amz-storage-class":u.StorageClass}),Lg(u.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":u.WebsiteRedirectLocation}),Lg(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),Lg(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),Lg(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":u.SSECustomerKeyMD5}),Lg(u.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":u.SSEKMSKeyId}),Lg(u.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":u.SSEKMSEncryptionContext}),Lg(u.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":u.BucketKeyEnabled.toString()}),Lg(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),Lg(u.Tagging)&&{"x-amz-tagging":u.Tagging}),Lg(u.ObjectLockMode)&&{"x-amz-object-lock-mode":u.ObjectLockMode}),Lg(u.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(u.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Lg(u.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":u.ObjectLockLegalHoldStatus}),Lg(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),void 0!==u.Metadata&&Object.keys(u.Metadata).reduce(function(e,t){return ah(ah({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=u.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",yc(i)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(yc).join("/")),r={"x-id":"PutObject"},void 0!==u.Body&&(a=u.Body,o=a),[4,c.endpoint()];case 1:return s=e.sent(),i=s.hostname,a=void 0===(a=s.protocol)?"https":a,s=s.port,[2,new Ga({protocol:a,hostname:i,port:s,method:"PUT",headers:t,path:n,query:r,body:o})]}})});var u,c},xm.prototype.deserialize=function(e,t){return n=e,i=t,sh(void 0,void 0,void 0,function(){var t;return uh(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,(r=n,o=i,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){switch(e.label){case 0:return t=[ah({},r)],n={},[4,Gg(r.body,o)];case 1:return t=ah.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Wg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ah(ah({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Hg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:Hg(n),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===n.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,Dg(n.body,i)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var r,o})});var n,i},xm);function xm(e){var t=mm.call(this)||this;return t.input=e,t}(bm=bm||{}).filterSensitiveLog=function(e){return ah({},e)},(ym=ym||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.Encryption&&{Encryption:Ig.filterSensitiveLog(e.Encryption)})},(vm=vm||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.S3&&{S3:ym.filterSensitiveLog(e.S3)})},(bm={}).IGNORE="IGNORE",bm.NONE="NONE",bm.USE="USE",(wm=wm||{}).filterSensitiveLog=function(e){return ah({},e)},(wm={}).DOCUMENT="DOCUMENT",wm.LINES="LINES",(Sm=Sm||{}).filterSensitiveLog=function(e){return ah({},e)},(Sm={}).ALWAYS="ALWAYS",Sm.ASNEEDED="ASNEEDED",(Cm=Cm||{}).filterSensitiveLog=function(e){return ah({},e)},(_m=_m||{}).filterSensitiveLog=function(e){return ah({},e)},(Em=Em||{}).filterSensitiveLog=function(e){return ah({},e)},(Am=Am||{}).filterSensitiveLog=function(e){return ah({},e)},(km=km||{}).filterSensitiveLog=function(e){return ah({},e)},(Im=Im||{}).filterSensitiveLog=function(e){return ah({},e)},(km={}).visit=function(e,t){return void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])},km.filterSensitiveLog=function(e){var t;return void 0!==e.Records?{Records:Am.filterSensitiveLog(e.Records)}:void 0!==e.Stats?{Stats:Im.filterSensitiveLog(e.Stats)}:void 0!==e.Progress?{Progress:Em.filterSensitiveLog(e.Progress)}:void 0!==e.Cont?{Cont:Cm.filterSensitiveLog(e.Cont)}:void 0!==e.End?{End:_m.filterSensitiveLog(e.End)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Tm=Tm||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:kc})},(Pm=Pm||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.SSECustomerKey&&{SSECustomerKey:kc})},(dv=dv||{}).filterSensitiveLog=function(e){return ah(ah({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:kc})},(jb=jb||{}).filterSensitiveLog=function(e){return ah(ah(ah({},e),e.SSECustomerKey&&{SSECustomerKey:kc}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:kc})};var Nm,Rm=(ih(Mm,Nm=vt),Mm.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize)),this.middlewareStack.use(Qg(t)),this.middlewareStack.use(mh(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Pm.filterSensitiveLog,outputFilterSensitiveLog:Tm.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},Mm.prototype.serialize=function(e,t){return u=e,c=t,sh(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s;return uh(this,function(e){switch(e.label){case 0:if(t=ah(ah(ah(ah(ah(ah(ah({"content-type":"application/octet-stream"},Lg(u.ContentLength)&&{"content-length":u.ContentLength.toString()}),Lg(u.ContentMD5)&&{"content-md5":u.ContentMD5}),Lg(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),Lg(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),Lg(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":u.SSECustomerKeyMD5}),Lg(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),Lg(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",yc(i)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",i.split("/").map(yc).join("/")),r=ah(ah({"x-id":"UploadPart"},void 0!==u.PartNumber&&{partNumber:u.PartNumber.toString()}),void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.Body&&(a=u.Body,o=a),[4,c.endpoint()];case 1:return s=e.sent(),i=s.hostname,a=void 0===(a=s.protocol)?"https":a,s=s.port,[2,new Ga({protocol:a,hostname:i,port:s,method:"PUT",headers:t,path:n,query:r,body:o})]}})});var u,c},Mm.prototype.deserialize=function(e,t){return n=e,i=t,sh(void 0,void 0,void 0,function(){var t;return uh(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,(r=n,o=i,sh(void 0,void 0,void 0,function(){var t,n;return uh(this,function(e){switch(e.label){case 0:return t=[ah({},r)],n={},[4,Gg(r.body,o)];case 1:return t=ah.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=Wg(r,t.body),t=t.body,n=t.code||t.Code||n,t=ah(ah({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:Hg(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})}))]:(t={$metadata:Hg(n),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===n.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,Dg(n.body,i)]);case 1:return e.sent(),[2,Promise.resolve(t)]}var r,o})});var n,i},Mm);function Mm(e){var t=Nm.call(this)||this;return t.input=e,t}var Um=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Dm)},Dm=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function Lm(e){var t,n,r=[];try{for(var o=G(Object.keys(e).sort()),i=o.next();!i.done;i=o.next()){var a=e[s=i.value],s=Um(s);if(Array.isArray(a))for(var u=0,c=a.length;u<c;u++)r.push(s+"="+Um(a[u]));else{var l=s;!a&&"string"!=typeof a||(l+="="+Um(a)),r.push(l)}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r.join("&")}function Fm(e){var t=e.port,n=e.query,r=e.protocol,o=e.path,e=e.hostname;return r&&":"!==r.substr(-1)&&(r+=":"),t&&(e+=":"+t),o&&"/"!==o.charAt(0)&&(o="/"+o),r+"//"+e+o+((n=n?Lm(n):"")&&"?"!==n[0]?"?"+n:n)}for(var jm={},Bm=0;Bm<256;Bm++){var zm=Bm.toString(16).toLowerCase();1===zm.length&&(zm="0"+zm),jm[Bm]=zm}function Vm(e){for(var t="",n=0;n<e.byteLength;n++)t+=jm[e[n]];return t}var qm="X-Amz-Date",Km="X-Amz-Signature",Hm="X-Amz-Security-Token",Gm="authorization",Wm=qm.toLowerCase(),$m=[Gm,Wm,"date"],Ym=Km.toLowerCase(),Jm="x-amz-content-sha256",Zm=Hm.toLowerCase(),Xm={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Qm=/^proxy-/,ey=/^sec-/,ty="AWS4-HMAC-SHA256",ny="AWS4-HMAC-SHA256-PAYLOAD",ry="aws4_request",oy={},iy=[];function ay(e,t,n){return e+"/"+t+"/"+n+"/"+ry}function sy(e,t,n){return(t=new e(t)).update(n),t.digest()}function uy(e,t,n){var r,o,i=e.headers,a={};try{for(var s=G(Object.keys(i).sort()),u=s.next();!u.done;u=s.next()){var c=u.value,l=c.toLowerCase();(l in Xm||null!=t&&t.has(l)||Qm.test(l)||ey.test(l))&&(!n||n&&!n.has(l))||(a[l]=i[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return a}function cy(e){return encodeURIComponent(e).replace(/[!'()*]/g,ly)}var ly=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function py(e,s){var u=e.headers,c=e.body;return K(this,void 0,void 0,function(){var t,n,r,o,i,a;return H(this,function(e){switch(e.label){case 0:try{for(t=G(Object.keys(u)),n=t.next();!n.done;n=t.next())if((r=n.value).toLowerCase()===Jm)return[2,u[r]]}catch(e){i={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(i)throw i.error}}return null!=c?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof c||ArrayBuffer.isView(c)||("function"==typeof ArrayBuffer&&c instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(c))?((i=new s).update(c),o=Vm,[4,i.digest()]):[3,3];case 2:return[2,o.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})}function dy(e){var r,t=e.headers,n=e.query,e=B(e,["headers","query"]);return j(j({},e),{headers:j({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{})):void 0})}function fy(e){var t,n;e="function"==typeof e.clone?e.clone():dy(e);try{for(var r=G(Object.keys(e.headers)),o=r.next();!o.done;o=r.next()){var i=o.value;-1<$m.indexOf(i.toLowerCase())&&delete e.headers[i]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}var hy=(gy.prototype.presign=function(y,v){return void 0===v&&(v={}),K(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g,m;return H(this,function(e){switch(e.label){case 0:return s=v.signingDate,u=void 0===s?new Date:s,i=v.expiresIn,t=void 0===i?3600:i,n=v.unsignableHeaders,r=v.unhoistableHeaders,o=v.signableHeaders,s=v.signingRegion,i=v.signingService,[4,this.credentialProvider()];case 1:return a=e.sent(),null==s?[3,2]:(c=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:c=e.sent(),e.label=4;case 4:return s=c,c=my(u),u=c.longDate,c=c.shortDate,604800<t?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=ay(c,s,null!=i?i:this.service),l=function(e,t){var n,r,o;void 0===t&&(t={});var i="function"==typeof e.clone?e.clone():dy(e),a=i.headers,s=void 0===(i=i.query)?{}:i;try{for(var u=G(Object.keys(a)),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.toLowerCase();"x-amz-"!==p.substr(0,6)||null!==(o=t.unhoistableHeaders)&&void 0!==o&&o.has(p)||(s[l]=a[l],delete a[l])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return j(j({},e),{headers:a,query:s})}(fy(y),{unhoistableHeaders:r}),a.sessionToken&&(l.query[Hm]=a.sessionToken),l.query["X-Amz-Algorithm"]=ty,l.query["X-Amz-Credential"]=a.accessKeyId+"/"+g,l.query[qm]=u,l.query["X-Amz-Expires"]=t.toString(10),m=uy(l,n,o),l.query["X-Amz-SignedHeaders"]=yy(m),p=l.query,d=Km,f=this.getSignature,h=[u,g,this.getSigningKey(a,s,c,i)],g=this.createCanonicalRequest,m=[l,m],[4,py(y,this.sha256)]);case 5:return[4,f.apply(this,h.concat([g.apply(this,m.concat([e.sent()]))]))];case 6:return p[d]=e.sent(),[2,l]}})})},gy.prototype.sign=function(t,n){return K(this,void 0,void 0,function(){return H(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},gy.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,l=void 0===(e=t.signingDate)?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,o,i,a,s;return H(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,o=my(l),i=o.shortDate,r=o.longDate,o=ay(i,t,null!=f?f:this.service),[4,py({headers:{},body:c},this.sha256)];case 4:return s=e.sent(),(i=new this.sha256).update(u),a=Vm,[4,i.digest()];case 5:return a=a.apply(void 0,[e.sent()]),s=[ny,r,o,p,a,s].join("\n"),[2,this.signString(s,{signingDate:l,signingRegion:t,signingService:f})]}})})},gy.prototype.signString=function(s,e){var t=void 0===e?{}:e,u=void 0===(e=t.signingDate)?new Date:e,c=t.signingRegion,l=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,o,i,a;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==c?[3,2]:(r=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,r=my(u).shortDate,i=(o=this.sha256).bind,[4,this.getSigningKey(t,n,r,l)];case 5:return(o=new(i.apply(o,[void 0,e.sent()]))).update(s),a=Vm,[4,o.digest()];case 6:return[2,a.apply(void 0,[e.sent()])]}})})},gy.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,p=void 0===(e=t.signingDate)?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,g=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return t=e.sent(),null==h?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,o=fy(l),s=my(p),i=s.longDate,a=s.shortDate,s=ay(a,n,null!=g?g:this.service),o.headers[Wm]=i,t.sessionToken&&(o.headers[Zm]=t.sessionToken),[4,py(o,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var o=G(Object.keys(t)),i=o.next();!i.done;i=o.next())if(e===i.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(Jm,o.headers)&&this.applyChecksum&&(o.headers[Jm]=c),u=uy(o,f,d),[4,this.getSignature(i,s,this.getSigningKey(t,n,a,g),this.createCanonicalRequest(o,u,c))];case 6:return c=e.sent(),o.headers[Gm]=ty+" Credential="+t.accessKeyId+"/"+s+", SignedHeaders="+yy(u)+", Signature="+c,[2,o]}})})},gy.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=void 0===(e=e.query)?{}:e,o=[],i={};try{for(var a=G(Object.keys(r).sort()),s=a.next();!s.done;s=a.next())!function(n){var e;n.toLowerCase()!==Ym&&(o.push(n),"string"==typeof(e=r[n])?i[n]=cy(n)+"="+cy(e):Array.isArray(e)&&(i[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([cy(n)+"="+cy(t)])},[]).join("&")))}(s.value)}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o.map(function(e){return i[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},gy.prototype.createStringToSign=function(n,r,o){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(o),[4,t.digest()];case 1:return t=e.sent(),[2,ty+"\n"+n+"\n"+r+"\n"+Vm(t)]}})})},gy.prototype.getCanonicalPath=function(e){return e=e.path,this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},gy.prototype.getSignature=function(i,a,s,u){return K(this,void 0,void 0,function(){var t,n,r,o;return H(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(i,a,u)];case 1:return t=e.sent(),r=(n=this.sha256).bind,[4,s];case 2:return(n=new(r.apply(n,[void 0,e.sent()]))).update(t),o=Vm,[4,n.digest()];case 3:return[2,o.apply(void 0,[e.sent()])]}})})},gy.prototype.getSigningKey=function(e,t,n,r){return u=this.sha256,c=e,l=n,p=t,d=r||this.service,K(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s;return H(this,function(e){switch(e.label){case 0:return[4,sy(u,c.secretAccessKey,c.accessKeyId)];case 1:if(i=e.sent(),(t=l+":"+p+":"+d+":"+Vm(i)+":"+c.sessionToken)in oy)return[2,oy[t]];for(iy.push(t);50<iy.length;)delete oy[iy.shift()];n="AWS4"+c.secretAccessKey,e.label=2;case 2:e.trys.push([2,7,8,9]),r=G([l,p,d,ry]),o=r.next(),e.label=3;case 3:return o.done?[3,6]:(i=o.value,[4,sy(u,n,i)]);case 4:n=e.sent(),e.label=5;case 5:return o=r.next(),[3,3];case 6:return[3,9];case 7:return a={error:a=e.sent()},[3,9];case 8:try{o&&!o.done&&(s=r.return)&&s.call(r)}finally{if(a)throw a.error}return[7];case 9:return[2,oy[t]=n]}})});var u,c,l,p,d},gy);function gy(e){var t=e.applyChecksum,n=e.credentials,r=e.region,o=e.service,i=e.sha256,e=void 0===(e=e.uriEscapePath)||e;this.service=o,this.sha256=i,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=vy(r),this.credentialProvider=by(n)}var my=function(e){var t;return{longDate:e=("number"==typeof(t=e)?new Date(1e3*t):"string"!=typeof t?t:Number(t)?new Date(1e3*Number(t)):new Date(t)).toISOString().replace(/\.\d{3}Z$/,"Z").replace(/[\-:]/g,""),shortDate:e.substr(0,8)}},yy=function(e){return Object.keys(e).sort().join(";")},vy=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},by=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},wy=(Sy.prototype.presign=function(t,e){var n=(e=void 0===e?{}:e).unsignableHeaders,r=void 0===n?new Set:n,o=void 0===(n=e.unhoistableHeaders)?new Set:n,i=B(e,["unsignableHeaders","unhoistableHeaders"]);return K(this,void 0,void 0,function(){return H(this,function(e){return r.add("content-type"),Object.keys(t.headers).map(function(e){return e.toLowerCase()}).filter(function(e){return e.startsWith("x-amz-server-side-encryption")}).forEach(function(e){o.add(e)}),t.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",t.headers.host||(t.headers.host=t.hostname),[2,this.signer.presign(t,j({expiresIn:900,unsignableHeaders:r,unhoistableHeaders:o},i))]})})},Sy);function Sy(e){e=j({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e),this.signer=new hy(e)}var Cy=new _.ConsoleLogger("axios-http-handler"),_y="sendProgress",Ey=(Ay.prototype.destroy=function(){},Ay.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,o=e.path;!e.query||(a=Lm(e.query))&&(o+="?"+a);var i,a=e.port,a=e.protocol+"//"+e.hostname+(a?":"+a:"")+o;return(o={}).url=a,o.method=e.method,o.headers=e.headers,delete o.headers.host,e.body?o.data=e.body:o.headers["Content-Type"]&&(o.data=null),r&&(o.onUploadProgress=function(e){r.emit(_y,e),Cy.debug(e)}),this.cancelTokenSource&&(o.cancelToken=this.cancelTokenSource.token),o.responseType="blob",n=[O.request(o).then(function(e){return{response:new Ka({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw Cy.error(e),e}),(void 0===(i=n)&&(i=0),new Promise(function(e,t){i&&setTimeout(function(){var e=new Error("Request did not complete within "+i+" ms");e.name="TimeoutError",t(e)},i)}))],Promise.race(n)},Ay);function Ay(e,t,n){this.httpOptions=e=void 0===e?{}:e,this.emitter=t,this.cancelTokenSource=n}for(var Iy={},ky=new Array(64),Ty=0,Py="A".charCodeAt(0),Oy="Z".charCodeAt(0);Ty+Py<=Oy;Ty++){var xy=String.fromCharCode(Ty+Py);ky[Iy[xy]=Ty]=xy}for(Py="a".charCodeAt(Ty=0),Oy="z".charCodeAt(0);Ty+Py<=Oy;Ty++)xy=String.fromCharCode(Ty+Py),ky[Iy[xy]=Ty+26]=xy;for(Ty=0;Ty<10;Ty++)Iy[Ty.toString(10)]=Ty+52,xy=Ty.toString(10),ky[Iy[xy]=Ty+52]=xy;ky[Iy["+"]=62]="+",ky[Iy["/"]=63]="/";function Ny(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Ry(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var My=function(){return(My=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Uy=new _.ConsoleLogger("AWSS3ProviderManagedUpload"),Dy=(Ly.prototype.upload=function(){return Ny(this,void 0,void 0,function(){var t,n,r,o,i;return Ry(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize?(this.params.Body=this.body,n=new Om(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,e.sent().send(n)];case 3:return[4,this.createMultiPartUpload()];case 4:r=e.sent(),i=Math.ceil(this.totalBytesToUpload/this.minPartSize),o=0,e.label=5;case 5:return o<i?[4,this.checkIfUploadCancelled(r)]:[3,10];case 6:return e.sent(),i=this.createParts(o),[4,this.uploadParts(r,i)];case 7:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 8:e.sent(),e.label=9;case 9:return o+=this.queueSize,[3,5];case 10:return[4,this.finishMultiPartUpload(r)];case 11:return[2,e.sent()]}})})},Ly.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var o=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,o),partNumber:++n,emitter:new x.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},Ly.prototype.createMultiPartUpload=function(){return Ny(this,void 0,void 0,function(){var t,n,r=this;return Ry(this,function(e){switch(e.label){case 0:return n=new nm(this.params),[4,this._createNewS3Client(this.opts)];case 1:return(t=e.sent()).middlewareStack.add(function(t){return function(e){return r.params.ContentType&&e&&e.request&&e.request.headers&&(e.request.headers["Content-Type"]=r.params.ContentType),t(e)}},{step:"build"}),[4,t.send(n)];case 2:return n=e.sent(),Uy.debug(n.UploadId),[2,n.UploadId]}})})},Ly.prototype.uploadParts=function(l,p){return Ny(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c;return Ry(this,function(e){switch(e.label){case 0:s=[],e.label=1;case 1:e.trys.push([1,6,7,8]),t=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(p),n=t.next(),e.label=2;case 2:return n.done?[3,5]:(o=n.value,this.setupEventListener(o),r={PartNumber:o.partNumber,Body:o.bodyPart,UploadId:l,Key:this.params.Key,Bucket:this.params.Bucket},r=new Rm(r),[4,this._createNewS3Client(this.opts,o.emitter)]);case 3:o=e.sent(),s.push(o.send(r)),e.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return u={error:u=e.sent()},[3,8];case 7:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 8:return e.trys.push([8,10,,11]),[4,Promise.all(s)];case 9:for(i=e.sent(),a=0;a<i.length;a++)this.multiPartMap.push({PartNumber:p[a].partNumber,ETag:i[a].ETag});return[3,11];case 10:return s=e.sent(),Uy.error("error happened while uploading a part. Cancelling the multipart upload",s),this.cancelUpload(),[2];case 11:return[2]}})})},Ly.prototype.finishMultiPartUpload=function(r){return Ny(this,void 0,void 0,function(){var t,n;return Ry(this,function(e){switch(e.label){case 0:return n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r,MultipartUpload:{Parts:this.multiPartMap}},n=new Zg(n),[4,this._createNewS3Client(this.opts)];case 1:t=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.send(n)];case 3:return[2,e.sent().Key];case 4:return n=e.sent(),Uy.error("error happened while finishing the upload. Cancelling the multipart upload",n),this.cancelUpload(),[2];case 5:return[2]}})})},Ly.prototype.checkIfUploadCancelled=function(r){return Ny(this,void 0,void 0,function(){var t,n;return Ry(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},Ly.prototype.cancelUpload=function(){this.cancel=!0},Ly.prototype.cleanup=function(r){return Ny(this,void 0,void 0,function(){var t,n;return Ry(this,function(e){switch(e.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r},[4,this._createNewS3Client(this.opts)];case 1:return[4,(t=e.sent()).send(new $g(n))];case 2:return e.sent(),[4,t.send(new hm(n))];case 3:if((n=e.sent())&&n.Parts&&0<n.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},Ly.prototype.setupEventListener=function(t){var n=this;t.emitter.on(_y,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},Ly.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(_y,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},Ly.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},Ly.prototype.validateAndSanitizeBody=function(n){return Ny(this,void 0,void 0,function(){return Ry(this,function(e){switch(e.label){case 0:return this.isGenericObject(n)?[2,JSON.stringify(n)]:[3,1];case 1:return this.isBlob(n)?_.Platform.isReactNative?[4,(t=n,("function"==typeof Blob&&t instanceof Blob?function(r){return K(this,void 0,void 0,function(){var n;return H(this,function(e){switch(e.label){case 0:return[4,(t=r,new Promise(function(n,r){var o=new FileReader;o.onloadend=function(){if(2!==o.readyState)return r(new Error("Reader aborted too early"));var e=null!==(t=o.result)&&void 0!==t?t:"",t=-1<(t=e.indexOf(","))?t+1:e.length;n(e.substring(t))},o.onabort=function(){return r(new Error("Read aborted"))},o.onerror=function(){return r(o.error)},o.readAsDataURL(t)}))];case 1:return n=function(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var t=new ArrayBuffer(t),n=new DataView(t),r=0;r<e.length;r+=4){for(var o=0,i=0,a=r,s=r+3;a<=s;a++)"="!==e[a]?(o|=Iy[e[a]]<<6*(s-a),i+=6):o>>=6;var u=r/4*3;o>>=i%8;for(var c=Math.floor(i/8),l=0;l<c;l++){var p=8*(c-l-1);n.setUint8(u+l,(o&255<<p)>>p)}}return new Uint8Array(t)}(n=e.sent()),[2,new Uint8Array(n)]}var t})})}:function(a){return K(this,void 0,void 0,function(){var t,n,r,o,i;return H(this,function(e){switch(e.label){case 0:t=new Uint8Array(0),o=a.getReader(),n=!1,e.label=1;case 1:return n?[3,3]:[4,o.read()];case 2:return i=e.sent(),r=i.done,(o=i.value)&&(i=t,(t=new Uint8Array(i.length+o.length)).set(i),t.set(o,i.length)),n=r,[3,1];case 3:return[2,t]}})})})(t))]:[3,3]:[3,4];case 2:return[2,e.sent()];case 3:case 4:return[2,n]}var t})})},Ly.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},Ly.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},Ly.prototype._createNewS3Client=function(i,a){return Ny(this,void 0,void 0,function(){var t,n,r,o;return Ry(this,function(e){switch(e.label){case 0:return[4,this._getCredentials()];case 1:return t=e.sent(),n=i.region,r=i.dangerouslyConnectToHttpEndpointForTesting,o=i.cancelTokenSource,(o=new Og(My(My({region:n,credentials:t},r?{endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}:{}),{requestHandler:new Ey({},a,o),customUserAgent:_.getAmplifyUserAgent()}))).middlewareStack.remove("contentLengthMiddleware"),[2,o]}})})},Ly.prototype._getCredentials=function(){return _.Credentials.get().then(function(e){return!!e&&(e=_.Credentials.shear(e),Uy.debug("set credentials for storage",e),e)}).catch(function(e){return Uy.warn("ensure credentials error",e),!1})},Ly);function Ly(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function Fy(e,t,n,r,o){e&&(n={attrs:n},r&&(n.metrics=r),_.Hub.dispatch("storage",{event:t,data:n,message:o},"Storage",qy))}function jy(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function By(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var zy=function(){return(zy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Vy=new _.ConsoleLogger("AWSS3Provider"),qy="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Ky=(Hy.prototype.getCategory=function(){return Hy.CATEGORY},Hy.prototype.getProviderName=function(){return Hy.PROVIDER_NAME},Hy.prototype.configure=function(e){return Vy.debug("configure Storage",e),e&&(e=_.Parser.parseMobilehubConfig(e),this._config=Object.assign({},this._config,e.Storage),this._config.bucket||Vy.debug("Do not have bucket yet")),this._config},Hy.prototype.get=function(m,y){return jy(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g;return By(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];if(f=Object.assign({},this._config,y),t=f.bucket,l=f.download,n=f.cacheControl,r=f.contentDisposition,o=f.contentEncoding,i=f.contentLanguage,a=f.contentType,s=f.expires,u=f.track,c=this._prefix(f),c+=m,f=this._createNewS3Client(f),Vy.debug("get "+m+" from "+c),c={Bucket:t,Key:c},n&&(c.ResponseCacheControl=n),r&&(c.ResponseContentDisposition=r),o&&(c.ResponseContentEncoding=o),i&&(c.ResponseContentLanguage=i),a&&(c.ResponseContentType=a),!0!==l)return[3,5];l=new um(c),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,f.send(l)];case 3:return p=e.sent(),Fy(u,"download",{method:"get",result:"success"},{fileSize:Number(p.Body.size||p.Body.length)},"Download success for "+m),[2,p];case 4:throw p=e.sent(),Fy(u,"download",{method:"get",result:"failed"},null,"Download failed with "+p.message),p;case 5:c.Expires=s||900,e.label=6;case 6:return e.trys.push([6,9,,10]),d=new wy(zy({},f.config)),[4,function(o,i){return K(this,void 0,void 0,function(){var t,n,r=this;return H(this,function(e){switch(e.label){case 0:return t=function(e){return function(t){return K(r,void 0,void 0,function(){return H(this,function(e){return[2,{output:{request:t.request},response:void 0}]})})}},(n=o.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,i.resolveMiddleware(n,o.config,void 0)(i).then(function(e){return e.output.request})];case 1:return[2,e.sent()]}})})}(f,new um(c))];case 7:return f=e.sent(),h=Fm,[4,d.presign(f,{expiresIn:c.Expires})];case 8:return g=h.apply(void 0,[e.sent()]),Fy(u,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+g),[2,g];case 9:throw g=e.sent(),Vy.warn("get signed url error",g),Fy(u,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+m),g;case 10:return[2]}})})},Hy.prototype.put=function(b,w,S){return jy(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g,m,y,v;return By(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];y=Object.assign({},this._config,S),t=y.bucket,n=y.track,r=y.progressCallback,h=y.contentType,o=y.contentDisposition,i=y.cacheControl,a=y.expires,s=y.metadata,u=y.tagging,c=y.acl,l=y.serverSideEncryption,p=y.SSECustomerAlgorithm,d=y.SSECustomerKey,f=y.SSECustomerKeyMD5,m=y.SSEKMSKeyId,g=h||"binary/octet-stream",h=this._prefix(y),h+=b,Vy.debug("put "+b+" to "+h),g={Bucket:t,Key:h,Body:w,ContentType:g},i&&(g.CacheControl=i),o&&(g.ContentDisposition=o),a&&(g.Expires=a),s&&(g.Metadata=s),u&&(g.Tagging=u),l&&(g.ServerSideEncryption=l,p&&(g.SSECustomerAlgorithm=p),d&&(g.SSECustomerKey=d),f&&(g.SSECustomerKeyMD5=f),m&&(g.SSEKMSKeyId=m)),m=new x.EventEmitter,y=new Dy(g,y,m),c&&(g.ACL=c),e.label=2;case 2:return e.trys.push([2,4,,5]),m.on("sendProgress",function(e){r&&("function"==typeof r?r(e):Vy.warn("progressCallback should be a function, not a "+typeof r))}),[4,y.upload()];case 3:return v=e.sent(),Vy.debug("upload result",v),Fy(n,"upload",{method:"put",result:"success"},null,"Upload success for "+b),[2,{key:b}];case 4:throw v=e.sent(),Vy.warn("error uploading",v),Fy(n,"upload",{method:"put",result:"failed"},null,"Error uploading "+b),v;case 5:return[2]}})})},Hy.prototype.remove=function(a,s){return jy(this,void 0,void 0,function(){var t,n,r,o,i;return By(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];r=Object.assign({},this._config,s),t=r.bucket,n=r.track,o=this._prefix(r),o+=a,r=this._createNewS3Client(r),Vy.debug("remove "+a+" from "+o),o=new im({Bucket:t,Key:o}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,r.send(o)];case 3:return i=e.sent(),Fy(n,"delete",{method:"remove",result:"success"},null,"Deleted "+a+" successfully"),[2,i];case 4:throw i=e.sent(),Fy(n,"delete",{method:"remove",result:"failed"},null,"Deletion of "+a+" failed with "+i),i;case 5:return[2]}})})},Hy.prototype.list=function(u,c){return jy(this,void 0,void 0,function(){var t,n,r,o,i,a,s;return By(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];i=Object.assign({},this._config,c),t=i.bucket,n=i.track,a=i.maxKeys,r=this._prefix(i),o=r+u,i=this._createNewS3Client(i),Vy.debug("list "+u+" from "+o),a=new pm({Bucket:t,Prefix:o,MaxKeys:a}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,i.send(a)];case 3:return a=e.sent(),s=[],a&&a.Contents&&(s=a.Contents.map(function(e){return{key:e.Key.substr(r.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),Fy(n,"list",{method:"list",result:"success"},null,s.length+" items returned from list operation"),Vy.debug("list",s),[2,s];case 4:throw s=e.sent(),Vy.warn("list error",s),Fy(n,"list",{method:"list",result:"failed"},null,"Listing items failed: "+s.message),s;case 5:return[2]}})})},Hy.prototype._ensureCredentials=function(){var t=this;return _.Credentials.get().then(function(e){return!!e&&(e=_.Credentials.shear(e),Vy.debug("set credentials for storage",e),t._config.credentials=e,!0)}).catch(function(e){return Vy.warn("ensure credentials error",e),!1})},Hy.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},t=e.identityId||t.identityId,o=(void 0!==r.private?r.private:"private/")+t+"/",i=(void 0!==r.protected?r.protected:"protected/")+t+"/",a=void 0!==r.public?r.public:"public/";switch(n){case"private":return o;case"protected":return i;default:return a}},Hy.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,o=e.cancelTokenSource,i={};return e.dangerouslyConnectToHttpEndpointForTesting&&(i={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new Og(zy(zy({region:n,credentials:r,customUserAgent:_.getAmplifyUserAgent()},i),{requestHandler:new Ey({},t,o)}))},Hy.CATEGORY="Storage",Hy.PROVIDER_NAME="AWSS3",Hy);function Hy(e){this._config=e||{},Vy.debug("Storage Options",this._config)}function Gy(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Wy(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var $y=function(){return($y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Yy=new _.ConsoleLogger("StorageClass"),Jy="AWSS3",Zy=(Xy.prototype.getModuleName=function(){return"Storage"},Xy.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory())return this._pluggables.push(e),e.configure(this._config[e.getProviderName()])},Xy.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(Yy.debug("No plugin found with providerName",t),null):e},Xy.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},Xy.prototype.configure=function(e){var t=this;if(Yy.debug("configure Storage"),!e)return this._config;function n(t){return i.some(function(e){return e===t})}var r=_.Parser.parseMobilehubConfig(e),o=Object.keys(r.Storage),i=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return o&&o.find(n)&&!r.Storage[Jy]&&(r.Storage[Jy]={}),Object.entries(r.Storage).map(function(e){var e=(t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e,2))[0],t=t[1];e&&n(e)&&void 0!==t&&(r.Storage[Jy][e]=t,delete r.Storage[e])}),Object.keys(r.Storage).forEach(function(e){"string"!=typeof r.Storage[e]&&(t._config[e]=$y($y({},t._config[e]),r.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new Ky),this._config},Xy.prototype.getCancellableTokenSource=function(){return O.CancelToken.source()},Xy.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenSourceMap.set(e,t)},Xy.prototype.cancel=function(e,t){(e=this._cancelTokenSourceMap.get(e))?e.cancel(t):Yy.debug("The request does not map to any cancel token")},Xy.prototype.get=function(e,t){var n=(t||{}).provider,r=void 0===n?Jy:n,o=this._pluggables.find(function(e){return e.getProviderName()===r});return void 0===o?(Yy.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider")):(n=this.getCancellableTokenSource(),t=o.get(e,$y($y({},t),{cancelTokenSource:n})),this.updateRequestToBeCancellable(t,n),t)},Xy.prototype.isCancelError=function(e){return O.isCancel(e)},Xy.prototype.put=function(e,t,n){var r=(n||{}).provider,o=void 0===r?Jy:r,i=this._pluggables.find(function(e){return e.getProviderName()===o});return void 0===i?(Yy.debug("No plugin found with providerName",o),Promise.reject("No plugin found in Storage for the provider")):(r=this.getCancellableTokenSource(),n=i.put(e,t,$y($y({},n),{cancelTokenSource:r})),this.updateRequestToBeCancellable(n,r),n)},Xy.prototype.remove=function(r,o){return Gy(this,void 0,void 0,function(){var t,n;return Wy(this,function(e){return t=void 0===(n=(o||{}).provider)?Jy:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))?(Yy.debug("No plugin found with providerName",t),[2,Promise.reject("No plugin found in Storage for the provider")]):[2,n.remove(r,o)]})})},Xy.prototype.list=function(r,o){return Gy(this,void 0,void 0,function(){var t,n;return Wy(this,function(e){return t=void 0===(n=(o||{}).provider)?Jy:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))?(Yy.debug("No plugin found with providerName",t),[2,Promise.reject("No plugin found in Storage for the provider")]):[2,n.list(r,o)]})})},Xy);function Xy(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,Yy.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}var Qy=function(){return(Qy=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ev=new _.ConsoleLogger("Storage"),tv=null,nv=function(){if(tv)return tv;ev.debug("Create Storage Instance, debug"),(tv=new Zy).vault=new Zy;var n=tv.configure;return tv.configure=function(e){ev.debug("storage configure called");var t=Qy({},n.call(tv,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=Qy(Qy({},t[e]),{level:"private"}))}),ev.debug("storage vault configure called"),tv.vault.configure(t)},tv}();_.Amplify.register(nv);function rv(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var ov=function(){return(ov=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},iv=new _.ConsoleLogger("RestClient"),av=(sv.prototype.ajax=function(v,b,w){return e=this,u=function(){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g,e,m=this;return l=this,p=function(e){switch(e.label){case 0:return iv.debug(b,v),t="us-east-1",n="execute-api",r=void 0,"string"==typeof v?(i=this._parseUrl(v),c=v):(c=v.endpoint,r=v.custom_header,t=v.region,n=v.service,i=this._parseUrl(v.endpoint)),o={method:b,url:c,host:i.host,path:i.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},i={},_.Platform.isReactNative&&(a=_.Platform.userAgent||"aws-amplify/0.1.x",i={"User-Agent":a}),a=Object.assign({},w),s=a.response,a.body&&("function"==typeof FormData&&a.body instanceof FormData?(i["Content-Type"]="multipart/form-data",o.data=a.body):(i["Content-Type"]="application/json; charset=UTF-8",o.data=JSON.stringify(a.body))),a.responseType&&(o.responseType=a.responseType),a.withCredentials&&(o.withCredentials=a.withCredentials),a.timeout&&(o.timeout=a.timeout),a.cancellableToken&&(o.cancelToken=a.cancellableToken.token),o.signerServiceInfo=a.signerServiceInfo,"function"!=typeof r?[3,2]:[4,r()];case 1:return u=e.sent(),[3,3];case 2:u=void 0,e.label=3;case 3:return o.headers=ov(ov(ov({},i),u),a.headers),(c=S.parse(c,!0,!0)).search,c=rv(c,["search"]),o.url=S.format(ov(ov({},c),{query:ov(ov({},c.query),a.queryStringParameters||{})})),void 0!==o.headers.Authorization?(o.headers=Object.keys(o.headers).reduce(function(e,t){return o.headers[t]&&(e[t]=o.headers[t]),e},{}),[2,this._request(o,s)]):[2,this.Credentials.get().then(function(e){return m._signed(ov({},o),e,s,{region:t,service:n}).catch(function(e){if(_.DateUtils.isClockSkewError(e)){var t=(n=e.response.headers)&&(n.date||n.Date),n=new Date(t),t=_.DateUtils.getDateFromHeaderString(o.headers["x-amz-date"]);if(_.DateUtils.isClockSkewed(t,n))return _.DateUtils.setClockOffset(n.getTime()-t.getTime()),m.ajax(v,b,w)}throw e})},function(e){return iv.debug("No credentials available, the request will be unsigned"),m._request(o,s)})]}},g={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]},e={next:y(0),throw:y(1),return:y(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function y(t){return function(e){return function(t){if(d)throw new TypeError("Generator is already executing.");for(;g;)try{if(d=1,f&&(h=2&t[0]?f.return:t[0]?f.throw||((h=f.return)&&h.call(f),0):f.next)&&!(h=h.call(f,t[1])).done)return h;switch(f=0,(t=h?[2&t[0],h.value]:t)[0]){case 0:case 1:h=t;break;case 4:return g.label++,{value:t[1],done:!1};case 5:g.label++,f=t[1],t=[0];continue;case 7:t=g.ops.pop(),g.trys.pop();continue;default:if(!(h=0<(h=g.trys).length&&h[h.length-1])&&(6===t[0]||2===t[0])){g=0;continue}if(3===t[0]&&(!h||t[1]>h[0]&&t[1]<h[3])){g.label=t[1];break}if(6===t[0]&&g.label<h[1]){g.label=h[1],h=t;break}if(h&&g.label<h[2]){g.label=h[2],g.ops.push(t);break}h[2]&&g.ops.pop(),g.trys.pop();continue}t=p.call(l,g)}catch(e){t=[6,e],f=0}finally{d=h=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(s=(s=a=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())});var e,a,s,u},sv.prototype.get=function(e,t){return this.ajax(e,"GET",t)},sv.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},sv.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},sv.prototype.post=function(e,t){return this.ajax(e,"POST",t)},sv.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},sv.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},sv.prototype.cancel=function(e,t){return(e=this._cancelTokenMap.get(e))&&e.cancel(t),!0},sv.prototype.isCancel=function(e){return O.isCancel(e)},sv.prototype.getCancellableToken=function(){return O.CancelToken.source()},sv.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},sv.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},sv.prototype._signed=function(e,t,n,r){var o=r.service,i=r.region,r=e.signerServiceInfo,e=rv(e,["signerServiceInfo"]),i=i||this._region||this._options.region,o=o||this._service||this._options.service,t={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},r=Object.assign({region:i,service:o},r);return(r=_.Signer.sign(e,t,r)).data&&(r.body=r.data),iv.debug("Signed Request: ",r),delete r.headers.host,O(r).then(function(e){return n?e:e.data}).catch(function(e){throw iv.debug(e),e})},sv.prototype._request=function(e,t){return void 0===t&&(t=!1),O(e).then(function(e){return t?e:e.data}).catch(function(e){throw iv.debug(e),e})},sv.prototype._parseUrl=function(e){return{host:(e=e.split("/"))[2],path:"/"+e.slice(3).join("/")}},sv);function sv(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=_.Credentials,this._options=e,iv.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var uv=function(){return(uv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},cv=new _.ConsoleLogger("RestAPI"),lv=(pv.prototype.getModuleName=function(){return"RestAPI"},pv.prototype.configure=function(e){var e=void 0===(e=(t=e||{}).API)?{}:e,t=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(t,["API"]),t=uv(uv({},t),e);return cv.debug("configure Rest API",{opt:t}),t.aws_project_region&&(t.aws_cloud_logic_custom&&(e=t.aws_cloud_logic_custom,t.endpoints="string"==typeof e?JSON.parse(e):e),t=Object.assign({},t,{region:t.aws_project_region,header:{}})),Array.isArray(t.endpoints)?t.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(cv.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?t.endpoints=this._options.endpoints:t.endpoints=[],this._options=Object.assign({},this._options,t),this.createInstance(),this._options},pv.prototype.createInstance=function(){return cv.debug("create Rest API instance"),this._api=new av(this._options),this._api.Credentials=this.Credentials,!0},pv.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var a=this._api.get(r,i);return this._api.updateRequestToBeCancellable(a,o),a}catch(e){return Promise.reject(e.message)}},pv.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var a=this._api.post(r,i);return this._api.updateRequestToBeCancellable(a,o),a}catch(e){return Promise.reject(e.message)}},pv.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var a=this._api.put(r,i);return this._api.updateRequestToBeCancellable(a,o),a}catch(e){return Promise.reject(e.message)}},pv.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var a=this._api.patch(r,i);return this._api.updateRequestToBeCancellable(a,o),a}catch(e){return Promise.reject(e.message)}},pv.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var a=this._api.del(r,i);return this._api.updateRequestToBeCancellable(a,o),a}catch(e){return Promise.reject(e.message)}},pv.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),o=this._api.getCancellableToken(),i=Object.assign({},n);i.cancellableToken=o;var a=this._api.head(r,i);return this._api.updateRequestToBeCancellable(a,o),a}catch(e){return Promise.reject(e.message)}},pv.prototype.isCancel=function(e){return this._api.isCancel(e)},pv.prototype.cancel=function(e,t){return this._api.cancel(e,t)},pv.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._api.endpoint(u)]},s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,o,i,a,s,t},new(s=(s=a=void 0)||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((c=c.apply(e,a||[])).next())});var e,a,s,c},pv.prototype.getEndpointInfo=function(t,e){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");if(!(n=n.find(function(e){return e.name===t})))throw new Error("API "+t+" does not exist");return e={endpoint:n.endpoint+e},"string"==typeof n.region?e.region=n.region:"string"==typeof this._options.region&&(e.region=this._options.region),"string"==typeof n.service?e.service=n.service||"execute-api":e.service="execute-api","function"==typeof n.custom_header?e.custom_header=n.custom_header:e.custom_header=void 0,e},pv);function pv(e){this._api=null,this.Credentials=_.Credentials,this._options=e,cv.debug("API Options",this._options)}var dv=new lv(null);function fv(e,t){for(var n,r=/\r\n|[\n\r]/g,o=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)o+=1,i=t+1-(n.index+n[0].length);return{line:o,column:i}}function hv(e,t){var n=gv(i=e.locationOffset.column-1)+e.body,r=t.line-1,o=e.locationOffset.line-1,o=t.line+o,i=1===t.line?i:0,i=t.column+i,n=n.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(o,":").concat(i,")\n")+function(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=0,r=!0,o=!1,e=void 0;try{for(var i,a=t[Symbol.iterator]();!(r=(i=a.next()).done);r=!0)var s=i.value[0],n=Math.max(n,s.length)}catch(t){o=!0,e=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw e}}return t.map(function(e){var t=e[0],e=e[1];return gv(n-t.length)+t+e}).join("\n")}([["".concat(o-1,": "),n[r-1]],["".concat(o,": "),n[r]],["",gv(i-1)+"^"],["".concat(o+1,": "),n[1+r]]])}function gv(e){return Array(e+1).join(" ")}function mv(e,t,n,r,o,i,a){var s=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,t=n;!n&&s&&(t=(c=s[0])&&c.loc&&c.loc.source);var u,c=r;(c=!c&&s?s.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[]):c)&&0===c.length&&(c=void 0),r&&n?u=r.map(function(e){return fv(n,e)}):s&&(u=s.reduce(function(e,t){return t.loc&&e.push(fv(t.loc.source,t.loc.start)),e},[])),a=a||i&&i.extensions,Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:u||void 0,enumerable:Boolean(u)},path:{value:o||void 0,enumerable:Boolean(o)},nodes:{value:s||void 0},source:{value:t||void 0},positions:{value:c||void 0},originalError:{value:i},extensions:{value:a||void 0,enumerable:Boolean(a)}}),i&&i.stack?Object.defineProperty(this,"stack",{value:i.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,mv):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}_.Amplify.register(dv),mv.prototype=Object.create(Error.prototype,{constructor:{value:mv},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,o=void 0;try{for(var i,a=e.nodes[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.loc&&t.push(hv(s.loc.source,fv(s.loc.source,s.loc.start)))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}}else if(e.source&&e.locations){var u=e.source,c=!0,r=!1,o=void 0;try{for(var l,p=e.locations[Symbol.iterator]();!(c=(l=p.next()).done);c=!0){var d=l.value;t.push(hv(u,d))}}catch(e){r=!0,o=e}finally{try{c||null==p.return||p.return()}finally{if(r)throw o}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var yv={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},vv={};function bv(e){return Boolean(e&&"string"==typeof e.kind)}function wv(e){return function(e,t,n){var r,o,i,a=2<arguments.length&&void 0!==n?n:yv,s=void 0,u=Array.isArray(e),c=[e],l=-1,p=[],d=void 0,f=void 0,h=void 0,g=[],m=[],y=e;do{var v=++l===c.length,b=v&&0!==p.length;if(v){if(f=0===m.length?void 0:g[g.length-1],d=h,h=m.pop(),b){if(u)d=d.slice();else{var w,S={};for(w in d)d.hasOwnProperty(w)&&(S[w]=d[w]);d=S}for(var C=0,_=0;_<p.length;_++){var E=p[_][0],A=p[_][1];u&&(E-=C),u&&null===A?(d.splice(E,1),C++):d[E]=A}}l=s.index,c=s.keys,p=s.edits,u=s.inArray,s=s.prev}else{if(f=h?u?l:c[l]:void 0,null==(d=h?h[f]:y))continue;h&&g.push(f)}var I=void 0;if(!Array.isArray(d)){if(!bv(d))throw new Error("Invalid AST Node: "+JSON.stringify(d));var k=(r=t,o=d.kind,i=void 0,(i=r[o])?!v&&"function"==typeof i||"function"==typeof(i=v?i.leave:i.enter)?i:void 0:(r=v?r.leave:r.enter)?"function"==typeof r?r:"function"==typeof(o=r[o])?o:void 0:void 0);if(k){if((I=k.call(t,d,f,h,g,m))===vv)break;if(!1===I){if(!v){g.pop();continue}}else if(void 0!==I&&(p.push([f,I]),!v)){if(!bv(I)){g.pop();continue}d=I}}}void 0===I&&b&&p.push([f,d]),v?g.pop():(s={inArray:u,index:l,keys:c,edits:p,prev:s},c=(u=Array.isArray(d))?d:a[d.kind]||[],l=-1,p=[],h&&m.push(h),h=d)}while(void 0!==s);return 0!==p.length?p[p.length-1][1]:y}(e,{leave:Sv})}var Sv={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return _v(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=Av("(",_v(e.variableDefinitions,", "),")"),o=_v(e.directives," "),e=e.selectionSet;return n||o||r||"query"!==t?_v([t,_v([n,r]),o,e]," "):e},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,e=e.directives;return t+": "+n+Av(" = ",r)+Av(" ",_v(e," "))},SelectionSet:function(e){return Ev(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,o=e.directives,e=e.selectionSet;return _v([Av("",t,": ")+n+Av("(",_v(r,", "),")"),_v(o," "),e]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+Av(" ",_v(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,e=e.selectionSet;return _v(["...",Av("on ",t),_v(n," "),e]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,o=e.directives,e=e.selectionSet;return"fragment ".concat(t).concat(Av("(",_v(r,", "),")")," ")+"on ".concat(n," ").concat(Av("",_v(o," ")," "))+e},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r=e.value;return e.block?(n="description"===t,t=(e=r).replace(/"""/g,'\\"""')," "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(n?t:Iv(t),'\n"""'):'"""'.concat(t.replace(/"$/,'"\n'),'"""')):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+_v(e.values,", ")+"]"},ObjectValue:function(e){return"{"+_v(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+Av("(",_v(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,e=e.operationTypes;return _v(["schema",_v(t," "),Ev(e)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:Cv(function(e){return _v(["scalar",e.name,_v(e.directives," ")]," ")}),ObjectTypeDefinition:Cv(function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return _v(["type",t,Av("implements ",_v(n," & ")),_v(r," "),Ev(e)]," ")}),FieldDefinition:Cv(function(e){var t=e.name,n=e.arguments,r=e.type,e=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?Av("(",_v(n,", "),")"):Av("(\n",Iv(_v(n,"\n")),"\n)"))+": "+r+Av(" ",_v(e," "))}),InputValueDefinition:Cv(function(e){var t=e.name,n=e.type,r=e.defaultValue,e=e.directives;return _v([t+": "+n,Av("= ",r),_v(e," ")]," ")}),InterfaceTypeDefinition:Cv(function(e){var t=e.name,n=e.directives,e=e.fields;return _v(["interface",t,_v(n," "),Ev(e)]," ")}),UnionTypeDefinition:Cv(function(e){var t=e.name,n=e.directives,e=e.types;return _v(["union",t,_v(n," "),e&&0!==e.length?"= "+_v(e," | "):""]," ")}),EnumTypeDefinition:Cv(function(e){var t=e.name,n=e.directives,e=e.values;return _v(["enum",t,_v(n," "),Ev(e)]," ")}),EnumValueDefinition:Cv(function(e){return _v([e.name,_v(e.directives," ")]," ")}),InputObjectTypeDefinition:Cv(function(e){var t=e.name,n=e.directives,e=e.fields;return _v(["input",t,_v(n," "),Ev(e)]," ")}),DirectiveDefinition:Cv(function(e){var t=e.name,n=e.arguments,e=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?Av("(",_v(n,", "),")"):Av("(\n",Iv(_v(n,"\n")),"\n)"))+" on "+_v(e," | ")}),SchemaExtension:function(e){var t=e.directives,e=e.operationTypes;return _v(["extend schema",_v(t," "),Ev(e)]," ")},ScalarTypeExtension:function(e){return _v(["extend scalar",e.name,_v(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return _v(["extend type",t,Av("implements ",_v(n," & ")),_v(r," "),Ev(e)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return _v(["extend interface",t,_v(n," "),Ev(e)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,e=e.types;return _v(["extend union",t,_v(n," "),e&&0!==e.length?"= "+_v(e," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,e=e.values;return _v(["extend enum",t,_v(n," "),Ev(e)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return _v(["extend input",t,_v(n," "),Ev(e)]," ")}};function Cv(t){return function(e){return _v([e.description,t(e)],"\n")}}function _v(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function Ev(e){return e&&0!==e.length?"{\n"+Iv(_v(e,"\n"))+"\n}":""}function Av(e,t,n){return t?e+t+(n||""):""}function Iv(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function kv(e){return(kv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tv(t){return t&&"object"===kv(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(Tv).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(Tv(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function Pv(e,t){if(!e)throw new Error(t)}function Ov(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xv(e,t,n){Ov(this,"body",void 0),Ov(this,"name",void 0),Ov(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||Pv(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||Pv(0,"column in locationOffset is 1-indexed and must be positive")}function Nv(e,t,n){return new mv("Syntax Error: ".concat(n),void 0,e,[t])}function Rv(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function Mv(e){return Rv(e)===e.length}function Uv(){return this.lastToken=this.token,this.token=this.lookahead()}function Dv(){var e=this.token;if(e.kind!==Lv.EOF)for(;(e=e.next||(e.next=function(e,t){var u=e.source,n=u.body,r=n.length,o=function(e,t,n){for(var r=e.length,o=t;o<r;){var i=jv.call(e,o);if(9===i||32===i||44===i||65279===i)++o;else if(10===i)++o,++n.line,n.lineStart=o;else{if(13!==i)break;10===jv.call(e,o+1)?o+=2:++o,++n.line,n.lineStart=o}}return o}(n,t.end,e),i=e.line,a=1+o-e.lineStart;if(r<=o)return new zv(Lv.EOF,r,r,i,a,t);var s,c=jv.call(n,o);switch(c){case 33:return new zv(Lv.BANG,o,o+1,i,a,t);case 35:return function(e,t,n,r){for(var o,i=u.body,a=e;null!==(o=jv.call(i,++a))&&(31<o||9===o););return new zv(Lv.COMMENT,e,a,t,n,r,Bv.call(i,e+1,a))}(o,i,a,t);case 36:return new zv(Lv.DOLLAR,o,o+1,i,a,t);case 38:return new zv(Lv.AMP,o,o+1,i,a,t);case 40:return new zv(Lv.PAREN_L,o,o+1,i,a,t);case 41:return new zv(Lv.PAREN_R,o,o+1,i,a,t);case 46:if(46===jv.call(n,o+1)&&46===jv.call(n,o+2))return new zv(Lv.SPREAD,o,o+3,i,a,t);break;case 58:return new zv(Lv.COLON,o,o+1,i,a,t);case 61:return new zv(Lv.EQUALS,o,o+1,i,a,t);case 64:return new zv(Lv.AT,o,o+1,i,a,t);case 91:return new zv(Lv.BRACKET_L,o,o+1,i,a,t);case 93:return new zv(Lv.BRACKET_R,o,o+1,i,a,t);case 123:return new zv(Lv.BRACE_L,o,o+1,i,a,t);case 124:return new zv(Lv.PIPE,o,o+1,i,a,t);case 125:return new zv(Lv.BRACE_R,o,o+1,i,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r){for(var o=u.body,i=o.length,a=e+1,s=0;a!==i&&null!==(s=jv.call(o,a))&&(95===s||48<=s&&s<=57||65<=s&&s<=90||97<=s&&s<=122);)++a;return new zv(Lv.NAME,e,a,t,n,r,Bv.call(o,e,a))}(o,i,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,o,i){var a=e.body,s=n,u=t,n=!1;if(45===s&&(s=jv.call(a,++u)),48===s){if(48<=(s=jv.call(a,++u))&&s<=57)throw Nv(e,u,"Invalid number, unexpected digit after 0: ".concat(Vv(s),"."))}else u=qv(e,u,s),s=jv.call(a,u);return 46===s&&(n=!0,s=jv.call(a,++u),u=qv(e,u,s),s=jv.call(a,u)),69!==s&&101!==s||(n=!0,43!==(s=jv.call(a,++u))&&45!==s||(s=jv.call(a,++u)),u=qv(e,u,s)),new zv(n?Lv.FLOAT:Lv.INT,t,u,r,o,i,Bv.call(a,t,u))}(u,o,c,i,a,t);case 34:return(34===jv.call(n,o+1)&&34===jv.call(n,o+2)?function(e,t,n,r,o){for(var i=e.body,a=t+3,s=a,u=0,c="";a<i.length&&null!==(u=jv.call(i,a));){if(34===u&&34===jv.call(i,a+1)&&34===jv.call(i,a+2))return c+=Bv.call(i,s,a),new zv(Lv.BLOCK_STRING,t,a+3,n,r,o,function(){for(var e=c.split(/\r\n|[\n\r]/g),t=null,n=1;n<e.length;n++){var r=e[n],o=Rv(r);if(o<r.length&&(null===t||o<t)&&0===(t=o))break}if(t)for(var i=1;i<e.length;i++)e[i]=e[i].slice(t);for(;0<e.length&&Mv(e[0]);)e.shift();for(;0<e.length&&Mv(e[e.length-1]);)e.pop();return e.join("\n")}());if(u<32&&9!==u&&10!==u&&13!==u)throw Nv(e,a,"Invalid character within String: ".concat(Vv(u),"."));92===u&&34===jv.call(i,a+1)&&34===jv.call(i,a+2)&&34===jv.call(i,a+3)?(c+=Bv.call(i,s,a)+'"""',s=a+=4):++a}throw Nv(e,a,"Unterminated string.")}:function(e,t,n,r,o){for(var i,a,s,u,c=e.body,l=t+1,p=l,d=0,f="";l<c.length&&null!==(d=jv.call(c,l))&&10!==d&&13!==d;){if(34===d)return f+=Bv.call(c,p,l),new zv(Lv.STRING,t,l+1,n,r,o,f);if(d<32&&9!==d)throw Nv(e,l,"Invalid character within String: ".concat(Vv(d),"."));if(++l,92===d){switch(f+=Bv.call(c,p,l-1),d=jv.call(c,l)){case 34:f+='"';break;case 47:f+="/";break;case 92:f+="\\";break;case 98:f+="\b";break;case 102:f+="\f";break;case 110:f+="\n";break;case 114:f+="\r";break;case 116:f+="\t";break;case 117:var h=(i=jv.call(c,l+1),a=jv.call(c,l+2),s=jv.call(c,l+3),u=jv.call(c,l+4),Kv(i)<<12|Kv(a)<<8|Kv(s)<<4|Kv(u));if(h<0)throw Nv(e,l,"Invalid character escape sequence: "+"\\u".concat(c.slice(l+1,l+5),"."));f+=String.fromCharCode(h),l+=4;break;default:throw Nv(e,l,"Invalid character escape sequence: \\".concat(String.fromCharCode(d),"."))}p=++l}}throw Nv(e,l,"Unterminated string.")})(u,o,i,a,t)}throw Nv(u,o,(s=c)<32&&9!==s&&10!==s&&13!==s?"Cannot contain the invalid character ".concat(Vv(s),"."):39!==s?"Cannot parse the unexpected character ".concat(Vv(s),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?")}(this,e))).kind===Lv.COMMENT;);return e}"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(xv.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var Lv=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function Fv(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var jv=String.prototype.charCodeAt,Bv=String.prototype.slice;function zv(e,t,n,r,o,i,a){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=o,this.value=a,this.prev=i,this.next=null}function Vv(e){return isNaN(e)?Lv.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function qv(e,t,n){var r=e.body,o=t,i=n;if(48<=i&&i<=57){for(;48<=(i=jv.call(r,++o))&&i<=57;);return o}throw Nv(e,o,"Invalid number, expected digit but got: ".concat(Vv(i),"."))}function Kv(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}zv.prototype.toJSON=zv.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var Hv=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),Gv=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Wv(e,t){var n="string"==typeof e?new xv(e):e;if(!(n instanceof xv))throw new TypeError("Must provide Source. Received: ".concat(Tv(n)));return n=(t=n={source:e=n,options:n=t||{},lastToken:t=new zv(Lv.SOF,0,0,0,0,null),token:t,line:1,lineStart:0,advance:Uv,lookahead:Dv}).token,{kind:Hv.DOCUMENT,definitions:Ub(t,Lv.SOF,Yv,Lv.EOF),loc:Tb(t,n)}}function $v(e){var t=Nb(e,Lv.NAME);return{kind:Hv.NAME,value:t.value,loc:Tb(e,t)}}function Yv(e){if(Ob(e,Lv.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return Jv(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return gb(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===Lv.NAME)switch(t.value){case"schema":return function(e){var t=e.token;Rb(e,"extend"),Rb(e,"schema");var n=db(e,!0),r=Ob(e,Lv.BRACE_L)?Ub(e,Lv.BRACE_L,vb,Lv.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:Hv.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:Tb(e,t)};throw Mb(e)}(e);case"scalar":return function(e){var t=e.token;Rb(e,"extend"),Rb(e,"scalar");var n=$v(e),r=db(e,!0);if(0!==r.length)return{kind:Hv.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:Tb(e,t)};throw Mb(e)}(e);case"type":return function(e){var t=e.token;Rb(e,"extend"),Rb(e,"type");var n=$v(e),r=bb(e),o=db(e,!0),i=wb(e);if(0!==r.length||0!==o.length||0!==i.length)return{kind:Hv.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:o,fields:i,loc:Tb(e,t)};throw Mb(e)}(e);case"interface":return function(e){var t=e.token;Rb(e,"extend"),Rb(e,"interface");var n=$v(e),r=db(e,!0),o=wb(e);if(0!==r.length||0!==o.length)return{kind:Hv.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:Tb(e,t)};throw Mb(e)}(e);case"union":return function(e){var t=e.token;Rb(e,"extend"),Rb(e,"union");var n=$v(e),r=db(e,!0),o=Eb(e);if(0!==r.length||0!==o.length)return{kind:Hv.UNION_TYPE_EXTENSION,name:n,directives:r,types:o,loc:Tb(e,t)};throw Mb(e)}(e);case"enum":return function(e){var t=e.token;Rb(e,"extend"),Rb(e,"enum");var n=$v(e),r=db(e,!0),o=Ab(e);if(0!==r.length||0!==o.length)return{kind:Hv.ENUM_TYPE_EXTENSION,name:n,directives:r,values:o,loc:Tb(e,t)};throw Mb(e)}(e);case"input":return function(e){var t=e.token;Rb(e,"extend"),Rb(e,"input");var n=$v(e),r=db(e,!0),o=kb(e);if(0!==r.length||0!==o.length)return{kind:Hv.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:o,loc:Tb(e,t)};throw Mb(e)}(e)}throw Mb(e,t)}(e)}else{if(Ob(e,Lv.BRACE_L))return Jv(e);if(mb(e))return gb(e)}throw Mb(e)}function Jv(e){if(Ob(e,Lv.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return Zv(e);case"fragment":return n=(t=e).token,Rb(t,"fragment"),t.options.experimentalFragmentVariables?{kind:Hv.FRAGMENT_DEFINITION,name:sb(t),variableDefinitions:Qv(t),typeCondition:(Rb(t,"on"),hb(t)),directives:db(t,!1),selectionSet:nb(t),loc:Tb(t,n)}:{kind:Hv.FRAGMENT_DEFINITION,name:sb(t),typeCondition:(Rb(t,"on"),hb(t)),directives:db(t,!1),selectionSet:nb(t),loc:Tb(t,n)}}else if(Ob(e,Lv.BRACE_L))return Zv(e);var t,n;throw Mb(e)}function Zv(e){var t=e.token;if(Ob(e,Lv.BRACE_L))return{kind:Hv.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:nb(e),loc:Tb(e,t)};var n,r=Xv(e);return Ob(e,Lv.NAME)&&(n=$v(e)),{kind:Hv.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:Qv(e),directives:db(e,!1),selectionSet:nb(e),loc:Tb(e,t)}}function Xv(e){var t=Nb(e,Lv.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw Mb(e,t)}function Qv(e){return Ob(e,Lv.PAREN_L)?Ub(e,Lv.PAREN_L,eb,Lv.PAREN_R):[]}function eb(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:Hv.VARIABLE_DEFINITION,variable:tb(e),type:(Nb(e,Lv.COLON),fb(e)),defaultValue:xb(e,Lv.EQUALS)?ub(e,!0):void 0,directives:db(e,!0),loc:Tb(e,t)}:{kind:Hv.VARIABLE_DEFINITION,variable:tb(e),type:(Nb(e,Lv.COLON),fb(e)),defaultValue:xb(e,Lv.EQUALS)?ub(e,!0):void 0,loc:Tb(e,t)}}function tb(e){var t=e.token;return Nb(e,Lv.DOLLAR),{kind:Hv.VARIABLE,name:$v(e),loc:Tb(e,t)}}function nb(e){var t=e.token;return{kind:Hv.SELECTION_SET,selections:Ub(e,Lv.BRACE_L,rb,Lv.BRACE_R),loc:Tb(e,t)}}function rb(e){return(Ob(e,Lv.SPREAD)?function(e){var t,n=e.token;return Nb(e,Lv.SPREAD),Ob(e,Lv.NAME)&&"on"!==e.token.value?{kind:Hv.FRAGMENT_SPREAD,name:sb(e),directives:db(e,!1),loc:Tb(e,n)}:("on"===e.token.value&&(e.advance(),t=hb(e)),{kind:Hv.INLINE_FRAGMENT,typeCondition:t,directives:db(e,!1),selectionSet:nb(e),loc:Tb(e,n)})}:function(e){var t,n=e.token,r=$v(e),r=xb(e,Lv.COLON)?(t=r,$v(e)):r;return{kind:Hv.FIELD,alias:t,name:r,arguments:ob(e,!1),directives:db(e,!1),selectionSet:Ob(e,Lv.BRACE_L)?nb(e):void 0,loc:Tb(e,n)}})(e)}function ob(e,t){return Ob(e,Lv.PAREN_L)?Ub(e,Lv.PAREN_L,t?ab:ib,Lv.PAREN_R):[]}function ib(e){var t=e.token;return{kind:Hv.ARGUMENT,name:$v(e),value:(Nb(e,Lv.COLON),ub(e,!1)),loc:Tb(e,t)}}function ab(e){var t=e.token;return{kind:Hv.ARGUMENT,name:$v(e),value:(Nb(e,Lv.COLON),lb(e)),loc:Tb(e,t)}}function sb(e){if("on"===e.token.value)throw Mb(e);return $v(e)}function ub(e,t){var n,r,o,i=e.token;switch(i.kind){case Lv.BRACKET_L:return o=(n=e).token,r=t?lb:pb,{kind:Hv.LIST,values:function(e,t,n,r){Nb(e,t);for(var o=[];!xb(e,r);)o.push(n(e));return o}(n,Lv.BRACKET_L,r,Lv.BRACKET_R),loc:Tb(n,o)};case Lv.BRACE_L:return function(e,t){var n=e.token;Nb(e,Lv.BRACE_L);for(var r,o,i,a=[];!xb(e,Lv.BRACE_R);)a.push((o=t,i=(r=e).token,{kind:Hv.OBJECT_FIELD,name:$v(r),value:(Nb(r,Lv.COLON),ub(r,o)),loc:Tb(r,i)}));return{kind:Hv.OBJECT,fields:a,loc:Tb(e,n)}}(e,t);case Lv.INT:return e.advance(),{kind:Hv.INT,value:i.value,loc:Tb(e,i)};case Lv.FLOAT:return e.advance(),{kind:Hv.FLOAT,value:i.value,loc:Tb(e,i)};case Lv.STRING:case Lv.BLOCK_STRING:return cb(e);case Lv.NAME:return"true"===i.value||"false"===i.value?(e.advance(),{kind:Hv.BOOLEAN,value:"true"===i.value,loc:Tb(e,i)}):"null"===i.value?(e.advance(),{kind:Hv.NULL,loc:Tb(e,i)}):(e.advance(),{kind:Hv.ENUM,value:i.value,loc:Tb(e,i)});case Lv.DOLLAR:if(!t)return tb(e)}throw Mb(e)}function cb(e){var t=e.token;return e.advance(),{kind:Hv.STRING,value:t.value,block:t.kind===Lv.BLOCK_STRING,loc:Tb(e,t)}}function lb(e){return ub(e,!0)}function pb(e){return ub(e,!1)}function db(e,t){for(var n,r,o,i=[];Ob(e,Lv.AT);)i.push((r=t,o=(n=e).token,Nb(n,Lv.AT),{kind:Hv.DIRECTIVE,name:$v(n),arguments:ob(n,r),loc:Tb(n,o)}));return i}function fb(e){var t=e.token,n=xb(e,Lv.BRACKET_L)?(n=fb(e),Nb(e,Lv.BRACKET_R),{kind:Hv.LIST_TYPE,type:n,loc:Tb(e,t)}):hb(e);return xb(e,Lv.BANG)?{kind:Hv.NON_NULL_TYPE,type:n,loc:Tb(e,t)}:n}function hb(e){var t=e.token;return{kind:Hv.NAMED_TYPE,name:$v(e),loc:Tb(e,t)}}function gb(e){var t=mb(e)?e.lookahead():e.token;if(t.kind===Lv.NAME)switch(t.value){case"schema":return function(e){var t=e.token;Rb(e,"schema");var n=db(e,!0),r=Ub(e,Lv.BRACE_L,vb,Lv.BRACE_R);return{kind:Hv.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:Tb(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=yb(e);Rb(e,"scalar");var r=$v(e),o=db(e,!0);return{kind:Hv.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:o,loc:Tb(e,t)}}(e);case"type":return function(e){var t=e.token,n=yb(e);Rb(e,"type");var r=$v(e),o=bb(e),i=db(e,!0),a=wb(e);return{kind:Hv.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:o,directives:i,fields:a,loc:Tb(e,t)}}(e);case"interface":return function(e){var t=e.token,n=yb(e);Rb(e,"interface");var r=$v(e),o=db(e,!0),i=wb(e);return{kind:Hv.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:Tb(e,t)}}(e);case"union":return function(e){var t=e.token,n=yb(e);Rb(e,"union");var r=$v(e),o=db(e,!0),i=Eb(e);return{kind:Hv.UNION_TYPE_DEFINITION,description:n,name:r,directives:o,types:i,loc:Tb(e,t)}}(e);case"enum":return function(e){var t=e.token,n=yb(e);Rb(e,"enum");var r=$v(e),o=db(e,!0),i=Ab(e);return{kind:Hv.ENUM_TYPE_DEFINITION,description:n,name:r,directives:o,values:i,loc:Tb(e,t)}}(e);case"input":return function(e){var t=e.token,n=yb(e);Rb(e,"input");var r=$v(e),o=db(e,!0),i=kb(e);return{kind:Hv.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:o,fields:i,loc:Tb(e,t)}}(e);case"directive":return function(e){var t=e.token,n=yb(e);Rb(e,"directive"),Nb(e,Lv.AT);var r=$v(e),o=Cb(e);Rb(e,"on");var i=function(e){xb(e,Lv.PIPE);for(var t=[];t.push(function(e){var t=e.token,n=$v(e);if(Gv.hasOwnProperty(n.value))return n;throw Mb(e,t)}(e)),xb(e,Lv.PIPE););return t}(e);return{kind:Hv.DIRECTIVE_DEFINITION,description:n,name:r,arguments:o,locations:i,loc:Tb(e,t)}}(e)}throw Mb(e,t)}function mb(e){return Ob(e,Lv.STRING)||Ob(e,Lv.BLOCK_STRING)}function yb(e){if(mb(e))return cb(e)}function vb(e){var t=e.token,n=Xv(e);Nb(e,Lv.COLON);var r=hb(e);return{kind:Hv.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:Tb(e,t)}}function bb(e){var t=[];if("implements"===e.token.value)for(e.advance(),xb(e,Lv.AMP);t.push(hb(e)),xb(e,Lv.AMP)||e.options.allowLegacySDLImplementsInterfaces&&Ob(e,Lv.NAME););return t}function wb(e){return e.options.allowLegacySDLEmptyFields&&Ob(e,Lv.BRACE_L)&&e.lookahead().kind===Lv.BRACE_R?(e.advance(),e.advance(),[]):Ob(e,Lv.BRACE_L)?Ub(e,Lv.BRACE_L,Sb,Lv.BRACE_R):[]}function Sb(e){var t=e.token,n=yb(e),r=$v(e),o=Cb(e);Nb(e,Lv.COLON);var i=fb(e),a=db(e,!0);return{kind:Hv.FIELD_DEFINITION,description:n,name:r,arguments:o,type:i,directives:a,loc:Tb(e,t)}}function Cb(e){return Ob(e,Lv.PAREN_L)?Ub(e,Lv.PAREN_L,_b,Lv.PAREN_R):[]}function _b(e){var t=e.token,n=yb(e),r=$v(e);Nb(e,Lv.COLON);var o,i=fb(e);xb(e,Lv.EQUALS)&&(o=lb(e));var a=db(e,!0);return{kind:Hv.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:o,directives:a,loc:Tb(e,t)}}function Eb(e){var t=[];if(xb(e,Lv.EQUALS))for(xb(e,Lv.PIPE);t.push(hb(e)),xb(e,Lv.PIPE););return t}function Ab(e){return Ob(e,Lv.BRACE_L)?Ub(e,Lv.BRACE_L,Ib,Lv.BRACE_R):[]}function Ib(e){var t=e.token,n=yb(e),r=$v(e),o=db(e,!0);return{kind:Hv.ENUM_VALUE_DEFINITION,description:n,name:r,directives:o,loc:Tb(e,t)}}function kb(e){return Ob(e,Lv.BRACE_L)?Ub(e,Lv.BRACE_L,_b,Lv.BRACE_R):[]}function Tb(e,t){if(!e.options.noLocation)return new Pb(t,e.lastToken,e.source)}function Pb(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function Ob(e,t){return e.token.kind===t}function xb(e,t){return(t=e.token.kind===t)&&e.advance(),t}function Nb(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw Nv(e.source,n.start,"Expected ".concat(t,", found ").concat(Fv(n)))}function Rb(e,t){var n=e.token;if(n.kind===Lv.NAME&&n.value===t)return e.advance(),n;throw Nv(e.source,n.start,'Expected "'.concat(t,'", found ').concat(Fv(n)))}function Mb(e,t){return t=t||e.token,Nv(e.source,t.start,"Unexpected ".concat(Fv(t)))}function Ub(e,t,n,r){Nb(e,t);for(var o=[n(e)];!xb(e,r);)o.push(n(e));return o}Pb.prototype.toJSON=Pb.prototype.inspect=function(){return{start:this.start,end:this.end}};var Db=N,Lb=function(){return(Lb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Fb=new _.ConsoleLogger("AbstractPubSubProvider"),jb=(Bb.prototype.configure=function(e){return this._config=Lb(Lb({},e=void 0===e?{}:e),this._config),Fb.debug("configure "+this.getProviderName(),this._config),this.options},Bb.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(Bb.prototype,"options",{get:function(){return Lb({},this._config)},enumerable:!0,configurable:!0}),Bb);function Bb(e){this._config=e=void 0===e?{}:e}function zb(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Vb(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function qb(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}var Kb,dv=(Kb=function(e,t){return(Kb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Kb(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Hb=function(){return(Hb=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Gb=new _.ConsoleLogger("MqttOverWSProvider"),Wb=($b.prototype.get=function(n,r){return zb(this,void 0,void 0,function(){var t;return Vb(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty($b.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),$b.prototype.remove=function(e){this.promises.delete(e)},$b);function $b(){this.promises=new Map}var Yb,Jb="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",N=(dv(Zb,Yb=jb),Object.defineProperty(Zb.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(Zb.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(Zb.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(Zb.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),Zb.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[Jb]},Zb.prototype.getProviderName=function(){return"MqttOverWSProvider"},Zb.prototype.onDisconnect=function(e){var r,t=this,n=e.clientId,o=e.errorCode,e=qb(e,["clientId","errorCode"]);0!==o&&(Gb.warn(n,JSON.stringify(Hb({errorCode:o},e),null,2)),r=[],(e=this._clientIdObservers.get(n))&&(e.forEach(function(n){n.error("Disconnected, error code: "+o),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&r.push(t)})}),this._clientIdObservers.delete(n),r.forEach(function(e){t._topicObservers.delete(e)})))},Zb.prototype.newClient=function(e){var t=e.url,o=e.clientId;return zb(this,void 0,void 0,function(){var n,r=this;return Vb(this,function(e){switch(e.label){case 0:return Gb.debug("Creating new MQTT client",o),(n=new R.Client(t,o)).onMessageArrived=function(e){var t=e.destinationName,e=e.payloadString;r._onMessage(t,e)},n.onConnectionLost=function(e){var t=e.errorCode,e=qb(e,["errorCode"]);r.onDisconnect(Hb({clientId:o,errorCode:t},e))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},Zb.prototype.connect=function(n,r){return void 0===r&&(r={}),zb(this,void 0,void 0,function(){var t=this;return Vb(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(Hb(Hb({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},Zb.prototype.disconnect=function(n){return zb(this,void 0,void 0,function(){var t;return Vb(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},Zb.prototype.publish=function(i,a){return zb(this,void 0,void 0,function(){var t,n,r,o;return Vb(this,function(e){switch(e.label){case 0:return t=[].concat(i),n=JSON.stringify(a),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return o=e.sent(),Gb.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return o.send(e,n)}),[2]}})})},Zb.prototype._onMessage=function(t,n){try{var r=[];this._topicObservers.forEach(function(e,s){!function(e){for(var t=s.split("/"),n=t.length,r=e.split("/"),o=0;o<n;++o){var i=t[o],a=r[o];if("#"===i)return r.length>=n;if("+"!==i&&i!==a)return}return n===r.length}(t)||r.push(e)});var o=JSON.parse(n);"object"==typeof o&&(o[Jb]=t),r.forEach(function(e){e.forEach(function(e){return e.next(o)})})}catch(e){Gb.warn("Error handling message",e,n)}},Zb.prototype.subscribe=function(e,s){var n=this;void 0===s&&(s={});var u=[].concat(e);return Gb.debug("Subscribing to topic(s)",u.join(",")),new Db(function(o){var i;u.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(o)});var e=s.clientId,a=void 0===e?n.clientId:e;return(e=(e=n._clientIdObservers.get(a))||new Set).add(o),n._clientIdObservers.set(a,e),zb(n,void 0,void 0,function(){var t,n,r;return Vb(this,function(e){switch(e.label){case 0:return void 0!==(t=s.url)?[3,2]:[4,this.endpoint];case 1:return n=e.sent(),[3,3];case 2:n=t,e.label=3;case 3:r=n,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(a,{url:r})];case 5:return i=e.sent(),u.forEach(function(e){i.subscribe(e)}),[3,7];case 6:return r=e.sent(),o.error(r),[3,7];case 7:return[2]}})}),function(){return Gb.debug("Unsubscribing from topic(s)",u.join(",")),i&&(n._clientIdObservers.get(a).delete(o),0===n._clientIdObservers.get(a).size&&(n.disconnect(a),n._clientIdObservers.delete(a)),u.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(o),0===t.size&&(n._topicObservers.delete(e),i.isConnected()&&i.unsubscribe(e))})),null}})},Zb);function Zb(e){return(e=Yb.call(this,Hb(Hb({},e=void 0===e?{}:e),{clientId:e.clientId||h.v4()}))||this)._clientsQueue=new Wb,e._topicObservers=new Map,e._clientIdObservers=new Map,e}function Xb(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Qb(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function ew(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var tw,nw,dv=(tw=function(e,t){return(tw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}tw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),rw=new _.ConsoleLogger("AWSAppSyncProvider"),ow=(dv(iw,nw=N),Object.defineProperty(iw.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),iw.prototype.getProviderName=function(){return"AWSAppSyncProvider"},iw.prototype.publish=function(e,t,n){return Xb(this,void 0,void 0,function(){return Qb(this,function(e){throw new Error("Operation not supported")})})},iw.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return ew(e,2)[1].clientId===t}).map(function(e){return ew(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},iw.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},iw.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,o=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return ew(e,2)[1].clientId===n}).map(function(e){return ew(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(o)}),t._topicObservers.delete(e))}),this._cleanUp(n))},iw.prototype.disconnect=function(t){return Xb(this,void 0,void 0,function(){return Qb(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,nw.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},iw.prototype.subscribe=function(e,i){var n=this;void 0===i&&(i={});var t=new Db(function(s){var r=[].concat(e);return rw.debug("Subscribing to topic(s)",r.join(",")),Xb(n,void 0,void 0,function(){var o,t,n=this;return Qb(this,function(e){switch(e.label){case 0:return r.forEach(function(e){n._topicObservers.has(e)||n._topicObservers.set(e,new Set),n._topicObservers.get(e).add(s)}),t=i.mqttConnections,o=void 0===t?[]:t,t=i.newSubscriptions,t=Object.entries(t).map(function(e){var t=ew(e,2),e=t[0];return[t[1].topic,e]}),this._topicAlias=new Map(function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ew(arguments[t]));return e}(Array.from(this._topicAlias.entries()),t)),t=Object.entries(r.reduce(function(e,t){var n,r=o.find(function(e){return-1<e.topics.indexOf(t)});return r&&(n=r.client,r=r.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(t.map(function(e){var o=(e=ew(e,2))[0],i=(e=e[1]).url,a=e.topics;return Xb(n,void 0,void 0,function(){var t,n,r=this;return Qb(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(o,{clientId:o,url:i})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),s.error({message:"Failed to connect",error:n}),s.complete(),[2,void 0];case 4:return a.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){rw.debug("Unsubscribing from topic(s)",r.join(",")),r.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return Db.from(t).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var t=(n=ew(t,2))[0],n=n[1];return e[r||t]=n,e},{}),e})},iw);function iw(){var e=null!==nw&&nw.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}function aw(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function sw(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var uw,cw,lw,pw,dv=(uw=function(e,t){return(uw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}uw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dw=function(){return(dw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},fw=new _.Logger("AWSAppSyncRealTimeProvider"),hw="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",gw=[400,401,403];(N=cw=cw||{}).GQL_CONNECTION_INIT="connection_init",N.GQL_CONNECTION_ERROR="connection_error",N.GQL_CONNECTION_ACK="connection_ack",N.GQL_START="start",N.GQL_START_ACK="start_ack",N.GQL_DATA="data",N.GQL_CONNECTION_KEEP_ALIVE="ka",N.GQL_STOP="stop",N.GQL_COMPLETE="complete",N.GQL_ERROR="error",(N=lw=lw||{})[N.PENDING=0]="PENDING",N[N.CONNECTED=1]="CONNECTED",N[N.FAILED=2]="FAILED",(N=pw=pw||{})[N.CLOSED=0]="CLOSED",N[N.READY=1]="READY",N[N.CONNECTING=2]="CONNECTING";var mw,yw={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},vw=(dv(bw,mw=jb),bw.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},bw.prototype.newClient=function(){throw new Error("Not used here")},bw.prototype.publish=function(e,t,n){return aw(this,void 0,void 0,function(){return sw(this,function(e){throw new Error("Operation not supported")})})},bw.prototype.subscribe=function(e,r){var o=this,i=r.appSyncGraphqlEndpoint;return new Db(function(t){if(i){var n=h.v4();return o._startSubscriptionWithAWSAppSyncRealTime({options:r,observer:t,subscriptionId:n}).catch(function(e){t.error({errors:[dw({},new mv(Aw.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+e))]}),t.complete()}),function(){return aw(o,void 0,void 0,function(){var t;return sw(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(n)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(n)||{}).subscriptionState))return[2];if(t!==lw.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(n),[3,4];case 2:return t=e.sent(),fw.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(n),[7];case 4:return[2]}})})}}t.error({errors:[dw({},new mv("Subscribe only available for AWS AppSync endpoint"))]}),t.complete()})},Object.defineProperty(bw.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),bw.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var y=e.options,v=e.observer,b=e.subscriptionId;return aw(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g,m=this;return sw(this,function(e){switch(e.label){case 0:return t=y.appSyncGraphqlEndpoint,n=y.authenticationType,r=y.query,o=y.variables,i=y.apiKey,a=y.region,p=y.graphql_headers,s=void 0===p?function(){return{}}:p,l=y.additionalHeaders,u=void 0===l?{}:l,c=lw.PENDING,p={query:r,variables:o},this.subscriptionObserverMap.set(b,{observer:v,query:r,variables:o,subscriptionState:c,startAckTimeoutId:null}),l=JSON.stringify(p),p=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,payload:l,canonicalUri:"",region:a})];case 1:return d=[dw.apply(void 0,p.concat([e.sent()]))],[4,s()];case 2:g=dw.apply(void 0,[dw.apply(void 0,[dw.apply(void 0,d.concat([e.sent()])),u]),((g={})[_.USER_AGENT_HEADER]=_.Constants.userAgent,g)]),g={id:b,payload:{data:l,extensions:{authorization:dw({},g)}},type:cw.GQL_START},g=JSON.stringify(g),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:i,appSyncGraphqlEndpoint:t,authenticationType:n,region:a})];case 4:return e.sent(),[3,6];case 5:return h=e.sent(),fw.debug({err:h}),f=h.message,h=void 0===f?"":f,v.error({errors:[dw({},new mv(Aw.CONNECTION_FAILED+": "+h))]}),v.complete(),"function"==typeof(f=(this.subscriptionObserverMap.get(b)||{}).subscriptionFailedCallback)&&f(),[2];case 6:return h=this.subscriptionObserverMap.get(b),f=h.subscriptionFailedCallback,h=h.subscriptionReadyCallback,this.subscriptionObserverMap.set(b,{observer:v,subscriptionState:c,variables:o,query:r,subscriptionReadyCallback:h,subscriptionFailedCallback:f,startAckTimeoutId:setTimeout(function(){m._timeoutStartSubscriptionAck.call(m,b)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(g),[2]}})})},bw.prototype._waitForSubscriptionToBeConnected=function(s){return aw(this,void 0,void 0,function(){var a=this;return sw(this,function(e){return this.subscriptionObserverMap.get(s).subscriptionState===lw.PENDING?[2,new Promise(function(e,t){var n=(i=a.subscriptionObserverMap.get(s)).observer,r=i.subscriptionState,o=i.variables,i=i.query;a.subscriptionObserverMap.set(s,{observer:n,subscriptionState:r,variables:o,query:i,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},bw.prototype._sendUnsubscriptionMessage=function(e){try{var t,n;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===pw.READY&&(t={id:e,type:cw.GQL_STOP},n=JSON.stringify(t),this.awsRealTimeSocket.send(n))}catch(e){fw.debug({err:e})}},bw.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},bw.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):(fw.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=pw.CLOSED):this.socketStatus=pw.CLOSED)},bw.prototype._handleIncomingSubscriptionMessage=function(e){fw.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=void 0===(i=(s=JSON.parse(e.data)).id)?"":i,n=s.payload,r=s.type,o=void 0===(a=(u=this.subscriptionObserverMap.get(t)||{}).observer)?null:a,i=void 0===(e=u.query)?"":e,a=void 0===(s=u.variables)?{}:s,e=u.startAckTimeoutId,s=u.subscriptionReadyCallback,u=u.subscriptionFailedCallback;if(fw.debug({id:t,observer:o,query:i,variables:a}),r===cw.GQL_DATA&&n&&n.data)o?o.next(n):fw.debug("observer not found for id: "+t);else if(r!==cw.GQL_START_ACK){if(r===cw.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,Aw.TIMEOUT_DISCONNECT),this.keepAliveTimeout));r===cw.GQL_ERROR&&(c=lw.FAILED,this.subscriptionObserverMap.set(t,{observer:o,query:i,variables:a,startAckTimeoutId:e,subscriptionReadyCallback:s,subscriptionFailedCallback:u,subscriptionState:c}),o.error({errors:[dw({},new mv(Aw.CONNECTION_FAILED+": "+JSON.stringify(n)))]}),clearTimeout(e),o.complete(),"function"==typeof u&&u())}else{fw.debug("subscription ready for "+JSON.stringify({query:i,variables:a})),"function"==typeof s&&s(),clearTimeout(e),r=Aw.SUBSCRIPTION_ACK,n={query:i,variables:a},e="Connection established for subscription",_.Hub.dispatch("api",{event:r,data:n,message:e},"PubSub",hw);var c=lw.CONNECTED;this.subscriptionObserverMap.set(t,{observer:o,query:i,variables:a,startAckTimeoutId:null,subscriptionState:c,subscriptionReadyCallback:s,subscriptionFailedCallback:u})}},bw.prototype._errorDisconnect=function(t){fw.debug("Disconnect error: "+t),this.subscriptionObserverMap.forEach(function(e){(e=e.observer)&&!e.closed&&e.error({errors:[dw({},new mv(t))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=pw.CLOSED},bw.prototype._timeoutStartSubscriptionAck=function(e){var t=(r=this.subscriptionObserverMap.get(e)||{}).observer,n=r.query,r=r.variables;t&&(this.subscriptionObserverMap.set(e,{observer:t,query:n,variables:r,subscriptionState:lw.FAILED}),t&&!t.closed&&(t.error({errors:[dw({},new mv("Subscription timeout "+JSON.stringify({query:n,variables:r})))]}),t.complete()),fw.debug("timeoutStartSubscription",JSON.stringify({query:n,variables:r})))},bw.prototype._initializeWebSocketConnection=function(e){var t=this,u=e.appSyncGraphqlEndpoint,c=e.authenticationType,l=e.apiKey,p=e.region;if(this.socketStatus!==pw.READY)return new Promise(function(a,s){return aw(t,void 0,void 0,function(){var t,n,r,o,i;return sw(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:a,rej:s}),this.socketStatus!==pw.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=pw.CONNECTING,n=this.isSSLEnabled?"wss://":"ws://",t=u.replace("https://",n).replace("http://",n).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),o="{}",n=(r=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:c,payload:o,canonicalUri:"/connect",apiKey:l,appSyncGraphqlEndpoint:u,region:p})];case 2:return r=n.apply(r,[e.sent()]),r=d.Buffer.from(r).toString("base64"),o=d.Buffer.from(o).toString("base64"),o=t+"?header="+r+"&payload="+o,[4,this._initializeRetryableHandshake({awsRealTimeUrl:o})];case 3:return e.sent(),this.promiseArray.forEach(function(e){e=e.res,fw.debug("Notifying connection successful"),e()}),this.socketStatus=pw.READY,this.promiseArray=[],[3,5];case 4:return i=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(i)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=pw.CLOSED,[3,5];case 5:return[2]}})})})},bw.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return aw(this,void 0,void 0,function(){return sw(this,function(e){switch(e.label){case 0:return fw.debug("Initializaling retryable Handshake"),[4,_.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},bw.prototype._initializeHandshake=function(e){var o=e.awsRealTimeUrl;return aw(this,void 0,void 0,function(){var t,n,r,a=this;return sw(this,function(e){switch(e.label){case 0:fw.debug("Initializing handshake "+o),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(o,"graphql-ws");n.onerror=function(){fw.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return a.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(r,o){var i=!1;a.awsRealTimeSocket.onerror=function(e){fw.debug("WebSocket error "+JSON.stringify(e))},a.awsRealTimeSocket.onclose=function(e){fw.debug("WebSocket closed "+e.reason),o(new Error(JSON.stringify(e)))},a.awsRealTimeSocket.onmessage=function(e){fw.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t=JSON.parse(e.data),n=t.type,e=(void 0===(e=t.payload)?{}:e).connectionTimeoutMs;if(n===cw.GQL_CONNECTION_ACK)return i=!0,a.keepAliveTimeout=void 0===e?3e5:e,a.awsRealTimeSocket.onmessage=a._handleIncomingSubscriptionMessage.bind(a),a.awsRealTimeSocket.onerror=function(e){fw.debug(e),a._errorDisconnect(Aw.CONNECTION_CLOSED)},a.awsRealTimeSocket.onclose=function(e){fw.debug("WebSocket closed "+e.reason),a._errorDisconnect(Aw.CONNECTION_CLOSED)},void r("Cool, connected to AWS AppSyncRealTime");n===cw.GQL_CONNECTION_ERROR&&(n=(t=void 0===(n=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(void 0===(t=(void 0===(n=t.payload)?{}:n).errors)?[]:t,1)[0])?{}:n).errorType,t=t.errorCode,o({errorType:void 0===n?"":n,errorCode:void 0===t?0:t}))};var e={type:cw.GQL_CONNECTION_INIT};a.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){i||o(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(a),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,gw.includes(r)?new _.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},bw.prototype._awsRealTimeHeaderBasedAuth=function(e){var r=e.authenticationType,o=e.payload,i=e.canonicalUri,a=e.appSyncGraphqlEndpoint,s=e.apiKey,u=e.region;return aw(this,void 0,void 0,function(){var t,n;return sw(this,function(e){switch(e.label){case 0:return n={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(t=n[r])?(fw.debug("Authentication type "+r+" not supported"),[2,""]):(n=S.parse(a).host,[4,t({payload:o,canonicalUri:i,appSyncGraphqlEndpoint:a,apiKey:s,region:u,host:n})]);case 1:return[2,e.sent()]}})})},bw.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return aw(this,void 0,void 0,function(){return sw(this,function(e){switch(e.label){case 0:return[4,rh.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},bw.prototype._awsRealTimeOPENIDHeader=function(e){var r=e.host;return aw(this,void 0,void 0,function(){var t,n;return sw(this,function(e){switch(e.label){case 0:return[4,Sl.getItem("federatedInfo")];case 1:return(n=e.sent())?(t=n.token,[3,4]):[3,2];case 2:return[4,rh.currentAuthenticatedUser()];case 3:(n=e.sent())&&(t=n.token),e.label=4;case 4:if(!t)throw new Error("No federated jwt");return[2,{Authorization:t,host:r}]}})})},bw.prototype._awsRealTimeApiKeyHeader=function(e){var n=e.apiKey,r=e.host;return aw(this,void 0,void 0,function(){var t;return sw(this,function(e){return t=(t=new Date).toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:r,"x-amz-date":t,"x-api-key":n}]})})},bw.prototype._awsRealTimeIAMHeader=function(e){var o=e.payload,i=e.canonicalUri,a=e.appSyncGraphqlEndpoint,s=e.region;return aw(this,void 0,void 0,function(){var t,n,r;return sw(this,function(e){switch(e.label){case 0:return t={region:s,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,_.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+a+i,data:o,method:"POST",headers:dw({},yw)},[2,_.Signer.sign(r,n,t).headers]}})})},bw.prototype._ensureCredentials=function(){return _.Credentials.get().then(function(e){return!!e&&(e=_.Credentials.shear(e),fw.debug("set credentials for AWSAppSyncRealTimeProvider",e),!0)}).catch(function(e){return fw.warn("ensure credentials error",e),!1})},bw);function bw(){var e=null!==mw&&mw.apply(this,arguments)||this;return e.socketStatus=pw.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}function ww(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Sw(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Cw=_.browserOrNode().isNode,_w=new _.ConsoleLogger("PubSub");function Ew(e){this._options=e,_w.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}var Aw,Iw,kw=(Object.defineProperty(Ew.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new ow(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(Ew.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new vw(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),Ew.prototype.getModuleName=function(){return"PubSub"},Ew.prototype.configure=function(e){var t=this,e=e?e.PubSub||e:{};return _w.debug("configure PubSub",{opt:e}),this._options=Object.assign({},this._options,e),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},Ew.prototype.addPluggable=function(t){return ww(this,void 0,void 0,function(){return Sw(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},Ew.prototype.getProviderByName=function(t){return t===_.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===_.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},Ew.prototype.getProviders=function(e){var t=(e=void 0===e?{}:e).provider;if(!t)return this._pluggables;if(!(e=this.getProviderByName(t)))throw new Error("Could not find provider named "+t);return[e]},Ew.prototype.publish=function(t,n,r){return ww(this,void 0,void 0,function(){return Sw(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},Ew.prototype.subscribe=function(t,r){if(Cw&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");_w.debug("subscribe options",r);var o=this.getProviders(r);return new Db(function(n){var e=o.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},new Ew(null));_.Amplify.register(kw),(dv=Aw=Aw||{}).CONNECTION_CLOSED="Connection closed",dv.CONNECTION_FAILED="Connection failed",dv.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",dv.SUBSCRIPTION_ACK="Subscription ack",dv.TIMEOUT_DISCONNECT="Timeout disconnect",(jb={}).API_KEY="API_KEY",jb.AWS_IAM="AWS_IAM",jb.OPENID_CONNECT="OPENID_CONNECT",jb.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",(dv=Iw=Iw||{}).NO_API_KEY="No api-key configured",dv.NO_CURRENT_USER="No current user",dv.NO_CREDENTIALS="No credentials",dv.NO_FEDERATED_JWT="No federated jwt";function Tw(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Pw(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Ow(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var xw=function(){return(xw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Nw=new _.ConsoleLogger("GraphQLAPI"),Rw=(Mw.prototype.getModuleName=function(){return"GraphQLAPI"},Mw.prototype.configure=function(e){var e=void 0===(e=(t=e||{}).API)?{}:e,t=function(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n}(t,["API"]),e=xw(xw({},t),e);return Nw.debug("configure GraphQL API",{opt:e}),void 0!==(e=e.aws_project_region?Object.assign({},e,{region:e.aws_project_region,header:{}}):e).graphql_headers&&"function"!=typeof e.graphql_headers&&(Nw.warn("graphql_headers should be a function"),e.graphql_headers=void 0),this._options=Object.assign({},this._options,e),this.createInstance(),this._options},Mw.prototype.createInstance=function(){return Nw.debug("create Rest instance"),this._options?(this._api=new av(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},Mw.prototype._headerBasedAuth=function(a){return Tw(this,void 0,void 0,function(){var t,n,r,o,i;return Pw(this,function(e){switch(e.label){case 0:switch(r=this._options,t=r.aws_appsync_authenticationType,n=r.aws_appsync_apiKey,r={},a||t||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11]}return[3,15];case 1:if(!n)throw new Error(Iw.NO_API_KEY);return r={Authorization:null,"X-Api-Key":n},[3,16];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error(Iw.NO_CREDENTIALS);return[3,16];case 4:return e.trys.push([4,9,,10]),i=void 0,[4,Sl.getItem("federatedInfo")];case 5:return(o=e.sent())?(i=o.token,[3,8]):[3,6];case 6:return[4,rh.currentAuthenticatedUser()];case 7:(o=e.sent())&&(i=o.token),e.label=8;case 8:if(!i)throw new Error(Iw.NO_FEDERATED_JWT);return r={Authorization:i},[3,10];case 9:throw e.sent(),new Error(Iw.NO_CURRENT_USER);case 10:return[3,16];case 11:return e.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return i=e.sent(),r={Authorization:i.getAccessToken().getJwtToken()},[3,14];case 13:throw e.sent(),new Error(Iw.NO_CURRENT_USER);case 14:return[3,16];case 15:return r={Authorization:null},[3,16];case 16:return[2,r]}})})},Mw.prototype.getGraphqlOperationType=function(e){return e=Wv(e),Ow(e.definitions,1)[0].operation},Mw.prototype.graphql=function(e,t){var n=e.query,r=e.variables,o=void 0===r?{}:r,i=e.authMode,a=Wv("string"==typeof n?n:wv(n));switch(n=(void 0===(n=Ow(a.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0])?{}:n).operation){case"query":case"mutation":var s=this._api.getCancellableToken(),u=this._graphql({query:a,variables:o,authMode:i},t,{cancellableToken:s});return this._api.updateRequestToBeCancellable(u,s),u;case"subscription":return this._graphqlSubscribe({query:a,variables:o,authMode:i},t)}throw new Error("invalid operation type: "+n)},Mw.prototype._graphql=function(e,m,y){var v=e.query,b=e.variables,w=e.authMode;return void 0===m&&(m={}),void 0===y&&(y={}),Tw(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g;return Pw(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return s=this._options,t=s.aws_appsync_region,n=s.aws_appsync_graphqlEndpoint,a=s.graphql_headers,r=void 0===a?function(){return{}}:a,o=s.graphql_endpoint,i=s.graphql_endpoint_iam_region,a=[{}],(s=!o)?[4,this._headerBasedAuth(w)]:[3,4];case 3:s=e.sent(),e.label=4;case 4:return u=[xw.apply(void 0,a.concat([s]))],(c=o)?i?[4,this._headerBasedAuth(w)]:[3,6]:[3,8];case 5:return l=e.sent(),[3,7];case 6:l={Authorization:null},e.label=7;case 7:c=l,e.label=8;case 8:return p=[xw.apply(void 0,u.concat([c]))],[4,r({query:v,variables:b})];case 9:if(d=xw.apply(void 0,[xw.apply(void 0,[xw.apply(void 0,p.concat([e.sent()])),m]),!o&&((g={})["x-amz-user-agent"]=_.Constants.userAgent,g)]),g={query:wv(v),variables:b},d=Object.assign({headers:d,body:g,signerServiceInfo:{service:o?"execute-api":"appsync",region:o?i:t}},y),!(g=o||n))throw{data:{},errors:[new mv("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(g,d)];case 11:return f=e.sent(),[3,13];case 12:if(h=e.sent(),this._api.isCancel(h))throw h;return f={data:{},errors:[new mv(h.message,null,null,null,null,h)]},[3,13];case 13:if((h=f.errors)&&h.length)throw f;return[2,f]}})})},Mw.prototype.isCancel=function(e){return this._api.isCancel(e)},Mw.prototype.cancel=function(e,t){return this._api.cancel(e,t)},Mw.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,o=e.authMode;void 0===t&&(t={});var i=(u=this._options).aws_appsync_region,a=u.aws_appsync_graphqlEndpoint,s=u.aws_appsync_authenticationType,e=u.aws_appsync_apiKey,u=void 0===(u=u.graphql_headers)?function(){return{}}:u;if(kw&&"function"==typeof kw.subscribe)return kw.subscribe("",{provider:_.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:a,authenticationType:o||s||"AWS_IAM",apiKey:e,query:wv(n),region:i,variables:r,graphql_headers:u,additionalHeaders:t});throw Nw.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},Mw.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){return!!e&&(e=t.Credentials.shear(e),Nw.debug("set credentials for api",e),!0)}).catch(function(e){return Nw.warn("ensure credentials error",e),!1})},Mw);function Mw(e){this._api=null,this.Auth=rh,this.Cache=Sl,this.Credentials=_.Credentials,this._options=e,Nw.debug("API Options",this._options)}jb=new Rw(null),_.Amplify.register(jb);var Uw=function(){return(Uw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Dw=new _.ConsoleLogger("API");function Lw(e){this.Auth=rh,this.Cache=Sl,this.Credentials=_.Credentials,this._options=e,this._restApi=new lv(e),this._graphqlApi=new Rw(e),Dw.debug("API Options",this._options)}var Fw=(Lw.prototype.getModuleName=function(){return"API"},Lw.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),e=this._graphqlApi.configure(this._options);return Uw(Uw({},t),e)},Lw.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},Lw.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},Lw.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},Lw.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},Lw.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},Lw.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},Lw.prototype.isCancel=function(e){return this._restApi.isCancel(e)},Lw.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},Lw.prototype.endpoint=function(u){return e=this,c=function(){return n=this,r=function(e){return[2,this._restApi.endpoint(u)]},s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}var n,r,o,i,a,s,t},new(s=(s=a=void 0)||Promise)(function(n,t){function r(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((c=c.apply(e,a||[])).next())});var e,a,s,c},Lw.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},Lw.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},new Lw(null));_.Amplify.register(Fw);var jw=function(){return(jw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Bw=new _.ConsoleLogger("AbstractInteractionsProvider"),dv=(zw.prototype.configure=function(e){return void 0===e&&(e={}),this._config=jw(jw({},this._config),e),Bw.debug("configure "+this.getProviderName(),this._config),this.options},zw.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(zw.prototype,"options",{get:function(){return jw({},this._config)},enumerable:!0,configurable:!0}),zw);function zw(e){this._config=e=void 0===e?{}:e}var Vw=function(e,t){return(Vw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function qw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Vw(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Kw=function(){return(Kw=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Hw(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function Gw(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Ww(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var $w,Yw,Jw,Zw,Xw,Qw,eS,tS,jb="3.6.1",nS="runtime.lex.{region}.amazonaws.com",rS=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),oS=new Set(["cn-north-1","cn-northwest-1"]),iS=new Set(["us-iso-east-1"]),aS=new Set(["us-isob-east-1"]),sS=new Set(["us-gov-east-1","us-gov-west-1"]),ur={apiVersion:"2016-11-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"runtime.lex.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-1":n={hostname:"runtime.lex.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-2":n={hostname:"runtime.lex.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-central-1":n={hostname:"runtime.lex.eu-central-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-2":n={hostname:"runtime.lex.eu-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:rS.has(e)&&(n={hostname:nS.replace("{region}",e),partition:"aws",signingService:"lex"}),oS.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),iS.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),aS.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=sS.has(e)?{hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:nS.replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(Kw({signingService:"lex"},n))},serviceId:"Lex Runtime Service",urlParser:ur},uS=Kw(Kw({},ur),{runtime:"node",base64Decoder:ou,base64Encoder:iu,bodyLengthChecker:au,credentialDefaultProvider:Xe,defaultUserAgentProvider:hn({serviceId:ur.serviceId,clientVersion:jb}),maxAttempts:ls(g),region:ls(mn,wn),requestHandler:new Ye,sha256:ja.bind(null,"sha256"),streamCollector:Yn,utf8Decoder:dt,utf8Encoder:wt}),cS=(qw(lS,$w=C),lS.prototype.destroy=function(){$w.prototype.destroy.call(this)},lS);function lS(e){var t=this,e=sc(rs(e=nc(ki(e=Ti(e=Kw(Kw({},uS),e))))));return(t=$w.call(this,e)||this).config=e,t.middlewareStack.use(ic(t.config)),t.middlewareStack.use(Va(t.config)),t.middlewareStack.use(gu(t.config)),t.middlewareStack.use(vu(t.config)),t.middlewareStack.use(wu(t.config)),t.middlewareStack.use(uc(t.config)),t}function pS(e){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:{attachmentLinkUrl:void 0!==e.attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?(e.buttons||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:{text:void 0!==e.text&&null!==e.text?e.text:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}}):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}})}(T_=T_||{}).filterSensitiveLog=function(e){return Kw({},e)},(WC=WC||{}).filterSensitiveLog=function(e){return Kw(Kw({},e),e.parameters&&{parameters:kc})},(YC=YC||{}).filterSensitiveLog=function(e){return Kw({},e)},(JC=JC||{}).filterSensitiveLog=function(e){return Kw({},e)},(n_=n_||{}).filterSensitiveLog=function(e){return Kw({},e)},(qS=qS||{}).filterSensitiveLog=function(e){return Kw({},e)},(eC||{}).filterSensitiveLog=function(e){return Kw({},e)},(oC=oC||{}).filterSensitiveLog=function(e){return Kw({},e)},(iC||{}).filterSensitiveLog=function(e){return Kw({},e)},(PC=PC||{}).filterSensitiveLog=function(e){return Kw({},e)},(T_={}).FAILED="Failed",T_.FULFILLED="Fulfilled",T_.READY_FOR_FULFILLMENT="ReadyForFulfillment",(WC={}).COMPOSITE="Composite",WC.CUSTOM_PAYLOAD="CustomPayload",WC.PLAIN_TEXT="PlainText",WC.SSML="SSML",(YC={}).CLOSE="Close",YC.CONFIRM_INTENT="ConfirmIntent",YC.DELEGATE="Delegate",YC.ELICIT_INTENT="ElicitIntent",YC.ELICIT_SLOT="ElicitSlot",(Yw=Yw||{}).filterSensitiveLog=function(e){return Kw(Kw(Kw({},e),e.slots&&{slots:kc}),e.message&&{message:kc})},(JC={}).CONFIRMED="Confirmed",JC.DENIED="Denied",JC.NONE="None",(Jw=Jw||{}).filterSensitiveLog=function(e){return Kw(Kw({},e),e.slots&&{slots:kc})},(ZC=ZC||{}).filterSensitiveLog=function(e){return Kw(Kw(Kw(Kw(Kw({},e),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return Jw.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:kc}),e.dialogAction&&{dialogAction:Yw.filterSensitiveLog(e.dialogAction)}),e.activeContexts&&{activeContexts:kc})},(XC=XC||{}).filterSensitiveLog=function(e){return Kw({},e)},(QC=QC||{}).filterSensitiveLog=function(e){return Kw({},e)},(e_=e_||{}).filterSensitiveLog=function(e){return Kw({},e)},(t_=t_||{}).filterSensitiveLog=function(e){return Kw({},e)},(Zw=Zw||{}).filterSensitiveLog=function(e){return Kw(Kw(Kw(Kw({},e),e.sessionAttributes&&{sessionAttributes:kc}),e.requestAttributes&&{requestAttributes:kc}),e.activeContexts&&{activeContexts:kc})},(n_={}).CONFIRM_INTENT="ConfirmIntent",n_.ELICIT_INTENT="ElicitIntent",n_.ELICIT_SLOT="ElicitSlot",n_.FAILED="Failed",n_.FULFILLED="Fulfilled",n_.READY_FOR_FULFILLMENT="ReadyForFulfillment",(Xw=Xw||{}).filterSensitiveLog=function(e){return Kw(Kw(Kw({},e),e.message&&{message:kc}),e.activeContexts&&{activeContexts:kc})},(r_=r_||{}).filterSensitiveLog=function(e){return Kw({},e)},(o_=o_||{}).filterSensitiveLog=function(e){return Kw({},e)},(Qw=Qw||{}).filterSensitiveLog=function(e){return Kw(Kw(Kw(Kw(Kw({},e),e.sessionAttributes&&{sessionAttributes:kc}),e.requestAttributes&&{requestAttributes:kc}),e.inputText&&{inputText:kc}),e.activeContexts&&{activeContexts:kc})},(i_=i_||{}).filterSensitiveLog=function(e){return Kw({},e)},(eS=eS||{}).filterSensitiveLog=function(e){return Kw(Kw({},e),e.slots&&{slots:kc})},(a_=a_||{}).filterSensitiveLog=function(e){return Kw({},e)},(s_=s_||{}).filterSensitiveLog=function(e){return Kw({},e)},(u_=u_||{}).filterSensitiveLog=function(e){return Kw({},e)},(c_=c_||{}).filterSensitiveLog=function(e){return Kw({},e)},(tS=tS||{}).filterSensitiveLog=function(e){return Kw(Kw(Kw(Kw(Kw(Kw({},e),e.alternativeIntents&&{alternativeIntents:e.alternativeIntents.map(function(e){return eS.filterSensitiveLog(e)})}),e.slots&&{slots:kc}),e.sessionAttributes&&{sessionAttributes:kc}),e.message&&{message:kc}),e.activeContexts&&{activeContexts:kc})},(O_=O_||{}).filterSensitiveLog=function(e){return Kw(Kw(Kw(Kw(Kw({},e),e.sessionAttributes&&{sessionAttributes:kc}),e.dialogAction&&{dialogAction:Yw.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return Jw.filterSensitiveLog(e)})}),e.activeContexts&&{activeContexts:kc})},(l_=l_||{}).filterSensitiveLog=function(e){return Kw(Kw(Kw({},e),e.message&&{message:kc}),e.activeContexts&&{activeContexts:kc})};function dS(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:Kw(Kw(Kw({},void 0!==e.name&&null!==e.name&&{name:e.name}),void 0!==e.parameters&&null!==e.parameters&&{parameters:(t=e.parameters,Object.entries(t).reduce(function(e,t){var n=Ww(t,2),t=n[0];return null===(n=n[1])?e:Kw(Kw({},e),((e={})[t]=n,e))},{}))}),void 0!==e.timeToLive&&null!==e.timeToLive&&{timeToLive:PS(e.timeToLive)});var t})}function fS(e,t){return Object.entries(e).reduce(function(e,t){var n=Ww(t,2),t=n[0];return null===(n=n[1])?e:Kw(Kw({},e),((e={})[t]=n,e))},{})}function hS(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:{name:void 0!==e.name&&null!==e.name?e.name:void 0,parameters:void 0!==e.parameters&&null!==e.parameters?(t=e.parameters,Object.entries(t).reduce(function(e,t){var n=Ww(t,2),t=n[0];return null===(n=n[1])?e:Kw(Kw({},e),((e={})[t]=n,e))},{})):void 0,timeToLive:void 0!==e.timeToLive&&null!==e.timeToLive?OS(e.timeToLive):void 0};var t})}function gS(e,t){return{score:void 0!==e.score&&null!==e.score?e.score:void 0}}function mS(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)}var yS,vS=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:RS(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},bS=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:RS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},wS=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:RS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},SS=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:RS(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},CS=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:RS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},_S=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:RS(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},ES=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:RS(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},AS=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:RS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},IS=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:RS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},kS=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:RS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},TS=function(r,e){return Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:RS(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},PS=function(e,t){return Kw(Kw({},void 0!==e.timeToLiveInSeconds&&null!==e.timeToLiveInSeconds&&{timeToLiveInSeconds:e.timeToLiveInSeconds}),void 0!==e.turnsToLive&&null!==e.turnsToLive&&{turnsToLive:e.turnsToLive})},OS=function(e,t){return{timeToLiveInSeconds:void 0!==e.timeToLiveInSeconds&&null!==e.timeToLiveInSeconds?e.timeToLiveInSeconds:void 0,turnsToLive:void 0!==e.turnsToLive&&null!==e.turnsToLive?e.turnsToLive:void 0}},xS=function(e,t){return{intentName:void 0!==e.intentName&&null!==e.intentName?e.intentName:void 0,nluIntentConfidence:void 0!==e.nluIntentConfidence&&null!==e.nluIntentConfidence?gS(e.nluIntentConfidence):void 0,slots:void 0!==e.slots&&null!==e.slots?NS(e.slots):void 0}},NS=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Ww(t,2),t=n[0];return null===(n=n[1])?e:Kw(Kw({},e),((e={})[t]=n,e))},{})},RS=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},MS=function(e,t){return o=r=t,((n=void 0===(n=e)?new Uint8Array:n)instanceof Uint8Array?Promise.resolve(n):o.streamCollector(n)||Promise.resolve(new Uint8Array)).then(function(e){return r.utf8Encoder(e)}).then(function(e){return e.length?JSON.parse(e):{}});var n,r,o},US=function(e,t){function n(e){return 0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,o=(r=e.headers,Object.keys(r).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},DS=(qw(LS,yS=vt),LS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostContentCommand",inputFilterSensitiveLog:Zw.filterSensitiveLog,outputFilterSensitiveLog:Xw.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},LS.prototype.serialize=function(e,t){return s=e,u=t,Hw(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return Gw(this,function(e){switch(e.label){case 0:if(t=Kw(Kw(Kw(Kw(Kw({"content-type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},mS(s.sessionAttributes)&&{"x-amz-lex-session-attributes":Is.from(Sc.fromObject(s.sessionAttributes)).toString("base64")}),mS(s.requestAttributes)&&{"x-amz-lex-request-attributes":Is.from(Sc.fromObject(s.requestAttributes)).toString("base64")}),mS(s.contentType)&&{"content-type":s.contentType}),mS(s.accept)&&{accept:s.accept}),mS(s.activeContexts)&&{"x-amz-lex-active-contexts":Is.from(Sc.fromObject(s.activeContexts)).toString("base64")}),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===s.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=s.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",yc(i)),void 0===s.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=s.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",yc(i)),void 0===s.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=s.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",yc(i)),void 0!==s.inputStream&&(r=s.inputStream),[4,u.endpoint()];case 1:return a=e.sent(),o=a.hostname,i=void 0===(i=a.protocol)?"https":i,a=a.port,[2,new Ga({protocol:i,hostname:o,port:a,method:"POST",headers:t,path:n,body:r})]}})});var s,u},LS.prototype.deserialize=function(e,t){return r=e,o=t,Hw(void 0,void 0,void 0,function(){var t,n;return Gw(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,(y=r,v=o,Hw(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g,m;return Gw(this,function(e){switch(e.label){case 0:return t=[Kw({},y)],m={},[4,MS(y.body,v)];case 1:switch(h=Kw.apply(void 0,t.concat([(m.body=e.sent(),m)])),g="UnknownError",g=US(y,h.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return r=[{}],[4,vS(h)];case 3:return n=Kw.apply(void 0,[Kw.apply(void 0,r.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 4:return o=[{}],[4,bS(h)];case 5:return n=Kw.apply(void 0,[Kw.apply(void 0,o.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 6:return i=[{}],[4,wS(h)];case 7:return n=Kw.apply(void 0,[Kw.apply(void 0,i.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 8:return a=[{}],[4,SS(h)];case 9:return n=Kw.apply(void 0,[Kw.apply(void 0,a.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 10:return s=[{}],[4,CS(h)];case 11:return n=Kw.apply(void 0,[Kw.apply(void 0,s.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 12:return u=[{}],[4,_S(h)];case 13:return n=Kw.apply(void 0,[Kw.apply(void 0,u.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 14:return c=[{}],[4,ES(h)];case 15:return n=Kw.apply(void 0,[Kw.apply(void 0,c.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 16:return l=[{}],[4,AS(h)];case 17:return n=Kw.apply(void 0,[Kw.apply(void 0,l.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 18:return p=[{}],[4,IS(h)];case 19:return n=Kw.apply(void 0,[Kw.apply(void 0,p.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 20:return d=[{}],[4,kS(h)];case 21:return n=Kw.apply(void 0,[Kw.apply(void 0,d.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 22:return f=[{}],[4,TS(h)];case 23:return n=Kw.apply(void 0,[Kw.apply(void 0,f.concat([e.sent()])),{name:g,$metadata:RS(y)}]),[3,25];case 24:h=h.body,g=h.code||h.Code||g,n=Kw(Kw({},h),{name:""+g,message:h.message||h.Message||g,$fault:"client",$metadata:RS(y)}),e.label=25;case 25:return g=n.message||n.Message||g,n.message=g,delete n.Message,[2,Promise.reject(Object.assign(new Error(g),n))]}})}))]:(t={$metadata:RS(r),activeContexts:void 0,alternativeIntents:void 0,audioStream:void 0,botVersion:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-nlu-intent-confidence"]&&(t.nluIntentConfidence=new Sc(Is.from(r.headers["x-amz-lex-nlu-intent-confidence"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-alternative-intents"]&&(t.alternativeIntents=new Sc(Is.from(r.headers["x-amz-lex-alternative-intents"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new Sc(Is.from(r.headers["x-amz-lex-slots"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new Sc(Is.from(r.headers["x-amz-lex-session-attributes"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-bot-version"]&&(t.botVersion=r.headers["x-amz-lex-bot-version"]),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-active-contexts"]&&(t.activeContexts=new Sc(Is.from(r.headers["x-amz-lex-active-contexts"],"base64").toString("ascii"))),n=r.body,t.audioStream=n,[2,Promise.resolve(t)]);var y,v})});var r,o},LS);function LS(e){var t=yS.call(this)||this;return t.input=e,t}var FS,jS=(qw(BS,FS=vt),BS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(nl(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostTextCommand",inputFilterSensitiveLog:Qw.filterSensitiveLog,outputFilterSensitiveLog:tS.filterSensitiveLog},o=t.requestHandler;return r.resolve(function(e){return o.handle(e.request,n||{})},e)},BS.prototype.serialize=function(e,t){return s=e,u=t,Hw(void 0,void 0,void 0,function(){var t,n,r,o,i,a;return Gw(this,function(e){switch(e.label){case 0:if(t={"content-type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===s.botName)throw new Error("No value provided for input HTTP label: botName.");if((i=s.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",yc(i)),void 0===s.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((i=s.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",yc(i)),void 0===s.userId)throw new Error("No value provided for input HTTP label: userId.");if((i=s.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",yc(i)),r=JSON.stringify(Kw(Kw(Kw(Kw({},void 0!==s.activeContexts&&null!==s.activeContexts&&{activeContexts:dS(s.activeContexts)}),void 0!==s.inputText&&null!==s.inputText&&{inputText:s.inputText}),void 0!==s.requestAttributes&&null!==s.requestAttributes&&{requestAttributes:fS(s.requestAttributes)}),void 0!==s.sessionAttributes&&null!==s.sessionAttributes&&{sessionAttributes:fS(s.sessionAttributes)})),[4,u.endpoint()];case 1:return a=e.sent(),o=a.hostname,i=void 0===(i=a.protocol)?"https":i,a=a.port,[2,new Ga({protocol:i,hostname:o,port:a,method:"POST",headers:t,path:n,body:r})]}})});var s,u},BS.prototype.deserialize=function(e,t){return i=e,a=t,Hw(void 0,void 0,void 0,function(){var r,o;return Gw(this,function(e){switch(e.label){case 0:return 200!==i.statusCode&&300<=i.statusCode?[2,(h=i,g=a,Hw(void 0,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d,f;return Gw(this,function(e){switch(e.label){case 0:return t=[Kw({},h)],f={},[4,MS(h.body,g)];case 1:switch(p=Kw.apply(void 0,t.concat([(f.body=e.sent(),f)])),d="UnknownError",d=US(h,p.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return r=[{}],[4,vS(p)];case 3:return n=Kw.apply(void 0,[Kw.apply(void 0,r.concat([e.sent()])),{name:d,$metadata:RS(h)}]),[3,19];case 4:return o=[{}],[4,bS(p)];case 5:return n=Kw.apply(void 0,[Kw.apply(void 0,o.concat([e.sent()])),{name:d,$metadata:RS(h)}]),[3,19];case 6:return i=[{}],[4,wS(p)];case 7:return n=Kw.apply(void 0,[Kw.apply(void 0,i.concat([e.sent()])),{name:d,$metadata:RS(h)}]),[3,19];case 8:return a=[{}],[4,SS(p)];case 9:return n=Kw.apply(void 0,[Kw.apply(void 0,a.concat([e.sent()])),{name:d,$metadata:RS(h)}]),[3,19];case 10:return s=[{}],[4,CS(p)];case 11:return n=Kw.apply(void 0,[Kw.apply(void 0,s.concat([e.sent()])),{name:d,$metadata:RS(h)}]),[3,19];case 12:return u=[{}],[4,_S(p)];case 13:return n=Kw.apply(void 0,[Kw.apply(void 0,u.concat([e.sent()])),{name:d,$metadata:RS(h)}]),[3,19];case 14:return c=[{}],[4,ES(p)];case 15:return n=Kw.apply(void 0,[Kw.apply(void 0,c.concat([e.sent()])),{name:d,$metadata:RS(h)}]),[3,19];case 16:return l=[{}],[4,IS(p)];case 17:return n=Kw.apply(void 0,[Kw.apply(void 0,l.concat([e.sent()])),{name:d,$metadata:RS(h)}]),[3,19];case 18:p=p.body,d=p.code||p.Code||d,n=Kw(Kw({},p),{name:""+d,message:p.message||p.Message||d,$fault:"client",$metadata:RS(h)}),e.label=19;case 19:return d=n.message||n.Message||d,n.message=d,delete n.Message,[2,Promise.reject(Object.assign(new Error(d),n))]}})}))]:(r={$metadata:RS(i),activeContexts:void 0,alternativeIntents:void 0,botVersion:void 0,dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,MS(i.body,a)]);case 1:return void 0!==(o=e.sent()).activeContexts&&null!==o.activeContexts&&(r.activeContexts=hS(o.activeContexts)),void 0!==o.alternativeIntents&&null!==o.alternativeIntents&&(r.alternativeIntents=(o.alternativeIntents||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:xS(e)})),void 0!==o.botVersion&&null!==o.botVersion&&(r.botVersion=o.botVersion),void 0!==o.dialogState&&null!==o.dialogState&&(r.dialogState=o.dialogState),void 0!==o.intentName&&null!==o.intentName&&(r.intentName=o.intentName),void 0!==o.message&&null!==o.message&&(r.message=o.message),void 0!==o.messageFormat&&null!==o.messageFormat&&(r.messageFormat=o.messageFormat),void 0!==o.nluIntentConfidence&&null!==o.nluIntentConfidence&&(r.nluIntentConfidence=gS(o.nluIntentConfidence)),void 0!==o.responseCard&&null!==o.responseCard&&(r.responseCard={contentType:void 0!==(n=o.responseCard).contentType&&null!==n.contentType?n.contentType:void 0,genericAttachments:void 0!==n.genericAttachments&&null!==n.genericAttachments?pS(n.genericAttachments):void 0,version:void 0!==n.version&&null!==n.version?n.version:void 0}),void 0!==o.sentimentResponse&&null!==o.sentimentResponse&&(r.sentimentResponse={sentimentLabel:void 0!==(t=o.sentimentResponse).sentimentLabel&&null!==t.sentimentLabel?t.sentimentLabel:void 0,sentimentScore:void 0!==t.sentimentScore&&null!==t.sentimentScore?t.sentimentScore:void 0}),void 0!==o.sessionAttributes&&null!==o.sessionAttributes&&(r.sessionAttributes=NS(o.sessionAttributes)),void 0!==o.sessionId&&null!==o.sessionId&&(r.sessionId=o.sessionId),void 0!==o.slotToElicit&&null!==o.slotToElicit&&(r.slotToElicit=o.slotToElicit),void 0!==o.slots&&null!==o.slots&&(r.slots=NS(o.slots)),[2,Promise.resolve(r)]}var t,n,h,g})});var i,a},BS);function BS(e){var t=FS.call(this)||this;return t.input=e,t}var zS,VS,qS=(zS=function(e,t){return(zS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zS(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),KS=function(){return(KS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},HS=new _.ConsoleLogger("AWSLexProvider"),GS=(qS(WS,VS=dv),WS.prototype.getProviderName=function(){return"AWSLexProvider"},WS.prototype.reportBotStatus=function(e,t){var n=this;HS.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},WS.prototype.sendMessage=function(h,g){return e=this,u=function(){var t,n,r,o,i,a,s,u,c,l,p,d,e;return s=this,u=function(e){switch(e.label){case 0:return this._config[h]?[4,_.Credentials.get()]:[2,Promise.reject("Bot "+h+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new cS({region:this._config[h].region,credentials:t,customUserAgent:_.getAmplifyUserAgent()}),"string"!=typeof g)return[3,6];o={botAlias:this._config[h].alias,botName:h,inputText:g,userId:t.identityId},HS.debug("postText to lex",g),e.label=2;case 2:return e.trys.push([2,4,,5]),n=new jS(o),[4,this.lexRuntimeServiceClient.send(n)];case 3:return i=e.sent(),this.reportBotStatus(i,h),[2,i];case 4:return r=e.sent(),[2,Promise.reject(r)];case 5:return[3,11];case 6:n=g.content,r=g.options.messageType,o="voice"===r?{botAlias:this._config[h].alias,botName:h,contentType:"audio/x-l16; sample-rate=16000",inputStream:n,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[h].alias,botName:h,contentType:"text/plain; charset=utf-8",inputStream:n,userId:t.identityId,accept:"audio/mpeg"},HS.debug("postContent to lex",g),e.label=7;case 7:return e.trys.push([7,10,,11]),o=new DS(o),[4,this.lexRuntimeServiceClient.send(o)];case 8:return[4,function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then(function(e){return new Uint8Array(e)});throw new Error("Readable is not supported.")}((i=e.sent()).audioStream)];case 9:return a=e.sent(),this.reportBotStatus(i,h),[2,KS(KS({},i),{audioStream:a})];case 10:return a=e.sent(),[2,Promise.reject(a)];case 11:return[2]}},d={label:0,sent:function(){if(1&p[0])throw p[1];return p[1]},trys:[],ops:[]},e={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function f(t){return function(e){return function(t){if(c)throw new TypeError("Generator is already executing.");for(;d;)try{if(c=1,l&&(p=2&t[0]?l.return:t[0]?l.throw||((p=l.return)&&p.call(l),0):l.next)&&!(p=p.call(l,t[1])).done)return p;switch(l=0,(t=p?[2&t[0],p.value]:t)[0]){case 0:case 1:p=t;break;case 4:return d.label++,{value:t[1],done:!1};case 5:d.label++,l=t[1],t=[0];continue;case 7:t=d.ops.pop(),d.trys.pop();continue;default:if(!(p=0<(p=d.trys).length&&p[p.length-1])&&(6===t[0]||2===t[0])){d=0;continue}if(3===t[0]&&(!p||t[1]>p[0]&&t[1]<p[3])){d.label=t[1];break}if(6===t[0]&&d.label<p[1]){d.label=p[1],p=t;break}if(p&&d.label<p[2]){d.label=p[2],d.ops.push(t);break}p[2]&&d.ops.pop(),d.trys.pop();continue}t=u.call(s,d)}catch(e){t=[6,e],l=0}finally{c=p=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(s=(s=a=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())});var e,a,s,u},WS.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},WS);function WS(e){return(e=VS.call(this,e=void 0===e?{}:e)||this)._botsCompleteCallback={},e}var $S=function(){return($S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},YS=new _.ConsoleLogger("Interactions");function JS(e){this._options=e,YS.debug("Interactions Options",this._options),this._pluggables={}}var ZS=(JS.prototype.getModuleName=function(){return"Interactions"},JS.prototype.configure=function(e){var t=this,e=e?e.Interactions||e:{};YS.debug("configure Interactions",{opt:e}),this._options=$S($S({bots:{}},e),e.Interactions);var e=this._options.aws_bots_config,n=this._options.bots;return!Object.keys(n).length&&e&&Array.isArray(e)&&e.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&n&&Object.keys(n).map(function(e){return n[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new GS),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},JS.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");e.configure(this._options.bots),this._pluggables[e.getProviderName()]=e}},JS.prototype.send=function(c,l){return e=this,u=function(){var t,n,r,o,i,a,s,e;return n=this,r=function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[c])throw new Error("Bot "+c+" does not exist");if(t=this._options.bots[c].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(c,l)];case 1:return[2,e.sent()]}},s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function u(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},new(s=(s=a=void 0)||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())});var e,a,s,u},JS.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},new JS(null));_.Amplify.register(ZS);var XS=function(){return(XS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},QS=new _.ConsoleLogger("AbstractXRProvider"),eC=(tC.prototype.configure=function(e){return this._config=XS(XS({},e=void 0===e?{}:e),this._config),QS.debug("configure "+this.getProviderName(),this._config),this.options},tC.prototype.getCategory=function(){return"XR"},Object.defineProperty(tC.prototype,"options",{get:function(){return XS({},this._config)},enumerable:!0,configurable:!0}),tC);function tC(e){this._config=e=void 0===e?{}:e}var nC,rC,oC=(nC=function(e,t){return(nC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}nC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),iC=(oC(aC,rC=Error),aC);function aC(){return null!==rC&&rC.apply(this,arguments)||this}var sC,uC=(oC(cC,sC=iC),cC);function cC(){return null!==sC&&sC.apply(this,arguments)||this}var lC,pC=(oC(dC,lC=iC),dC);function dC(){return null!==lC&&lC.apply(this,arguments)||this}var fC,hC=(oC(gC,fC=iC),gC);function gC(){return null!==fC&&fC.apply(this,arguments)||this}var mC,yC=(oC(vC,mC=iC),vC);function vC(){return null!==mC&&mC.apply(this,arguments)||this}var bC,wC=(oC(SC,bC=iC),SC);function SC(){return null!==bC&&bC.apply(this,arguments)||this}var CC,_C=(oC(EC,CC=iC),EC);function EC(){return null!==CC&&CC.apply(this,arguments)||this}function AC(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function IC(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var kC,TC,PC=(kC=function(e,t){return(kC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}kC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),OC=function(){return(OC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},xC=new _.ConsoleLogger("SumerianProvider"),NC=(PC(RC,TC=eC),RC.prototype.getProviderName=function(){return"SumerianProvider"},RC.prototype.loadScript=function(r){return AC(this,void 0,void 0,function(){return IC(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},RC.prototype.loadScene=function(w,S,C){return AC(this,void 0,void 0,function(){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g,m,y,v,b;return IC(this,function(e){switch(e.label){case 0:if(!w)throw u="No scene name passed into loadScene",xC.error(u),new wC(u);if(!S)throw u="No dom element id passed into loadScene",xC.error(u),new yC(u);if(!(t=document.getElementById(S)))throw u="DOM element id, "+S+" not found",xC.error(u),new yC(u);if(!(n=this.getScene(w)).sceneConfig)throw u="No scene config configured for scene: "+w,xC.error(u),new wC(u);if(r=n.sceneConfig.url,o=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))c=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw u="No region configured for scene: "+w,xC.error(u),new wC(u);c=this.options.region}i={region:c,customUserAgent:_.Constants.userAgent+"-SumerianScene"},a={headers:{"X-Amz-User-Agent":_.Constants.userAgent}},s=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,_.Credentials.get()];case 2:return u=e.sent(),u={secret_key:(i.credentials=u).secretAccessKey,access_key:u.accessKeyId,session_token:u.sessionToken},c={region:c,service:"sumerian"},c=_.Signer.sign({method:"GET",url:r},u,c),a.headers=OC(OC({},a.headers),c.headers),s=c.url,[3,4];case 3:return e.sent(),xC.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(s,a)];case 5:return[4,(p=e.sent()).json()];case 6:if(l=e.sent(),403===p.status)throw l.message?(xC.error("Failure to authenticate user: "+l.message),new wC("Failure to authenticate user: "+l.message)):(xC.error("Failure to authenticate user"),new wC("Failure to authenticate user"));return p=l.bundleData[o],[4,fetch(p.url,{headers:p.headers})];case 7:return[4,e.sent().json()];case 8:d=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(d[o].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw f=e.sent(),xC.error(f),new wC(f);case 12:return f=C.progressCallback||void 0,h=n.publishParamOverrides||void 0,h={element:t,sceneId:o,sceneBundle:d,apiResponse:l,progressCallback:f,publishParamOverrides:h,awsSDKConfigOverride:i},[4,window.SumerianBootstrapper.loadScene(h)];case 13:h=e.sent(),n.sceneController=h,n.isLoaded=!0;try{for(g=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(h.sceneLoadWarnings),m=g.next();!m.done;m=g.next())y=m.value,xC.warn("loadScene warning: "+y)}catch(e){v={error:e}}finally{try{m&&!m.done&&(b=g.return)&&b.call(g)}finally{if(v)throw v.error}}return[2]}})})},RC.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},RC.prototype.getScene=function(e){var t;if(!this.options.scenes)throw xC.error(t="No scenes were defined in the configuration"),new uC(t);if(!e)throw xC.error(t="No scene name was passed"),new pC(t);if(this.options.scenes[e])return this.options.scenes[e];throw xC.error(t="Scene '"+e+"' is not configured"),new pC(t)},RC.prototype.getSceneController=function(e){if(!this.options.scenes)throw xC.error(t="No scenes were defined in the configuration"),new uC(t);var t,n=this.options.scenes[e];if(!n)throw xC.error(t="Scene '"+e+"' is not configured"),new pC(t);if(n=n.sceneController)return n;throw xC.error(t="Scene controller for '"+e+"' has not been loaded"),new hC(t)},RC.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},RC.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},RC.prototype.start=function(e){this.getSceneController(e).start()},RC.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},RC.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},RC.prototype.isMuted=function(e){return this.getSceneController(e).muted},RC.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},RC.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},RC.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},RC);function RC(e){return TC.call(this,e=void 0===e?{}:e)||this}function MC(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function UC(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var DC=new _.ConsoleLogger("XR");function LC(e){this._options=e,DC.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new NC)}var FC=(LC.prototype.configure=function(e){var n=this,r=e?e.XR||e:{};return DC.debug("configure XR",{opt:r}),this._options=Object.assign({},this._options,r),Object.entries(this._pluggables).map(function(e){var e=(t=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e,2))[0],t=t[1];e!==n._defaultProvider||r[n._defaultProvider]?t.configure(n._options[e]):t.configure(n._options)}),this._options},LC.prototype.addPluggable=function(t){return MC(this,void 0,void 0,function(){return UC(this,function(e){return t&&"XR"===t.getCategory()?[2,(this._pluggables[t.getProviderName()]=t).configure(this._options)]:[2]})})},LC.prototype.loadScene=function(t,n,r,o){return void 0===r&&(r={}),void 0===o&&(o=this._defaultProvider),MC(this,void 0,void 0,function(){return UC(this,function(e){switch(e.label){case 0:if(!this._pluggables[o])throw new _C("Provider '"+o+"' not configured");return[4,this._pluggables[o].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},LC.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _C("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},LC.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _C("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},LC.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _C("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},LC.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _C("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},LC.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _C("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},LC.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _C("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},LC.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _C("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},LC.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _C("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},LC.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new _C("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},LC.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new _C("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},LC.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new _C("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},new LC(null));_.Amplify.register(FC);var jC=(BC.prototype.auth=function(){return this._auth||rh},BC.prototype.analytics=function(){return this._analytics||Pp},BC.prototype.storage=function(){return this._storage||nv},BC.prototype.api=function(){return this._api||Fw},BC.prototype.interactions=function(){return this._interactions||ZS},BC.prototype.cache=function(){return this._cache},BC.prototype.pubsub=function(){return this._pubsub||kw},BC.prototype.logger=function(e,t){return new this._logger(e,t)},BC.prototype.xr=function(){return this._xr||FC},BC.prototype.i18n=function(){return this._i18n},BC.prototype.authState=function(){return this._authState},BC.prototype.setAuthState=function(e){this._authState.next(e)},BC.decorators=[{type:f.Injectable}],BC.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:["modules"]},{type:f.Optional}]}]},BC);function BC(e){var t,n,r,o,i,a,s,u,c,l,p,d,f,h,g,m,y;this.modules=e=void 0===e?{}:e,this._authState=new Pe,this.authStateChange$=this._authState.asObservable(),e=e||D,t=this._authState,n=e.Auth,y=t,n.currentAuthenticatedUser().then(function(e){wi.debug("has authenticated user",e),y.next({state:"signedIn",user:e})}).catch(function(e){wi.debug("no authenticated user",e),y.next({state:"signedOut",user:null})}),r=t,o=_.Amplify.configure(null),v.has(o,"Auth.oauth")&&_.Hub.listen("auth",{onHubCapsule:function(e){var t=e.channel,e=e.payload;"auth"===t&&(t=e.data.username,wi.debug("authentication oauth event",e),r.next({state:e.event,user:{username:t}}))}},"angularAuthListener"),i=t,s=(a=n).signIn,a.signIn=function(e,t){return s.call(a,e,t).then(function(e){return wi.debug("signIn success"),e.challengeName?(wi.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?i.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?i.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?i.next({state:"confirmSignIn",user:e}):wi.debug("warning: unhandled challengeName "+e.challengeName)):i.next({state:"signedIn",user:e}),e}).catch(function(e){throw wi.debug("signIn error",e),e})},u=t,l=(c=n).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return wi.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw wi.debug("signOut error",e),e})},p=t,f=(d=n).signUp,d.signUp=function(t,e,n,r){return f.call(d,t,e,n,r).then(function(e){return wi.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw wi.debug("signUp error",e),e})},h=t,m=(g=n).confirmSignUp,g.confirmSignUp=function(t,e){return m.call(g,t,e).then(function(e){return wi.debug("confirmSignUp success"),h.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw wi.debug("confirmSignUp error",e),e})},this._auth=e.Auth,this._analytics=e.Analytics,this._storage=e.Storage,this._api=e.API,this._cache=e.Cache,this._pubsub=e.PubSub,this._interactions=e.Interactions,this._xr=e.XR,this._i18n=_.I18n,this._logger=_.Logger}var zC=(VC.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(VC.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(VC.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(VC.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),VC.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},VC.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},VC.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],VC.ctorParameters=function(){return[{type:jC}]},VC.propDecorators={hide:[{type:f.Input}],data:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},VC);function VC(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var qC,KC,HC=((T_=(qC=function(e,t){return(qC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}qC(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(GC,KC=zC),GC.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],GC.ctorParameters=function(){return[{type:jC}]},GC);function GC(e){var t=KC.call(this,e)||this;return t.amplifyService=e,t}var WC=($C.prototype.ngOnInit=function(){this.loadComponent()},$C.prototype.ngOnDestroy=function(){},$C.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(HC,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new bi(zC,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},$C.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],$C.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},$C.propDecorators={framework:[{type:f.Input}],hide:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[fn]}]},$C);function $C(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}var YC="sumerian-scene-container",JC="sumerian-scene",ZC="sumerian-scene-loading",XC="sumerian-scene-loading-logo",QC="sumerian-scene-loading-scene-name",e_="sumerian-scene-loading-bar",t_="sumerian-scene-error-text",n_="sumerian-scene-bar",r_="sumerian-scene-actions",o_={section:"sign-in-section",headerSection:"sign-in-header-section",bodySection:"sign-in-body-section",footerSection:"sign-in-footer-section",usernameInput:"username-input",passwordInput:"sign-in-password-input",forgotPasswordLink:"sign-in-forgot-password-link",signInButton:"sign-in-sign-in-button",createAccountLink:"sign-in-create-account-link",signInError:"authenticator-error"},i_={section:"sign-up-section",headerSection:"sign-up-header-section",bodySection:"sign-up-body-section",nonPhoneNumberInput:"sign-up-non-phone-number-input",phoneNumberInput:"sign-up-phone-number-input",dialCodeSelect:"sign-up-dial-code-select",footerSection:"sign-up-footer-section",createAccountButton:"sign-up-create-account-button",signInLink:"sign-up-sign-in-link",signUpButton:"sign-up-sign-up-button",signInButton:"sign-up-sign-in-button",confirmButton:"sign-up-confirm-button"},a_={section:"require-new-password-section",headerSection:"require-new-password-header-section",footerSection:"require-new-password-footer-section",bodySection:"require-new-password-body-section",newPasswordInput:"require-new-password-new-password-input",backToSignInLink:"require-new-password-back-to-sign-in-link",submitButton:"require-new-password-submit-button"},s_={usernameInput:"username-input",emailInput:"email-input",phoneNumberInput:"phone-number-input",dialCodeSelect:"dial-code-select"},u_={signOutButton:"sign-out-button",signOutLink:"greeting-sign-out-link",navRight:"greetings-nav-right"},c_={section:"confirm-sign-up-section",headerSection:"confirm-sign-up-header-section",bodySection:"confirm-sign-up-body-section",usernameInput:"confirm-sign-up-username-input",confirmationCodeInput:"confirm-sign-up-confirmation-code-input",resendCodeLink:"confirm-sign-up-resend-code-link",confirmButton:"confirm-sign-up-confirm-button",backToSignInLink:"confirm-sign-up-back-to-sign-in-link"},l_={section:"forgot-password-section",headerSection:"forgot-password-header-section",bodySection:"forgot-password-body-section",submitButton:"forgot-password-submit-button",sendCodeButton:"forgot-password-send-code-button",resendCodeLink:"forgot-password-resend-code-link",backToSignInLink:"forgot-password-back-to-sign-in-link",usernameInput:"username-input",codeInput:"forgot-password-code-input",newPasswordInput:"forgot-password-new-password-input"},vt='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+(O_={section:"confirm-sign-in-section",headerSection:"confirm-sign-in-header-section",bodySection:"confirm-sign-in-body-section",codeInput:"confirm-sign-in-code-input",confirmButton:"confirm-sign-in-confirm-button",backToSignInLink:"confirm-sign-in-back-to-sign-in-link"}).section+'">\n    <div class="amplify-form-body" data-test="'+O_.bodySection+'">\n    <div class="amplify-form-header" data-test="'+O_.headerSection+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+O_.codeInput+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+O_.backToSignInLink+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+O_.confirmButton+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',p_=(Object.defineProperty(d_.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(d_.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),d_.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},d_.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},d_.prototype.setCode=function(e){this.code=e},d_.prototype.onConfirm=function(){var t=this,e=this._authState.user,n="SOFTWARE_TOKEN_MFA"===(n=e.challengeName)?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},d_.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},d_.prototype.onAlertClose=function(){this._setError(null)},d_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},d_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:vt}]}],d_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},d_.propDecorators={data:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}]},d_);function d_(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var f_,h_,qS=(f_=function(e,t){return(f_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}f_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dv='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+O_.section+'">\n  <div class="amplify-form-body" data-test="'+O_.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+O_.headerSection+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+O_.codeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+O_.confirmButton+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',g_=(qS(m_,h_=p_),m_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:dv}]}],m_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},m_);function m_(e){var t=h_.call(this,e)||this;return t.amplifyService=e,t}function y_(e){this.componentFactoryResolver=e,this.hide=[]}function v_(e,t){return 0<e.filter(function(e){return e===t}).length}function b_(e,t){return"+"+e+t.replace(/[-()]/g,"")}y_.prototype.ngOnInit=function(){this.loadComponent()},y_.prototype.ngOnDestroy=function(){},y_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(g_,{authState:this.authState,hide:this.hide}):new bi(p_,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},y_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],y_.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},y_.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[fn]}]},oC=y_;var w_={email:"Email",phone_number:"Phone Number",username:"Username"},iC='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+c_.section+'">\n  <div class="amplify-form-body" data-test="'+c_.bodySection+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+c_.headerSection+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+c_.usernameInput+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+c_.confirmationCodeInput+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+c_.resendCodeLink+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+c_.backToSignInLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+c_.confirmButton+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',S_=(Object.defineProperty(C_.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(C_.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(C_.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),C_.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},C_.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},C_.prototype.setUsername=function(e){this.username=e},C_.prototype.setCode=function(e){this.code=e},C_.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},C_.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},C_.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},C_.prototype.onAlertClose=function(){this._setError(null)},C_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},C_.prototype.getUsernameLabel=function(){return w_[this._usernameAttributes]||this._usernameAttributes},C_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:iC}]}],C_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},C_.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},C_);function C_(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var __,E_,PC=(__=function(e,t){return(__=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}__(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eC='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+c_.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+c_.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+c_.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+c_.usernameInput+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+c_.confirmationCodeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+c_.confirmButton+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+c_.backToSignInLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+c_.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',A_=(PC(I_,E_=S_),I_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:eC}]}],I_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},I_);function I_(e){var t=E_.call(this,e)||this;return t.amplifyService=e,t}var k_,T_=(P_.prototype.ngOnInit=function(){this.loadComponent()},P_.prototype.ngOnDestroy=function(){},P_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(A_,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new bi(S_,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},P_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],P_.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},P_.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[fn]}]},P_);function P_(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(vt=k_=k_||{}).EMAIL="email",vt.PHONE_NUMBER="phone_number",vt.USERNAME="username";var O_='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+o_.section+'">\n    <div class="amplify-form-body" data-test="'+o_.bodySection+'">\n      <div class="amplify-form-header" data-test="'+o_.headerSection+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+o_.passwordInput+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+o_.forgotPasswordLink+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+o_.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+o_.createAccountLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+o_.signInError+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',x_=(Object.defineProperty(N_.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=v_(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(N_.prototype,"authState",{set:function(e){this._authState=e,this._show=v_(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=(e.user&&e.user.country_code?e.user:this).country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(N_.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),N_.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},N_.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},N_.prototype.setUsername=function(e){this.username=e},N_.prototype.setPassword=function(e){this.password=e},N_.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},N_.prototype.onAlertClose=function(){this._setError(null)},N_.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},N_.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},N_.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},N_.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},N_.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},N_.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case k_.EMAIL:return this.email;case k_.PHONE_NUMBER:return b_(this.country_code,this.local_phone_number);default:return this.username}},N_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-core",template:O_}]}],N_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},N_.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},N_);function N_(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var R_,M_,qS=(R_=function(e,t){return(R_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}R_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dv='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+o_.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+o_.bodySection+'">\n    <div class="amplify-form-header" data-test="'+o_.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+o_.passwordInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+o_.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+o_.createAccountLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+o_.forgotPasswordLink+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',U_=(qS(D_,M_=x_),D_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:dv}]}],D_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},D_);function D_(e){var t=M_.call(this,e)||this;return t.amplifyService=e,t}function L_(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}L_.prototype.ngOnInit=function(){this.loadComponent()},L_.prototype.ngOnDestroy=function(){},L_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new bi(U_,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new bi(x_,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},L_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],L_.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},L_.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[fn]}]},iC=L_;var F_=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],j_=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],B_=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],c_='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+i_.section+'">\n    <div class="amplify-form-body" data-test="'+i_.bodySection+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+i_.headerSection+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+i_.nonPhoneNumberInput+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+i_.signInLink+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+i_.createAccountButton+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',z_=(Object.defineProperty(V_.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===k_.EMAIL?(this.signUpFields=j_,this.defaultSignUpFields=j_):this._usernameAttributes===k_.PHONE_NUMBER&&(this.signUpFields=B_,this.defaultSignUpFields=B_),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty(V_.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===k_.EMAIL?(this.signUpFields=j_,this.defaultSignUpFields=j_):this._usernameAttributes===k_.PHONE_NUMBER&&(this.signUpFields=B_,this.defaultSignUpFields=B_)},enumerable:!0,configurable:!0}),Object.defineProperty(V_.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(V_.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),V_.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},V_.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},V_.prototype.onSignUp=function(){var n=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=b_(this.country_code,this.local_phone_number));var r=(e=Object.keys(this.user)).map(function(e){return n.user[e]});e.forEach(function(e,t){"username"!==e&&"password"!==e&&"attributes"!==e&&(e=(n.needPrefix(e)?"custom:":"")+e,n.user.attributes[e]=r[t])});var t=!1;if(this.signUpFields.forEach(function(e){e.label===n.getUsernameLabel()&&(n.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),n.user.username=n.user.attributes[e.key]||n.user.username,t=!0)}),!t&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=n.user.username;n.user={},n.onAlertClose(),n.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return n._setError(e)})},V_.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},V_.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},V_.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},V_.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},V_.prototype.onAlertClose=function(){this._setError(null)},V_.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},V_.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},V_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},V_.prototype.getUsernameLabel=function(){return w_[this._usernameAttributes]||this._usernameAttributes},V_.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},V_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-core",template:c_}]}],V_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},V_.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],usernameAttributes:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}]},V_);function V_(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.local_phone_number="",this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=F_,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var q_,K_,PC=(q_=function(e,t){return(q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}q_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eC='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+i_.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+i_.bodySection+'">\n    <div class="amplify-form-header" data-test="'+i_.headerSection+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+i_.nonPhoneNumberInput+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+i_.createAccountButton+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+i_.signInButton+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+i_.confirmButton+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',H_=(PC(G_,K_=z_),G_.prototype.setProp=function(e){return this.user[e.name]=e.value},G_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:eC}]}],G_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},G_);function G_(e){var t=K_.call(this,e)||this;return t.amplifyService=e,t}function W_(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}W_.prototype.ngOnInit=function(){this.loadComponent()},W_.prototype.ngOnDestroy=function(){},W_.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(H_,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new bi(z_,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},W_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],W_.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},W_.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[fn]}]},vt=W_;var O_='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+a_.section+'">\n  <div class="amplify-form-body" data-test="'+a_.bodySection+'">\n  <div class="amplify-form-header" data-test="'+a_.headerSection+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+a_.newPasswordInput+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+a_.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+a_.submitButton+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',$_=(Object.defineProperty(Y_.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(Y_.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide||this.hide},enumerable:!0,configurable:!0}),Y_.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Y_.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Y_.prototype.setPassword=function(e){this.password=e},Y_.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},Y_.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},Y_.prototype.onAlertClose=function(){this._setError(null)},Y_.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},Y_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-core",template:O_}]}],Y_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},Y_.propDecorators={authState:[{type:f.Input}],hide:[{type:f.Input}],data:[{type:f.Input}]},Y_);function Y_(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var J_,Z_,o_=(J_=function(e,t){return(J_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}J_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),qS='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+a_.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+a_.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+a_.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+a_.newPasswordInput+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+a_.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+a_.submitButton+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',X_=(o_(Q_,Z_=$_),Q_.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:qS}]}],Q_.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},Q_);function Q_(e){var t=Z_.call(this,e)||this;return t.amplifyService=e,t}function eE(e){this.componentFactoryResolver=e,this.hide=[]}eE.prototype.ngOnInit=function(){this.loadComponent()},eE.prototype.ngOnDestroy=function(){},eE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(X_,{authState:this.authState,hide:this.hide}):new bi($_,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},eE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],eE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},eE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[fn]}]},dv=eE;var c_='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+u_.signOutButton+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",tE=(Object.defineProperty(nE.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),nE.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},nE.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},nE.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===k_.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===k_.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},nE.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},nE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-core",template:c_}]}],nE.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},nE.propDecorators={authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},nE);function nE(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var rE,oE,i_=(rE=function(e,t){return(rE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}rE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),PC='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+u_.signOutButton+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",iE=(i_(aE,oE=tE),aE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-ionic",template:PC}]}],aE.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},aE);function aE(e){var t=oE.call(this,e)||this;return t.amplifyService=e,t}function sE(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}sE.prototype.ngOnInit=function(){this.loadComponent()},sE.prototype.ngOnDestroy=function(){},sE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(iE,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new bi(tE,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},sE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],sE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},sE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[fn]}]},eC=sE;var O_='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+l_.section+'">\n    <div class="amplify-form-body" data-test="'+l_.bodySection+'">\n    <div class="amplify-form-header" data-test="'+l_.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+l_.codeInput+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+l_.newPasswordInput+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+l_.sendCodeButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+l_.submitButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+l_.resendCodeLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+l_.backToSignInLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',uE=(Object.defineProperty(cE.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide||this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),cE.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(cE.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),cE.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(cE.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),cE.prototype.setCode=function(e){this.code=e},cE.prototype.setPassword=function(e){this.password=e},cE.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case k_.EMAIL:return this.email;case k_.PHONE_NUMBER:return b_(this.country_code,this.local_phone_number);default:return this.username}},cE.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},cE.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},cE.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},cE.prototype.onAlertClose=function(){this._setError(null)},cE.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},cE.prototype.getUsernameLabel=function(){return w_[this._usernameAttributes]||this._usernameAttributes},cE.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},cE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-core",template:O_}]}],cE.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},cE.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},cE);function cE(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var lE,pE,a_=(lE=function(e,t){return(lE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}lE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o_='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+l_.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+l_.bodySection+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+l_.headerSection+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+l_.codeInput+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+l_.newPasswordInput+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+l_.submitButton+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+l_.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',dE=(a_(fE,pE=uE),fE.prototype.onCodeChange=function(e){this.country_code=e},fE.prototype.onNumberChange=function(e){this.local_phone_number=e},fE.prototype.setUsername=function(e){this.username=e},fE.prototype.setEmail=function(e){this.email=e},fE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:o_}]}],fE.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},fE);function fE(e){var t=pE.call(this,e)||this;return t.amplifyService=e,t}function hE(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}hE.prototype.ngOnInit=function(){this.loadComponent()},hE.prototype.ngOnDestroy=function(){},hE.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(dE,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new bi(uE,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},hE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],hE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},hE.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[fn]}]},qS=hE;var gE=function(){return(gE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c_='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+s_.emailInput+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+s_.usernameInput+'"\n        />\n    </div>\n</div>\n',u_=(Object.defineProperty(mE.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(mE.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(mE.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),mE.prototype.ngOnInit=function(){var e;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(e=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(e),this.username=e)},mE.prototype.ngOnDestroy=function(){},mE.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},mE.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},mE.prototype.getUsernameLabel=function(){return w_[this._usernameAttributes]||this._usernameAttributes},mE.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},mE.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(gE({},e))},mE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-core",template:c_}]}],mE.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},mE.propDecorators={data:[{type:f.Input}],usernameAttributes:[{type:f.Input}],placeholder:[{type:f.Input}],usernameFieldChanged:[{type:f.Output}]},mE);function mE(e){this.amplifyService=e,this._usernameAttributes=k_.USERNAME,this._placeholder="",this.usernameFieldChanged=new f.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var yE=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],i_='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+s_.dialCodeSelect+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+s_.phoneNumberInput+'"\n            />\n        </div>\n    </div>\n</div>\n',PC=(Object.defineProperty(vE.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(vE.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(vE.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(vE.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(vE.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),vE.prototype.ngOnInit=function(){},vE.prototype.ngOnDestroy=function(){},vE.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},vE.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},vE.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},vE.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-core",template:i_}]}],vE.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},vE.propDecorators={data:[{type:f.Input}],placeholder:[{type:f.Input}],label:[{type:f.Input}],required:[{type:f.Input}],defaultCountryCode:[{type:f.Input}],phoneFieldChanged:[{type:f.Output}]},vE);function vE(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new f.EventEmitter,this._countries=yE}var bE=(wE.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},wE.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty(wE.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(wE.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(wE.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),wE.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},wE.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],wE.ctorParameters=function(){return[{type:jC}]},wE.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},wE);function wE(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var SE,CE,_E=((O_=(SE=function(e,t){return(SE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}SE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(EE,CE=bE),EE.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],EE.ctorParameters=function(){return[{type:jC}]},EE);function EE(e){var t=CE.call(this,e)||this;return t.amplifyService=e,t}function AE(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}AE.prototype.ngOnInit=function(){this.loadComponent()},AE.prototype.ngOnDestroy=function(){},AE.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(_E,{path:this.path,options:this.options}):new bi(bE,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},AE.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],AE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},AE.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[fn]}]},l_=AE;var IE=(Object.defineProperty(kE.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(kE.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(kE.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),kE.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},kE.prototype.onImageClicked=function(){this.selected.emit(this.url)},kE.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},kE.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],kE.ctorParameters=function(){return[{type:jC}]},kE.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},kE);function kE(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var TE,PE,OE=((a_=(TE=function(e,t){return(TE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}TE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(xE,PE=IE),xE.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],xE.ctorParameters=function(){return[{type:jC}]},xE);function xE(e){var t=PE.call(this,e)||this;return t.amplifyService=e,t}function NE(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}NE.prototype.ngOnInit=function(){this.loadComponent()},NE.prototype.ngOnDestroy=function(){},NE.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(OE,{path:this.path,options:this.options}):new bi(IE,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},NE.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],NE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},NE.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[fn]}]},o_=NE;var RE=(Object.defineProperty(ME.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(ME.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(ME.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(ME.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),ME.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},ME.prototype.pick=function(e){var t,n=e.target.files[0];n&&(this._storageOptions.contentType||(this._storageOptions.contentType=n.type),n.name,n.size,n.type,this.picked.emit(n),this.s3ImagePath=this.s3ImagePath+"/"+n.name,this.s3ImageFile=n,t=this,(e=new FileReader).onload=function(e){e=e.target.result,t.photoUrl=e,t.hasPhoto=!0,t.loaded.emit(e)},e.readAsDataURL(n))},ME.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},ME.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},ME.prototype.onPhotoError=function(){this.hasPhoto=!1},ME.prototype.onAlertClose=function(){this._setError(null)},ME.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},ME.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],ME.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},ME.propDecorators={url:[{type:f.Input}],storageOptions:[{type:f.Input}],path:[{type:f.Input}],data:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}]},ME);function ME(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var UE,DE,LE=((c_=(UE=function(e,t){return(UE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}UE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(FE,DE=RE),FE.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],FE.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},FE);function FE(e){var t=DE.call(this,e)||this;return t.amplifyService=e,t}function jE(e){this.componentFactoryResolver=e,this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter}jE.prototype.ngOnInit=function(){this.loadComponent()},jE.prototype.ngOnDestroy=function(){},jE.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(LE,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new bi(RE,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear(),(n=r.createComponent(n)).instance.data=e.data,n.instance.picked.subscribe(function(e){t.picked.emit(e)}),n.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),n.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},jE.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],jE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},jE.propDecorators={framework:[{type:f.Input}],url:[{type:f.Input}],path:[{type:f.Input}],storageOptions:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[fn]}]},i_=jE;function BE(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function zE(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}require("./aws-lex-audio.js");var VE={INITIAL:{MESSAGE:"Type your message or click  🎤",ICON:"🎤"},LISTENING:{MESSAGE:"Listening... click 🔴 again to cancel",ICON:"🔴"},SENDING:{MESSAGE:"Please wait...",ICON:"🔊"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},qE={silenceDetectionConfig:{time:2e3,amplitude:.2}},KE=(Object.defineProperty(HE.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=!M.isUndefined(e.conversationModeOn)&&e.conversationModeOn,this.voiceEnabled=!M.isUndefined(e.voiceEnabled)&&e.voiceEnabled,this.textEnabled=!!M.isUndefined(e.textEnabled)||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",VE.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",VE.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(HE.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(HE.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(HE.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),HE.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},HE.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},HE.prototype.onInputChange=function(e){this.inputText=e},HE.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},HE.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=VE.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=VE.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},HE.prototype.onError=function(e){this.logger.error(e)},HE.prototype.lexResponseHandler=function(){return BE(this,void 0,void 0,function(){var t;return zE(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return t=e.sent(),this.lexResponse=t,this.currentVoiceState=VE.SPEAKING.MESSAGE,this.micText=VE.SPEAKING.ICON,this.micButtonDisabled=!0,t={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",t.bot=this.lexResponse.message,t.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(t),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},HE.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=VE.LISTENING.MESSAGE,e.micText=VE.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=VE.INITIAL.MESSAGE,e.micText=VE.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=VE.INITIAL.MESSAGE,this.micText=VE.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},HE.prototype.micButtonHandler=function(){return BE(this,void 0,void 0,function(){return zE(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=VE.LISTENING.MESSAGE,this.micText=VE.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},HE.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],HE.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},HE.propDecorators={complete:[{type:f.Output}],data:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearOnComplete:[{type:f.Input}]},HE);function HE(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=VE.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=VE.INITIAL.ICON,this.voiceConfig=qE,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new f.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=VE.SENDING.MESSAGE,n.audioInput=e,n.micText=VE.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var GE,WE,$E=((O_=(GE=function(e,t){return(GE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}GE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(YE,WE=KE),YE.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],YE.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},YE);function YE(e,t){return(e=WE.call(this,e,t)||this).amplifyService=t,e}function JE(e){this.componentFactoryResolver=e,this.complete=new f.EventEmitter}function ZE(){}JE.prototype.ngOnInit=function(){this.loadComponent()},JE.prototype.ngOnDestroy=function(){},JE.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new bi($E,e):new bi(KE,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component);(e=this.componentHost.viewContainerRef).clear(),(r=e.createComponent(r)).instance.data=n.data,r.instance.complete.subscribe(function(e){t.complete.emit(e)})},JE.decorators=[{type:f.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],JE.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},JE.propDecorators={framework:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearComplete:[{type:f.Input}],conversationModeOn:[{type:f.Input}],voiceConfig:[{type:f.Input}],voiceEnabled:[{type:f.Input}],textEnabled:[{type:f.Input}],complete:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[fn]}]},a_=JE,Object.defineProperty(ZE.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),ZE.decorators=[{type:f.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],ZE.propDecorators={title:[{type:f.Input}]},c_=ZE;function XE(e,a,s,u){return new(s=s||Promise)(function(n,t){function r(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,o)}i((u=u.apply(e,a||[])).next())})}function QE(n,r){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var O_='\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="'+YC+'">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="'+JC+'">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="'+ZC+'"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+n_+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+r_+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',eA=(Object.defineProperty(tA.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),tA.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},tA.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},tA.prototype.loadAndStartScene=function(){return XE(this,void 0,void 0,function(){var t,n=this;return QE(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,t),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return n.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return n.showEnableAudio=!0}),[2]}})})},tA.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},tA.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},tA.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},tA.prototype.maximize=function(){return XE(this,void 0,void 0,function(){var t;return QE(this,function(e){return((t=document.getElementById("sumerian-scene-container")).requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},tA.prototype.minimize=function(){return XE(this,void 0,void 0,function(){var t;return QE(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},tA.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-core",template:O_}]}],tA.ctorParameters=function(){return[{type:jC}]},tA.propDecorators={sceneName:[{type:f.Input}],data:[{type:f.Input}]},tA);function tA(e){var t=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){t.loadPercentage=100*e},this.amplifyUI=U,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var nA,rA,n_='\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="'+YC+'">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="'+JC+'">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="'+ZC+'"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+n_+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+r_+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',oA=((O_=(nA=function(e,t){return(nA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}nA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(iA,rA=eA),iA.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-ionic",template:n_}]}],iA.ctorParameters=function(){return[{type:jC}]},iA);function iA(e){var t=rA.call(this,e)||this;return t.amplifyService=e,t}function aA(e){this.componentFactoryResolver=e}function sA(){this.AmplifyUI=U}function uA(){}aA.prototype.ngOnInit=function(){this.loadComponent()},aA.prototype.ngOnDestroy=function(){},aA.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new bi(oA,{sceneName:this.sceneName}):new bi(eA,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},aA.decorators=[{type:f.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],aA.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},aA.propDecorators={framework:[{type:f.Input}],sceneName:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[fn]}]},r_=aA,sA.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-core",template:'\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+XC+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+QC+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+t_+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+e_+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n"}]}],sA.ctorParameters=function(){return[]},sA.propDecorators={loadPercentage:[{type:f.Input}],sceneName:[{type:f.Input}],sceneError:[{type:f.Input}]},n_=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},r_=[WC,zC,oC,p_,T_,S_,iC,x_,vt,z_,dv,$_,eC,tE,qS,uE,u_,PC,l_,bE,o_,IE,i_,RE,a_,KE,c_,r_,eA,O_=sA],uA.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,p],declarations:n_([fn],r_),entryComponents:n_(r_),providers:[],exports:n_(r_)}]}],fn=uA;var cA,lA,n_=(cA=function(e,t){return(cA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}cA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r_='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+s_.dialCodeSelect+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+s_.phoneNumberInput+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',PC=(n_(pA,lA=PC),pA.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:r_}]}],pA.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},pA);function pA(e){var t=lA.call(this,e)||this;return t.amplifyService=e,t}var dA,fA,r_=(dA=function(e,t){return(dA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}dA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s_='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+s_.emailInput+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+s_.usernameInput+'"\n        ></ion-input>\n    </ion-item>\n\n',u_=(r_(hA,fA=u_),hA.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-ionic",template:s_}]}],hA.ctorParameters=function(){return[{type:jC,decorators:[{type:f.Inject,args:[jC]}]}]},hA);function hA(e){var t=fA.call(this,e)||this;return t.amplifyService=e,t}var gA,mA,e_='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+XC+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+QC+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+t_+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+e_+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",O_=((s_=(gA=function(e,t){return(gA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}gA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}))(yA,mA=O_),yA.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-ionic",template:e_}]}],yA.ctorParameters=function(){return[]},yA);function yA(){return mA.call(this)||this}function vA(){}e_=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},O_=[HC,g_,A_,dE,iE,U_,H_,u_,PC,X_,LE,_E,OE,$E,oA,O_],vA.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,p],declarations:e_(O_),entryComponents:e_(O_),providers:[jC],schemas:[f.CUSTOM_ELEMENTS_SCHEMA],exports:e_(O_)}]}],O_=vA,e.AmplifyAngularModule=fn,e.AmplifyIonicModule=O_,e.AmplifyModules=function(e){return new jC(e)},e.AmplifyService=jC,Object.defineProperty(e,"__esModule",{value:!0})});