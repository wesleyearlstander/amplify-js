!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@aws-amplify/core"),require("lodash"),require("url"),require("buffer"),require("http"),require("fs"),require("os"),require("path"),require("child_process"),require("crypto"),require("uuid"),require("https"),require("stream"),require("http2"),require("process"),require("@aws-crypto/crc32"),require("lodash/isEmpty"),require("lodash/isEqual"),require("lodash/get"),require("crypto-js/core"),require("crypto-js/lib-typedarrays"),require("crypto-js/sha256"),require("crypto-js/hmac-sha256"),require("crypto-js/enc-base64"),require("isomorphic-unfetch"),require("js-cookie"),require("fast-xml-parser"),require("axios"),require("events"),require("zen-observable"),require("paho-mqtt"),require("util"),require("@aws-amplify/ui")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@aws-amplify/core","lodash","url","buffer","http","fs","os","path","child_process","crypto","uuid","https","stream","http2","process","@aws-crypto/crc32","lodash/isEmpty","lodash/isEqual","lodash/get","crypto-js/core","crypto-js/lib-typedarrays","crypto-js/sha256","crypto-js/hmac-sha256","crypto-js/enc-base64","isomorphic-unfetch","js-cookie","fast-xml-parser","axios","events","zen-observable","paho-mqtt","util","@aws-amplify/ui"],t):t((e=e||self)["aws-amplify-angular"]={},e.ng.core,e.ng.common,e.Amplify,e._,e.url,e.buffer,e.http,e.fs,e.os,e.path,e.child_process,e.crypto$1,e.uuid,e.https,e.stream,e.http2,e.process$1,e.crc32,e.isEmpty,e.isEqual,e.get,e.CryptoJS,e.libTypedarrays,e.SHA256,e.HmacSHA256,e.Base64,0,e.Cookies,e.fastXmlParser,e.axios,e.events,e.zenObservable,e.Paho,e.util,e.AmplifyUI)}(this,function(e,f,t,_,m,h,d,v,a,o,i,s,n,g,y,u,r,c,l,p,b,S,w,C,E,A,I,k,T,P,O,x,L,N,R,M){"use strict";var U="default"in _?_.default:_;p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b,S=S&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S,w=w&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w,C=C&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C,E=E&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E,A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A,I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,L=L&&Object.prototype.hasOwnProperty.call(L,"default")?L.default:L;var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function F(e,t){function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var j=function(){return(j=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function B(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function z(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;0<=a;a--)(i=e[a])&&(s=(o<3?i(s):3<o?i(t,n,s):i(t,n))||s);return 3<o&&s&&Object.defineProperty(t,n,s),s}function V(n,r){return function(e,t){r(e,t,n)}}function q(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function K(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function H(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function G(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function $(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}function Y(e){return this instanceof Y?(this.v=e,this):new Y(e)}function J(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o=[],s={};return r("next"),r("throw"),r("return"),s[Symbol.asyncIterator]=function(){return this},s;function r(r){i[r]&&(s[r]=function(n){return new Promise(function(e,t){1<o.push([r,n,e,t])||a(r,n)})})}function a(e,t){try{(n=i[e](t)).value instanceof Y?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Z(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=s[Symbol.asyncIterator];return t?t.call(s):(s=G(s),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=s[o]&&function(i){return new Promise(function(e,t){var n,r;i=s[o](i),n=e,e=t,r=i.done,t=i.value,Promise.resolve(t).then(function(e){n({value:e,done:r})},e)})}}}function X(e){return"function"==typeof e}var Q=!1,ee={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,Q=e},get useDeprecatedSynchronousErrorHandling(){return Q}};function te(e){setTimeout(function(){throw e},0)}var ne={closed:!0,next:function(e){},error:function(e){if(ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)},complete:function(){}},re=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function ie(e){return null!==e&&"object"==typeof e}var oe=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),se=function(){function u(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var e;return u.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof u)e.remove(this);else if(null!==e)for(var o=0;o<e.length;++o)e[o].remove(this);if(X(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){t=e instanceof oe?ae(e.errors):[e]}}if(re(i))for(var o=-1,s=i.length;++o<s;){var a=i[o];if(ie(a))try{a.unsubscribe()}catch(e){t=t||[],e instanceof oe?t=t.concat(ae(e.errors)):t.push(e)}}if(t)throw new oe(t)}},u.prototype.add=function(e){var t,n=e;if(!e)return u.EMPTY;switch(typeof e){case"function":n=new u(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof u||(t=n,(n=new u)._subscriptions=[t]);break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=n._parentOrParents;if(null===r)n._parentOrParents=this;else if(r instanceof u){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n},u.prototype.remove=function(e){var t=this._subscriptions;!t||-1!==(e=t.indexOf(e))&&t.splice(e,1)},u.EMPTY=((e=new u).closed=!0,e),u}();function ae(e){return e.reduce(function(e,t){return e.concat(t instanceof oe?t.errors:t)},[])}var ue=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ce=function(i){function o(e,t,n){var r=i.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=ne;break;case 1:if(!e){r.destination=ne;break}if("object"==typeof e){e instanceof o?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new le(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new le(r,e,t,n)}return r}return F(o,i),o.prototype[ue]=function(){return this},o.create=function(e,t,n){n=new o(e,t,n);return n.syncErrorThrowable=!1,n},o.prototype.next=function(e){this.isStopped||this._next(e)},o.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},o.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},o.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},o.prototype._next=function(e){this.destination.next(e)},o.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},o.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},o.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},o}(se),le=function(s){function e(e,t,n,r){var i,o=s.call(this)||this;o._parentSubscriber=e;e=o;return X(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==ne&&(X((e=Object.create(t)).unsubscribe)&&o.add(e.unsubscribe.bind(e)),e.unsubscribe=o.unsubscribe.bind(o))),o._context=e,o._next=i,o._error=n,o._complete=r,o}return F(e,s),e.prototype.next=function(e){var t;!this.isStopped&&this._next&&(t=this._parentSubscriber,ee.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e))},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=ee.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):te(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;te(e)}}},e.prototype.complete=function(){var e,t,n=this;this.isStopped||(e=this._parentSubscriber,this._complete&&(t=function(){return n._complete.call(n._context)},ee.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,t):this.__tryOrUnsub(t)),this.unsubscribe())},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),ee.useDeprecatedSynchronousErrorHandling)throw e;te(e)}},e.prototype.__tryOrSetError=function(t,e,n){if(!ee.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return ee.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(te(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(ce);var pe=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function de(e){return e}var fe=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,n=function(e,t,n){if(e){if(e instanceof ce)return e;if(e[ue])return e[ue]()}return e||t||n?new ce(e,t,n):new ce(ne)}(e,t,n);if(r?n.add(r.call(n,this.source)):n.add(this.source||ee.useDeprecatedSynchronousErrorHandling&&!n.syncErrorThrowable?this._subscribe(n):this._trySubscribe(n)),ee.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable&&(n.syncErrorThrowable=!1,n.syncErrorThrown))throw n.syncErrorValue;return n},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){ee.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return;e=n&&n instanceof ce?n:null}return 1}(t)?console.warn(e):t.error(e)}},n.prototype.forEach=function(r,e){var i=this;return new(e=he(e))(function(e,t){var n=i.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[pe]=function(){return this},n.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:(0===(t=e).length?de:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},n.prototype.toPromise=function(e){var r=this;return new(e=he(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();function he(e){if(!(e=e||Promise))throw new Error("no Promise impl found");return e}var ge=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),ve=function(r){function e(e,t){var n=r.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}return F(e,r),e.prototype.unsubscribe=function(){var e,t;this.closed||(this.closed=!0,e=(t=this.subject).observers,this.subject=null,!e||0===e.length||t.isStopped||t.closed||-1!==(t=e.indexOf(this.subscriber))&&e.splice(t,1))},e}(se),me=function(n){function e(e){var t=n.call(this,e)||this;return t.destination=e,t}return F(e,n),e}(ce),ye=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return F(e,t),e.prototype[ue]=function(){return new me(this)},e.prototype.lift=function(e){var t=new be(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new ge;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new ge;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new ge;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new ge;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new ge;return this.hasError?(e.error(this.thrownError),se.EMPTY):this.isStopped?(e.complete(),se.EMPTY):(this.observers.push(e),new ve(this,e))},e.prototype.asObservable=function(){var e=new fe;return e.source=this,e},e.create=function(e,t){return new be(e,t)},e}(fe),be=function(r){function e(e,t){var n=r.call(this)||this;return n.destination=e,n.source=t,n}return F(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):se.EMPTY},e}(ye);function Se(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new we(t,n))}}var we=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ce(e,this.project,this.thisArg))},e}(),Ce=function(r){function e(e,t,n){e=r.call(this,e)||this;return e.project=t,e.count=0,e.thisArg=n||e,e}return F(e,r),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(ce);function _e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ee=_e(),Ae=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ie(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var ke=function(e){if(e&&"function"==typeof e[pe])return o=e,function(e){var t=o[pe]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Ae(e))return i=e,function(e){for(var t=0,n=i.length;t<n&&!e.closed;t++)e.next(i[t]);e.complete()};if(Ie(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,te),t};if(e&&"function"==typeof e[Ee])return r=e,function(t){for(var e=r[Ee]();;){var n=void 0;try{n=e.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof e.return&&t.add(function(){e.return&&e.return()}),t};var r,n,i,o,e=ie(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Te(e,t){if(null!=e){if((n=e)&&"function"==typeof n[pe])return a=e,u=t,new fe(function(t){var n=new se;return n.add(u.schedule(function(){var e=a[pe]();n.add(e.subscribe({next:function(e){n.add(u.schedule(function(){return t.next(e)}))},error:function(e){n.add(u.schedule(function(){return t.error(e)}))},complete:function(){n.add(u.schedule(function(){return t.complete()}))}}))})),n});if(Ie(e))return o=e,s=t,new fe(function(t){var n=new se;return n.add(s.schedule(function(){return o.then(function(e){n.add(s.schedule(function(){t.next(e),n.add(s.schedule(function(){return t.complete()}))}))},function(e){n.add(s.schedule(function(){return t.error(e)}))})})),n});if(Ae(e))return r=e,i=t,new fe(function(e){var t=new se,n=0;return t.add(i.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t});if((n=e)&&"function"==typeof n[Ee]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new fe(function(r){var i,e=new se;return e.add(function(){i&&"function"==typeof i.return&&i.return()}),e.add(n.schedule(function(){i=t[Ee](),e.add(n.schedule(function(){if(!r.closed){try{var e=i.next(),t=e.value,n=e.done}catch(e){return void r.error(e)}n?r.complete():(r.next(t),this.schedule())}}))})),e})}(e,t)}var r,i,o,s,a,u,n;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Pe(e,t){return t?Te(e,t):e instanceof fe?e:new fe(ke(e))}function Oe(u,c){return new fe(function(r){var i=u.length;if(0!==i)for(var o=new Array(i),s=0,a=0,e=0;e<i;e++)!function(t){var e=Pe(u[t]),n=!1;r.add(e.subscribe({next:function(e){n||(n=!0,a++),o[t]=e},error:function(e){return r.error(e)},complete:function(){++s!==i&&n||(a===i&&r.next(c?c.reduce(function(e,t,n){return e[t]=o[n],e},{}):o),r.complete())}}))}(e);else r.complete()})}var xe=null;var Le=(Object.defineProperty(Ne.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),Ne);function Ne(){this.resourceLoaderType=null}var Re,Me=(F(Ue,Re=Le),Ue.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},Ue.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},Ue.prototype.supportsDOMEvents=function(){return!0},Ue.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},Ue.prototype.getAnimationPrefix=function(){return this._animationPrefix||""},Ue.prototype.getTransitionEnd=function(){return this._transitionEnd||""},Ue.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},Ue);function Ue(){var t=Re.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var e=["Webkit","Moz","O","ms"],r=0;r<e.length;r++)if(null!=t.getStyle(n,e[r]+"AnimationName")){t._animationPrefix="-"+e[r].toLowerCase()+"-";break}var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(i).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=i[e])})}catch(e){t._animationPrefix=null,t._transitionEnd=null}return t}var De,Fe={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},je={"\b":"Backspace","\t":"Tab","":"Delete","":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Be={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","Â":"NumLock"};f["Éµglobal"].Node&&(De=f["Éµglobal"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))});var ze,Ve=(F(qe,ze=Me),qe.prototype.parse=function(e){throw new Error("parse not implemented")},qe.makeCurrent=function(){var e;e=new qe,xe=xe||e},qe.prototype.hasProperty=function(e,t){return t in e},qe.prototype.setProperty=function(e,t,n){e[t]=n},qe.prototype.getProperty=function(e,t){return e[t]},qe.prototype.invoke=function(e,t,n){e[t].apply(e,n)},qe.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},qe.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},qe.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},qe.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(qe.prototype,"attrToPropMap",{get:function(){return Fe},enumerable:!0,configurable:!0}),qe.prototype.contains=function(e,t){return De.call(e,t)},qe.prototype.querySelector=function(e,t){return e.querySelector(t)},qe.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},qe.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},qe.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},qe.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},qe.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},qe.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},qe.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},qe.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},qe.prototype.getInnerHTML=function(e){return e.innerHTML},qe.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},qe.prototype.getOuterHTML=function(e){return e.outerHTML},qe.prototype.nodeName=function(e){return e.nodeName},qe.prototype.nodeValue=function(e){return e.nodeValue},qe.prototype.type=function(e){return e.type},qe.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},qe.prototype.firstChild=function(e){return e.firstChild},qe.prototype.nextSibling=function(e){return e.nextSibling},qe.prototype.parentElement=function(e){return e.parentNode},qe.prototype.childNodes=function(e){return e.childNodes},qe.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},qe.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},qe.prototype.appendChild=function(e,t){e.appendChild(t)},qe.prototype.removeChild=function(e,t){e.removeChild(t)},qe.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},qe.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},qe.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},qe.prototype.insertAllBefore=function(t,n,e){e.forEach(function(e){return t.insertBefore(e,n)})},qe.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},qe.prototype.setInnerHTML=function(e,t){e.innerHTML=t},qe.prototype.getText=function(e){return e.textContent},qe.prototype.setText=function(e,t){e.textContent=t},qe.prototype.getValue=function(e){return e.value},qe.prototype.setValue=function(e,t){e.value=t},qe.prototype.getChecked=function(e){return e.checked},qe.prototype.setChecked=function(e,t){e.checked=t},qe.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},qe.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},qe.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},qe.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},qe.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},qe.prototype.createScriptTag=function(e,t,n){n=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return n.setAttribute(e,t),n},qe.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},qe.prototype.createShadowRoot=function(e){return e.createShadowRoot()},qe.prototype.getShadowRoot=function(e){return e.shadowRoot},qe.prototype.getHost=function(e){return e.host},qe.prototype.clone=function(e){return e.cloneNode(!0)},qe.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},qe.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},qe.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},qe.prototype.addClass=function(e,t){e.classList.add(t)},qe.prototype.removeClass=function(e,t){e.classList.remove(t)},qe.prototype.hasClass=function(e,t){return e.classList.contains(t)},qe.prototype.setStyle=function(e,t,n){e.style[t]=n},qe.prototype.removeStyle=function(e,t){e.style[t]=""},qe.prototype.getStyle=function(e,t){return e.style[t]},qe.prototype.hasStyle=function(e,t,n){t=this.getStyle(e,t)||"";return n?t==n:0<t.length},qe.prototype.tagName=function(e){return e.tagName},qe.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t},qe.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},qe.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},qe.prototype.getAttribute=function(e,t){return e.getAttribute(t)},qe.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},qe.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},qe.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},qe.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},qe.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},qe.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},qe.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},qe.prototype.getDefaultDocument=function(){return document},qe.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(e){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},qe.prototype.getTitle=function(e){return e.title},qe.prototype.setTitle=function(e,t){e.title=t||""},qe.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},qe.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},qe.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},qe.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},qe.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},qe.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},qe.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},qe.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},qe.prototype.adoptNode=function(e){return document.adoptNode(e)},qe.prototype.getHref=function(e){return e.getAttribute("href")},qe.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Be.hasOwnProperty(t)&&(t=Be[t]))}return je[t]||t},qe.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},qe.prototype.getHistory=function(){return window.history},qe.prototype.getLocation=function(){return window.location},qe.prototype.getBaseHref=function(e){var t=function(){if(!He&&!(He=document.querySelector("base")))return null;return He.getAttribute("href")}();return null==t?null:function(e){Ke=Ke||document.createElement("a");return Ke.setAttribute("href",e),"/"===Ke.pathname.charAt(0)?Ke.pathname:"/"+Ke.pathname}(t)},qe.prototype.resetBaseElement=function(){He=null},qe.prototype.getUserAgent=function(){return window.navigator.userAgent},qe.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},qe.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},qe.prototype.getComputedStyle=function(e){return getComputedStyle(e)},qe.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},qe.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},qe.prototype.supportsCookies=function(){return!0},qe.prototype.getCookie=function(e){return t["ÉµparseCookieValue"](document.cookie,e)},qe.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},qe);function qe(){return null!==ze&&ze.apply(this,arguments)||this}var Ke,He=null;var Ge=t.DOCUMENT;function We(){return window.history.pushState}var $e,Ye=(F(Je,$e=t.PlatformLocation),Je.prototype._init=function(){this.location=xe.getLocation(),this._history=xe.getHistory()},Je.prototype.getBaseHrefFromDOM=function(){return xe.getBaseHref(this._doc)},Je.prototype.onPopState=function(e){xe.getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},Je.prototype.onHashChange=function(e){xe.getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(Je.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(Je.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(Je.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),Je.prototype.pushState=function(e,t,n){We()?this._history.pushState(e,t,n):this.location.hash=n},Je.prototype.replaceState=function(e,t,n){We()?this._history.replaceState(e,t,n):this.location.hash=n},Je.prototype.forward=function(){this._history.forward()},Je.prototype.back=function(){this._history.back()},Je.decorators=[{type:f.Injectable}],Je.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]},Je);function Je(e){var t=$e.call(this)||this;return t._doc=e,t._init(),t}Ze.prototype.addTag=function(e,t){return void 0===t&&(t=!1),e?this._getOrCreateElement(e,t):null},Ze.prototype.addTags=function(e,n){var r=this;return void 0===n&&(n=!1),e?e.reduce(function(e,t){return t&&e.push(r._getOrCreateElement(t,n)),e},[]):[]},Ze.prototype.getTag=function(e){return e&&this._dom.querySelector(this._doc,"meta["+e+"]")||null},Ze.prototype.getTags=function(e){if(!e)return[];e=this._dom.querySelectorAll(this._doc,"meta["+e+"]");return e?[].slice.call(e):[]},Ze.prototype.updateTag=function(e,t){if(!e)return null;t=t||this._parseSelector(e);t=this.getTag(t);return t?this._setMetaElementAttributes(e,t):this._getOrCreateElement(e,!0)},Ze.prototype.removeTag=function(e){this.removeTagElement(this.getTag(e))},Ze.prototype.removeTagElement=function(e){e&&this._dom.remove(e)},Ze.prototype._getOrCreateElement=function(e,t){if(!(t=void 0===t?!1:t)){var n=this._parseSelector(e),n=this.getTag(n);if(n&&this._containsAttributes(e,n))return n}n=this._dom.createElement("meta");this._setMetaElementAttributes(e,n);e=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(e,n),n},Ze.prototype._setMetaElementAttributes=function(t,n){var r=this;return Object.keys(t).forEach(function(e){return r._dom.setAttribute(n,e,t[e])}),n},Ze.prototype._parseSelector=function(e){var t=e.name?"name":"property";return t+'="'+e[t]+'"'},Ze.prototype._containsAttributes=function(t,n){var r=this;return Object.keys(t).every(function(e){return r._dom.getAttribute(n,e)===t[e]})},Ze.decorators=[{type:f.Injectable}],Ze.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]};function Ze(e){this._doc=e,this._dom=xe}new f.InjectionToken("TRANSITION_ID");var Xe=(Qe.init=function(){f.setTestabilityGetter(new Qe)},Qe.prototype.addToWindow=function(n){f["Éµglobal"].getAngularTestability=function(e,t){t=n.findTestabilityInTree(e,t=void 0===t?!0:t);if(null==t)throw new Error("Could not find testability for element.");return t},f["Éµglobal"].getAllAngularTestabilities=function(){return n.getAllTestabilities()},f["Éµglobal"].getAllAngularRootElements=function(){return n.getAllRootElements()};f["Éµglobal"].frameworkStabilizers||(f["Éµglobal"].frameworkStabilizers=[]),f["Éµglobal"].frameworkStabilizers.push(function(t){function n(e){i=i||e,0==--r&&t(i)}var e=f["Éµglobal"].getAllAngularTestabilities(),r=e.length,i=!1;e.forEach(function(e){e.whenStable(n)})})},Qe.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?xe.isShadowRoot(t)?this.findTestabilityInTree(e,xe.getHost(t),!0):this.findTestabilityInTree(e,xe.parentElement(t),!0):null},Qe);function Qe(){}et.prototype.getTitle=function(){return xe.getTitle(this._doc)},et.prototype.setTitle=function(e){xe.setTitle(this._doc,e)},et.decorators=[{type:f.Injectable}],et.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]};function et(e){this._doc=e}function tt(e,t){"undefined"!=typeof COMPILED&&COMPILED||((f["Éµglobal"].ng=f["Éµglobal"].ng||{})[e]=t)}var nt={ApplicationRef:f.ApplicationRef,NgZone:f.NgZone};function rt(e){return f.getDebugNode(e)}f.APP_INITIALIZER,f.NgProbeToken,new f.Optional;var it=new f.InjectionToken("EventManagerPlugins"),ot=(st.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},st.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},st.prototype.getZone=function(){return this._zone},st.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)},st.decorators=[{type:f.Injectable}],st.ctorParameters=function(){return[{type:Array,decorators:[{type:f.Inject,args:[it]}]},{type:f.NgZone}]},st);function st(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}var at=(ut.prototype.addGlobalEventListener=function(e,t,n){e=xe.getGlobalEventTarget(this._doc,e);if(!e)throw new Error("Unsupported event target "+e+" for event "+t);return this.addEventListener(e,t,n)},ut);function ut(e){this._doc=e}var ct=(lt.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},lt.prototype.onStylesAdded=function(e){},lt.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},lt.decorators=[{type:f.Injectable}],lt.ctorParameters=function(){return[]},lt);function lt(){this._stylesSet=new Set}var pt,dt=(F(ft,pt=ct),ft.prototype._addStylesToHost=function(e,n){var r=this;e.forEach(function(e){var t=r._doc.createElement("style");t.textContent=e,r._styleNodes.add(n.appendChild(t))})},ft.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},ft.prototype.removeHost=function(e){this._hostNodes.delete(e)},ft.prototype.onStylesAdded=function(t){var n=this;this._hostNodes.forEach(function(e){return n._addStylesToHost(t,e)})},ft.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return xe.remove(e)})},ft.decorators=[{type:f.Injectable}],ft.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]},ft);function ft(e){var t=pt.call(this)||this;return t._doc=e,t._hostNodes=new Set,t._styleNodes=new Set,t._hostNodes.add(e.head),t}var ht={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gt=/%COMP%/g,vt="_nghost-%COMP%",mt="_ngcontent-%COMP%";function yt(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?yt(e,i,n):(i=i.replace(gt,e),n.push(i))}return n}function bt(t){return function(e){!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}St.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case f.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new It(this.eventManager,this.sharedStylesHost,t),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case f.ViewEncapsulation.Native:return new Pt(this.eventManager,this.sharedStylesHost,e,t);default:return this.rendererByCompId.has(t.id)||(n=yt(t.id,t.styles,[]),this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(t.id,this.defaultRenderer)),this.defaultRenderer}},St.prototype.begin=function(){},St.prototype.end=function(){},St.decorators=[{type:f.Injectable}],St.ctorParameters=function(){return[{type:ot},{type:dt}]};function St(e,t){this.eventManager=e,this.sharedStylesHost=t,this.rendererByCompId=new Map,this.defaultRenderer=new wt(e)}var wt=(Ct.prototype.destroy=function(){},Ct.prototype.createElement=function(e,t){return t?document.createElementNS(ht[t],e):document.createElement(e)},Ct.prototype.createComment=function(e){return document.createComment(e)},Ct.prototype.createText=function(e){return document.createTextNode(e)},Ct.prototype.appendChild=function(e,t){e.appendChild(t)},Ct.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},Ct.prototype.removeChild=function(e,t){e&&e.removeChild(t)},Ct.prototype.selectRootElement=function(e){var t="string"==typeof e?document.querySelector(e):e;if(!t)throw new Error('The selector "'+e+'" did not match any elements');return t.textContent="",t},Ct.prototype.parentNode=function(e){return e.parentNode},Ct.prototype.nextSibling=function(e){return e.nextSibling},Ct.prototype.setAttribute=function(e,t,n,r){r?(t=r+":"+t,(r=ht[r])?e.setAttributeNS(r,t,n):e.setAttribute(t,n)):e.setAttribute(t,n)},Ct.prototype.removeAttribute=function(e,t,n){var r;n?(r=ht[n])?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t):e.removeAttribute(t)},Ct.prototype.addClass=function(e,t){e.classList.add(t)},Ct.prototype.removeClass=function(e,t){e.classList.remove(t)},Ct.prototype.setStyle=function(e,t,n,r){r&f.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&f.RendererStyleFlags2.Important?"important":""):e.style[t]=n},Ct.prototype.removeStyle=function(e,t,n){n&f.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},Ct.prototype.setProperty=function(e,t,n){Et(t,"property"),e[t]=n},Ct.prototype.setValue=function(e,t){e.nodeValue=t},Ct.prototype.listen=function(e,t,n){return Et(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,bt(n)):this.eventManager.addEventListener(e,t,bt(n))},Ct);function Ct(e){this.eventManager=e,this.data=Object.create(null)}var _t="@".charCodeAt(0);function Et(e,t){if(e.charCodeAt(0)===_t)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var At,It=(F(kt,At=wt),kt.prototype.applyToHost=function(e){At.prototype.setAttribute.call(this,e,this.hostAttr,"")},kt.prototype.createElement=function(e,t){t=At.prototype.createElement.call(this,e,t);return At.prototype.setAttribute.call(this,t,this.contentAttr,""),t},kt);function kt(e,t,n){var r=At.call(this,e)||this,e=yt((r.component=n).id,n.styles,[]);return t.addStyles(e),r.contentAttr=(e=n.id,mt.replace(gt,e)),r.hostAttr=(n=n.id,vt.replace(gt,n)),r}var Tt,Pt=(F(Ot,Tt=wt),Ot.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},Ot.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},Ot.prototype.appendChild=function(e,t){return Tt.prototype.appendChild.call(this,this.nodeOrShadowRoot(e),t)},Ot.prototype.insertBefore=function(e,t,n){return Tt.prototype.insertBefore.call(this,this.nodeOrShadowRoot(e),t,n)},Ot.prototype.removeChild=function(e,t){return Tt.prototype.removeChild.call(this,this.nodeOrShadowRoot(e),t)},Ot.prototype.parentNode=function(e){return this.nodeOrShadowRoot(Tt.prototype.parentNode.call(this,this.nodeOrShadowRoot(e)))},Ot);function Ot(e,t,n,r){var i=Tt.call(this,e)||this;i.sharedStylesHost=t,i.hostEl=n,i.component=r,i.shadowRoot=n.createShadowRoot(),i.sharedStylesHost.addHost(i.shadowRoot);for(var o=yt(r.id,r.styles,[]),s=0;s<o.length;s++){var a=document.createElement("style");a.textContent=o[s],i.shadowRoot.appendChild(a)}return i}var xt,Lt="undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e},Nt=Lt("addEventListener"),Rt=Lt("removeEventListener"),Mt={},Ut="removeEventListener",Dt="__zone_symbol__propagationStopped",Ft="__zone_symbol__stopImmediatePropagation",jt="undefined"!=typeof Zone&&Zone[Lt("BLACK_LISTED_EVENTS")];jt&&(xt={},jt.forEach(function(e){xt[e]=e}));function Bt(e){return!!xt&&xt.hasOwnProperty(e)}function zt(e){var t=Mt[e.type];if(t){t=this[t];if(t){var n=[e];if(1===t.length)return(r=t[0]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n);for(var r,i=t.slice(),o=0;o<i.length&&!0!==e[Dt];o++)(r=i[o]).zone!==Zone.current?r.zone.run(r.handler,this,n):r.handler.apply(this,n)}}}var Vt;F(qt,Vt=at),qt.prototype.patchEvent=function(){var e;Event&&Event.prototype&&(Event.prototype[Ft]||(e=Event.prototype[Ft]=Event.prototype.stopImmediatePropagation,Event.prototype.stopImmediatePropagation=function(){this&&(this[Dt]=!0),e&&e.apply(this,arguments)}))},qt.prototype.supports=function(e){return!0},qt.prototype.addEventListener=function(e,t,n){var r=this,i=e[Nt],o=n;if(!i||f.NgZone.isInAngularZone()&&!Bt(t))e.addEventListener(t,o,!1);else{var n=(n=Mt[t])||(Mt[t]=Lt("ANGULAR"+t+"FALSE")),i=(s=e[n])&&0<s.length,s=s||(e[n]=[]),n=Bt(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:n,handler:o});else{for(var a=!1,u=0;u<s.length;u++)if(s[u].handler===o){a=!0;break}a||s.push({zone:n,handler:o})}i||e[Nt](t,zt,!1)}return function(){return r.removeEventListener(e,t,o)}},qt.prototype.removeEventListener=function(e,t,n){var r=e[Rt];if(!r)return e[Ut].apply(e,[t,n,!1]);var i=Mt[t],o=i&&e[i];if(!o)return e[Ut].apply(e,[t,n,!1]);for(var s=!1,a=0;a<o.length;a++)if(o[a].handler===n){s=!0,o.splice(a,1);break}s?0===o.length&&r.apply(e,[t,zt,!1]):e[Ut].apply(e,[t,n,!1])},qt.decorators=[{type:f.Injectable}],qt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]},{type:f.NgZone}]};function qt(e,t){e=Vt.call(this,e)||this;return e.ngZone=t,e.patchEvent(),e}var Kt={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},Ht=new f.InjectionToken("HammerGestureConfig"),Gt=(Wt.prototype.buildHammer=function(e){var t,n=new Hammer(e);for(t in n.get("pinch").set({enable:!0}),n.get("rotate").set({enable:!0}),this.overrides)n.get(t).set(this.overrides[t]);return n},Wt.decorators=[{type:f.Injectable}],Wt.ctorParameters=function(){return[]},Wt);function Wt(){this.events=[],this.overrides={}}var $t;F(Yt,$t=at),Yt.prototype.supports=function(e){if(!Kt.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e))return!1;if(!window.Hammer)throw new Error("Hammer.js is not loaded, can not bind "+e+" event");return!0},Yt.prototype.addEventListener=function(n,r,i){var o=this,s=this.manager.getZone();return r=r.toLowerCase(),s.runOutsideAngular(function(){function e(e){s.runGuarded(function(){i(e)})}var t=o._config.buildHammer(n);return t.on(r,e),function(){return t.off(r,e)}})},Yt.prototype.isCustomEvent=function(e){return-1<this._config.events.indexOf(e)},Yt.decorators=[{type:f.Injectable}],Yt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]},{type:Gt,decorators:[{type:f.Inject,args:[Ht]}]}]};function Yt(e,t){e=$t.call(this,e)||this;return e._config=t,e}var Jt,Zt=["alt","control","meta","shift"],Xt={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}};F(Qt,Jt=at),Qt.prototype.supports=function(e){return null!=Qt.parseEventName(e)},Qt.prototype.addEventListener=function(e,t,n){var r=Qt.parseEventName(t),i=Qt.eventCallback(r.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return xe.onAndCancel(e,r.domEventName,i)})},Qt.parseEventName=function(e){var n=e.toLowerCase().split("."),t=n.shift();if(0===n.length||"keydown"!==t&&"keyup"!==t)return null;var e=Qt._normalizeKey(n.pop()),r="";if(Zt.forEach(function(e){var t=n.indexOf(e);-1<t&&(n.splice(t,1),r+=e+".")}),r+=e,0!=n.length||0===e.length)return null;e={};return e.domEventName=t,e.fullKey=r,e},Qt.getEventFullKey=function(t){var n="",r=xe.getEventKey(t);return" "===(r=r.toLowerCase())?r="space":"."===r&&(r="dot"),Zt.forEach(function(e){e!=r&&(0,Xt[e])(t)&&(n+=e+".")}),n+=r},Qt.eventCallback=function(t,n,r){return function(e){Qt.getEventFullKey(e)===t&&r.runGuarded(function(){return n(e)})}},Qt._normalizeKey=function(e){return"esc"!==e?e:"escape"},Qt.decorators=[{type:f.Injectable}],Qt.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]};function Qt(e){return Jt.call(this,e)||this}var en=(tn.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(e){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(null);t=t.response.body;return t.removeChild(t.firstChild),t},tn.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(e){return null}},tn.prototype.getInertBodyElement_InertDocument=function(e){var t=this.DOM.createElement("template");return"content"in t?(this.DOM.setInnerHTML(t,e),t):(this.DOM.setInnerHTML(this.inertBodyElement,e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},tn.prototype.stripCustomNsAttrs=function(n){var r=this;this.DOM.attributeMap(n).forEach(function(e,t){"xmlns:ns1"!==t&&0!==t.indexOf("ns1:")||r.DOM.removeAttribute(n,t)});for(var e=0,t=this.DOM.childNodesAsList(n);e<t.length;e++){var i=t[e];this.DOM.isElementNode(i)&&this.stripCustomNsAttrs(i)}},tn);function tn(e,t){this.defaultDoc=e,this.DOM=t;e=this.DOM.createHtmlDocument();this.inertBodyElement=e.body,null==this.inertBodyElement&&(t=this.DOM.createElement("html",e),this.inertBodyElement=this.DOM.createElement("body",e),this.DOM.appendChild(t,this.inertBodyElement),this.DOM.appendChild(e,t)),this.DOM.setInnerHTML(this.inertBodyElement,'<svg><g onload="this.parentNode.remove()"></g></svg>'),!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.DOM.setInnerHTML(this.inertBodyElement,'<svg><p><style><img src="</style><img src=x onerror=alert(1)//">'),this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement=this.getInertBodyElement_DOMParser:this.getInertBodyElement=this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}var nn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,rn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function on(e){return(e=String(e)).match(nn)||e.match(rn)?e:(f.isDevMode()&&xe.log("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function sn(e){for(var t={},n=0,r=e.split(",");n<r.length;n++)t[r[n]]=!0;return t}function an(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n={},r=0,i=e;r<i.length;r++){var o,s=i[r];for(o in s)s.hasOwnProperty(o)&&(n[o]=!0)}return n}var un=sn("area,br,col,hr,img,wbr"),cn=sn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ln=sn("rp,rt"),pn=an(ln,cn),dn=an(cn,sn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fn=an(ln,sn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),hn=an(un,dn,fn,pn),gn=sn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),vn=sn("srcset"),mn=sn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),yn=an(gn,vn,mn),bn=(Sn.prototype.sanitizeChildren=function(e){for(var t=this.DOM.firstChild(e);t;)if(this.DOM.isElementNode(t)?this.startElement(t):this.DOM.isTextNode(t)?this.chars(this.DOM.nodeValue(t)):this.sanitizedSomething=!0,this.DOM.firstChild(t))t=this.DOM.firstChild(t);else for(;t;){this.DOM.isElementNode(t)&&this.endElement(t);var n=this.checkClobberedElement(t,this.DOM.nextSibling(t));if(n){t=n;break}t=this.checkClobberedElement(t,this.DOM.parentElement(t))}return this.buf.join("")},Sn.prototype.startElement=function(e){var r=this,t=this.DOM.nodeName(e).toLowerCase();hn.hasOwnProperty(t)?(this.buf.push("<"),this.buf.push(t),this.DOM.attributeMap(e).forEach(function(e,t){var n=t.toLowerCase();yn.hasOwnProperty(n)?(gn[n]&&(e=on(e)),vn[n]&&(e=String(e).split(",").map(function(e){return on(e.trim())}).join(", ")),r.buf.push(" "),r.buf.push(t),r.buf.push('="'),r.buf.push(En(e)),r.buf.push('"')):r.sanitizedSomething=!0}),this.buf.push(">")):this.sanitizedSomething=!0},Sn.prototype.endElement=function(e){e=this.DOM.nodeName(e).toLowerCase();hn.hasOwnProperty(e)&&!un.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))},Sn.prototype.chars=function(e){this.buf.push(En(e))},Sn.prototype.checkClobberedElement=function(e,t){if(t&&this.DOM.contains(e,t))throw new Error("Failed to sanitize html because the element is clobbered: "+this.DOM.getOuterHTML(e));return t},Sn);function Sn(){this.sanitizedSomething=!1,this.buf=[],this.DOM=xe}var wn,Cn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_n=/([^\#-~ |!])/g;function En(e){return e.replace(/&/g,"&amp;").replace(Cn,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(_n,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var An=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),In=/^url\(([^)]+)\)$/;function kn(e){if(!(e=String(e).trim()))return"";var t=e.match(In);return t&&on(t[1])===t[1]||e.match(An)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(f.isDevMode()&&xe.log("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}var Tn;F(Pn,Tn=function(){}),Pn.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case f.SecurityContext.NONE:return t;case f.SecurityContext.HTML:return t instanceof Nn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),function(e,t){var n=xe,r=null;try{wn=wn||new en(e,n);var i=t?String(t):"",r=wn.getInertBodyElement(i),o=5,s=i;do{if(0===o)throw new Error("Failed to sanitize html because the input is unstable")}while(o--,i=s,s=n.getInnerHTML(r),r=wn.getInertBodyElement(i),i!==s);var a=new bn,u=a.sanitizeChildren(n.getTemplateContent(r)||r);return f.isDevMode()&&a.sanitizedSomething&&n.log("WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss)."),u}finally{if(r)for(var c=n.getTemplateContent(r)||r,l=0,p=n.childNodesAsList(c);l<p.length;l++){var d=p[l];n.removeChild(c,d)}}}(this._doc,String(t)));case f.SecurityContext.STYLE:return t instanceof Un?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),kn(t));case f.SecurityContext.SCRIPT:if(t instanceof jn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case f.SecurityContext.URL:return t instanceof Hn||t instanceof Vn?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),on(String(t)));case f.SecurityContext.RESOURCE_URL:if(t instanceof Hn)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},Pn.prototype.checkNotSafeValue=function(e,t){if(e instanceof On)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},Pn.prototype.bypassSecurityTrustHtml=function(e){return new Nn(e)},Pn.prototype.bypassSecurityTrustStyle=function(e){return new Un(e)},Pn.prototype.bypassSecurityTrustScript=function(e){return new jn(e)},Pn.prototype.bypassSecurityTrustUrl=function(e){return new Vn(e)},Pn.prototype.bypassSecurityTrustResourceUrl=function(e){return new Hn(e)},Pn.decorators=[{type:f.Injectable}],Pn.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:[Ge]}]}]};function Pn(e){var t=Tn.call(this)||this;return t._doc=e,t}var On=(xn.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},xn);function xn(e){this.changingThisBreaksApplicationSecurity=e}var Ln,Nn=(F(Rn,Ln=On),Rn.prototype.getTypeName=function(){return"HTML"},Rn);function Rn(){return null!==Ln&&Ln.apply(this,arguments)||this}var Mn,Un=(F(Dn,Mn=On),Dn.prototype.getTypeName=function(){return"Style"},Dn);function Dn(){return null!==Mn&&Mn.apply(this,arguments)||this}var Fn,jn=(F(Bn,Fn=On),Bn.prototype.getTypeName=function(){return"Script"},Bn);function Bn(){return null!==Fn&&Fn.apply(this,arguments)||this}var zn,Vn=(F(qn,zn=On),qn.prototype.getTypeName=function(){return"URL"},qn);function qn(){return null!==zn&&zn.apply(this,arguments)||this}var Kn,Hn=(F(Gn,Kn=On),Gn.prototype.getTypeName=function(){return"ResourceURL"},Gn);function Gn(){return null!==Kn&&Kn.apply(this,arguments)||this}var Wn=[{provide:f.PLATFORM_ID,useValue:t["ÉµPLATFORM_BROWSER_ID"]},{provide:f.PLATFORM_INITIALIZER,useValue:function(){Ve.makeCurrent(),Xe.init()},multi:!0},{provide:t.PlatformLocation,useClass:Ye,deps:[Ge]},{provide:Ge,useFactory:function(){return document},deps:[]}];f.createPlatformFactory(f.platformCore,"browser",Wn);$n.init=function(e){var t=new $n;return t.store=e,t},$n.prototype.get=function(e,t){return void 0!==this.store[e]?this.store[e]:t},$n.prototype.set=function(e,t){this.store[e]=t},$n.prototype.remove=function(e){delete this.store[e]},$n.prototype.hasKey=function(e){return this.store.hasOwnProperty(e)},$n.prototype.onSerialize=function(e,t){this.onSerializeCallbacks[e]=t},$n.prototype.toJson=function(){for(var e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(e){console.warn("Exception in onSerialize callback: ",e)}return JSON.stringify(this.store)},$n.decorators=[{type:f.Injectable}],$n.ctorParameters=function(){return[]};function $n(){this.store={},this.onSerializeCallbacks={}}new f.Version("5.2.11");Object.defineProperty(Yn.prototype,"value",{get:function(){return this.control?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"valid",{get:function(){return this.control?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"invalid",{get:function(){return this.control?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"pending",{get:function(){return this.control?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"disabled",{get:function(){return this.control?this.control.disabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"enabled",{get:function(){return this.control?this.control.enabled:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"errors",{get:function(){return this.control?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"pristine",{get:function(){return this.control?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"dirty",{get:function(){return this.control?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"touched",{get:function(){return this.control?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"status",{get:function(){return this.control?this.control.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"untouched",{get:function(){return this.control?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"statusChanges",{get:function(){return this.control?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"valueChanges",{get:function(){return this.control?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Yn.prototype.reset=function(e){void 0===e&&(e=void 0),this.control&&this.control.reset(e)},Yn.prototype.hasError=function(e,t){return!!this.control&&this.control.hasError(e,t)},Yn.prototype.getError=function(e,t){return this.control?this.control.getError(e,t):null},p=Yn;function Yn(){}var Jn,b=(F(Zn,Jn=p),Object.defineProperty(Zn.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Zn.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),Zn);function Zn(){return null!==Jn&&Jn.apply(this,arguments)||this}function Xn(e){return null==e||0===e.length}var S=new f.InjectionToken("NgValidators"),C=new f.InjectionToken("NgAsyncValidators"),Qn=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,er=(tr.min=function(n){return function(e){if(Xn(e.value)||Xn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}},tr.max=function(n){return function(e){if(Xn(e.value)||Xn(n))return null;var t=parseFloat(e.value);return!isNaN(t)&&n<t?{max:{max:n,actual:e.value}}:null}},tr.required=function(e){return Xn(e.value)?{required:!0}:null},tr.requiredTrue=function(e){return!0===e.value?null:{required:!0}},tr.email=function(e){return Xn(e.value)||Qn.test(e.value)?null:{email:!0}},tr.minLength=function(t){return function(e){if(Xn(e.value))return null;e=e.value?e.value.length:0;return e<t?{minlength:{requiredLength:t,actualLength:e}}:null}},tr.maxLength=function(t){return function(e){e=e.value?e.value.length:0;return t<e?{maxlength:{requiredLength:t,actualLength:e}}:null}},tr.pattern=function(e){if(!e)return tr.nullValidator;var t,n="string"==typeof e?(t="","^"!==e.charAt(0)&&(t+="^"),t+=e,"$"!==e.charAt(e.length-1)&&(t+="$"),new RegExp(t)):(t=e.toString(),e);return function(e){if(Xn(e.value))return null;e=e.value;return n.test(e)?null:{pattern:{requiredPattern:t,actualValue:e}}}},tr.nullValidator=function(e){return null},tr.compose=function(e){if(!e)return null;var n=e.filter(nr);return 0==n.length?null:function(e){return ir((t=e,n.map(function(e){return e(t)})));var t}},tr.composeAsync=function(e){if(!e)return null;var n=e.filter(nr);return 0==n.length?null:function(e){var t;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(re(n))return Oe(n,null);if(ie(n)&&Object.getPrototypeOf(n)===Object.prototype){var r=Object.keys(n);return Oe(r.map(function(e){return n[e]}),r)}}if("function"!=typeof e[e.length-1])return Oe(e,null);var i=e.pop();return Oe(e=1===e.length&&re(e[0])?e[0]:e,null).pipe(Se(function(e){return i.apply(void 0,e)}))}((t=e,n.map(function(e){return e(t)}).map(rr))).pipe(Se(ir))}},tr);function tr(){}function nr(e){return null!=e}function rr(e){e=f["ÉµisPromise"](e)?Pe(e):e;if(!f["ÉµisObservable"](e))throw new Error("Expected validator to return Promise or Observable.");return e}function ir(e){e=e.reduce(function(e,t){return null!=t?j({},e,t):e},{});return 0===Object.keys(e).length?null:e}var Le=new f.InjectionToken("NgValueAccessor"),Me={provide:Le,useExisting:f.forwardRef(function(){return or}),multi:!0},or=(sr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"checked",e)},sr.prototype.registerOnChange=function(e){this.onChange=e},sr.prototype.registerOnTouched=function(e){this.onTouched=e},sr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},z([f.Directive({selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[Me]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],sr));function sr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}ct={provide:Le,useExisting:f.forwardRef(function(){return ar}),multi:!0};var jt=new f.InjectionToken("CompositionEventMode"),ar=(ur.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},ur.prototype.registerOnChange=function(e){this.onChange=e},ur.prototype.registerOnTouched=function(e){this.onTouched=e},ur.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},ur.prototype._handleInput=function(e){this._compositionMode&&(!this._compositionMode||this._composing)||this.onChange(e)},ur.prototype._compositionStart=function(){this._composing=!0},ur.prototype._compositionEnd=function(e){this._composing=!1,this._compositionMode&&this.onChange(e)},z([f.Directive({selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"$any(this)._handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"$any(this)._compositionStart()","(compositionend)":"$any(this)._compositionEnd($event.target.value)"},providers:[ct]}),V(2,f.Optional()),V(2,f.Inject(jt)),q("design:paramtypes",[f.Renderer2,f.ElementRef,Boolean])],ur));function ur(e,t,n){this._renderer=e,this._elementRef=t,this._compositionMode=n,this.onChange=function(e){},this.onTouched=function(){},this._composing=!1,null==this._compositionMode&&(this._compositionMode=(n=xe?xe.getUserAgent():"",!/android (\d+)/.test(n.toLowerCase())))}function cr(t){return t.validate?function(e){return t.validate(e)}:t}function lr(t){return t.validate?function(e){return t.validate(e)}:t}var at={provide:Le,useExisting:f.forwardRef(function(){return pr}),multi:!0},pr=(dr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==e?"":e)},dr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},dr.prototype.registerOnTouched=function(e){this.onTouched=e},dr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},z([f.Directive({selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[at]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],dr));function dr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}function fr(){throw new Error("unimplemented")}var hr,gr=(F(vr,hr=p),Object.defineProperty(vr.prototype,"validator",{get:fr,enumerable:!0,configurable:!0}),Object.defineProperty(vr.prototype,"asyncValidator",{get:fr,enumerable:!0,configurable:!0}),vr);function vr(){var e=null!==hr&&hr.apply(this,arguments)||this;return e._parent=null,e.name=null,e.valueAccessor=null,e._rawValidators=[],e._rawAsyncValidators=[],e}cn={provide:Le,useExisting:f.forwardRef(function(){return yr}),multi:!0},mr.prototype.add=function(e,t){this._accessors.push([e,t])},mr.prototype.remove=function(e){for(var t=this._accessors.length-1;0<=t;--t)if(this._accessors[t][1]===e)return void this._accessors.splice(t,1)},mr.prototype.select=function(t){var n=this;this._accessors.forEach(function(e){n._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})},mr.prototype._isSameGroup=function(e,t){return!!e[0].control&&(e[0]._parent===t._control._parent&&e[1].name===t.name)},ln=z([f.Injectable()],mr);function mr(){this._accessors=[]}var yr=(br.prototype.ngOnInit=function(){this._control=this._injector.get(gr),this._checkName(),this._registry.add(this._control,this)},br.prototype.ngOnDestroy=function(){this._registry.remove(this)},br.prototype.writeValue=function(e){this._state=e===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)},br.prototype.registerOnChange=function(e){var t=this;this._fn=e,this.onChange=function(){e(t.value),t._registry.select(t)}},br.prototype.fireUncheck=function(e){this.writeValue(e)},br.prototype.registerOnTouched=function(e){this.onTouched=e},br.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},br.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},br.prototype._throwNameError=function(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},z([f.Input(),q("design:type",String)],br.prototype,"name",void 0),z([f.Input(),q("design:type",String)],br.prototype,"formControlName",void 0),z([f.Input(),q("design:type",Object)],br.prototype,"value",void 0),z([f.Directive({selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[cn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef,ln,f.Injector])],br));function br(e,t,n,r){this._renderer=e,this._elementRef=t,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}var dn={provide:Le,useExisting:f.forwardRef(function(){return Sr}),multi:!0},Sr=(wr.prototype.writeValue=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(e))},wr.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:parseFloat(e))}},wr.prototype.registerOnTouched=function(e){this.onTouched=e},wr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},z([f.Directive({selector:"input[type=range][formControlName],input[type=range][formControl],input[type=range][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[dn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],wr));function wr(e,t){this._renderer=e,this._elementRef=t,this.onChange=function(e){},this.onTouched=function(){}}var Cr='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',_r='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',Er='\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',Ar='\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',Ir='\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  ',kr=(Tr.controlParentException=function(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Cr)},Tr.ngModelGroupException=function(){throw new Error('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+_r+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+Ar)},Tr.missingFormException=function(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Cr)},Tr.groupParentException=function(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+_r)},Tr.arrayParentException=function(){throw new Error("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+Er)},Tr.disabledAttrWarning=function(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n       \n      Example: \n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")},Tr.ngModelWarning=function(e){console.warn("\n    It looks like you're using ngModel on the same form field as "+e+". \n    Support for using the ngModel input property and ngModelChange event with \n    reactive form directives has been deprecated in Angular v6 and will be removed \n    in Angular v7.\n    \n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/"+("formControl"===e?"FormControlDirective":"FormControlName")+"#use-with-ngmodel\n    ")},Tr);function Tr(){}fn={provide:Le,useExisting:f.forwardRef(function(){return Or}),multi:!0};function Pr(e,t){return null==e?""+t:(e+": "+(t=t&&"object"==typeof t?"Object":t)).slice(0,50)}var Or=(Object.defineProperty(xr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),xr.prototype.writeValue=function(e){this.value=e;var t=this._getOptionId(e);null==t&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);e=Pr(t,e);this._renderer.setProperty(this._elementRef.nativeElement,"value",e)},xr.prototype.registerOnChange=function(t){var n=this;this.onChange=function(e){n.value=n._getOptionValue(e),t(n.value)}},xr.prototype.registerOnTouched=function(e){this.onTouched=e},xr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},xr.prototype._registerOption=function(){return(this._idCounter++).toString()},xr.prototype._getOptionId=function(e){var t,n;try{for(var r=G(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o),e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},xr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t):e},z([f.Input(),q("design:type",Function),q("design:paramtypes",[Function])],xr.prototype,"compareWith",null),z([f.Directive({selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[fn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],xr));function xr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ÉµlooseIdentical"]}Object.defineProperty(Lr.prototype,"ngValue",{set:function(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(Pr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Lr.prototype,"value",{set:function(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),Lr.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Lr.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},z([f.Input("ngValue"),q("design:type",Object),q("design:paramtypes",[Object])],Lr.prototype,"ngValue",null),z([f.Input("value"),q("design:type",Object),q("design:paramtypes",[Object])],Lr.prototype,"value",null),pn=z([f.Directive({selector:"option"}),V(2,f.Optional()),V(2,f.Host()),q("design:paramtypes",[f.ElementRef,f.Renderer2,Or])],Lr);function Lr(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption())}mn={provide:Le,useExisting:f.forwardRef(function(){return Rr}),multi:!0};function Nr(e,t){return null==e?""+t:(e+": "+(t=(t="string"==typeof t?"'"+t+"'":t)&&"object"==typeof t?"Object":t)).slice(0,50)}var Rr=(Object.defineProperty(Mr.prototype,"compareWith",{set:function(e){if("function"!=typeof e)throw new Error("compareWith must be a function, but received "+JSON.stringify(e));this._compareWith=e},enumerable:!0,configurable:!0}),Mr.prototype.writeValue=function(e){var n,t=this;this.value=e,e=Array.isArray(e)?(n=e.map(function(e){return t._getOptionId(e)}),function(e,t){e._setSelected(-1<n.indexOf(t.toString()))}):function(e,t){e._setSelected(!1)},this._optionMap.forEach(e)},Mr.prototype.registerOnChange=function(s){var a=this;this.onChange=function(e){var t=[];if(e.hasOwnProperty("selectedOptions"))for(var n=e.selectedOptions,r=0;r<n.length;r++){var i=n.item(r),o=a._getOptionValue(i.value);t.push(o)}else for(n=e.options,r=0;r<n.length;r++)(i=n.item(r)).selected&&(o=a._getOptionValue(i.value),t.push(o));a.value=t,s(t)}},Mr.prototype.registerOnTouched=function(e){this.onTouched=e},Mr.prototype.setDisabledState=function(e){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",e)},Mr.prototype._registerOption=function(e){var t=(this._idCounter++).toString();return this._optionMap.set(t,e),t},Mr.prototype._getOptionId=function(e){var t,n;try{for(var r=G(Array.from(this._optionMap.keys())),i=r.next();!i.done;i=r.next()){var o=i.value;if(this._compareWith(this._optionMap.get(o)._value,e))return o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},Mr.prototype._getOptionValue=function(e){var t=e.split(":")[0];return this._optionMap.has(t)?this._optionMap.get(t)._value:e},z([f.Input(),q("design:type",Function),q("design:paramtypes",[Function])],Mr.prototype,"compareWith",null),z([f.Directive({selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[mn]}),q("design:paramtypes",[f.Renderer2,f.ElementRef])],Mr));function Mr(e,t){this._renderer=e,this._elementRef=t,this._optionMap=new Map,this._idCounter=0,this.onChange=function(e){},this.onTouched=function(){},this._compareWith=f["ÉµlooseIdentical"]}Object.defineProperty(Ur.prototype,"ngValue",{set:function(e){null!=this._select&&(this._value=e,this._setElementValue(Nr(this.id,e)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(Ur.prototype,"value",{set:function(e){this._select?(this._value=e,this._setElementValue(Nr(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)},enumerable:!0,configurable:!0}),Ur.prototype._setElementValue=function(e){this._renderer.setProperty(this._element.nativeElement,"value",e)},Ur.prototype._setSelected=function(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)},Ur.prototype.ngOnDestroy=function(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))},z([f.Input("ngValue"),q("design:type",Object),q("design:paramtypes",[Object])],Ur.prototype,"ngValue",null),z([f.Input("value"),q("design:type",Object),q("design:paramtypes",[Object])],Ur.prototype,"value",null),Ye=z([f.Directive({selector:"option"}),V(2,f.Optional()),V(2,f.Host()),q("design:paramtypes",[f.ElementRef,f.Renderer2,Rr])],Ur);function Ur(e,t,n){this._element=e,this._renderer=t,this._select=n,this._select&&(this.id=this._select._registerOption(this))}function Dr(e,t){return $(t.path,[e])}function Fr(t,n){var r,i,o,e,s;t||Vr(n,"Cannot find control with"),n.valueAccessor||Vr(n,"No value accessor for form control with"),t.validator=er.compose([t.validator,n.validator]),t.asyncValidator=er.composeAsync([t.asyncValidator,n.asyncValidator]),n.valueAccessor.writeValue(t.value),r=t,(i=n).valueAccessor.registerOnChange(function(e){r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&jr(r,i)}),o=n,t.registerOnChange(function(e,t){o.valueAccessor.writeValue(e),t&&o.viewToModelUpdate(e)}),e=t,(s=n).valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&jr(e,s),"submit"!==e.updateOn&&e.markAsTouched()}),n.valueAccessor.setDisabledState&&t.registerOnDisabledChange(function(e){n.valueAccessor.setDisabledState(e)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(function(){return t.updateValueAndValidity()})})}function jr(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Br(e,t){null==e&&Vr(t,"Cannot find control with"),e.validator=er.compose([e.validator,t.validator]),e.asyncValidator=er.composeAsync([e.asyncValidator,t.asyncValidator])}function zr(e){return Vr(e,"There is no FormControl instance attached to form control element with")}function Vr(e,t){e=1<e.path.length?"path: '"+e.path.join(" -> ")+"'":e.path[0]?"name: '"+e.path+"'":"unspecified name attribute";throw new Error(t+" "+e)}function qr(e){return null!=e?er.compose(e.map(cr)):null}function Kr(e){return null!=e?er.composeAsync(e.map(lr)):null}function Hr(e,t){if(e.hasOwnProperty("model")){e=e.model;return e.isFirstChange()||!f["ÉµlooseIdentical"](t,e.currentValue)}}var Gr=[or,Sr,pr,Or,Rr,yr];function Wr(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function $r(n,e){if(!e)return null;Array.isArray(e)||Vr(n,"Value accessor was not provided as an array for form control with");var r=void 0,i=void 0,o=void 0;return e.forEach(function(e){var t;e.constructor===ar?r=e:(t=e,Gr.some(function(e){return t.constructor===e})?(i&&Vr(n,"More than one built-in value accessor matches form control with"),i=e):(o&&Vr(n,"More than one custom value accessor matches form control with"),o=e))}),o||i||r||(Vr(n,"No valid value accessor for form control with"),null)}function Yr(e,t){t=e.indexOf(t);-1<t&&e.splice(t,1)}function Jr(e,t,n,r){f.isDevMode()&&"never"!==r&&((null!==r&&"once"!==r||t._ngModelWarningSentOnce)&&("always"!==r||n._ngModelWarningSent)||(kr.ngModelWarning(e),t._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}var Zr,Xr=(F(Qr,Zr=b),Qr.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},Qr.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormGroup(this)},Object.defineProperty(Qr.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"path",{get:function(){return Dr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"validator",{get:function(){return qr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Qr.prototype,"asyncValidator",{get:function(){return Kr(this._asyncValidators)},enumerable:!0,configurable:!0}),Qr.prototype._checkParentType=function(){},Qr);function Qr(){return null!==Zr&&Zr.apply(this,arguments)||this}Object.defineProperty(ei.prototype,"ngClassUntouched",{get:function(){return!!this._cd.control&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"ngClassTouched",{get:function(){return!!this._cd.control&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"ngClassPristine",{get:function(){return!!this._cd.control&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"ngClassDirty",{get:function(){return!!this._cd.control&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"ngClassValid",{get:function(){return!!this._cd.control&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"ngClassInvalid",{get:function(){return!!this._cd.control&&this._cd.control.invalid},enumerable:!0,configurable:!0}),Object.defineProperty(ei.prototype,"ngClassPending",{get:function(){return!!this._cd.control&&this._cd.control.pending},enumerable:!0,configurable:!0}),Wn=ei;function ei(e){this._cd=e}var ti,Me={"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid","[class.ng-pending]":"ngClassPending"},ct=(F(ni,ti=Wn),z([f.Directive({selector:"[formControlName],[ngModel],[formControl]",host:Me}),V(0,f.Self()),q("design:paramtypes",[gr])],ni));function ni(e){return ti.call(this,e)||this}var ri,jt=(F(ii,ri=Wn),z([f.Directive({selector:"[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]",host:Me}),V(0,f.Self()),q("design:paramtypes",[b])],ii));function ii(e){return ri.call(this,e)||this}var oi="VALID",si="INVALID",ai="PENDING",ui="DISABLED";function ci(e){e=pi(e)?e.validators:e;return Array.isArray(e)?qr(e):e||null}function li(e,t){e=pi(t)?t.asyncValidators:e;return Array.isArray(e)?Kr(e):e||null}function pi(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}Object.defineProperty(di.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(di.prototype,"valid",{get:function(){return this.status===oi},enumerable:!0,configurable:!0}),Object.defineProperty(di.prototype,"invalid",{get:function(){return this.status===si},enumerable:!0,configurable:!0}),Object.defineProperty(di.prototype,"pending",{get:function(){return this.status==ai},enumerable:!0,configurable:!0}),Object.defineProperty(di.prototype,"disabled",{get:function(){return this.status===ui},enumerable:!0,configurable:!0}),Object.defineProperty(di.prototype,"enabled",{get:function(){return this.status!==ui},enumerable:!0,configurable:!0}),Object.defineProperty(di.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(di.prototype,"untouched",{get:function(){return!this.touched},enumerable:!0,configurable:!0}),Object.defineProperty(di.prototype,"updateOn",{get:function(){return this._updateOn||(this.parent?this.parent.updateOn:"change")},enumerable:!0,configurable:!0}),di.prototype.setValidators=function(e){this.validator=ci(e)},di.prototype.setAsyncValidators=function(e){this.asyncValidator=li(e)},di.prototype.clearValidators=function(){this.validator=null},di.prototype.clearAsyncValidators=function(){this.asyncValidator=null},di.prototype.markAsTouched=function(e){void 0===e&&(e={}),this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)},di.prototype.markAsUntouched=function(e){void 0===e&&(e={}),this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},di.prototype.markAsDirty=function(e){void 0===e&&(e={}),this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)},di.prototype.markAsPristine=function(e){void 0===e&&(e={}),this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},di.prototype.markAsPending=function(e){void 0===e&&(e={}),!(this.status=ai)!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)},di.prototype.disable=function(t){void 0===t&&(t={}),this.status=ui,this.errors=null,this._forEachChild(function(e){e.disable(j({},t,{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!0)})},di.prototype.enable=function(t){void 0===t&&(t={}),this.status=oi,this._forEachChild(function(e){e.enable(j({},t,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(t),this._onDisabledChange.forEach(function(e){return e(!1)})},di.prototype._updateAncestors=function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),this._parent._updatePristine(),this._parent._updateTouched())},di.prototype.setParent=function(e){this._parent=e},di.prototype.updateValueAndValidity=function(e){void 0===e&&(e={}),this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==oi&&this.status!==ai||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)},di.prototype._updateTreeValidity=function(t){void 0===t&&(t={emitEvent:!0}),this._forEachChild(function(e){return e._updateTreeValidity(t)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})},di.prototype._setInitialStatus=function(){this.status=this._allControlsDisabled()?ui:oi},di.prototype._runValidator=function(){return this.validator?this.validator(this):null},di.prototype._runAsyncValidator=function(t){var e,n=this;this.asyncValidator&&(this.status=ai,e=rr(this.asyncValidator(this)),this._asyncValidationSubscription=e.subscribe(function(e){return n.setErrors(e,{emitEvent:t})}))},di.prototype._cancelExistingSubscription=function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()},di.prototype.setErrors=function(e,t){void 0===t&&(t={}),this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)},di.prototype.get=function(e){return t=this,n=".",null==(e=e)||(e=!(e instanceof Array)?e.split(n):e)instanceof Array&&0===e.length?null:e.reduce(function(e,t){return e instanceof mi?e.controls.hasOwnProperty(t)?e.controls[t]:null:e instanceof Si&&e.at(t)||null},t);var t,n},di.prototype.getError=function(e,t){t=t?this.get(t):this;return t&&t.errors?t.errors[e]:null},di.prototype.hasError=function(e,t){return!!this.getError(e,t)},Object.defineProperty(di.prototype,"root",{get:function(){for(var e=this;e._parent;)e=e._parent;return e},enumerable:!0,configurable:!0}),di.prototype._updateControlsErrors=function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)},di.prototype._initObservables=function(){this.valueChanges=new f.EventEmitter,this.statusChanges=new f.EventEmitter},di.prototype._calculateStatus=function(){return this._allControlsDisabled()?ui:this.errors?si:this._anyControlsHaveStatus(ai)?ai:this._anyControlsHaveStatus(si)?si:oi},di.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status===t})},di.prototype._anyControlsDirty=function(){return this._anyControls(function(e){return e.dirty})},di.prototype._anyControlsTouched=function(){return this._anyControls(function(e){return e.touched})},di.prototype._updatePristine=function(e){void 0===e&&(e={}),this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)},di.prototype._updateTouched=function(e){void 0===e&&(e={}),this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)},di.prototype._isBoxedValue=function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e},di.prototype._registerOnCollectionChange=function(e){this._onCollectionChange=e},di.prototype._setUpdateStrategy=function(e){pi(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)},at=di;function di(e,t){this.validator=e,this.asyncValidator=t,this._onCollectionChange=function(){},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}var fi,hi=(F(gi,fi=at),gi.prototype.setValue=function(e,t){var n=this;void 0===t&&(t={}),this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(function(e){return e(n.value,!1!==t.emitViewToModelChange)}),this.updateValueAndValidity(t)},gi.prototype.patchValue=function(e,t){this.setValue(e,t=void 0===t?{}:t)},gi.prototype.reset=function(e,t){void 0===t&&(t={}),this._applyFormState(e=void 0===e?null:e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1},gi.prototype._updateValue=function(){},gi.prototype._anyControls=function(e){return!1},gi.prototype._allControlsDisabled=function(){return this.disabled},gi.prototype.registerOnChange=function(e){this._onChange.push(e)},gi.prototype._clearChangeFns=function(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=function(){}},gi.prototype.registerOnDisabledChange=function(e){this._onDisabledChange.push(e)},gi.prototype._forEachChild=function(e){},gi.prototype._syncPendingControls=function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0)},gi.prototype._applyFormState=function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e},gi);function gi(e,t,n){void 0===e&&(e=null);n=fi.call(this,ci(t),li(n,t))||this;return n._onChange=[],n._applyFormState(e),n._setUpdateStrategy(t),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n._initObservables(),n}var vi,mi=(F(yi,vi=at),yi.prototype.registerControl=function(e,t){return this.controls[e]||((this.controls[e]=t).setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)},yi.prototype.addControl=function(e,t){this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},yi.prototype.removeControl=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity(),this._onCollectionChange()},yi.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity(),this._onCollectionChange()},yi.prototype.contains=function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled},yi.prototype.setValue=function(t,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(t),Object.keys(t).forEach(function(e){r._throwIfControlMissing(e),r.controls[e].setValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},yi.prototype.patchValue=function(t,n){var r=this;void 0===n&&(n={}),Object.keys(t).forEach(function(e){r.controls[e]&&r.controls[e].patchValue(t[e],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},yi.prototype.reset=function(n,r){void 0===n&&(n={}),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},yi.prototype.getRawValue=function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof hi?t.value:t.getRawValue(),e})},yi.prototype._syncPendingControls=function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e},yi.prototype._throwIfControlMissing=function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: "+e+".")},yi.prototype._forEachChild=function(t){var n=this;Object.keys(this.controls).forEach(function(e){return t(n.controls[e],e)})},yi.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t),e._registerOnCollectionChange(t._onCollectionChange)})},yi.prototype._updateValue=function(){this.value=this._reduceValue()},yi.prototype._anyControls=function(n){var r=this,i=!1;return this._forEachChild(function(e,t){i=i||r.contains(t)&&n(e)}),i},yi.prototype._reduceValue=function(){var r=this;return this._reduceChildren({},function(e,t,n){return(t.enabled||r.disabled)&&(e[n]=t.value),e})},yi.prototype._reduceChildren=function(e,n){var r=e;return this._forEachChild(function(e,t){r=n(r,e,t)}),r},yi.prototype._allControlsDisabled=function(){var t,e;try{for(var n=G(Object.keys(this.controls)),r=n.next();!r.done;r=n.next()){var i=r.value;if(this.controls[i].enabled)return!1}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<Object.keys(this.controls).length||this.disabled},yi.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control with name: '"+t+"'.")})},yi);function yi(e,t,n){n=vi.call(this,ci(t),li(n,t))||this;return n.controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var bi,Si=(F(wi,bi=at),wi.prototype.at=function(e){return this.controls[e]},wi.prototype.push=function(e){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()},wi.prototype.insert=function(e,t){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity()},wi.prototype.removeAt=function(e){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity()},wi.prototype.setControl=function(e,t){this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity(),this._onCollectionChange()},Object.defineProperty(wi.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),wi.prototype.setValue=function(e,n){var r=this;void 0===n&&(n={}),this._checkAllValuesPresent(e),e.forEach(function(e,t){r._throwIfControlMissing(t),r.at(t).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},wi.prototype.patchValue=function(e,n){var r=this;void 0===n&&(n={}),e.forEach(function(e,t){r.at(t)&&r.at(t).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)},wi.prototype.reset=function(n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this._forEachChild(function(e,t){e.reset(n[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this._updatePristine(r),this._updateTouched(r)},wi.prototype.getRawValue=function(){return this.controls.map(function(e){return e instanceof hi?e.value:e.getRawValue()})},wi.prototype._syncPendingControls=function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e},wi.prototype._throwIfControlMissing=function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index "+e)},wi.prototype._forEachChild=function(n){this.controls.forEach(function(e,t){n(e,t)})},wi.prototype._updateValue=function(){var t=this;this.value=this.controls.filter(function(e){return e.enabled||t.disabled}).map(function(e){return e.value})},wi.prototype._anyControls=function(t){return this.controls.some(function(e){return e.enabled&&t(e)})},wi.prototype._setUpControls=function(){var t=this;this._forEachChild(function(e){return t._registerControl(e)})},wi.prototype._checkAllValuesPresent=function(n){this._forEachChild(function(e,t){if(void 0===n[t])throw new Error("Must supply a value for form control at index: "+t+".")})},wi.prototype._allControlsDisabled=function(){var t,e;try{for(var n=G(this.controls),r=n.next();!r.done;r=n.next())if(r.value.enabled)return!1}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return 0<this.controls.length||this.disabled},wi.prototype._registerControl=function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)},wi);function wi(e,t,n){n=bi.call(this,ci(t),li(n,t))||this;return n.controls=e,n._initObservables(),n._setUpdateStrategy(t),n._setUpControls(),n.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),n}var Ci,p={provide:b,useExisting:f.forwardRef(function(){return Ei})},_i=Promise.resolve(null),Ei=(F(Ai,Ci=b),Ai.prototype.ngAfterViewInit=function(){this._setUpdateStrategy()},Object.defineProperty(Ai.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(Ai.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(Ai.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Ai.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),Ai.prototype.addControl=function(t){var n=this;_i.then(function(){var e=n._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Fr(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),n._directives.push(t)})},Ai.prototype.getControl=function(e){return this.form.get(e.path)},Ai.prototype.removeControl=function(t){var n=this;_i.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name),Yr(n._directives,t)})},Ai.prototype.addFormGroup=function(n){var r=this;_i.then(function(){var e=r._findContainer(n.path),t=new mi({});Br(t,n),e.registerControl(n.name,t),t.updateValueAndValidity({emitEvent:!1})})},Ai.prototype.removeFormGroup=function(t){var n=this;_i.then(function(){var e=n._findContainer(t.path);e&&e.removeControl(t.name)})},Ai.prototype.getFormGroup=function(e){return this.form.get(e.path)},Ai.prototype.updateModel=function(e,t){var n=this;_i.then(function(){n.form.get(e.path).setValue(t)})},Ai.prototype.setValue=function(e){this.control.setValue(e)},Ai.prototype.onSubmit=function(e){return this.submitted=!0,Wr(this.form,this._directives),this.ngSubmit.emit(e),!1},Ai.prototype.onReset=function(){this.resetForm()},Ai.prototype.resetForm=function(e){this.form.reset(e=void 0===e?void 0:e),this.submitted=!1},Ai.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)},Ai.prototype._findContainer=function(e){return e.pop(),e.length?this.form.get(e):this.form},z([f.Input("ngFormOptions"),q("design:type",Object)],Ai.prototype,"options",void 0),z([f.Directive({selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[p],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}),V(0,f.Optional()),V(0,f.Self()),V(0,f.Inject(S)),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(C)),q("design:paramtypes",[Array,Array])],Ai));function Ai(e,t){var n=Ci.call(this)||this;return n.submitted=!1,n._directives=[],n.ngSubmit=new f.EventEmitter,n.form=new mi({},qr(e),Kr(t)),n}var Ii=(ki.modelParentException=function(){throw new Error('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+Cr+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+Ir)},ki.formGroupNameException=function(){throw new Error("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+_r+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+Ar)},ki.missingNameException=function(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},ki.modelGroupParentException=function(){throw new Error("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+_r+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+Ar)},ki);function ki(){}var Ti,Pi,cn={provide:b,useExisting:f.forwardRef(function(){return Oi})},Oi=(F(xi,Ti=Xr),(Pi=xi).prototype._checkParentType=function(){this._parent instanceof Pi||this._parent instanceof Ei||Ii.modelGroupParentException()},z([f.Input("ngModelGroup"),q("design:type",String)],xi.prototype,"name",void 0),Pi=z([f.Directive({selector:"[ngModelGroup]",providers:[cn],exportAs:"ngModelGroup"}),V(0,f.Host()),V(0,f.SkipSelf()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(S)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),q("design:paramtypes",[b,Array,Array])],xi));function xi(e,t,n){var r=Ti.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Li,dn={provide:gr,useExisting:f.forwardRef(function(){return Ri})},Ni=Promise.resolve(null),Ri=(F(Mi,Li=gr),Mi.prototype.ngOnChanges=function(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),Hr(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},Mi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(Mi.prototype,"path",{get:function(){return this._parent?Dr(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(Mi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Mi.prototype,"validator",{get:function(){return qr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Mi.prototype,"asyncValidator",{get:function(){return Kr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Mi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Mi.prototype._setUpControl=function(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},Mi.prototype._setUpdateStrategy=function(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)},Mi.prototype._isStandalone=function(){return!this._parent||!(!this.options||!this.options.standalone)},Mi.prototype._setUpStandalone=function(){Fr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})},Mi.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},Mi.prototype._checkParentType=function(){!(this._parent instanceof Oi)&&this._parent instanceof Xr?Ii.formGroupNameException():this._parent instanceof Oi||this._parent instanceof Ei||Ii.modelParentException()},Mi.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||Ii.missingNameException()},Mi.prototype._updateValue=function(e){var t=this;Ni.then(function(){t.control.setValue(e,{emitViewToModelChange:!1})})},Mi.prototype._updateDisabled=function(e){var t=this,e=e.isDisabled.currentValue,n=""===e||e&&"false"!==e;Ni.then(function(){n&&!t.control.disabled?t.control.disable():!n&&t.control.disabled&&t.control.enable()})},z([f.Input(),q("design:type",String)],Mi.prototype,"name",void 0),z([f.Input("disabled"),q("design:type",Boolean)],Mi.prototype,"isDisabled",void 0),z([f.Input("ngModel"),q("design:type",Object)],Mi.prototype,"model",void 0),z([f.Input("ngModelOptions"),q("design:type",Object)],Mi.prototype,"options",void 0),z([f.Output("ngModelChange"),q("design:type",Object)],Mi.prototype,"update",void 0),z([f.Directive({selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[dn],exportAs:"ngModel"}),V(0,f.Optional()),V(0,f.Host()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(S)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),V(3,f.Optional()),V(3,f.Self()),V(3,f.Inject(Le)),q("design:paramtypes",[b,Array,Array,Array])],Mi));function Mi(e,t,n,r){var i=Li.call(this)||this;return i.control=new hi,i._registered=!1,i.update=new f.EventEmitter,i._parent=e,i._rawValidators=t||[],i._rawAsyncValidators=n||[],i.valueAccessor=$r(i,r),i}var Ui,Di,Fi=new f.InjectionToken("NgModelWithFormControlWarning"),fn={provide:gr,useExisting:f.forwardRef(function(){return ji})},ji=(F(Bi,Ui=gr),Di=Bi,Object.defineProperty(Bi.prototype,"isDisabled",{set:function(e){kr.disabledAttrWarning()},enumerable:!0,configurable:!0}),Bi.prototype.ngOnChanges=function(e){this._isControlChanged(e)&&(Fr(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})),Hr(e,this.viewModel)&&(Jr("formControl",Di,this,this._ngModelWarningConfig),this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(Bi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(Bi.prototype,"validator",{get:function(){return qr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Bi.prototype,"asyncValidator",{get:function(){return Kr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(Bi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Bi.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Bi.prototype._isControlChanged=function(e){return e.hasOwnProperty("form")},Bi._ngModelWarningSentOnce=!1,z([f.Input("formControl"),q("design:type",hi)],Bi.prototype,"form",void 0),z([f.Input("disabled"),q("design:type",Boolean),q("design:paramtypes",[Boolean])],Bi.prototype,"isDisabled",null),z([f.Input("ngModel"),q("design:type",Object)],Bi.prototype,"model",void 0),z([f.Output("ngModelChange"),q("design:type",Object)],Bi.prototype,"update",void 0),Di=z([f.Directive({selector:"[formControl]",providers:[fn],exportAs:"ngForm"}),V(0,f.Optional()),V(0,f.Self()),V(0,f.Inject(S)),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(C)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(Le)),V(3,f.Optional()),V(3,f.Inject(Fi)),q("design:paramtypes",[Array,Array,Array,Object])],Bi));function Bi(e,t,n,r){var i=Ui.call(this)||this;return i._ngModelWarningConfig=r,i.update=new f.EventEmitter,i._ngModelWarningSent=!1,i._rawValidators=e||[],i._rawAsyncValidators=t||[],i.valueAccessor=$r(i,n),i}var zi,mn={provide:b,useExisting:f.forwardRef(function(){return Vi})},Vi=(F(qi,zi=b),qi.prototype.ngOnChanges=function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())},Object.defineProperty(qi.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(qi.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(qi.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),qi.prototype.addControl=function(e){var t=this.form.get(e.path);return Fr(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t},qi.prototype.getControl=function(e){return this.form.get(e.path)},qi.prototype.removeControl=function(e){Yr(this.directives,e)},qi.prototype.addFormGroup=function(e){var t=this.form.get(e.path);Br(t,e),t.updateValueAndValidity({emitEvent:!1})},qi.prototype.removeFormGroup=function(e){},qi.prototype.getFormGroup=function(e){return this.form.get(e.path)},qi.prototype.addFormArray=function(e){var t=this.form.get(e.path);Br(t,e),t.updateValueAndValidity({emitEvent:!1})},qi.prototype.removeFormArray=function(e){},qi.prototype.getFormArray=function(e){return this.form.get(e.path)},qi.prototype.updateModel=function(e,t){this.form.get(e.path).setValue(t)},qi.prototype.onSubmit=function(e){return this.submitted=!0,Wr(this.form,this.directives),this.ngSubmit.emit(e),!1},qi.prototype.onReset=function(){this.resetForm()},qi.prototype.resetForm=function(e){this.form.reset(e=void 0===e?void 0:e),this.submitted=!1},qi.prototype._updateDomValue=function(){var i=this;this.directives.forEach(function(e){var t,n,r=i.form.get(e.path);e.control!==r&&(t=e.control,(n=e).valueAccessor.registerOnChange(function(){return zr(n)}),n.valueAccessor.registerOnTouched(function(){return zr(n)}),n._rawValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),n._rawAsyncValidators.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(null)}),t&&t._clearChangeFns(),r&&Fr(r,e),e.control=r)}),this.form._updateTreeValidity({emitEvent:!1})},qi.prototype._updateRegistrations=function(){var e=this;this.form._registerOnCollectionChange(function(){return e._updateDomValue()}),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){}),this._oldForm=this.form},qi.prototype._updateValidators=function(){var e=qr(this._validators);this.form.validator=er.compose([this.form.validator,e]);e=Kr(this._asyncValidators);this.form.asyncValidator=er.composeAsync([this.form.asyncValidator,e])},qi.prototype._checkFormPresent=function(){this.form||kr.missingFormException()},z([f.Input("formGroup"),q("design:type",mi)],qi.prototype,"form",void 0),z([f.Output(),q("design:type",Object)],qi.prototype,"ngSubmit",void 0),z([f.Directive({selector:"[formGroup]",providers:[mn],host:{"(submit)":"onSubmit($event)","(reset)":"onReset()"},exportAs:"ngForm"}),V(0,f.Optional()),V(0,f.Self()),V(0,f.Inject(S)),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(C)),q("design:paramtypes",[Array,Array])],qi));function qi(e,t){var n=zi.call(this)||this;return n._validators=e,n._asyncValidators=t,n.submitted=!1,n.directives=[],n.form=null,n.ngSubmit=new f.EventEmitter,n}var Ki,Wn={provide:b,useExisting:f.forwardRef(function(){return Hi})},Hi=(F(Gi,Ki=Xr),Gi.prototype._checkParentType=function(){Ji(this._parent)&&kr.groupParentException()},z([f.Input("formGroupName"),q("design:type",String)],Gi.prototype,"name",void 0),z([f.Directive({selector:"[formGroupName]",providers:[Wn]}),V(0,f.Optional()),V(0,f.Host()),V(0,f.SkipSelf()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(S)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),q("design:paramtypes",[b,Array,Array])],Gi));function Gi(e,t,n){var r=Ki.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}var Wi,Me={provide:b,useExisting:f.forwardRef(function(){return $i})},$i=(F(Yi,Wi=b),Yi.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},Yi.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeFormArray(this)},Object.defineProperty(Yi.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(Yi.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(Yi.prototype,"path",{get:function(){return Dr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(Yi.prototype,"validator",{get:function(){return qr(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(Yi.prototype,"asyncValidator",{get:function(){return Kr(this._asyncValidators)},enumerable:!0,configurable:!0}),Yi.prototype._checkParentType=function(){Ji(this._parent)&&kr.arrayParentException()},z([f.Input("formArrayName"),q("design:type",String)],Yi.prototype,"name",void 0),z([f.Directive({selector:"[formArrayName]",providers:[Me]}),V(0,f.Optional()),V(0,f.Host()),V(0,f.SkipSelf()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(S)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),q("design:paramtypes",[b,Array,Array])],Yi));function Yi(e,t,n){var r=Wi.call(this)||this;return r._parent=e,r._validators=t,r._asyncValidators=n,r}function Ji(e){return!(e instanceof Hi||e instanceof Vi||e instanceof $i)}var Zi,Xi,at={provide:gr,useExisting:f.forwardRef(function(){return Qi})},Qi=(F(eo,Zi=gr),Xi=eo,Object.defineProperty(eo.prototype,"isDisabled",{set:function(e){kr.disabledAttrWarning()},enumerable:!0,configurable:!0}),eo.prototype.ngOnChanges=function(e){this._added||this._setUpControl(),Hr(e,this.viewModel)&&(Jr("formControlName",Xi,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},eo.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},eo.prototype.viewToModelUpdate=function(e){this.viewModel=e,this.update.emit(e)},Object.defineProperty(eo.prototype,"path",{get:function(){return Dr(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"validator",{get:function(){return qr(this._rawValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(eo.prototype,"asyncValidator",{get:function(){return Kr(this._rawAsyncValidators)},enumerable:!0,configurable:!0}),eo.prototype._checkParentType=function(){!(this._parent instanceof Hi)&&this._parent instanceof Xr?kr.ngModelGroupException():this._parent instanceof Hi||this._parent instanceof Vi||this._parent instanceof $i||kr.controlParentException()},eo.prototype._setUpControl=function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0},eo._ngModelWarningSentOnce=!1,z([f.Input("formControlName"),q("design:type",String)],eo.prototype,"name",void 0),z([f.Input("disabled"),q("design:type",Boolean),q("design:paramtypes",[Boolean])],eo.prototype,"isDisabled",null),z([f.Input("ngModel"),q("design:type",Object)],eo.prototype,"model",void 0),z([f.Output("ngModelChange"),q("design:type",Object)],eo.prototype,"update",void 0),Xi=z([f.Directive({selector:"[formControlName]",providers:[at]}),V(0,f.Optional()),V(0,f.Host()),V(0,f.SkipSelf()),V(1,f.Optional()),V(1,f.Self()),V(1,f.Inject(S)),V(2,f.Optional()),V(2,f.Self()),V(2,f.Inject(C)),V(3,f.Optional()),V(3,f.Self()),V(3,f.Inject(Le)),V(4,f.Optional()),V(4,f.Inject(Fi)),q("design:paramtypes",[b,Array,Array,Array,Object])],eo));function eo(e,t,n,r,i){var o=Zi.call(this)||this;return o._ngModelWarningConfig=i,o._added=!1,o.update=new f.EventEmitter,o._ngModelWarningSent=!1,o._parent=e,o._rawValidators=t||[],o._rawAsyncValidators=n||[],o.valueAccessor=$r(o,r),o}var p={provide:S,useExisting:f.forwardRef(function(){return to}),multi:!0},cn={provide:S,useExisting:f.forwardRef(function(){return io}),multi:!0},to=(Object.defineProperty(no.prototype,"required",{get:function(){return this._required},set:function(e){this._required=null!=e&&!1!==e&&""+e!="false",this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),no.prototype.validate=function(e){return this.required?er.required(e):null},no.prototype.registerOnValidatorChange=function(e){this._onChange=e},z([f.Input(),q("design:type",Object),q("design:paramtypes",[Object])],no.prototype,"required",null),z([f.Directive({selector:":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]",providers:[p],host:{"[attr.required]":'required ? "" : null'}})],no));function no(){}var ro,io=(F(oo,ro=to),oo.prototype.validate=function(e){return this.required?er.requiredTrue(e):null},z([f.Directive({selector:"input[type=checkbox][required][formControlName],input[type=checkbox][required][formControl],input[type=checkbox][required][ngModel]",providers:[cn],host:{"[attr.required]":'required ? "" : null'}})],oo));function oo(){return null!==ro&&ro.apply(this,arguments)||this}var dn={provide:S,useExisting:f.forwardRef(function(){return so}),multi:!0},so=(Object.defineProperty(ao.prototype,"email",{set:function(e){this._enabled=""===e||!0===e||"true"===e,this._onChange&&this._onChange()},enumerable:!0,configurable:!0}),ao.prototype.validate=function(e){return this._enabled?er.email(e):null},ao.prototype.registerOnValidatorChange=function(e){this._onChange=e},z([f.Input(),q("design:type",Object),q("design:paramtypes",[Object])],ao.prototype,"email",null),z([f.Directive({selector:"[email][formControlName],[email][formControl],[email][ngModel]",providers:[dn]})],ao));function ao(){}var fn={provide:S,useExisting:f.forwardRef(function(){return uo}),multi:!0},uo=(co.prototype.ngOnChanges=function(e){"minlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},co.prototype.validate=function(e){return null==this.minlength?null:this._validator(e)},co.prototype.registerOnValidatorChange=function(e){this._onChange=e},co.prototype._createValidator=function(){this._validator=er.minLength(parseInt(this.minlength,10))},z([f.Input(),q("design:type",String)],co.prototype,"minlength",void 0),z([f.Directive({selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[fn],host:{"[attr.minlength]":"minlength ? minlength : null"}})],co));function co(){}var mn={provide:S,useExisting:f.forwardRef(function(){return lo}),multi:!0},lo=(po.prototype.ngOnChanges=function(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())},po.prototype.validate=function(e){return null!=this.maxlength?this._validator(e):null},po.prototype.registerOnValidatorChange=function(e){this._onChange=e},po.prototype._createValidator=function(){this._validator=er.maxLength(parseInt(this.maxlength,10))},z([f.Input(),q("design:type",String)],po.prototype,"maxlength",void 0),z([f.Directive({selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[mn],host:{"[attr.maxlength]":"maxlength ? maxlength : null"}})],po));function po(){}var Wn={provide:S,useExisting:f.forwardRef(function(){return fo}),multi:!0},fo=(ho.prototype.ngOnChanges=function(e){"pattern"in e&&(this._createValidator(),this._onChange&&this._onChange())},ho.prototype.validate=function(e){return this._validator(e)},ho.prototype.registerOnValidatorChange=function(e){this._onChange=e},ho.prototype._createValidator=function(){this._validator=er.pattern(this.pattern)},z([f.Input(),q("design:type",Object)],ho.prototype,"pattern",void 0),z([f.Directive({selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[Wn],host:{"[attr.pattern]":"pattern ? pattern : null"}})],ho));function ho(){}go.prototype.group=function(e,t){void 0===t&&(t=null);var n=this._reduceControls(e),e=null!=t?t.validator:null,t=null!=t?t.asyncValidator:null;return new mi(n,e,t)},go.prototype.control=function(e,t,n){return new hi(e,t,n)},go.prototype.array=function(e,t,n){var r=this,e=e.map(function(e){return r._createControl(e)});return new Si(e,t,n)},go.prototype._reduceControls=function(t){var n=this,r={};return Object.keys(t).forEach(function(e){r[e]=n._createControl(t[e])}),r},go.prototype._createControl=function(e){if(e instanceof hi||e instanceof mi||e instanceof Si)return e;if(Array.isArray(e)){var t=e[0],n=1<e.length?e[1]:null,r=2<e.length?e[2]:null;return this.control(t,n,r)}return this.control(e)},Me=z([f.Injectable()],go);function go(){}new f.Version("6.1.10");function vo(){}at=[z([f.Directive({selector:"form:not([ngNoForm]):not([ngNativeValidate])",host:{novalidate:""}})],vo),pn,Ye,ar,pr,Sr,or,Or,Rr,yr,ct,jt,to,uo,lo,fo,io,so],C=[Ri,Oi,Ei],Le=[ji,Vi,Qi,Hi,$i],b=z([f.NgModule({declarations:at,exports:at})],mo);function mo(){}p=z([f.NgModule({declarations:C,providers:[ln],exports:[b,C]})],yo);function yo(){}var bo;(bo=So).withConfig=function(e){return{ngModule:bo,providers:[{provide:Fi,useValue:e.warnOnNgModelWithFormControl}]}},bo=z([f.NgModule({declarations:[Le],providers:[Me,ln],exports:[b,Le]})],So);function So(){}wo.decorators=[{type:f.Directive,args:[{selector:"[component-host]"}]}],wo.ctorParameters=function(){return[{type:f.ViewContainerRef}]},cn=wo;function wo(e){this.viewContainerRef=e}var Co=function(e,t){this.component=e,this.data=t},_o=new _.Logger("AuthDecorator");function Eo(e,t){var n,r,i,o,s,a,u,c,l,p,d,f,h,g,v;n=e,t.currentAuthenticatedUser().then(function(e){_o.debug("has authenticated user",e),n.next({state:"signedIn",user:e})}).catch(function(e){_o.debug("no authenticated user",e),n.next({state:"signedOut",user:null})}),r=e,i=_.Amplify.configure(null),m.has(i,"Auth.oauth")&&_.Hub.listen("auth",{onHubCapsule:function(e){var t=e.channel,e=e.payload;"auth"===t&&(t=e.data.username,_o.debug("authentication oauth event",e),r.next({state:e.event,user:{username:t}}))}},"angularAuthListener"),o=e,a=(s=t).signIn,s.signIn=function(e,t){return a.call(s,e,t).then(function(e){return _o.debug("signIn success"),e.challengeName?(_o.debug("signIn challenge: "+e.challengeName),"NEW_PASSWORD_REQUIRED"===e.challengeName?o.next({state:"requireNewPassword",user:e}):"MFA_SETUP"===e.challengeName?o.next({state:"setupMFA",user:e}):"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?o.next({state:"confirmSignIn",user:e}):_o.debug("warning: unhandled challengeName "+e.challengeName)):o.next({state:"signedIn",user:e}),e}).catch(function(e){throw _o.debug("signIn error",e),e})},u=e,l=(c=t).signOut,c.signOut=function(e){return l.call(c,e).then(function(e){return _o.debug("signOut success"),u.next({state:"signedOut",user:null}),e}).catch(function(e){throw _o.debug("signOut error",e),e})},p=e,f=(d=t).signUp,d.signUp=function(t,e,n,r){return f.call(d,t,e,n,r).then(function(e){return _o.debug("signUp success"),p.next({state:"confirmSignUp",user:{username:t}}),e}).catch(function(e){throw _o.debug("signUp error",e),e})},h=e,v=(g=t).confirmSignUp,g.confirmSignUp=function(t,e){return v.call(g,t,e).then(function(e){return _o.debug("confirmSignUp success"),h.next({state:"signIn",user:{username:t}}),e}).catch(function(e){throw _o.debug("confirmSignUp error",e),e})}}var Ao=function(e,t){return(Ao=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Io(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ao(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ko=function(){return(ko=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function To(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Po(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function Oo(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function xo(e){var t;return j(j({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?No(e):function(){return Ro(e)},isCustomEndpoint:!!e.endpoint})}function Lo(e){if(!e.region)throw new Error("Region is missing");return j(j({},e),{region:Mo(e.region)})}var dn="3.6.1",No=function(e){var t=e.endpoint,e=e.urlParser;if("string"==typeof t){var n=Promise.resolve(e(t));return function(){return n}}if("object"!=typeof t)return t;var r=Promise.resolve(t);return function(){return r}},Ro=function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=r.tls,t=void 0===t||t,[4,r.region()];case 1:if(n=e.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(n))throw new Error("Invalid region in client config");return[4,r.regionInfoProvider(n)];case 2:if(!(n=(null!==(n=e.sent())&&void 0!==n?n:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,r.urlParser((t?"https:":"http:")+"//"+n)]}})})},fn={environmentVariableSelector:function(e){return e.AWS_REGION},configFileSelector:function(e){return e.region},default:function(){throw new Error("Region is missing")}},mn={preferredFile:"credentials"},Mo=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},S="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Uo(){throw new Error("setTimeout has not been defined")}function Do(){throw new Error("clearTimeout has not been defined")}var Fo=Uo,jo=Do;function Bo(t){if(Fo===setTimeout)return setTimeout(t,0);if((Fo===Uo||!Fo)&&setTimeout)return Fo=setTimeout,setTimeout(t,0);try{return Fo(t,0)}catch(e){try{return Fo.call(null,t,0)}catch(e){return Fo.call(this,t,0)}}}"function"==typeof S.setTimeout&&(Fo=setTimeout),"function"==typeof S.clearTimeout&&(jo=clearTimeout);var zo,Vo=[],qo=!1,Ko=-1;function Ho(){qo&&zo&&(qo=!1,zo.length?Vo=zo.concat(Vo):Ko=-1,Vo.length&&Go())}function Go(){if(!qo){var e=Bo(Ho);qo=!0;for(var t=Vo.length;t;){for(zo=Vo,Vo=[];++Ko<t;)zo&&zo[Ko].run();Ko=-1,t=Vo.length}zo=null,qo=!1,function(t){if(jo===clearTimeout)return clearTimeout(t);if((jo===Do||!jo)&&clearTimeout)return jo=clearTimeout,clearTimeout(t);try{jo(t)}catch(e){try{return jo.call(null,t)}catch(e){return jo.call(this,t)}}}(e)}}function Wo(e,t){this.fun=e,this.array=t}Wo.prototype.run=function(){this.fun.apply(null,this.array)};function $o(){}Wn=$o,pn=$o,Ye=$o,ct=$o,jt=$o,at=$o,C=$o;var Yo=S.performance||{},Jo=Yo.now||Yo.mozNow||Yo.msNow||Yo.oNow||Yo.webkitNow||function(){return(new Date).getTime()};var Zo=new Date;var Xo,Qo={nextTick:function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Vo.push(new Wo(e,t)),1!==Vo.length||qo||Bo(Go)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Wn,addListener:pn,once:Ye,off:ct,removeListener:jt,removeAllListeners:at,emit:C,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Jo.call(Yo),n=Math.floor(t),t=Math.floor(t%1*1e9);return e&&(n-=e[0],(t-=e[1])<0&&(n--,t+=1e9)),[n,t]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Zo)/1e3}},es=(F(ts,Xo=Error),ts);function ts(e,t){void 0===t&&(t=!0);e=Xo.call(this,e)||this;return e.tryNextLink=t,e}var ns,rs=(F(is,ns=Error),is);function is(e,t){void 0===t&&(t=!0);e=ns.call(this,e)||this;return e.tryNextLink=t,e}function os(t){return new Promise(function(r,i){var e=v.request(j({method:"GET"},t));e.on("error",function(e){i(Object.assign(new rs("Unable to connect to instance metadata service"),e))}),e.on("timeout",function(){i(new Error("TimeoutError"))}),e.on("response",function(e){var t=e.statusCode,t=void 0===t?400:t;(t<200||300<=t)&&i(Object.assign(new rs("Error response received from instance metadata service"),{statusCode:t}));var n=[];e.on("data",function(e){n.push(e)}),e.on("end",function(){r(d.Buffer.concat(n))})}),e.end()})}function ss(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.AccessKeyId&&"string"==typeof e.SecretAccessKey&&"string"==typeof e.Token&&"string"==typeof e.Expiration}function as(e){return{accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)}}function us(e){var t=e.maxRetries,e=e.timeout;return{maxRetries:void 0===t?0:t,timeout:void 0===e?1e3:e}}function cs(e,t){for(var n=e(),r=0;r<t;r++)n=n.catch(e);return n}var ls="AWS_CONTAINER_CREDENTIALS_FULL_URI",ps="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",ds="AWS_CONTAINER_AUTHORIZATION_TOKEN";function fs(e){var t=this,e=us(e=void 0===e?{}:e),i=e.timeout,n=e.maxRetries;return function(){return function(){if(Qo.env[ps])return Promise.resolve({hostname:hs,path:Qo.env[ps]});if(Qo.env[ls]){var e=h.parse(Qo.env[ls]);return e.hostname&&e.hostname in gs?e.protocol&&e.protocol in vs?Promise.resolve(j(j({},e),{port:e.port?parseInt(e.port,10):void 0})):Promise.reject(new rs(e.protocol+" is not a valid container metadata service protocol",!1)):Promise.reject(new rs(e.hostname+" is not a valid container metadata service hostname",!1))}return Promise.reject(new rs("The container metadata credential provider cannot be used unless the "+ps+" or "+ls+" environment variable is set",!1))}().then(function(r){return cs(function(){return K(t,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return n=(t=JSON).parse,[4,function(e,t){{var n;Qo.env[ds]&&(n=t.headers,(n=void 0===n?{}:n).Authorization=Qo.env[ds],t.headers=n)}return os(j(j({},t),{timeout:e})).then(function(e){return e.toString()})}(i,r)];case 1:if(t=n.apply(t,[e.sent()]),!ss(t))throw new rs("Invalid response received from instance metadata service.");return[2,as(t)]}})})},n)})}}var hs="169.254.170.2",gs={localhost:!0,"127.0.0.1":!0},vs={"http:":!0,"https:":!0};function ms(e){function r(t,i){return K(void 0,void 0,void 0,function(){var r;return H(this,function(e){switch(e.label){case 0:return[4,cs(function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Cs(i)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(o=!1),n;case 3:return[2,t]}})})},t)];case 1:return r=e.sent().trim(),[2,cs(function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,_s(r,i)];case 1:return t=e.sent(),[3,3];case 2:throw 401===(n=e.sent()).statusCode&&(o=!1),n;case 3:return[2,t]}})})},t)]}})})}var o=!1,i=(e=us(e=void 0===e?{}:e)).timeout,s=e.maxRetries;return function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return o?[2,r(s,{timeout:i})]:[3,1];case 1:t=void 0,e.label=2;case 2:return e.trys.push([2,4,,5]),[4,ws({timeout:i})];case 3:return t=e.sent().toString(),[3,5];case 4:if(400===(null==(n=e.sent())?void 0:n.statusCode))throw Object.assign(n,{message:"EC2 Metadata token request returned error"});return"TimeoutError"!==n.message&&![403,404,405].includes(n.statusCode)||(o=!0),[2,r(s,{timeout:i})];case 5:return[2,r(s,{timeout:i,headers:{"x-aws-ec2-metadata-token":t}})]}})})}}var ys,bs="169.254.169.254",Ss="/latest/meta-data/iam/security-credentials/",ws=function(t){return K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,os(j(j({},t),{host:bs,path:"/latest/api/token",method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}))]})})},Cs=function(t){return K(void 0,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,os(j(j({},t),{host:bs,path:Ss}))];case 1:return[2,e.sent().toString()]}})})},_s=function(r,i){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return n=(t=JSON).parse,[4,os(j(j({},i),{host:bs,path:Ss+r}))];case 1:if(t=n.apply(t,[e.sent().toString()]),!ss(t))throw new rs("Invalid response received from instance metadata service.");return[2,as(t)]}})})},Es=(F(As,ys=Error),As);function As(e,t){void 0===t&&(t=!0);e=ys.call(this,e)||this;return e.tryNextLink=t,e}function Is(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(){var t,e,n=Promise.reject(new Es("No providers in chain"));try{for(var r=G(o),i=r.next();!i.done;i=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(i.value)}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n}}function ks(){return{}}function Ts(e){var t=void 0===(t=(e=void 0===e?{}:e).filepath)?Qo.env.AWS_SHARED_CREDENTIALS_FILE||i.join(Us(),".aws","credentials"):t,e=void 0===(e=e.configFilepath)?Qo.env.AWS_CONFIG_FILE||i.join(Us(),".aws","config"):e;return Promise.all([Ms(e).then(Rs).then(Ls).catch(ks),Ms(t).then(Rs).catch(ks)]).then(function(e){e=W(e,2);return{configFile:e[0],credentialsFile:e[1]}})}function Ps(e){return Boolean(e)&&"object"==typeof e&&"string"==typeof e.aws_access_key_id&&"string"==typeof e.aws_secret_access_key&&-1<["undefined","string"].indexOf(typeof e.aws_session_token)}var Os,xs=/^profile\s(["'])?([^\1]+)\1$/,Ls=function(e){var t,n,r={};try{for(var i=G(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s,a,u,c=o.value;"default"===c?r.default=e.default:(s=xs.exec(c))&&((a=W(s,3))[0],a[1],(u=a[2])&&(r[u]=e[c]))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},Ns=["__proto__","profile __proto__"],Rs=function(e){var t,n,r,i={};try{for(var o=G(e.split(/\r?\n/)),s=o.next();!s.done;s=o.next()){var a,u=s.value,c=(u=u.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)]\s*$/);if(c){if(r=c[1],Ns.includes(r))throw new Error('Found invalid profile name "'+r+'"')}else!r||(a=u.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/))&&(i[r]=i[r]||{},i[r][a[1]]=a[2])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},Ms=function(e){return new Promise(function(n,r){a.readFile(e,"utf8",function(e,t){e?r(e):n(t)})})},Us=function(){var e=Qo.env,t=e.HOME,n=e.USERPROFILE,r=e.HOMEPATH,e=e.HOMEDRIVE,e=void 0===e?"C:"+i.sep:e;return t||n||(r?""+e+r:o.homedir())},Ds="AWS_PROFILE",Fs=function(n){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return t=n.loadedConfig,[4,void 0===t?Ts(n):t];case 1:return t=e.sent(),[2,j(j({},t.configFile),t.credentialsFile)]}})})},js=function(e){return e.profile||Qo.env[Ds]||"default"},Bs=function(p,d,f,h){return void 0===h&&(h={}),K(void 0,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l;return H(this,function(e){switch(e.label){case 0:if(n=d[p],0<Object.keys(h).length&&Ps(n))return[2,zs(n)];if(t=n,!(Boolean(t)&&"object"==typeof t&&"string"==typeof t.role_arn&&"string"==typeof t.source_profile&&-1<["undefined","string"].indexOf(typeof t.role_session_name)&&-1<["undefined","string"].indexOf(typeof t.external_id)&&-1<["undefined","string"].indexOf(typeof t.mfa_serial)))return[3,4];if(a=n.external_id,r=n.mfa_serial,i=n.role_arn,l=n.role_session_name,s=void 0===l?"aws-sdk-js-"+Date.now():l,o=n.source_profile,!f.roleAssumer)throw new Es("Profile "+p+" requires a role to be assumed, but no role assumption callback was provided.",!1);if(o in h)throw new Es("Detected a cycle attempting to resolve credentials for profile "+js(f)+". Profiles visited: "+Object.keys(h).join(", "),!1);if(l=Bs(o,d,f,j(j({},h),((l={})[o]=!0,l))),s={RoleArn:i,RoleSessionName:s,ExternalId:a},!r)return[3,2];if(!f.mfaCodeProvider)throw new Es("Profile "+p+" requires multi-factor authentication, but no MFA code callback was provided.",!1);return s.SerialNumber=r,a=s,[4,f.mfaCodeProvider(r)];case 1:a.TokenCode=e.sent(),e.label=2;case 2:return c=(u=f).roleAssumer,[4,l];case 3:return[2,c.apply(u,[e.sent(),s])];case 4:if(Ps(n))return[2,zs(n)];throw new Es("Profile "+p+" could not be found or parsed in shared credentials file.")}var t})})},zs=function(e){return Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token})},Vs=(F(qs,Os=Error),qs);function qs(e,t){void 0===t&&(t=!0);e=Os.call(this,e)||this;return e.tryNextLink=t,e}function Ks(r){return void 0===r&&(r={}),function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return[4,(n=r,K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return t=n.loadedConfig,[4,void 0===t?Ts(n):t];case 1:return t=e.sent(),[2,j(j({},t.configFile),t.credentialsFile)]}})}))];case 1:return t=e.sent(),[2,Hs(r.profile||Qo.env.AWS_PROFILE||"default",t)]}var n})})}}var Hs=function(s,n){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return(t=n[s],n[s])?void 0===(t=t.credential_process)?[3,2]:[4,Gs(t).then(function(e){try{i=JSON.parse(e)}catch(e){throw Error("Profile "+s+" credential_process returned invalid JSON.")}var t=i.Version,n=i.AccessKeyId,r=i.SecretAccessKey,e=i.SessionToken,i=i.Expiration;if(1!==t)throw Error("Profile "+s+" credential_process did not return Version 1.");if(void 0===n||void 0===r)throw Error("Profile "+s+" credential_process returned invalid credentials.");if(i){var o=new Date;if(new Date(i)<o)throw Error("Profile "+s+" credential_process returned expired credentials.");o=Math.floor(new Date(i).valueOf()/1e3)}return{accessKeyId:n,secretAccessKey:r,sessionToken:e,expirationUnix:o}}).catch(function(e){throw new Vs(e.message)})]:[3,4];case 1:return[2,e.sent()];case 2:throw new Vs("Profile "+s+" did not contain credential_process.");case 3:return[3,5];case 4:throw new Vs("Profile "+s+" could not be found in shared credentials file.");case 5:return[2]}})})},Gs=function(e){return new Promise(function(n,r){s.exec(e,function(e,t){e?r(e):n(t.trim())})})},Me=function(e){var t=j({profile:Qo.env[Ds]},e=void 0===e?{}:e);t.loadedConfig||(t.loadedConfig=Ts(e));var n,e=[(void 0===(n=t)&&(n={}),function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return[4,Fs(n)];case 1:return t=e.sent(),[2,Bs(js(n),t,n)]}})})}),Ks(t),Ws(t)];return t.profile||e.unshift(function(){var e=Qo.env.AWS_ACCESS_KEY_ID,t=Qo.env.AWS_SECRET_ACCESS_KEY,n=Qo.env.AWS_CREDENTIAL_EXPIRATION;return e&&t?Promise.resolve({accessKeyId:e,secretAccessKey:t,sessionToken:Qo.env.AWS_SESSION_TOKEN,expiration:n?new Date(n):void 0}):Promise.reject(new es("Unable to find environment variable credentials."))}),function(n,r,i){var o,s;if(void 0===r)return function(){return s||(o=n(),s=!0),o};var a=!1;return function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return s||(o=n(),s=!0),a?[2,o]:[4,o];case 1:return t=e.sent(),i&&!i(t)?(a=!0,[2,t]):r(t)?[2,o=n()]:[2,t]}})})}}(Is.apply(void 0,$(e)),function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5},function(e){return void 0!==e.expiration})},Ws=function(e){return Qo.env[ps]||Qo.env[ls]?fs(e):Qo.env.AWS_EC2_METADATA_DISABLED?function(){return Promise.reject(new Es("EC2 Instance Metadata Service access disabled"))}:ms(e)},$s=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),r=e,!("function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(r)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");var r;return d.Buffer.from(e,t,n)},Ys=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?d.Buffer.from(e,t):d.Buffer.from(e)},ln=(Js.prototype.update=function(e,t){this.hash.update(Zs(e,t))},Js.prototype.digest=function(){return Promise.resolve(this.hash.digest())},Js);function Js(e,t){this.hash=t?n.createHmac(e,Zs(t)):n.createHash(e)}function Zs(e,t){return d.Buffer.isBuffer(e)?e:"string"==typeof e?Ys(e,t):ArrayBuffer.isView(e)?$s(e.buffer,e.byteOffset,e.byteLength):$s(e)}function Xs(t){return{applyToStack:function(e){var o;e.add((o=t,function(r,i){return function(n){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){return null!==(t=null==o?void 0:o.retryStrategy)&&void 0!==t&&t.mode&&(i.userAgent=$(i.userAgent||[],[["cfg/retry-mode",o.retryStrategy.mode]])),[2,o.retryStrategy.retry(r,n)]})})}}),Qs)}}}var Qs={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},ea=(ta.isInstance=function(e){return!!e&&("number"==typeof e.statusCode&&"object"==typeof e.headers)},ta);function ta(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}var na=(ra.isInstance=function(e){if(!e)return!1;return"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers},ra.prototype.clone=function(){var r,e=new ra(j(j({},this),{headers:j({},this.headers)}));return e.query&&(e.query=(r=e.query,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{}))),e},ra);function ra(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}function ia(e){var t;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||ca.includes(e.name)||1==(null===(e=e.$retryable)||void 0===e?void 0:e.throttling)}function oa(e){function t(e){return"TimeoutError"===e.name?10:5}function n(e){return t(e)<=i}var r=e,i=e;return Object.freeze({hasRetryTokens:n,retrieveRetryTokens:function(e){if(!n(e))throw new Error("No retry token available");e=t(e);return i-=e,e},releaseRetryTokens:function(e){i+=null!=e?e:1,i=Math.min(i,r)}})}function sa(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))}function aa(e){return!!e&&(void 0!==e.$retryable||ua.includes(e.name)||ia(e)||(e=e,la.includes(e.name)||pa.includes((null===(e=e.$metadata)||void 0===e?void 0:e.httpStatusCode)||0)))}var ua=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],ca=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],la=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],pa=[500,502,503,504],da=(fa.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},fa.prototype.getMaxAttempts=function(){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return t=e.sent(),[3,3];case 2:return e.sent(),[t=3,3];case 3:return[2,t]}})})},fa.prototype.retry=function(p,d){return K(this,void 0,void 0,function(){var o,s,a,u,c,l,t;return H(this,function(e){switch(e.label){case 0:return a=s=0,[4,this.getMaxAttempts()];case 1:u=e.sent(),c=d.request,na.isInstance(c)&&(c.headers["amz-sdk-invocation-id"]=g.v4()),t=function(){var t,n,r,i;return H(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,5]),na.isInstance(c)&&(c.headers["amz-sdk-request"]="attempt="+(s+1)+"; max="+u),[4,p(d)];case 1:return n=e.sent(),t=n.response,n=n.output,l.retryQuota.releaseRetryTokens(o),n.$metadata.attempts=s+1,n.$metadata.totalRetryDelay=a,[2,{value:{response:t,output:n}}];case 2:return(r=e.sent(),s++,l.shouldRetry(r,s,u))?(o=l.retryQuota.retrieveRetryTokens(r),i=l.delayDecider(ia(r)?500:100,s),a+=i,[4,new Promise(function(e){return setTimeout(e,i)})]):[3,4];case 3:return e.sent(),[2,"continue"];case 4:throw r.$metadata||(r.$metadata={}),r.$metadata.attempts=s,r.$metadata.totalRetryDelay=a,r;case 5:return[2]}})},l=this,e.label=2;case 2:return[5,t()];case 3:return"object"==typeof(t=e.sent())?[2,t.value]:[3,2];case 4:return[2]}})})},fa);function fa(e,t){this.maxAttemptsProvider=e,this.mode="standard",this.retryDecider=null!==(e=null==t?void 0:t.retryDecider)&&void 0!==e?e:aa,this.delayDecider=null!==(e=null==t?void 0:t.delayDecider)&&void 0!==e?e:sa,this.retryQuota=null!==(t=null==t?void 0:t.retryQuota)&&void 0!==t?t:oa(500)}function ha(e){var t=ya(e.maxAttempts);return j(j({},e),{maxAttempts:t,retryStrategy:e.retryStrategy||new da(t)})}var ga,va="AWS_MAX_ATTEMPTS",ma="max_attempts",b={environmentVariableSelector:function(e){var t=e[va];if(t){e=parseInt(t);if(Number.isNaN(e))throw new Error("Environment variable "+va+' mast be a number, got "'+t+'"');return e}},configFileSelector:function(e){var t=e[ma];if(t){e=parseInt(t);if(Number.isNaN(e))throw new Error("Shared config file entry "+ma+' mast be a number, got "'+t+'"');return e}},default:3},ya=function(e){if("number"!=typeof(e=void 0===e?3:e))return e;var t=Promise.resolve(e);return function(){return t}},ba=(F(Sa,ga=Error),Sa);function Sa(e,t){void 0===t&&(t=!0);e=ga.call(this,e)||this;return e.tryNextLink=t,e}function wa(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return function(){var t,e,n=Promise.reject(new ba("No providers in chain"));try{for(var r=G(o),i=r.next();!i.done;i=r.next())!function(t){n=n.catch(function(e){if(null!=e&&e.tryNextLink)return t();throw e})}(i.value)}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n}}function Ca(t){return"function"==typeof t?function(){return K(void 0,void 0,void 0,function(){return H(this,function(e){return[2,t()]})})}:(e=t,function(){return Promise.resolve(e)});var e}function _a(e,t){var o,s,a,n,r=e.environmentVariableSelector,i=e.configFileSelector,e=e.default;return function(n,r,i){var o,s;if(void 0===r)return function(){return s||(o=n(),s=!0),o};var a=!1;return function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return s||(o=n(),s=!0),a?[2,o]:[4,o];case 1:return t=e.sent(),i&&!i(t)?(a=!0,[2,t]):r(t)?[2,o=n()]:[2,t]}})})}}(wa((n=r,function(){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){try{if(void 0===(t=n(Qo.env)))throw new Error;return[2,t]}catch(e){throw new ba(e.message||"Cannot load config from environment variables with getter: "+n)}return[2]})})}),(o=i,t=(i=void 0===(i=t=void 0===t?{}:t)?{}:i).preferredFile,s=void 0===t?"config":t,a=B(i,["preferredFile"]),function(){return K(void 0,void 0,void 0,function(){var t,n,r,i;return H(this,function(e){switch(e.label){case 0:return t=a.loadedConfig,n=void 0===t?Ts(a):t,r=a.profile,t=void 0===r?Qo.env.AWS_PROFILE||"default":r,[4,n];case 1:r=e.sent(),n=r.configFile,r=r.credentialsFile,r=r[t]||{},n=n[t]||{},r="config"===s?j(j({},r),n):j(j({},n),r);try{if(void 0===(i=o(r)))throw new Error;return[2,i]}catch(e){throw new ba(e.message||"Cannot load config for profile "+t+" in SDK configuration files with getter: "+o)}return[2]}})})}),Ca(e)))}function Ea(e){return encodeURIComponent(e).replace(/[!'()*]/g,Aa)}var Aa=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};var Ia=["ECONNRESET","EPIPE","ETIMEDOUT"],ka=[],Ta=[],Pa="undefined"!=typeof Uint8Array?Uint8Array:Array,Oa=!1;function xa(){Oa=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)ka[t]=e[t],Ta[e.charCodeAt(t)]=t;Ta["-".charCodeAt(0)]=62,Ta["_".charCodeAt(0)]=63}function La(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(ka[r>>18&63]+ka[r>>12&63]+ka[r>>6&63]+ka[63&r]);return i.join("")}function Na(e){var t;Oa||xa();for(var n=e.length,r=n%3,i="",o=[],s=0,a=n-r;s<a;s+=16383)o.push(La(e,s,a<s+16383?a:s+16383));return 1==r?(t=e[n-1],i+=ka[t>>2],i+=ka[t<<4&63],i+="=="):2==r&&(t=(e[n-2]<<8)+e[n-1],i+=ka[t>>10],i+=ka[t>>4&63],i+=ka[t<<2&63],i+="="),o.push(i),o.join("")}function Ra(e,t,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,p=n?i-1:0,d=n?-1:1,n=e[t+p];for(p+=d,o=n&(1<<-l)-1,n>>=-l,l+=a;0<l;o=256*o+e[t+p],p+=d,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;0<l;s=256*s+e[t+p],p+=d,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(n?-1:1);s+=Math.pow(2,r),o-=c}return(n?-1:1)*s*Math.pow(2,o-r)}function Ma(e,t,n,r,i,o){var s,a,u=8*o-i-1,c=(1<<u)-1,l=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,o=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(r=Math.pow(2,-s))<1&&(s--,r*=2),2<=(t+=1<=s+l?p/r:p*Math.pow(2,1-l))*r&&(s++,r/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*r-1)*Math.pow(2,i),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));8<=i;e[n+d]=255&a,d+=f,a/=256,i-=8);for(s=s<<i|a,u+=i;0<u;e[n+d]=255&s,d+=f,s/=256,u-=8);e[n+d-f]|=128*o}var Ua={}.toString,Da=Array.isArray||function(e){return"[object Array]"==Ua.call(e)};function Fa(){return Ba.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ja(e,t){if(Fa()<t)throw new RangeError("Invalid typed array length");return Ba.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Ba.prototype:(e=null===e?new Ba(t):e).length=t,e}function Ba(e,t,n){if(!(Ba.TYPED_ARRAY_SUPPORT||this instanceof Ba))return new Ba(e,t,n);if("number"!=typeof e)return za(this,e,t,n);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return qa(this,e)}function za(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);Ba.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Ba.prototype:e=Ka(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!Ba.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Wa(t,n),n=(e=ja(e,r)).write(t,n);n!==r&&(e=e.slice(0,n));return e}(e,t,n):function(e,t){if(Ga(t)){var n=0|Ha(t.length);return 0===(e=ja(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||function(e){return e!=e}(t.length)?ja(e,0):Ka(e,t);if("Buffer"===t.type&&Da(t.data))return Ka(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Va(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function qa(e,t){if(Va(t),e=ja(e,t<0?0:0|Ha(t)),!Ba.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Ka(e,t){var n=t.length<0?0:0|Ha(t.length);e=ja(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function Ha(e){if(e>=Fa())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Fa().toString(16)+" bytes");return 0|e}function Ga(e){return null!=e&&e._isBuffer}function Wa(e,t){if(Ga(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var n=(e="string"!=typeof e?""+e:e).length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return lu(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return pu(e).length;default:if(r)return lu(e).length;t=(""+t).toLowerCase(),r=!0}}function $a(e,t,n){var r,i,o,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((n=void 0===n||n>this.length?this.length:n)<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,n){var r=e.length;(!t||t<0)&&(t=0);(!n||n<0||r<n)&&(n=r);for(var i="",o=t;o<n;++o)i+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[o]);return i}(this,t,n);case"utf8":case"utf-8":return eu(this,t,n);case"ascii":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}(this,t,n);case"base64":return r=this,o=n,0===(i=t)&&o===r.length?Na(r):Na(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,t,n);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function Ya(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Ja(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,(n=(n=isNaN(n)?i?0:e.length-1:n)<0?e.length+n:n)>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if(Ga(t="string"==typeof t?Ba.from(t,r):t))return 0===t.length?-1:Za(e,t,n,r,i);if("number"==typeof t)return t&=255,Ba.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,n):Za(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Za(e,t,n,r,i){var o=1,s=e.length,a=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s/=o=2,a/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i)for(var c=-1,l=n;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*o}else-1!==c&&(l-=l-c),c=-1;else for(l=n=s<n+a?s-a:n;0<=l;l--){for(var p=!0,d=0;d<a;d++)if(u(e,l+d)!==u(t,d)){p=!1;break}if(p)return l}return-1}function Xa(e,t,n,r){return du(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Qa(e,t,n,r){return du(function(e,t){for(var n,r,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,r=r%256,i.push(r),i.push(n);return i}(t,e.length-n),e,n,r)}function eu(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,u,c=e[i],l=null,p=239<c?4:223<c?3:191<c?2:1;if(i+p<=n)switch(p){case 1:c<128&&(l=c);break;case 2:128==(192&(o=e[i+1]))&&127<(u=(31&c)<<6|63&o)&&(l=u);break;case 3:o=e[i+1],s=e[i+2],128==(192&o)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&o)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,p=1):65535<l&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=p}return function(e){var t=e.length;if(t<=tu)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=tu));return n}(r)}Ba.TYPED_ARRAY_SUPPORT=void 0===S.TYPED_ARRAY_SUPPORT||S.TYPED_ARRAY_SUPPORT,Ba.poolSize=8192,Ba._augment=function(e){return e.__proto__=Ba.prototype,e},Ba.from=function(e,t,n){return za(null,e,t,n)},Ba.TYPED_ARRAY_SUPPORT&&(Ba.prototype.__proto__=Uint8Array.prototype,Ba.__proto__=Uint8Array),Ba.alloc=function(e,t,n){return r=null,t=t,n=n,Va(e=e),!(e<=0)&&void 0!==t?"string"==typeof n?ja(r,e).fill(t,n):ja(r,e).fill(t):ja(r,e);var r},Ba.allocUnsafe=function(e){return qa(null,e)},Ba.allocUnsafeSlow=function(e){return qa(null,e)},Ba.isBuffer=function(e){return null!=e&&(!!e._isBuffer||fu(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&fu(e.slice(0,0))}(e))},Ba.compare=function(e,t){if(!Ga(e)||!Ga(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Ba.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ba.concat=function(e,t){if(!Da(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Ba.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var n=Ba.allocUnsafe(t),r=0,i=0;i<e.length;++i){var o=e[i];if(!Ga(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},Ba.byteLength=Wa,Ba.prototype._isBuffer=!0,Ba.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ya(this,t,t+1);return this},Ba.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ya(this,t,t+3),Ya(this,t+1,t+2);return this},Ba.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ya(this,t,t+7),Ya(this,t+1,t+6),Ya(this,t+2,t+5),Ya(this,t+3,t+4);return this},Ba.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?eu(this,0,e):$a.apply(this,arguments)},Ba.prototype.equals=function(e){if(!Ga(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Ba.compare(this,e)},Ba.prototype.inspect=function(){var e="";return 0<this.length&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(e+=" ... ")),"<Buffer "+e+">"},Ba.prototype.compare=function(e,t,n,r,i){if(!Ga(e))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=t)return 0;if(i<=r)return-1;if(n<=t)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),c=e.slice(t,n),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},Ba.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Ba.prototype.indexOf=function(e,t,n){return Ja(this,e,t,n,!0)},Ba.prototype.lastIndexOf=function(e,t,n){return Ja(this,e,t,n,!1)},Ba.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||i<n)&&(n=i),0<e.length&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,s,a,u=!1;;)switch(r){case"hex":return function(e,t,n,r){n=Number(n)||0;var i=e.length-n;if((!r||i<(r=Number(r)))&&(r=i),(i=t.length)%2!=0)throw new TypeError("Invalid hex string");i/2<r&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}(this,e,t,n);case"utf8":case"utf-8":return s=t,a=n,du(lu(e,(o=this).length-s),o,s,a);case"ascii":return Xa(this,e,t,n);case"latin1":case"binary":return Xa(this,e,t,n);case"base64":return o=this,s=t,a=n,du(pu(e),o,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qa(this,e,t,n);default:if(u)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),u=!0}},Ba.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tu=4096;function nu(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(n<e+t)throw new RangeError("Trying to access beyond buffer length")}function ru(e,t,n,r,i,o){if(!Ga(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function iu(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function ou(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function su(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function au(e,t,n,r,i){return i||su(e,0,n,4),Ma(e,t,n,r,23,4),n+4}function uu(e,t,n,r,i){return i||su(e,0,n,8),Ma(e,t,n,r,52,8),n+8}Ba.prototype.slice=function(e,t){var n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),t<e&&(t=e),Ba.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=Ba.prototype;else for(var r=t-e,i=new Ba(r,void 0),o=0;o<r;++o)i[o]=this[o+e];return i},Ba.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||nu(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Ba.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||nu(e,t,this.length);for(var r=this[e+--t],i=1;0<t&&(i*=256);)r+=this[e+--t]*i;return r},Ba.prototype.readUInt8=function(e,t){return t||nu(e,1,this.length),this[e]},Ba.prototype.readUInt16LE=function(e,t){return t||nu(e,2,this.length),this[e]|this[e+1]<<8},Ba.prototype.readUInt16BE=function(e,t){return t||nu(e,2,this.length),this[e]<<8|this[e+1]},Ba.prototype.readUInt32LE=function(e,t){return t||nu(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Ba.prototype.readUInt32BE=function(e,t){return t||nu(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Ba.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||nu(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*t)),r},Ba.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||nu(e,t,this.length);for(var r=t,i=1,o=this[e+--r];0<r&&(i*=256);)o+=this[e+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*t)),o},Ba.prototype.readInt8=function(e,t){return t||nu(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Ba.prototype.readInt16LE=function(e,t){t||nu(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},Ba.prototype.readInt16BE=function(e,t){t||nu(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},Ba.prototype.readInt32LE=function(e,t){return t||nu(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Ba.prototype.readInt32BE=function(e,t){return t||nu(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Ba.prototype.readFloatLE=function(e,t){return t||nu(e,4,this.length),Ra(this,e,!0,23,4)},Ba.prototype.readFloatBE=function(e,t){return t||nu(e,4,this.length),Ra(this,e,!1,23,4)},Ba.prototype.readDoubleLE=function(e,t){return t||nu(e,8,this.length),Ra(this,e,!0,52,8)},Ba.prototype.readDoubleBE=function(e,t){return t||nu(e,8,this.length),Ra(this,e,!1,52,8)},Ba.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||ru(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Ba.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||ru(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;0<=--i&&(o*=256);)this[t+i]=e/o&255;return t+n},Ba.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,1,255,0),Ba.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Ba.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,2,65535,0),Ba.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):iu(this,e,t,!0),t+2},Ba.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,2,65535,0),Ba.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):iu(this,e,t,!1),t+2},Ba.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,4,4294967295,0),Ba.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):ou(this,e,t,!0),t+4},Ba.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,4,4294967295,0),Ba.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ou(this,e,t,!1),t+4},Ba.prototype.writeIntLE=function(e,t,n,r){e=+e,t|=0,r||ru(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},Ba.prototype.writeIntBE=function(e,t,n,r){e=+e,t|=0,r||ru(this,e,t,n,(r=Math.pow(2,8*n-1))-1,-r);var i=n-1,o=1,s=0;for(this[t+i]=255&e;0<=--i&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},Ba.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,1,127,-128),Ba.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},Ba.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,2,32767,-32768),Ba.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):iu(this,e,t,!0),t+2},Ba.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,2,32767,-32768),Ba.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):iu(this,e,t,!1),t+2},Ba.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,4,2147483647,-2147483648),Ba.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):ou(this,e,t,!0),t+4},Ba.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||ru(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Ba.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):ou(this,e,t,!1),t+4},Ba.prototype.writeFloatLE=function(e,t,n){return au(this,e,t,!0,n)},Ba.prototype.writeFloatBE=function(e,t,n){return au(this,e,t,!1,n)},Ba.prototype.writeDoubleLE=function(e,t,n){return uu(this,e,t,!0,n)},Ba.prototype.writeDoubleBE=function(e,t,n){return uu(this,e,t,!1,n)},Ba.prototype.copy=function(e,t,n,r){if(n=n||0,r||0===r||(r=this.length),t>=e.length&&(t=e.length),(r=0<r&&r<n?n:r)===n)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length);var i,o=(r=e.length-t<r-n?e.length-t+n:r)-n;if(this===e&&n<t&&t<r)for(i=o-1;0<=i;--i)e[i+t]=this[i+n];else if(o<1e3||!Ba.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Ba.prototype.fill=function(e,t,n,r){if("string"==typeof e){var i;if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==e.length||(i=e.charCodeAt(0))<256&&(e=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Ba.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(e=e||0))for(a=t;a<n;++a)this[a]=e;else for(var o=Ga(e)?e:lu(new Ba(e,r).toString()),s=o.length,a=0;a<n-t;++a)this[a+t]=o[a%s];return this};var cu=/[^+\/0-9A-Za-z-_]/g;function lu(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if(55295<(n=e.charCodeAt(s))&&n<57344){if(!i){if(56319<n){-1<(t-=3)&&o.push(239,191,189);continue}if(s+1===r){-1<(t-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(t-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(t-=3)&&o.push(239,191,189);if(i=null,n<128){if(--t<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function pu(e){return function(e){var t;Oa||xa();var n=e.length;if(0<n%4)throw new Error("Invalid string. Length must be a multiple of 4");for(var r="="===e[n-2]?2:"="===e[n-1]?1:0,i=new Pa(3*n/4-r),o=0<r?n-4:n,s=0,a=0;a<o;a+=4,0)t=Ta[e.charCodeAt(a)]<<18|Ta[e.charCodeAt(a+1)]<<12|Ta[e.charCodeAt(a+2)]<<6|Ta[e.charCodeAt(a+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=255&t;return 2==r?(t=Ta[e.charCodeAt(a)]<<2|Ta[e.charCodeAt(a+1)]>>4,i[s++]=255&t):1==r&&(t=Ta[e.charCodeAt(a)]<<10|Ta[e.charCodeAt(a+1)]<<4|Ta[e.charCodeAt(a+2)]>>2,i[s++]=t>>8&255,i[s++]=255&t),i}(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(cu,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function du(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function fu(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function hu(e,t){t instanceof u.Readable?t.pipe(e):t?e.end(Ba.from(t)):e.end()}gu.prototype.destroy=function(){this.httpAgent.destroy(),this.httpsAgent.destroy()},gu.prototype.handle=function(f,e){var h=this,g=(void 0===e?{}:e).abortSignal;return new Promise(function(t,n){if(null!=g&&g.aborted){var e=new Error("Request aborted");return e.name="AbortError",void n(e)}var r,i,o,s,a,u,c,l,p="https:"===f.protocol,e=function(e){var t,n,r=[];try{for(var i=G(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=e[a=o.value],a=Ea(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+Ea(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+Ea(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(f.query||{}),e={headers:f.headers,host:f.hostname,method:f.method,path:e?f.path+"?"+e:f.path,port:f.port,agent:p?h.httpsAgent:h.httpAgent},d=(0,(p?y:v).request)(e,function(e){e=new ea({statusCode:e.statusCode||-1,headers:function(e){var t,n,r={};try{for(var i=G(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value,a=e[s];r[s]=Array.isArray(a)?a.join(","):a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.headers),body:e});t({response:e})});d.on("error",function(e){Ia.includes(e.code)?n(Object.assign(e,{name:"TimeoutError"})):n(e)}),r=d,i=n,(o=void 0===(o=h.connectionTimeout)?0:o)&&r.on("socket",function(e){var t;e.connecting&&(t=setTimeout(function(){r.destroy(),i(Object.assign(new Error("Socket timed out without establishing a connection within "+o+" ms"),{name:"TimeoutError"}))},o),e.on("connect",function(){clearTimeout(t)}))}),s=d,a=n,u=h.socketTimeout,s.setTimeout(u=void 0===u?0:u,function(){s.destroy(),a(Object.assign(new Error("Connection timed out after "+u+" ms"),{name:"TimeoutError"}))}),g&&(g.onabort=function(){d.abort();var e=new Error("Request aborted");e.name="AbortError",n(e)}),c=d,"100-continue"===((l=f).headers.Expect||l.headers.expect)?c.on("continue",function(){hu(c,l.body)}):hu(c,l.body)})},Le=gu;function gu(e){var t=void 0===e?{}:e,n=t.connectionTimeout,r=t.socketTimeout,e=t.httpAgent,t=t.httpsAgent;this.metadata={handlerProtocol:"http/1.1"},this.connectionTimeout=n,this.socketTimeout=r;this.httpAgent=e||new v.Agent({keepAlive:!0,maxSockets:50}),this.httpsAgent=t||new y.Agent({keepAlive:!0,maxSockets:50})}var vu,mu=(F(yu,vu=u.Writable),yu.prototype._write=function(e,t,n){this.bufferedBytes.push(e),n()},yu);function yu(){var e=null!==vu&&vu.apply(this,arguments)||this;return e.bufferedBytes=[],e}function bu(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),r=e,!("function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(r)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");var r;return d.Buffer.from(e,t,n)}Wn=function(e){return new Promise(function(t,n){var r=new mu;e.pipe(r),e.on("error",function(e){r.end(),n(e)}),r.on("error",n),r.on("finish",function(){var e=new Uint8Array(Ba.concat(this.bufferedBytes));t(e)})})};function Su(e){e=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?d.Buffer.from(e,t):d.Buffer.from(e)}(e,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function wu(e){return bu(e.buffer,e.byteOffset,e.byteLength).toString("base64")}function Cu(e){return e?"string"==typeof e?Ba.from(e).length:"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:"string"==typeof e.path?a.lstatSync(e.path).size:void 0:0}function _u(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=e.byteLength-t),r=e,!("function"==typeof ArrayBuffer&&r instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(r)))throw new TypeError('The "input" argument must be ArrayBuffer. Received type '+typeof e+" ("+e+")");var r;return d.Buffer.from(e,t,n)}var pn=function(e){var r=e.serviceId,i=e.clientVersion;return function(){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return t=[["aws-sdk-js",i],["os/"+o.platform(),o.release()],["lang/js"],["md/nodejs",""+c.versions.node]],r&&t.push(["api/"+r,i]),c.env.AWS_EXECUTION_ENV&&t.push(["exec-env/"+c.env.AWS_EXECUTION_ENV]),[4,_a({environmentVariableSelector:function(e){return e.AWS_SDK_UA_APP_ID},configFileSelector:function(e){return e["sdk-ua-app-id"]},default:void 0})()];case 1:return(n=e.sent())&&t.push(["app/"+n]),[2,t]}})})}},Ye=function(e){e=function(e,t){if("string"!=typeof e)throw new TypeError('The "input" argument must be of type string. Received type '+typeof e+" ("+e+")");return t?d.Buffer.from(e,t):d.Buffer.from(e)}(e,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},ct=function(e){return _u(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},Eu="pinpoint.{region}.amazonaws.com",Au=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Iu=new Set(["cn-north-1","cn-northwest-1"]),ku=new Set(["us-iso-east-1"]),Tu=new Set(["us-isob-east-1"]),Pu=new Set(["us-gov-east-1","us-gov-west-1"]);var jt=function(e){var t,n=new URL(e),r=n.hostname,i=n.pathname,o=n.port,e=n.protocol,n=n.search;return n&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=G(e.split("&")),o=i.next();!o.done;o=i.next()){var s=W(o.value.split("="),2),a=s[0],u=s[1],c=void 0===u?null:u,a=decodeURIComponent(a),c=c&&decodeURIComponent(c);a in r?Array.isArray(r[a])?r[a].push(c):r[a]=[r[a],c]:r[a]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(n)),{hostname:r,port:o?parseInt(o):void 0,protocol:e,path:i,query:t}},at={apiVersion:"2016-12-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"pinpoint.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-northeast-2":n={hostname:"pinpoint.ap-northeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-south-1":n={hostname:"pinpoint.ap-south-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-1":n={hostname:"pinpoint.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ap-southeast-2":n={hostname:"pinpoint.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"ca-central-1":n={hostname:"pinpoint.ca-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-central-1":n={hostname:"pinpoint.eu-central-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-1":n={hostname:"pinpoint.eu-west-1.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"eu-west-2":n={hostname:"pinpoint.eu-west-2.amazonaws.com",partition:"aws",signingService:"mobiletargeting"};break;case"fips-us-east-1":n={hostname:"pinpoint-fips.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"fips-us-gov-west-1":n={hostname:"pinpoint-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"fips-us-west-2":n={hostname:"pinpoint-fips.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;case"us-east-1":n={hostname:"pinpoint.us-east-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"us-gov-west-1":n={hostname:"pinpoint.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"us-west-2":n={hostname:"pinpoint.us-west-2.amazonaws.com",partition:"aws",signingRegion:"us-west-2"};break;default:Au.has(e)&&(n={hostname:Eu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"}),Iu.has(e)&&(n={hostname:"pinpoint.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),ku.has(e)&&(n={hostname:"pinpoint.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Tu.has(e)&&(n={hostname:"pinpoint.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=Pu.has(e)?{hostname:"pinpoint.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov",signingService:"mobiletargeting"}:n)&&(n={hostname:Eu.replace("{region}",e),partition:"aws",signingService:"mobiletargeting"})}return Promise.resolve(ko({signingService:"mobiletargeting"},n))},serviceId:"Pinpoint",urlParser:jt},Ou=ko(ko({},at),{runtime:"node",base64Decoder:Su,base64Encoder:wu,bodyLengthChecker:Cu,credentialDefaultProvider:Me,defaultUserAgentProvider:pn({serviceId:at.serviceId,clientVersion:dn}),maxAttempts:_a(b),region:_a(fn,mn),requestHandler:new Le,sha256:ln.bind(null,"sha256"),streamCollector:Wn,utf8Decoder:Ye,utf8Encoder:ct}),xu="content-length";function Lu(t){return{applyToStack:function(e){e.add(function(a){var e=this;return function(s){return function(o){return K(e,void 0,void 0,function(){var t,n,r,i;return H(this,function(e){return t=o.request,na.isInstance(t)&&(i=t.body,n=t.headers,i&&-1===Object.keys(n).map(function(e){return e.toLowerCase()}).indexOf(xu)&&void 0!==(r=a(i))&&(t.headers=j(j({},t.headers),((i={})[xu]=String(r),i)))),[2,s(j(j({},o),{request:t}))]})})}}}(t.bodyLengthChecker),Nu)}}}var Nu={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0};for(var Ru={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Mu=function(t){return{applyToStack:function(e){var o;e.add((o=t,function(i){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){return na.isInstance(r.request)&&(t=r.request,n=(o.requestHandler.metadata||{}).handlerProtocol,0<=(void 0===n?"":n).indexOf("h2")&&!t.headers[":authority"]?(delete t.headers.host,t.headers[":authority"]=""):t.headers.host||(t.headers.host=t.hostname)),[2,i(r)]})})}}),Ru)}}},Uu={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Du=function(e){return{applyToStack:function(e){e.add(function(l,p){return function(c){return K(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return H(this,function(e){switch(e.label){case 0:return t=p.clientName,n=p.commandName,r=p.inputFilterSensitiveLog,i=p.logger,o=p.outputFilterSensitiveLog,[4,l(c)];case 1:return(s=e.sent(),i)?("function"==typeof i.info&&(u=s.output,a=u.$metadata,u=B(u,["$metadata"]),i.info({clientName:t,commandName:n,input:r(c.input),output:o(u),metadata:a})),[2,s]):[2,s]}})})}},Uu)}}},Fu={},ju=0;ju<256;ju++){var Bu=ju.toString(16).toLowerCase();1===Bu.length&&(Bu="0"+Bu),Fu[ju]=Bu}function zu(e){for(var t="",n=0;n<e.byteLength;n++)t+=Fu[e[n]];return t}var Vu="X-Amz-Date",qu="X-Amz-Signature",Ku="X-Amz-Security-Token",Hu="authorization",Gu=Vu.toLowerCase(),Wu=[Hu,Gu,"date"],$u=qu.toLowerCase(),Yu="x-amz-content-sha256",Ju=Ku.toLowerCase(),Zu={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Xu=/^proxy-/,Qu=/^sec-/,ec="AWS4-HMAC-SHA256",tc="AWS4-HMAC-SHA256-PAYLOAD",nc="aws4_request",rc={},ic=[];function oc(e,t,n){return e+"/"+t+"/"+n+"/"+nc}function sc(e,t,n){t=new e(t);return t.update(n),t.digest()}function ac(e,t,n){var r,i,o=e.headers,s={};try{for(var a=G(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in Zu||null!=t&&t.has(l)||Xu.test(l)||Qu.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function uc(e){return encodeURIComponent(e).replace(/[!'()*]/g,cc)}var cc=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function lc(e){var t,n,e=e.query,r=void 0===e?{}:e,i=[],o={};try{for(var s=G(Object.keys(r).sort()),a=s.next();!a.done;a=s.next())!function(n){if(n.toLowerCase()===$u)return;i.push(n);var e=r[n];"string"==typeof e?o[n]=uc(n)+"="+uc(e):Array.isArray(e)&&(o[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([uc(n)+"="+uc(t)])},[]).join("&"))}(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.map(function(e){return o[e]}).filter(function(e){return e}).join("&")}function pc(e,u){var c=e.headers,l=e.body;return K(this,void 0,void 0,function(){var n,r,i,o,s,a;return H(this,function(e){switch(e.label){case 0:try{for(n=G(Object.keys(c)),r=n.next();!r.done;r=n.next())if((i=r.value).toLowerCase()===Yu)return[2,c[i]]}catch(e){s={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return null!=l?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof l||ArrayBuffer.isView(l)||(t=l,"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t))?((s=new u).update(l),o=zu,[4,s.digest()]):[3,3];case 2:return[2,o.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var t})})}function dc(e){var r,t=e.headers,n=e.query,e=B(e,["headers","query"]);return j(j({},e),{headers:j({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{})):void 0})}function fc(e){var t,n;e="function"==typeof e.clone?e.clone():dc(e);try{for(var r=G(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;-1<Wu.indexOf(o.toLowerCase())&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function hc(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"!=typeof e)return e;if(Number(e))return new Date(1e3*Number(e));return new Date(e)}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var gc=(vc.prototype.presign=function(m,y){return void 0===y&&(y={}),K(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v;return H(this,function(e){switch(e.label){case 0:return a=y.signingDate,u=void 0===a?new Date:a,o=y.expiresIn,t=void 0===o?3600:o,n=y.unsignableHeaders,r=y.unhoistableHeaders,i=y.signableHeaders,a=y.signingRegion,o=y.signingService,[4,this.credentialProvider()];case 1:return(s=e.sent(),null==a)?[3,2]:(c=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:c=e.sent(),e.label=4;case 4:return(a=c,c=mc(u),u=c.longDate,c=c.shortDate,604800<t)?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=oc(c,a,null!=o?o:this.service),l=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():dc(e),s=o.headers,a=void 0===(o=o.query)?{}:o;try{for(var u=G(Object.keys(s)),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.toLowerCase();"x-amz-"!==p.substr(0,6)||null!==(i=t.unhoistableHeaders)&&void 0!==i&&i.has(p)||(a[l]=s[l],delete s[l])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return j(j({},e),{headers:s,query:a})}(fc(m),{unhoistableHeaders:r}),s.sessionToken&&(l.query[Ku]=s.sessionToken),l.query["X-Amz-Algorithm"]=ec,l.query["X-Amz-Credential"]=s.accessKeyId+"/"+g,l.query[Vu]=u,l.query["X-Amz-Expires"]=t.toString(10),v=ac(l,n,i),l.query["X-Amz-SignedHeaders"]=yc(v),p=l.query,d=qu,f=this.getSignature,h=[u,g,this.getSigningKey(s,a,c,o)],g=this.createCanonicalRequest,v=[l,v],[4,pc(m,this.sha256)]);case 5:return[4,f.apply(this,h.concat([g.apply(this,v.concat([e.sent()]))]))];case 6:return p[d]=e.sent(),[2,l]}})})},vc.prototype.sign=function(t,n){return K(this,void 0,void 0,function(){return H(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},vc.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,e=t.signingDate,l=void 0===e?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return H(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,i=mc(l),o=i.shortDate,r=i.longDate,i=oc(o,t,null!=f?f:this.service),[4,pc({headers:{},body:c},this.sha256)];case 4:return a=e.sent(),(o=new this.sha256).update(u),s=zu,[4,o.digest()];case 5:return s=s.apply(void 0,[e.sent()]),a=[tc,r,i,p,s,a].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:f})]}})})},vc.prototype.signString=function(a,e){var t=void 0===e?{}:e,e=t.signingDate,u=void 0===e?new Date:e,c=t.signingRegion,l=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,i,o,s;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==c)?[3,2]:(r=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,r=mc(u).shortDate,o=(i=this.sha256).bind,[4,this.getSigningKey(t,n,r,l)];case 5:return(i=new(o.apply(i,[void 0,e.sent()]))).update(a),s=zu,[4,i.digest()];case 6:return[2,s.apply(void 0,[e.sent()])]}})})},vc.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,e=t.signingDate,p=void 0===e?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,g=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==h)?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,i=fc(l),a=mc(p),o=a.longDate,s=a.shortDate,a=oc(s,n,null!=g?g:this.service),i.headers[Gu]=o,t.sessionToken&&(i.headers[Ju]=t.sessionToken),[4,pc(i,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=G(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(Yu,i.headers)&&this.applyChecksum&&(i.headers[Yu]=c),u=ac(i,f,d),[4,this.getSignature(o,a,this.getSigningKey(t,n,s,g),this.createCanonicalRequest(i,u,c))];case 6:return c=e.sent(),i.headers[Hu]=ec+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+yc(u)+", Signature="+c,[2,i]}})})},vc.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+lc(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},vc.prototype.createStringToSign=function(n,r,i){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(i),[4,t.digest()];case 1:return t=e.sent(),[2,ec+"\n"+n+"\n"+r+"\n"+zu(t)]}})})},vc.prototype.getCanonicalPath=function(e){e=e.path;return this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},vc.prototype.getSignature=function(o,s,a,u){return K(this,void 0,void 0,function(){var t,n,r,i;return H(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(o,s,u)];case 1:return t=e.sent(),r=(n=this.sha256).bind,[4,a];case 2:return(n=new(r.apply(n,[void 0,e.sent()]))).update(t),i=zu,[4,n.digest()];case 3:return[2,i.apply(void 0,[e.sent()])]}})})},vc.prototype.getSigningKey=function(e,t,n,r){return u=this.sha256,c=e,l=n,p=t,d=r||this.service,K(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return H(this,function(e){switch(e.label){case 0:return[4,sc(u,c.secretAccessKey,c.accessKeyId)];case 1:if(o=e.sent(),(t=l+":"+p+":"+d+":"+zu(o)+":"+c.sessionToken)in rc)return[2,rc[t]];for(ic.push(t);50<ic.length;)delete rc[ic.shift()];n="AWS4"+c.secretAccessKey,e.label=2;case 2:e.trys.push([2,7,8,9]),r=G([l,p,d,nc]),i=r.next(),e.label=3;case 3:return i.done?[3,6]:(o=i.value,[4,sc(u,n,o)]);case 4:n=e.sent(),e.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return s=e.sent(),s={error:s},[3,9];case 8:try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 9:return[2,rc[t]=n]}})});var u,c,l,p,d},vc);function vc(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,e=e.uriEscapePath,e=void 0===e||e;this.service=i,this.sha256=o,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=bc(r),this.credentialProvider=Sc(n)}var mc=function(e){e=hc(e).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.substr(0,8)}},yc=function(e){return Object.keys(e).sort().join(";")},bc=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},Sc=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}};function wc(r){var e=this,i=Cc(r.credentials||r.credentialDefaultProvider(r)),t=r.signingEscapePath,o=void 0===t||t,n=r.systemClockOffset,t=void 0===n?r.systemClockOffset||0:n,s=r.sha256,n=r.signer?Cc(r.signer):function(){return Cc(r.region)().then(function(t){return K(e,void 0,void 0,function(){return H(this,function(e){switch(e.label){case 0:return[4,r.regionInfoProvider(t)];case 1:return[2,[e.sent()||{},t]]}})})}).then(function(e){var t=W(e,2),n=t[0],e=t[1],t=n.signingRegion,n=n.signingService;return r.signingRegion=r.signingRegion||t||e,r.signingName=r.signingName||n||r.serviceId,new gc({credentials:i,region:r.signingRegion,service:r.signingName,sha256:s,uriEscapePath:o})})};return j(j({},r),{systemClockOffset:t,signingEscapePath:o,credentials:i,signer:n})}function Cc(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}}var _c=function(e){return new Date(Date.now()+e)};function Ec(l){return function(u,c){return function(a){return K(this,void 0,void 0,function(){var r,i,o,s;return H(this,function(e){switch(e.label){case 0:return na.isInstance(a.request)?"function"!=typeof l.signer?[3,2]:[4,l.signer()]:[2,u(a)];case 1:return r=e.sent(),[3,3];case 2:r=l.signer,e.label=3;case 3:return r=r,i=u,o=[j({},a)],s={},[4,r.sign(a.request,{signingDate:new Date(Date.now()+l.systemClockOffset),signingRegion:c.signing_region,signingService:c.signing_service})];case 4:return[4,i.apply(void 0,[j.apply(void 0,o.concat([(s.request=e.sent(),s)]))])];case 5:return o=e.sent(),s=o.response.headers,(s=s&&(s.date||s.Date))&&(s=Date.parse(s),t=s,n=l.systemClockOffset,3e5<=Math.abs(_c(n).getTime()-t)&&(l.systemClockOffset=s-Date.now())),[2,o]}var t,n})})}}}function Ac(t){return{applyToStack:function(e){e.addRelativeTo(Ec(t),Ic)}}}var Ic={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};function kc(e){return j(j({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}function Tc(t){return{applyToStack:function(e){var c;e.add((c=t,function(a,u){return function(s){return K(void 0,void 0,void 0,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:return(t=s.request,na.isInstance(t))?(n=t.headers,r=(null===(o=null==u?void 0:u.userAgent)||void 0===o?void 0:o.map(xc))||[],[4,c.defaultUserAgentProvider()]):[2,a(s)];case 1:return i=e.sent().map(xc),o=(null===(o=null==c?void 0:c.customUserAgent)||void 0===o?void 0:o.map(xc))||[],n["x-amz-user-agent"]=$(i,r,o).join(" "),o=$(i.filter(function(e){return e.startsWith("aws-sdk-")}),o).join(" "),"browser"!==c.runtime&&o&&(n[Pc]=n[Pc]?n[Pc]+" "+o:o),[2,a(j(j({},s),{request:t}))]}})})}}),Lc)}}}var Pc="user-agent",Oc=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,xc=function(e){var t=W(e,2),n=t[0],r=t[1],e=n.indexOf("/"),t=n.substring(0,e),e=n.substring(e+1);return[t,e="api"===t?e.toLowerCase():e,r].filter(function(e){return e&&0<e.length}).map(function(e){return null==e?void 0:e.replace(Oc,"_")}).join("/")},Lc={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Nc=function(){function t(t){function e(e){return!e.name||e.name!==t||(n=!0,a.delete(t),!1)}var n=!1;return i=i.filter(e),o=o.filter(e),n}function n(t){function e(e){return e.middleware!==t||(n=!0,e.name&&a.delete(e.name),!1)}var n=!1;return i=i.filter(e),o=o.filter(e),n}function r(t){return i.forEach(function(e){t.add(e.middleware,j({},e))}),o.forEach(function(e){t.addRelativeTo(e.middleware,j({},e))}),t}function s(){var t=[],n=[],r={};return i.forEach(function(e){e=j(j({},e),{before:[],after:[]});e.name&&(r[e.name]=e),t.push(e)}),o.forEach(function(e){e=j(j({},e),{before:[],after:[]});e.name&&(r[e.name]=e),n.push(e)}),n.forEach(function(e){if(e.toMiddleware){var t=r[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),t.sort(function(e,t){return Rc[t.step]-Rc[e.step]||Mc[t.priority||"normal"]-Mc[e.priority||"normal"]}).map(u).reduce(function(e,t){return e.push.apply(e,$(t)),e},[]).map(function(e){return e.middleware})}var i=[],o=[],a=new Set,u=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(u(e)))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,$(u(e)))}),t},c={add:function(e,t){var n=(t=void 0===t?{}:t).name,r=t.override,e=j({step:"initialize",priority:"normal",middleware:e},t);if(n){if(a.has(n)){if(!r)throw new Error("Duplicate middleware name '"+n+"'");t=i.findIndex(function(e){return e.name===n}),r=i[t];if(r.step!==e.step||r.priority!==e.priority)throw new Error('"'+n+'" middleware with '+r.priority+" priority in "+r.step+" step cannot be overridden by same-name middleware with "+e.priority+" priority in "+e.step+" step.");i.splice(t,1)}a.add(n)}i.push(e)},addRelativeTo:function(e,t){var n=t.name,r=t.override,e=j({middleware:e},t);if(n){if(a.has(n)){if(!r)throw new Error("Duplicate middleware name '"+n+"'");t=o.findIndex(function(e){return e.name===n}),r=o[t];if(r.toMiddleware!==e.toMiddleware||r.relation!==e.relation)throw new Error('"'+n+'" middleware '+r.relation+' "'+r.toMiddleware+'" middleware cannot be overridden by same-name middleware '+e.relation+' "'+e.toMiddleware+'" middleware.');o.splice(t,1)}a.add(n)}o.push(e)},clone:function(){return r(Nc())},use:function(e){e.applyToStack(c)},remove:function(e){return("string"==typeof e?t:n)(e)},removeByTag:function(n){function e(e){var t=e.tags,e=e.name;return!t||!t.includes(n)||(e&&a.delete(e),!(r=!0))}var r=!1;return i=i.filter(e),o=o.filter(e),r},concat:function(e){var t=r(Nc());return t.use(e),t},applyToStack:r,resolve:function(e,t){var n,r;try{for(var i=G(s().reverse()),o=i.next();!o.done;o=i.next())e=(0,o.value)(e,t)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return c},Rc={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Mc={high:3,normal:2,low:1},C=(Uc.prototype.send=function(e,t,n){var r="function"==typeof t?t:n,t=e.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!r)return t(e).then(function(e){return e.output});t(e).then(function(e){return r(null,e.output)},function(e){return r(e)}).catch(function(){})},Uc.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},Uc);function Uc(e){this.middlewareStack=Nc(),this.config=e}at=function(){this.middlewareStack=Nc()};function Dc(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function Fc(e){return Array.isArray(e)?e:[e]}var jc=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=jc(e[t]));return e},dn=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,$([null],arguments)));return Object.setPrototypeOf(t,e.prototype),t};dn.prototype=Object.create(String.prototype,{constructor:{value:dn,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(dn,String);var Bc,zc=(F(Vc,Bc=dn),Vc.prototype.deserializeJSON=function(){return JSON.parse(Bc.prototype.toString.call(this))},Vc.prototype.toJSON=function(){return Bc.prototype.toString.call(this)},Vc.fromObject=function(e){return e instanceof Vc?e:e instanceof String||"string"==typeof e?new Vc(e):new Vc(JSON.stringify(e))},Vc);function Vc(){return null!==Bc&&Bc.apply(this,arguments)||this}var qc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Kc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Hc(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),e=e.getUTCSeconds();return qc[r]+", "+(i<10?"0"+i:""+i)+" "+Kc[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s)+":"+(e<10?"0"+e:""+e)+" GMT"}var Gc,Wc="***SensitiveInformation***",$c=(Io(Yc,Gc=C),Yc.prototype.destroy=function(){Gc.prototype.destroy.call(this)},Yc);function Yc(e){var t=this,e=ko(ko({},Ou),e),e=Lo(e),e=wc(xo(e)),e=kc(ha(e));return(t=Gc.call(this,e)||this).config=e,t.middlewareStack.use(Ac(t.config)),t.middlewareStack.use(Xs(t.config)),t.middlewareStack.use(Lu(t.config)),t.middlewareStack.use(Mu(t.config)),t.middlewareStack.use(Du(t.config)),t.middlewareStack.use(Tc(t.config)),t}function Jc(e,t){return ko(ko(ko(ko(ko(ko(ko(ko({},void 0!==e.AppVersion&&null!==e.AppVersion&&{AppVersion:e.AppVersion}),void 0!==e.Locale&&null!==e.Locale&&{Locale:e.Locale}),void 0!==e.Make&&null!==e.Make&&{Make:e.Make}),void 0!==e.Model&&null!==e.Model&&{Model:e.Model}),void 0!==e.ModelVersion&&null!==e.ModelVersion&&{ModelVersion:e.ModelVersion}),void 0!==e.Platform&&null!==e.Platform&&{Platform:e.Platform}),void 0!==e.PlatformVersion&&null!==e.PlatformVersion&&{PlatformVersion:e.PlatformVersion}),void 0!==e.Timezone&&null!==e.Timezone&&{Timezone:e.Timezone})}function Zc(e,t){return ko(ko(ko(ko(ko(ko({},void 0!==e.City&&null!==e.City&&{City:e.City}),void 0!==e.Country&&null!==e.Country&&{Country:e.Country}),void 0!==e.Latitude&&null!==e.Latitude&&{Latitude:e.Latitude}),void 0!==e.Longitude&&null!==e.Longitude&&{Longitude:e.Longitude}),void 0!==e.PostalCode&&null!==e.PostalCode&&{PostalCode:e.PostalCode}),void 0!==e.Region&&null!==e.Region&&{Region:e.Region})}function Xc(e,t){return n=t,((e=void 0===(e=e)?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n}var Qc,el,tl,nl,rl,il,ol,sl,al,ul,cl,ll,pl,dl,fl,hl,gl,vl,ml,yl,bl,Sl,wl,Cl,_l,El,Al,Il,kl,Tl,Pl,Ol,xl,Ll,Nl,Rl,Ml,Ul,Dl,Fl,jl,Bl,zl,Vl,ql,Kl,Hl,Gl,Wl,$l,Yl,Jl,Zl,Xl,Ql,ep,tp,np,rp,ip,op,sp,ap,up,cp,lp,pp,dp,fp,hp,gp,vp,mp,yp,bp,Sp,wp,Cp,_p,Ep,Ap,Ip,kp,Tp,Pp,Op,xp,Lp,Np,Rp,Mp,Up,Dp,Fp,jp,Bp,zp,Vp,qp,Kp,Hp,Gp,Wp,$p,Yp,Jp,Zp,Xp,Qp,ed,td,nd,rd,id,od,sd,ad,ud,cd,ld,pd,dd,fd,hd,gd,vd,md,yd,bd=function(f,h){return To(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d;return Po(this,function(e){switch(e.label){case 0:return t=[ko({},f)],d={},[4,qd(f.body,h)];case 1:switch(l=ko.apply(void 0,t.concat([(d.body=e.sent(),d)])),p="UnknownError",p=Kd(f,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,wd(l)];case 3:return n=ko.apply(void 0,[ko.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 4:return i=[{}],[4,Cd(l)];case 5:return n=ko.apply(void 0,[ko.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 6:return o=[{}],[4,_d(l)];case 7:return n=ko.apply(void 0,[ko.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 8:return s=[{}],[4,Ed(l)];case 9:return n=ko.apply(void 0,[ko.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 10:return a=[{}],[4,Ad(l)];case 11:return n=ko.apply(void 0,[ko.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 12:return u=[{}],[4,Id(l)];case 13:return n=ko.apply(void 0,[ko.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 14:return c=[{}],[4,kd(l)];case 15:return n=ko.apply(void 0,[ko.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=ko(ko({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:Vd(f)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})})},Sd=function(f,h){return To(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d;return Po(this,function(e){switch(e.label){case 0:return t=[ko({},f)],d={},[4,qd(f.body,h)];case 1:switch(l=ko.apply(void 0,t.concat([(d.body=e.sent(),d)])),p="UnknownError",p=Kd(f,l.body)){case"BadRequestException":case"com.amazonaws.pinpoint#BadRequestException":return[3,2];case"ForbiddenException":case"com.amazonaws.pinpoint#ForbiddenException":return[3,4];case"InternalServerErrorException":case"com.amazonaws.pinpoint#InternalServerErrorException":return[3,6];case"MethodNotAllowedException":case"com.amazonaws.pinpoint#MethodNotAllowedException":return[3,8];case"NotFoundException":case"com.amazonaws.pinpoint#NotFoundException":return[3,10];case"PayloadTooLargeException":case"com.amazonaws.pinpoint#PayloadTooLargeException":return[3,12];case"TooManyRequestsException":case"com.amazonaws.pinpoint#TooManyRequestsException":return[3,14]}return[3,16];case 2:return r=[{}],[4,wd(l)];case 3:return n=ko.apply(void 0,[ko.apply(void 0,r.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 4:return i=[{}],[4,Cd(l)];case 5:return n=ko.apply(void 0,[ko.apply(void 0,i.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 6:return o=[{}],[4,_d(l)];case 7:return n=ko.apply(void 0,[ko.apply(void 0,o.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 8:return s=[{}],[4,Ed(l)];case 9:return n=ko.apply(void 0,[ko.apply(void 0,s.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 10:return a=[{}],[4,Ad(l)];case 11:return n=ko.apply(void 0,[ko.apply(void 0,a.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 12:return u=[{}],[4,Id(l)];case 13:return n=ko.apply(void 0,[ko.apply(void 0,u.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 14:return c=[{}],[4,kd(l)];case 15:return n=ko.apply(void 0,[ko.apply(void 0,c.concat([e.sent()])),{name:p,$metadata:Vd(f)}]),[3,17];case 16:l=l.body,p=l.code||l.Code||p,n=ko(ko({},l),{name:""+p,message:l.message||l.Message||p,$fault:"client",$metadata:Vd(f)}),e.label=17;case 17:return p=n.message||n.Message||p,n.message=p,delete n.Message,[2,Promise.reject(Object.assign(new Error(p),n))]}})})},wd=function(r,e){return To(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:Vd(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Cd=function(r,e){return To(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"ForbiddenException",$fault:"client",$metadata:Vd(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},_d=function(r,e){return To(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"InternalServerErrorException",$fault:"server",$metadata:Vd(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Ed=function(r,e){return To(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"MethodNotAllowedException",$fault:"client",$metadata:Vd(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Ad=function(r,e){return To(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:Vd(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Id=function(r,e){return To(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"PayloadTooLargeException",$fault:"client",$metadata:Vd(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},kd=function(r,e){return To(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){return t={name:"TooManyRequestsException",$fault:"client",$metadata:Vd(r),Message:void 0,RequestID:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),void 0!==n.RequestID&&null!==n.RequestID&&(t.RequestID=n.RequestID),[2,t]})})},Td=function(e,t){return ko(ko(ko(ko(ko(ko(ko(ko(ko(ko(ko({},void 0!==e.Address&&null!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:Md(e.Attributes)}),void 0!==e.ChannelType&&null!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&null!==e.Demographic&&{Demographic:Jc(e.Demographic)}),void 0!==e.EffectiveDate&&null!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&null!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&null!==e.Location&&{Location:Zc(e.Location)}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:xd(e.Metrics)}),void 0!==e.OptOut&&null!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&null!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&null!==e.User&&{User:Pd(e.User)})},Pd=function(e,t){return ko(ko({},void 0!==e.UserAttributes&&null!==e.UserAttributes&&{UserAttributes:Md(e.UserAttributes)}),void 0!==e.UserId&&null!==e.UserId&&{UserId:e.UserId})},Od=function(e,t){return ko({},void 0!==e.BatchItem&&null!==e.BatchItem&&{BatchItem:Rd(e.BatchItem)})},xd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return null===n?e:ko(ko({},e),((e={})[t]=n,e))},{})},Ld=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return null===n?e:ko(ko({},e),((e={})[t]=n,e))},{})},Nd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return null===n?e:ko(ko({},e),((e={})[t]=ko(ko(ko(ko(ko(ko(ko(ko(ko(ko({},void 0!==(n=n).AppPackageName&&null!==n.AppPackageName&&{AppPackageName:n.AppPackageName}),void 0!==n.AppTitle&&null!==n.AppTitle&&{AppTitle:n.AppTitle}),void 0!==n.AppVersionCode&&null!==n.AppVersionCode&&{AppVersionCode:n.AppVersionCode}),void 0!==n.Attributes&&null!==n.Attributes&&{Attributes:Ld(n.Attributes)}),void 0!==n.ClientSdkVersion&&null!==n.ClientSdkVersion&&{ClientSdkVersion:n.ClientSdkVersion}),void 0!==n.EventType&&null!==n.EventType&&{EventType:n.EventType}),void 0!==n.Metrics&&null!==n.Metrics&&{Metrics:xd(n.Metrics)}),void 0!==n.SdkName&&null!==n.SdkName&&{SdkName:n.SdkName}),void 0!==n.Session&&null!==n.Session&&{Session:Dd(n.Session)}),void 0!==n.Timestamp&&null!==n.Timestamp&&{Timestamp:n.Timestamp}),e))},{})},Rd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return null===n?e:ko(ko({},e),((e={})[t]=ko(ko({},void 0!==(n=n).Endpoint&&null!==n.Endpoint&&{Endpoint:Ud(n.Endpoint)}),void 0!==n.Events&&null!==n.Events&&{Events:Nd(n.Events)}),e))},{})},Md=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return null===n?e:ko(ko({},e),((e={})[t]=n.filter(function(e){return null!=e}).map(function(e){return null===e?null:e}),e))},{})},Ud=function(e,t){return ko(ko(ko(ko(ko(ko(ko(ko(ko(ko(ko({},void 0!==e.Address&&null!==e.Address&&{Address:e.Address}),void 0!==e.Attributes&&null!==e.Attributes&&{Attributes:Md(e.Attributes)}),void 0!==e.ChannelType&&null!==e.ChannelType&&{ChannelType:e.ChannelType}),void 0!==e.Demographic&&null!==e.Demographic&&{Demographic:Jc(e.Demographic)}),void 0!==e.EffectiveDate&&null!==e.EffectiveDate&&{EffectiveDate:e.EffectiveDate}),void 0!==e.EndpointStatus&&null!==e.EndpointStatus&&{EndpointStatus:e.EndpointStatus}),void 0!==e.Location&&null!==e.Location&&{Location:Zc(e.Location)}),void 0!==e.Metrics&&null!==e.Metrics&&{Metrics:xd(e.Metrics)}),void 0!==e.OptOut&&null!==e.OptOut&&{OptOut:e.OptOut}),void 0!==e.RequestId&&null!==e.RequestId&&{RequestId:e.RequestId}),void 0!==e.User&&null!==e.User&&{User:Pd(e.User)})},Dd=function(e,t){return ko(ko(ko(ko({},void 0!==e.Duration&&null!==e.Duration&&{Duration:e.Duration}),void 0!==e.Id&&null!==e.Id&&{Id:e.Id}),void 0!==e.StartTimestamp&&null!==e.StartTimestamp&&{StartTimestamp:e.StartTimestamp}),void 0!==e.StopTimestamp&&null!==e.StopTimestamp&&{StopTimestamp:e.StopTimestamp})},Fd=function(e,t){return{Results:void 0!==e.Results&&null!==e.Results?Bd(e.Results):void 0}},jd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return null===n?e:ko(ko({},e),((e={})[t]={Message:void 0!==(n=n).Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0},e))},{})},Bd=function(e,t){return Object.entries(e).reduce(function(e,t){var n=Oo(t,2),t=n[0],n=n[1];return null===n?e:ko(ko({},e),((e={})[t]={EndpointItemResponse:void 0!==(t=n).EndpointItemResponse&&null!==t.EndpointItemResponse?{Message:void 0!==(n=t.EndpointItemResponse).Message&&null!==n.Message?n.Message:void 0,StatusCode:void 0!==n.StatusCode&&null!==n.StatusCode?n.StatusCode:void 0}:void 0,EventsItemResponse:void 0!==t.EventsItemResponse&&null!==t.EventsItemResponse?jd(t.EventsItemResponse):void 0},e))},{})},zd=function(e,t){return{Message:void 0!==e.Message&&null!==e.Message?e.Message:void 0,RequestID:void 0!==e.RequestID&&null!==e.RequestID?e.RequestID:void 0}},Vd=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},qd=function(e,t){return Xc(e,t).then(function(e){return e.length?JSON.parse(e):{}})},Kd=function(e,t){function n(e){return e=0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,i,o=(r=e.headers,i="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===i.toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},Hd={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Gd={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Wd(t,n,r){return{applyToStack:function(e){var o,s,i,a;e.add((o=t,s=r,function(i,e){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return[4,i(r)];case 1:return t=e.sent().response,[4,s(t,o)];case 2:return n=e.sent(),[2,{response:t,output:n}]}})})}}),Hd),e.add((i=t,a=n,function(r,e){return function(n){return K(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return[4,a(n.input,i)];case 1:return t=e.sent(),[2,r(j(j({},n),{request:t}))]}})})}}),Gd)}}}(Qc||{}).filterSensitiveLog=function(e){return ko({},e)},(el||{}).filterSensitiveLog=function(e){return ko({},e)},(tl||{}).filterSensitiveLog=function(e){return ko({},e)},(nl||{}).filterSensitiveLog=function(e){return ko({},e)},(rl||{}).filterSensitiveLog=function(e){return ko({},e)},(il||{}).filterSensitiveLog=function(e){return ko({},e)},(ol||{}).filterSensitiveLog=function(e){return ko({},e)},(sl||{}).filterSensitiveLog=function(e){return ko({},e)},(al||{}).filterSensitiveLog=function(e){return ko({},e)},(ul||{}).filterSensitiveLog=function(e){return ko({},e)},(cl||{}).filterSensitiveLog=function(e){return ko({},e)},(ll||{}).filterSensitiveLog=function(e){return ko({},e)},(pl||{}).filterSensitiveLog=function(e){return ko({},e)},(dl||{}).filterSensitiveLog=function(e){return ko({},e)},(fl||{}).filterSensitiveLog=function(e){return ko({},e)},(hl||{}).filterSensitiveLog=function(e){return ko({},e)},(gl||{}).filterSensitiveLog=function(e){return ko({},e)},(vl||{}).filterSensitiveLog=function(e){return ko({},e)},(ml||{}).filterSensitiveLog=function(e){return ko({},e)},(yl||{}).filterSensitiveLog=function(e){return ko({},e)},(bl||{}).filterSensitiveLog=function(e){return ko({},e)},(Sl||{}).filterSensitiveLog=function(e){return ko({},e)},(wl||{}).filterSensitiveLog=function(e){return ko({},e)},(Cl||{}).filterSensitiveLog=function(e){return ko({},e)},(_l||{}).filterSensitiveLog=function(e){return ko({},e)},(El||{}).filterSensitiveLog=function(e){return ko({},e)},(Al||{}).filterSensitiveLog=function(e){return ko({},e)},(Il||{}).filterSensitiveLog=function(e){return ko({},e)},(kl||{}).filterSensitiveLog=function(e){return ko({},e)},(Tl||{}).filterSensitiveLog=function(e){return ko({},e)},(Pl||{}).filterSensitiveLog=function(e){return ko({},e)},(Ol||{}).filterSensitiveLog=function(e){return ko({},e)},(xl||{}).filterSensitiveLog=function(e){return ko({},e)},(Ll||{}).filterSensitiveLog=function(e){return ko({},e)},(Nl||{}).filterSensitiveLog=function(e){return ko({},e)},(Rl||{}).filterSensitiveLog=function(e){return ko({},e)},(Ml||{}).filterSensitiveLog=function(e){return ko({},e)},(Ul||{}).filterSensitiveLog=function(e){return ko({},e)},(Dl||{}).filterSensitiveLog=function(e){return ko({},e)},(Fl||{}).filterSensitiveLog=function(e){return ko({},e)},(jl||{}).filterSensitiveLog=function(e){return ko({},e)},(Bl||{}).filterSensitiveLog=function(e){return ko({},e)},(zl||{}).filterSensitiveLog=function(e){return ko({},e)},(Vl||{}).filterSensitiveLog=function(e){return ko({},e)},(ql||{}).filterSensitiveLog=function(e){return ko({},e)},(Kl||{}).filterSensitiveLog=function(e){return ko({},e)},(Hl||{}).filterSensitiveLog=function(e){return ko({},e)},(Gl||{}).filterSensitiveLog=function(e){return ko({},e)},(Wl||{}).filterSensitiveLog=function(e){return ko({},e)},($l||{}).filterSensitiveLog=function(e){return ko({},e)},(Yl||{}).filterSensitiveLog=function(e){return ko({},e)},(Jl||{}).filterSensitiveLog=function(e){return ko({},e)},(Zl||{}).filterSensitiveLog=function(e){return ko({},e)},(Xl||{}).filterSensitiveLog=function(e){return ko({},e)},(Ql||{}).filterSensitiveLog=function(e){return ko({},e)},(ep||{}).filterSensitiveLog=function(e){return ko({},e)},(tp||{}).filterSensitiveLog=function(e){return ko({},e)},(np||{}).filterSensitiveLog=function(e){return ko({},e)},(rp||{}).filterSensitiveLog=function(e){return ko({},e)},(ip||{}).filterSensitiveLog=function(e){return ko({},e)},(op||{}).filterSensitiveLog=function(e){return ko({},e)},(sp||{}).filterSensitiveLog=function(e){return ko({},e)},(ap||{}).filterSensitiveLog=function(e){return ko({},e)},(up||{}).filterSensitiveLog=function(e){return ko({},e)},(cp||(cp={})).filterSensitiveLog=function(e){return ko({},e)},(lp||(lp={})).filterSensitiveLog=function(e){return ko({},e)},(pp||{}).filterSensitiveLog=function(e){return ko({},e)},(dp||{}).filterSensitiveLog=function(e){return ko({},e)},(fp||{}).filterSensitiveLog=function(e){return ko({},e)},(hp||{}).filterSensitiveLog=function(e){return ko({},e)},(gp||{}).filterSensitiveLog=function(e){return ko({},e)},(vp||{}).filterSensitiveLog=function(e){return ko({},e)},(mp||{}).filterSensitiveLog=function(e){return ko({},e)},(yp||{}).filterSensitiveLog=function(e){return ko({},e)},(bp||{}).filterSensitiveLog=function(e){return ko({},e)},(Sp||{}).filterSensitiveLog=function(e){return ko({},e)},(wp||{}).filterSensitiveLog=function(e){return ko({},e)},(Cp||{}).filterSensitiveLog=function(e){return ko({},e)},(_p||{}).filterSensitiveLog=function(e){return ko({},e)},(Ep||{}).filterSensitiveLog=function(e){return ko({},e)},(Ap||{}).filterSensitiveLog=function(e){return ko({},e)},(Ip||{}).filterSensitiveLog=function(e){return ko({},e)},(kp||{}).filterSensitiveLog=function(e){return ko({},e)},(Tp||{}).filterSensitiveLog=function(e){return ko({},e)},(Pp||{}).filterSensitiveLog=function(e){return ko({},e)},(Op||{}).filterSensitiveLog=function(e){return ko({},e)},(xp||{}).filterSensitiveLog=function(e){return ko({},e)},(Lp||{}).filterSensitiveLog=function(e){return ko({},e)},(Np||{}).filterSensitiveLog=function(e){return ko({},e)},(Rp||{}).filterSensitiveLog=function(e){return ko({},e)},(Mp||{}).filterSensitiveLog=function(e){return ko({},e)},(Up||{}).filterSensitiveLog=function(e){return ko({},e)},(Dp||{}).filterSensitiveLog=function(e){return ko({},e)},(Fp||{}).filterSensitiveLog=function(e){return ko({},e)},(jp||{}).filterSensitiveLog=function(e){return ko({},e)},(Bp||{}).filterSensitiveLog=function(e){return ko({},e)},(zp||{}).filterSensitiveLog=function(e){return ko({},e)},(Vp||{}).filterSensitiveLog=function(e){return ko({},e)},(qp||{}).filterSensitiveLog=function(e){return ko({},e)},(Kp||{}).filterSensitiveLog=function(e){return ko({},e)},(Hp||{}).filterSensitiveLog=function(e){return ko({},e)},(Gp||(Gp={})).filterSensitiveLog=function(e){return ko({},e)},(Wp||(Wp={})).filterSensitiveLog=function(e){return ko({},e)},($p||{}).filterSensitiveLog=function(e){return ko({},e)},(Yp||{}).filterSensitiveLog=function(e){return ko({},e)},(Jp||{}).filterSensitiveLog=function(e){return ko({},e)},(Zp||{}).filterSensitiveLog=function(e){return ko({},e)},(Xp||{}).filterSensitiveLog=function(e){return ko({},e)},(Qp||{}).filterSensitiveLog=function(e){return ko({},e)},(ed||{}).filterSensitiveLog=function(e){return ko({},e)},(td||{}).filterSensitiveLog=function(e){return ko({},e)},(nd||{}).filterSensitiveLog=function(e){return ko({},e)},(rd||{}).filterSensitiveLog=function(e){return ko({},e)},(id||{}).filterSensitiveLog=function(e){return ko({},e)},(od||{}).filterSensitiveLog=function(e){return ko({},e)},(sd||{}).filterSensitiveLog=function(e){return ko({},e)},(ad||{}).filterSensitiveLog=function(e){return ko({},e)},(ud||{}).filterSensitiveLog=function(e){return ko({},e)},(cd||{}).filterSensitiveLog=function(e){return ko({},e)},(ld||{}).filterSensitiveLog=function(e){return ko({},e)},(pd||{}).filterSensitiveLog=function(e){return ko({},e)},(dd||{}).filterSensitiveLog=function(e){return ko({},e)},(fd||{}).filterSensitiveLog=function(e){return ko({},e)},(hd||{}).filterSensitiveLog=function(e){return ko({},e)},(gd||{}).filterSensitiveLog=function(e){return ko({},e)},(vd||{}).filterSensitiveLog=function(e){return ko({},e)},(md||{}).filterSensitiveLog=function(e){return ko({},e)},(yd||{}).filterSensitiveLog=function(e){return ko({},e)},(sf||{}).filterSensitiveLog=function(e){return ko({},e)},(lf||(lf={})).filterSensitiveLog=function(e){return ko({},e)},($f||{}).filterSensitiveLog=function(e){return ko({},e)};var $d,Yd=(Io(Jd,$d=at),Jd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"PinpointClient",commandName:"PutEventsCommand",inputFilterSensitiveLog:cp.filterSensitiveLog,outputFilterSensitiveLog:lp.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Jd.prototype.serialize=function(e,t){return a=e,u=t,To(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Po(this,function(e){switch(e.label){case 0:if(t={"content-type":"application/json"},n="/v1/apps/{ApplicationId}/events",void 0===a.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((o=a.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");return n=n.replace("{ApplicationId}",Dc(o)),void 0===(r=void 0!==a.EventsRequest?Od(a.EventsRequest):r)&&(r={}),r=JSON.stringify(r),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},Jd.prototype.deserialize=function(e,t){return r=e,i=t,To(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&300<=r.statusCode?[2,bd(r,i)]:(t={$metadata:Vd(r),EventsResponse:void 0},[4,qd(r.body,i)]);case 1:return n=e.sent(),t.EventsResponse=Fd(n),[2,Promise.resolve(t)]}})});var r,i},Jd);function Jd(e){var t=$d.call(this)||this;return t.input=e,t}var Zd,Xd=(Io(Qd,Zd=at),Qd.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"PinpointClient",commandName:"UpdateEndpointCommand",inputFilterSensitiveLog:Gp.filterSensitiveLog,outputFilterSensitiveLog:Wp.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Qd.prototype.serialize=function(e,t){return a=e,u=t,To(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Po(this,function(e){switch(e.label){case 0:if(t={"content-type":"application/json"},n="/v1/apps/{ApplicationId}/endpoints/{EndpointId}",void 0===a.ApplicationId)throw new Error("No value provided for input HTTP label: ApplicationId.");if((o=a.ApplicationId).length<=0)throw new Error("Empty value provided for input HTTP label: ApplicationId.");if(n=n.replace("{ApplicationId}",Dc(o)),void 0===a.EndpointId)throw new Error("No value provided for input HTTP label: EndpointId.");if((o=a.EndpointId).length<=0)throw new Error("Empty value provided for input HTTP label: EndpointId.");return n=n.replace("{EndpointId}",Dc(o)),void 0===(r=void 0!==a.EndpointRequest?Td(a.EndpointRequest):r)&&(r={}),r=JSON.stringify(r),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"PUT",headers:t,path:n,body:r})]}})});var a,u},Qd.prototype.deserialize=function(e,t){return r=e,i=t,To(void 0,void 0,void 0,function(){var t,n;return Po(this,function(e){switch(e.label){case 0:return 202!==r.statusCode&&300<=r.statusCode?[2,Sd(r,i)]:(t={$metadata:Vd(r),MessageBody:void 0},[4,qd(r.body,i)]);case 1:return n=e.sent(),t.MessageBody=zd(n),[2,Promise.resolve(t)]}})});var r,i},Qd);function Qd(e){var t=Zd.call(this)||this;return t.input=e,t}var ef={keyPrefix:"aws-amplify-cache",capacityInBytes:1048576,itemMaxSize:21e4,defaultTTL:2592e5,defaultPriority:5,warningThreshold:.8,storage:(new _.StorageHelper).getStorage()};function tf(e){for(var t=0,t=e.length,n=e.length;0<=n;--n){var r=e.charCodeAt(n);127<r&&r<=2047?t+=1:2047<r&&r<=65535&&(t+=2),56320<=r&&r<=57343&&--n}return t}function nf(){return(new Date).getTime()}function rf(e){return Number.isInteger?Number.isInteger(e):"number"==typeof(e=e)&&isFinite(e)&&Math.floor(e)===e}var of=new _.ConsoleLogger("StorageCache"),sf=(af.prototype.getModuleName=function(){return"Cache"},af.prototype.checkConfig=function(){rf(this.config.capacityInBytes)||(of.error("Invalid parameter: capacityInBytes. It should be an Integer. Setting back to default."),this.config.capacityInBytes=ef.capacityInBytes),rf(this.config.itemMaxSize)||(of.error("Invalid parameter: itemMaxSize. It should be an Integer. Setting back to default."),this.config.itemMaxSize=ef.itemMaxSize),rf(this.config.defaultTTL)||(of.error("Invalid parameter: defaultTTL. It should be an Integer. Setting back to default."),this.config.defaultTTL=ef.defaultTTL),rf(this.config.defaultPriority)||(of.error("Invalid parameter: defaultPriority. It should be an Integer. Setting back to default."),this.config.defaultPriority=ef.defaultPriority),this.config.itemMaxSize>this.config.capacityInBytes&&(of.error("Invalid parameter: itemMaxSize. It should be smaller than capacityInBytes. Setting back to default."),this.config.itemMaxSize=ef.itemMaxSize),(5<this.config.defaultPriority||this.config.defaultPriority<1)&&(of.error("Invalid parameter: defaultPriority. It should be between 1 and 5. Setting back to default."),this.config.defaultPriority=ef.defaultPriority),(1<Number(this.config.warningThreshold)||Number(this.config.warningThreshold)<0)&&(of.error("Invalid parameter: warningThreshold. It should be between 0 and 1. Setting back to default."),this.config.warningThreshold=ef.warningThreshold);5242880<this.config.capacityInBytes&&(of.error("Cache Capacity should be less than 5MB. Setting back to default. Setting back to default."),this.config.capacityInBytes=ef.capacityInBytes)},af.prototype.fillCacheItem=function(e,t,n){t={key:e,data:t,timestamp:nf(),visitedTime:nf(),priority:n.priority,expires:n.expires,type:typeof t,byteSize:0};return t.byteSize=tf(JSON.stringify(t)),t.byteSize=tf(JSON.stringify(t)),t},af.prototype.configure=function(e){return e&&(e.keyPrefix&&of.warn("Don't try to configure keyPrefix!"),this.config=Object.assign({},this.config,e,e.Cache),this.checkConfig()),this.config},af);function af(e){this.config=Object.assign({},e),this.cacheCurSizeKey=this.config.keyPrefix+"CurSize",this.checkConfig()}var uf,cf,lf=(uf=function(e,t){return(uf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}uf(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),pf=new _.ConsoleLogger("Cache");function df(e){var t=this,e=e?Object.assign({},ef,e):ef;return(t=cf.call(this,e)||this).config.storage=e.storage,t.getItem=t.getItem.bind(t),t.setItem=t.setItem.bind(t),t.removeItem=t.removeItem.bind(t),t}var ff=new(lf(df,cf=sf),df.prototype._decreaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t-e).toString())},df.prototype._increaseCurSizeInBytes=function(e){var t=this.getCacheCurSize();this.config.storage.setItem(this.cacheCurSizeKey,(t+e).toString())},df.prototype._refreshItem=function(e,t){return e.visitedTime=nf(),this.config.storage.setItem(t,JSON.stringify(e)),e},df.prototype._isExpired=function(e){e=this.config.storage.getItem(e),e=JSON.parse(e);return nf()>=e.expires},df.prototype._removeItem=function(e,t){t=t||JSON.parse(this.config.storage.getItem(e)).byteSize;this._decreaseCurSizeInBytes(t),this.config.storage.removeItem(e)},df.prototype._setItem=function(e,t){this._increaseCurSizeInBytes(t.byteSize);try{this.config.storage.setItem(e,JSON.stringify(t))}catch(e){this._decreaseCurSizeInBytes(t.byteSize),pf.error("Failed to set item "+e)}},df.prototype._sizeToPop=function(e){var t=this.getCacheCurSize()+e-this.config.capacityInBytes,e=(1-this.config.warningThreshold)*this.config.capacityInBytes;return e<t?t:e},df.prototype._isCacheFull=function(e){return e+this.getCacheCurSize()>this.config.capacityInBytes},df.prototype._findValidKeys=function(){for(var e=[],t=[],n=0;n<this.config.storage.length;n+=1)t.push(this.config.storage.key(n));for(n=0;n<t.length;n+=1){var r=t[n];0===r.indexOf(this.config.keyPrefix)&&r!==this.cacheCurSizeKey&&(this._isExpired(r)?this._removeItem(r):e.push(r))}return e},df.prototype._popOutItems=function(e,t){for(var n=[],r=t,i=0;i<e.length;i+=1){var o=this.config.storage.getItem(e[i]);null!=o&&(o=JSON.parse(o),n.push(o))}n.sort(function(e,t){return e.priority>t.priority||!(e.priority<t.priority)&&e.visitedTime<t.visitedTime?-1:1});for(i=0;i<n.length;i+=1)if(this._removeItem(n[i].key,n[i].byteSize),(r-=n[i].byteSize)<=0)return},df.prototype.setItem=function(e,t,n){pf.log("Set item: key is "+e+", value is "+t+" with options: "+n);var r=this.config.keyPrefix+e;if(r!==this.config.keyPrefix&&r!==this.cacheCurSizeKey)if(void 0!==t){n={priority:n&&void 0!==n.priority?n.priority:this.config.defaultPriority,expires:n&&void 0!==n.expires?n.expires:this.config.defaultTTL+nf()};if(n.priority<1||5<n.priority)pf.warn("Invalid parameter: priority due to out or range. It should be within 1 and 5.");else{n=this.fillCacheItem(r,t,n);if(n.byteSize>this.config.itemMaxSize)pf.warn("Item with key: "+e+" you are trying to put into is too big!");else try{var i,o,s=this.config.storage.getItem(r);s&&this._removeItem(r,JSON.parse(s).byteSize),this._isCacheFull(n.byteSize)&&(i=this._findValidKeys(),this._isCacheFull(n.byteSize)&&(o=this._sizeToPop(n.byteSize),this._popOutItems(i,o))),this._setItem(r,n)}catch(e){pf.warn("setItem failed! "+e)}}}else pf.warn("The value of item should not be undefined!");else pf.warn("Invalid key: should not be empty or 'CurSize'")},df.prototype.getItem=function(e,t){pf.log("Get item: key is "+e+" with options "+t);var n=null,r=this.config.keyPrefix+e;if(r===this.config.keyPrefix||r===this.cacheCurSizeKey)return pf.warn("Invalid key: should not be empty or 'CurSize'"),null;try{if(null!=(n=this.config.storage.getItem(r))){if(!this._isExpired(r)){var i=JSON.parse(n);return(i=this._refreshItem(i,r)).data}this._removeItem(r,JSON.parse(n).byteSize),n=null}if(t&&void 0!==t.callback){var o=t.callback();return null!==o&&this.setItem(e,o,t),o}return null}catch(e){return pf.warn("getItem failed! "+e),null}},df.prototype.removeItem=function(e){pf.log("Remove item: key is "+e);e=this.config.keyPrefix+e;if(e!==this.config.keyPrefix&&e!==this.cacheCurSizeKey)try{var t=this.config.storage.getItem(e);t&&this._removeItem(e,JSON.parse(t).byteSize)}catch(e){pf.warn("removeItem failed! "+e)}},df.prototype.clear=function(){pf.log("Clear Cache");for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&e.push(n)}try{for(t=0;t<e.length;t+=1)this.config.storage.removeItem(e[t])}catch(e){pf.warn("clear failed! "+e)}},df.prototype.getAllKeys=function(){for(var e=[],t=0;t<this.config.storage.length;t+=1){var n=this.config.storage.key(t);0===n.indexOf(this.config.keyPrefix)&&n!==this.cacheCurSizeKey&&e.push(n.substring(this.config.keyPrefix.length))}return e},df.prototype.getCacheCurSize=function(){var e=this.config.storage.getItem(this.cacheCurSizeKey);return e||(this.config.storage.setItem(this.cacheCurSizeKey,"0"),e="0"),Number(e)},df.prototype.createInstance=function(e){return e.keyPrefix&&e.keyPrefix!==ef.keyPrefix||(pf.error("invalid keyPrefix, setting keyPrefix with timeStamp"),e.keyPrefix=nf.toString()),new df(e)},df);_.Amplify.register(ff);var hf=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},gf=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},vf=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},mf=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(vf(arguments[t]));return e},yf=new _.ConsoleLogger("EventsBuffer"),bf=[429,500],Sf=[202],wf=(Cf.prototype.push=function(e){if(this._buffer>this._config.bufferSize)return yf.debug("Exceeded analytics events buffer size"),e.handlers.reject(new Error("Exceeded the size of analytics events buffer"));var t=((t={})[e.params.event.eventId]=e,t);this._buffer.push(t)},Cf.prototype.pause=function(){this._pause=!0},Cf.prototype.resume=function(){this._pause=!1},Cf.prototype.updateClient=function(e){this._client=e},Cf.prototype.flush=function(){this._flush=!0},Cf.prototype._startLoop=function(){this._interval&&clearInterval(this._interval);var e=this._config.flushInterval;this._interval=setInterval(this._sendBatch,e)},Cf.prototype._sendBatch=function(){var e,t=this._buffer.length;this._flush&&!t&&clearInterval(this._interval),!this._pause&&t&&(e=this._config.flushSize,t=Math.min(e,t),t=this._buffer.splice(0,t),this._putEvents(t))},Cf.prototype._putEvents=function(i){return hf(this,void 0,void 0,function(){var t,n,r;return gf(this,function(e){switch(e.label){case 0:t=this._bufferToMap(i),n=this._generateBatchEventParams(t),e.label=1;case 1:return e.trys.push([1,3,,4]),n=new Yd(n),[4,this._client.send(n)];case 2:return r=e.sent(),this._processPutEventsSuccessResponse(r,t),[3,4];case 3:return r=e.sent(),[2,this._handlePutEventsFailure(r,t)];case 4:return[2]}})})},Cf.prototype._generateBatchEventParams=function(e){var c={ApplicationId:"",EventsRequest:{BatchItem:{}}};return Object.values(e).forEach(function(e){var t=e.params,n=t.event,r=t.timestamp,i=t.config,o=n.name,s=n.attributes,a=n.metrics,u=n.eventId,e=n.session,t=i.appId,n=i.endpointId,i=c.EventsRequest.BatchItem;c.ApplicationId=c.ApplicationId||t,i[n]||(i[n]={Endpoint:{},Events:{}}),i[n].Events[u]={EventType:o,Timestamp:new Date(r).toISOString(),Attributes:s,Metrics:a,Session:e}}),c},Cf.prototype._handlePutEventsFailure=function(e,t){yf.debug("_putEvents Failed: ",e);e=e.$metadata&&e.$metadata.httpStatusCode;bf.includes(e)&&(t=Object.values(t),this._retry(t))},Cf.prototype._processPutEventsSuccessResponse=function(e,a){var e=e.EventsResponse.Results,u=[];Object.entries(e).forEach(function(e){var e=vf(e,2),s=e[0],e=e[1].EventsItemResponse;Object.entries(e).forEach(function(e){var t=vf(e,2),n=t[0],r=t[1],i=r.StatusCode,o=r.Message,e=a[n],t={EventsResponse:{Results:((t={})[s]={EventsItemResponse:((r={})[n]={StatusCode:i,Message:o},r)},t)}};if(Sf.includes(i))e.handlers.resolve(t);else{if(!bf.includes(i)){i=e.params.event.name;return yf.error("event "+n+" : "+i+" failed with error: "+o),e.handlers.reject(t)}u.push(e)}})}),u.length&&this._retry(u)},Cf.prototype._retry=function(e){var i=[];e.forEach(function(e){var t=e.params,n=t.event,r=n.eventId,n=n.name;if(0<t.resendLimit--)return yf.debug("resending event "+r+" : "+n+" with "+t.resendLimit+" retry attempts remaining"),void i.push(((t={})[r]=e,t));yf.debug("no retry attempts remaining for event "+r+" : "+n)}),(e=this._buffer).unshift.apply(e,mf(i))},Cf.prototype._bufferToMap=function(e){return e.reduce(function(e,t){var n=vf(Object.entries(t),1),t=vf(n[0],2),n=t[0],t=t[1];return e[n]=t,e},{})},Cf);function Cf(e,t){this._pause=!1,this._flush=!1,yf.debug("Instantiating buffer with config:",t),this._buffer=[],this._client=e,this._config=t,this._sendBatch=this._sendBatch.bind(this),this._startLoop()}function _f(e,t){_.Hub.dispatch("analytics",{event:e,data:t},"Analytics",Tf)}var Ef=function(){return(Ef=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Af=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},If=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},kf=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},Tf="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",Pf=new _.ConsoleLogger("AWSPinpointProvider"),Of=[429,500],xf=[202],Lf="_update_endpoint",Nf="_session.stop",Rf="undefined"!=typeof navigator&&navigator&&"function"==typeof navigator.sendBeacon,Mf=(Uf.prototype.getCategory=function(){return Uf.category},Uf.prototype.getProviderName=function(){return Uf.providerName},Uf.prototype.configure=function(e){var t=this;return Pf.debug("configure Analytics",e),this._config=Object.assign({},this._config,e||{}),this._endpointGenerating=!!e.autoSessionRecord,this._config.appId&&!this._config.disabled?this._config.endpointId?_f("pinpointProvider_configured",null):(e=this.getProviderName()+"_"+this._config.appId,this._getEndpointId(e).then(function(e){Pf.debug("setting endpoint id from the cache",e),t._config.endpointId=e,_f("pinpointProvider_configured",null)}).catch(function(e){Pf.debug("Failed to generate endpointId",e)})):this._flushBuffer(),this._config},Uf.prototype.record=function(n,r){return Af(this,void 0,void 0,function(){var t;return If(this,function(e){switch(e.label){case 0:return Pf.debug("_public record",n),[4,this._getCredentials()];case 1:return(t=e.sent())&&this._config.appId&&this._config.region?(this._initClients(t),t=(new Date).getTime(),this._generateSession(n),n.event.eventId=g.v1(),Object.assign(n,{timestamp:t,config:this._config}),n.event.immediate?[2,this._send(n,r)]:(this._putToBuffer(n,r),[2])):(Pf.debug("cannot send events without credentials, applicationId or region"),[2,r.reject(new Error("No credentials, applicationId or region"))])}})})},Uf.prototype._sendEndpointUpdate=function(n){return Af(this,void 0,void 0,function(){var t;return If(this,function(e){switch(e.label){case 0:return this._endpointUpdateInProgress?(this._endpointBuffer.push(n),[2]):(this._endpointUpdateInProgress=!0,[4,this._updateEndpoint(n)]);case 1:return e.sent(),t=this._endpointBuffer.shift(),this._endpointUpdateInProgress=!1,t&&this._sendEndpointUpdate(t),[2]}})})},Uf.prototype._putToBuffer=function(e,t){e.event.name!==Lf?this._buffer&&this._buffer.push({params:e,handlers:t}):this._sendEndpointUpdate({params:e,handlers:t})},Uf.prototype._generateSession=function(e){this._sessionId=this._sessionId||g.v1();var t=e.event;switch(t.name){case"_session.start":this._sessionStartTimestamp=(new Date).getTime(),this._sessionId=g.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()};break;case Nf:var n=(new Date).getTime();this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||g.v1(),t.session={Id:this._sessionId,Duration:n-this._sessionStartTimestamp,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString(),StopTimestamp:new Date(n).toISOString()},this._sessionId=void 0,this._sessionStartTimestamp=void 0;break;default:this._sessionStartTimestamp=this._sessionStartTimestamp||(new Date).getTime(),this._sessionId=this._sessionId||g.v1(),t.session={Id:this._sessionId,StartTimestamp:new Date(this._sessionStartTimestamp).toISOString()}}},Uf.prototype._send=function(t,n){return Af(this,void 0,void 0,function(){return If(this,function(e){switch(t.event.name){case Lf:return[2,this._updateEndpoint({params:t,handlers:n})];case Nf:return[2,this._pinpointSendStopSession(t,n)];default:return[2,this._pinpointPutEvents(t,n)]}})})},Uf.prototype._generateBatchItemContext=function(e){var t=e.event,n=e.timestamp,r=e.config,i=t.name,o=t.attributes,s=t.metrics,a=t.eventId,u=t.session,c=r.appId,e=r.endpointId,t={ApplicationId:c,EventsRequest:{BatchItem:{}}},r={Endpoint:{}};return r.Events=((c={})[a]={EventType:i,Timestamp:new Date(n).toISOString(),Attributes:o,Metrics:s,Session:u},c),t.EventsRequest.BatchItem[e]=r,t},Uf.prototype._pinpointPutEvents=function(o,s){return Af(this,void 0,void 0,function(){var t,n,r,i;return If(this,function(e){switch(e.label){case 0:t=o.event.eventId,n=o.config.endpointId,r=this._generateBatchItemContext(o),r=new Yd(r),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.pinpointClient.send(r)];case 2:return(i=e.sent(),r=i.EventsResponse.Results[n].EventsItemResponse[t],n=r.StatusCode,r=r.Message,xf.includes(n))?(Pf.debug("record event success. ",i),[2,s.resolve(i)]):Of.includes(n)?(this._retry(o,s),[3,4]):(Pf.error("Event "+t+" is not accepted, the error is "+r),[2,s.reject(i)]);case 3:return i=e.sent(),this._eventError(i),[2,s.reject(i)];case 4:return[2]}})})},Uf.prototype._pinpointSendStopSession=function(e,t){if(Rf){var n=this._generateBatchItemContext(e),r=this._config.region,i=n.ApplicationId,o=n.EventsRequest,n={secret_key:this._config.credentials.secretAccessKey,access_key:this._config.credentials.accessKeyId,session_token:this._config.credentials.sessionToken},i="https://pinpoint."+r+".amazonaws.com/v1/apps/"+i+"/events/legacy",o=JSON.stringify(o),r=_.Signer.signUrl({url:i,body:o,method:"POST"},n,{region:r,service:"mobiletargeting"},null);return navigator.sendBeacon(r,o)?t.resolve("sendBeacon success"):t.reject("sendBeacon failure")}this._pinpointPutEvents(e,t)},Uf.prototype._retry=function(e,t){var n=e.config.resendLimit;e.resendLimit="number"==typeof e.resendLimit?e.resendLimit:n,0<e.resendLimit--?(Pf.debug("resending event "+e.eventName+" with "+e.resendLimit+" retry times left"),this._pinpointPutEvents(e,t)):Pf.debug("retry times used up for event "+e.eventName)},Uf.prototype._updateEndpoint=function(a){return Af(this,void 0,void 0,function(){var t,n,r,i,o,s;return If(this,function(e){switch(e.label){case 0:s=a.params,t=a.handlers,n=s.config,i=s.event,r=n.appId,s=n.endpointId,i=this._endpointRequest(n,_.JS.transferKeyToLowerCase(i,[],["attributes","userAttributes","Attributes","UserAttributes"])),s={ApplicationId:r,EndpointId:s,EndpointRequest:i},e.label=1;case 1:return e.trys.push([1,3,,4]),i=new Xd(s),[4,this.pinpointClient.send(i)];case 2:return o=e.sent(),Pf.debug("updateEndpoint success",o),this._endpointGenerating=!1,this._resumeBuffer(),t.resolve(o),[2];case 3:return o=e.sent(),s={err:o,update_params:s,endpointObject:a},[2,this._handleEndpointUpdateFailure(s)];case 4:return[2]}})})},Uf.prototype._handleEndpointUpdateFailure=function(i){return Af(this,void 0,void 0,function(){var t,n,r;return If(this,function(e){return t=i.err,n=i.endpointObject,r=t.$metadata&&t.$metadata.httpStatusCode,Pf.debug("updateEndpoint error",t),403===r?[2,this._handleEndpointUpdateForbidden(i)]:Of.includes(r)?[2,this._retryEndpointUpdate(n,!0)]:(Pf.error("updateEndpoint failed",t),n.handlers.reject(t),[2])})})},Uf.prototype._handleEndpointUpdateForbidden=function(e){var t=e.err,n=e.endpointObject,r=t.code,e=t.retryable;if("ExpiredTokenException"!==r&&!e)return n.handlers.reject(t);this._retryEndpointUpdate(n)},Uf.prototype._retryEndpointUpdate=function(e,t){Pf.debug("_retryEndpointUpdate",e);var n=e.params,r=n.config.resendLimit;if(n.resendLimit="number"==typeof n.resendLimit?n.resendLimit:r,0<n.resendLimit--)return Pf.debug("resending endpoint update "+n.event.eventId+" with "+n.resendLimit+" retry attempts remaining"),void(this._endpointBuffer.length?this._endpointBuffer.unshift(e):this._updateEndpoint(e));Pf.warn("resending endpoint update "+n.event.eventId+" failed after "+n.config.resendLimit+" attempts"),this._endpointGenerating&&Pf.error("Initial endpoint update failed. ")},Uf.prototype._initClients=function(r){return Af(this,void 0,void 0,function(){var t,n;return If(this,function(e){return Pf.debug("init clients"),this.pinpointClient&&this._config.credentials&&this._config.credentials.sessionToken===r.sessionToken&&this._config.credentials.identityId===r.identityId?Pf.debug("no change for aws credentials, directly return from init"):(t=this._config.credentials?this._config.credentials.identityId:null,this._config.credentials=r,n=this._config.region,Pf.debug("init clients with credentials",r),this.pinpointClient=new $c({region:n,credentials:r,customUserAgent:_.getAmplifyUserAgent()}),this.pinpointClient.middlewareStack.addRelativeTo(function(t){return function(e){return delete e.request.headers["amz-sdk-invocation-id"],delete e.request.headers["amz-sdk-request"],t(e)}},{step:"finalizeRequest",relation:"after",toMiddleware:"retryMiddleware"}),this._bufferExists()&&t===r.identityId?this._updateBufferClient():this._initBuffer(),this._customizePinpointClientReq()),[2]})})},Uf.prototype._bufferExists=function(){return this._buffer&&this._buffer instanceof wf},Uf.prototype._initBuffer=function(){this._bufferExists()&&this._flushBuffer(),this._buffer=new wf(this.pinpointClient,this._config),this._endpointGenerating&&this._buffer.pause()},Uf.prototype._updateBufferClient=function(){this._bufferExists()&&this._buffer.updateClient(this.pinpointClient)},Uf.prototype._flushBuffer=function(){this._bufferExists()&&(this._buffer.flush(),this._buffer=null)},Uf.prototype._resumeBuffer=function(){this._bufferExists()&&this._buffer.resume()},Uf.prototype._customizePinpointClientReq=function(){},Uf.prototype._getEndpointId=function(n){return Af(this,void 0,void 0,function(){var t;return If(this,function(e){switch(e.label){case 0:return[4,ff.getItem(n)];case 1:return t=e.sent(),Pf.debug("endpointId from cache",t,"type",typeof t),t||(t=g.v1(),ff.setItem(n,t)),[2,t]}})})},Uf.prototype._endpointRequest=function(e,t){var n=e.credentials,r=this._clientInfo||{},i=e.clientContext||{},o=e.endpoint||{},e={appVersion:r.appVersion,make:r.make,model:r.model,modelVersion:r.version,platform:r.platform},i=(i.clientId,i.appTitle,i.appVersionName,i.appVersionCode,i.appPackageName,kf(i,["clientId","appTitle","appVersionName","appVersionCode","appPackageName"])),r=t.address?"android"===r.platform?"GCM":"APNS":void 0,t=Ef(Ef(Ef({channelType:r,requestId:g.v1(),effectiveDate:(new Date).toISOString()},o),t),{attributes:Ef(Ef({},o.attributes),t.attributes),demographic:Ef(Ef(Ef(Ef({},e),i),o.demographic),t.demographic),location:Ef(Ef({},o.location),t.location),metrics:Ef(Ef({},o.metrics),t.metrics),user:{userId:t.userId||o.userId||n.identityId,userAttributes:Ef(Ef({},o.userAttributes),t.userAttributes)}}),t=(t.userId,t.userAttributes,t.name,t.session,t.eventId,t.immediate,kf(t,["userId","userAttributes","name","session","eventId","immediate"]));return _.JS.transferKeyToUpperCase(t,[],["metrics","userAttributes","attributes"])},Uf.prototype._eventError=function(e){Pf.error("record event failed.",e),Pf.warn('Please ensure you have updated your Pinpoint IAM Policy with the Action: "mobiletargeting:PutEvents" in order to record events')},Uf.prototype._getCredentials=function(){return Af(this,void 0,void 0,function(){var t;return If(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,_.Credentials.get()];case 1:return(t=e.sent())?(Pf.debug("set credentials for analytics",t),[2,_.Credentials.shear(t)]):[2,null];case 2:return t=e.sent(),Pf.debug("ensure credentials error",t),[2,null];case 3:return[2]}})})},Uf.category="Analytics",Uf.providerName="AWSPinpoint",Uf);function Uf(e){this._endpointGenerating=!0,this._endpointUpdateInProgress=!1,this._buffer=null,this._endpointBuffer=[],this._config=e||{},this._config.bufferSize=this._config.bufferSize||1e3,this._config.flushSize=this._config.flushSize||100,this._config.flushInterval=this._config.flushInterval||5e3,this._config.resendLimit=this._config.resendLimit||5,this._clientInfo=_.ClientDevice.clientInfo()}var Df=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Ff=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Df(arguments[t]));return e},jf=[],Bf=(zf.add=function(e,t,n){Vf(e,t).set(n)},zf.remove=function(e,t){Vf(e,t).remove()},zf.prototype.set=function(n){var r=this;this.context[this.methodName]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n(r._originalMethod.apply(r,Ff(e)))}},zf.prototype.remove=function(){this.context[this.methodName]=this._originalMethod},zf);function zf(e,t){this.context=e,this.methodName=t,this._originalMethod=e[t].bind(e)}function Vf(t,n){var e=jf.filter(function(e){return e.context===t&&e.methodName===n})[0];return e||(e=new Bf(t,n),jf.push(e)),e}var qf=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Kf=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Hf=new _.ConsoleLogger("PageViewTracker"),Gf="aws-amplify-analytics-prevUrl",Wf={enable:!1,provider:"AWSPinpoint",getUrl:function(){return _.JS.browserOrNode().isBrowser?window.location.origin+window.location.pathname:""}},$f=(Yf.prototype.configure=function(e){return Object.assign(this._config,e),"SPA"===this._config.type&&this._pageViewTrackSPA(),this._config},Yf.prototype._isSameUrl=function(){return sessionStorage.getItem(Gf)===this._config.getUrl()&&(Hf.debug("the url is same"),!0)},Yf.prototype._pageViewTrackDefault=function(){return qf(this,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return _.JS.browserOrNode().isBrowser&&window.addEventListener&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Hf.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._config.enable&&!this._isSameUrl()&&(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Hf.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Gf,t)),[2]}})})},Yf.prototype._trackFunc=function(){return qf(this,void 0,void 0,function(){var t,n;return Kf(this,function(e){switch(e.label){case 0:return _.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState&&window.sessionStorage?(t=this._config.getUrl(),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]):(Hf.debug("not in the supported web enviroment"),[2]);case 1:return n=e.sent(),[3,3];case 2:n=this._config.attributes,e.label=3;case 3:return n=Object.assign({url:t},n),this._isSameUrl()||(this._tracker({name:this._config.eventName||"pageView",attributes:n},this._config.provider).catch(function(e){Hf.debug("Failed to record the page view event",e)}),sessionStorage.setItem(Gf,t)),[2]}})})},Yf.prototype._pageViewTrackSPA=function(){_.JS.browserOrNode().isBrowser&&window.addEventListener&&history.pushState?this._config.enable&&!this._hasEnabled?(Bf.add(history,"pushState",this._trackFunc),Bf.add(history,"replaceState",this._trackFunc),window.addEventListener("popstate",this._trackFunc),this._trackFunc(),this._hasEnabled=!0):(Bf.remove(history,"pushState"),Bf.remove(history,"replaceState"),window.removeEventListener("popstate",this._trackFunc),this._hasEnabled=!1):Hf.debug("not in the supported web enviroment")},Yf);function Yf(e,t){Hf.debug("initialize pageview tracker with opts",t),this._config=Object.assign({},Wf,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),"SPA"===this._config.type?this._pageViewTrackSPA():this._pageViewTrackDefault()}var lf=_.JS.browserOrNode().isBrowser&&window.Element?window.Element.prototype:null,Jf=lf?lf.matches||lf.matchesSelector||lf.webkitMatchesSelector||lf.mozMatchesSelector||lf.msMatchesSelector||lf.oMatchesSelector:null;function Zf(e,t){if(e&&1===e.nodeType&&t){if("string"==typeof t||1===t.nodeType)return e===t||Xf(e,t);if("length"in t)for(var n,r=0;n=t[r];r++)if(e===n||Xf(e,n))return 1}}function Xf(e,t){if("string"!=typeof t)return!1;if(Jf)return Jf.call(e,t);for(var n,r=e.parentNode.querySelectorAll(t),i=0;n=r[i];i++)if(n===e)return!0;return!1}function Qf(e,t,n){if(void 0===n&&(n=!1),e&&1===e.nodeType&&t)for(var r,i=(n?[e]:[]).concat(function(e){for(var t=[],n=e;n&&n.parentNode&&1===n.parentNode.nodeType;)n=n.parentNode,t.push(n);return t}(e)),o=0;r=i[o];o++)if(Zf(r,t))return r}function eh(e,t,o,s,a){function n(e){var t;if(a.composed&&"function"==typeof e.composedPath)for(var n,r=e.composedPath(),i=0;n=r[i];i++)1===n.nodeType&&Zf(n,o)&&(t=n);else t=Qf(e.target,o,!0);t&&s.call(t,e,t)}return e.addEventListener(t,n,(a=void 0===a?{}:a).useCapture),{destroy:function(){e.removeEventListener(t,n,a.useCapture)}}}var th=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},nh=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},rh=new _.ConsoleLogger("EventTracker"),ih={enable:!1,events:["click"],selectorPrefix:"data-amplify-analytics-",provider:"AWSPinpoint"},sf=(oh.prototype.configure=function(e){var t,n=this;return Object.assign(this._config,e),this._config.enable?this._config.enable&&0===Object.keys(this._delegates).length&&(t="["+this._config.selectorPrefix+"on]",this._config.events.forEach(function(e){n._delegates[e]=eh(document,e,t,n._trackFunc,{composed:!0,useCapture:!0})})):(Object.keys(this._delegates).forEach(function(e){"function"==typeof n._delegates[e].destroy&&n._delegates[e].destroy()}),this._delegates={}),this._config},oh.prototype._trackFunc=function(s,a){return th(this,void 0,void 0,function(){var t,n,r,i,o;return nh(this,function(e){switch(e.label){case 0:return t={},n=a.getAttribute(this._config.selectorPrefix+"on").split(/\s*,\s*/),r=a.getAttribute(this._config.selectorPrefix+"name"),(i=a.getAttribute(this._config.selectorPrefix+"attrs"))&&i.split(/\s*,\s*/).forEach(function(e){e=e.trim().split(/\s*:\s*/);t[e[0]]=e[1]}),"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return o=e.sent(),[3,3];case 2:o=this._config.attributes,e.label=3;case 3:return(o=Object.assign({type:s.type,target:s.target.localName+" with id "+s.target.id},o,t),rh.debug("events needed to be recorded",n),rh.debug("attributes needed to be attached",t),n.indexOf(s.type)<0)?(rh.debug("event "+s.type+" is not selected to be recorded"),[2]):(this._tracker({name:r||"event",attributes:o},this._config.provider).catch(function(e){rh.debug("Failed to record the "+s.type+" event', "+e)}),[2])}})})},oh);function oh(e,t){_.JS.browserOrNode().isBrowser&&window.addEventListener?(this._config=Object.assign({},ih,t),this._tracker=e,this._delegates={},this._trackFunc=this._trackFunc.bind(this),rh.debug("initialize pageview tracker with opts",this._config),this.configure(this._config)):rh.debug("not in the supported web environment")}var sh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},ah=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},uh=new _.ConsoleLogger("SessionTracker"),ch={enable:!1,provider:"AWSPinpoint"},lh=!1,lf=(ph.prototype._envCheck=function(){if(!_.JS.browserOrNode().isBrowser)return!1;if(!document||!document.addEventListener)return uh.debug("not in the supported web environment"),!1;if(void 0!==document.hidden)this._hidden="hidden",this._visibilityChange="visibilitychange";else if(void 0!==document.msHidden)this._hidden="msHidden",this._visibilityChange="msvisibilitychange";else{if(void 0===document.webkitHidden)return uh.debug("not in the supported web environment"),!1;this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"}return!0},ph.prototype._trackFunc=function(){return sh(this,void 0,void 0,function(){var t;return ah(this,function(e){switch(e.label){case 0:return"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()];case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),document.visibilityState===this._hidden?this._tracker({name:"_session.stop",attributes:t},this._config.provider).catch(function(e){uh.debug("record session stop event failed.",e)}):this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){uh.debug("record session start event failed.",e)}),[2]}})})},ph.prototype._trackBeforeUnload=function(e){var t=this;("function"==typeof this._config.attributes?Promise.resolve(this._config.attributes()):Promise.resolve(this._config.attributes)).then(function(e){e=Object.assign({},e);t._tracker({name:"_session.stop",attributes:e,immediate:!0},t._config.provider).catch(function(e){uh.debug("record session stop event failed.",e)})})},ph.prototype._sendInitialEvent=function(){return sh(this,void 0,void 0,function(){var t;return ah(this,function(e){switch(e.label){case 0:return lh?(uh.debug("the start session has been sent when the page is loaded"),[2]):(lh=!0,"function"!=typeof this._config.attributes?[3,2]:[4,this._config.attributes()]);case 1:return t=e.sent(),[3,3];case 2:t=this._config.attributes,e.label=3;case 3:return t=Object.assign({},t),this._tracker({name:"_session.start",attributes:t},this._config.provider).catch(function(e){uh.debug("record session start event failed.",e)}),[2]}})})},ph.prototype.configure=function(e){return this._envCheck()&&(Object.assign(this._config,e),this._config.enable&&!this._hasEnabled?(this._sendInitialEvent(),document.addEventListener(this._visibilityChange,this._trackFunc,!1),window.addEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!0):!this._config.enable&&this._hasEnabled&&(document.removeEventListener(this._visibilityChange,this._trackFunc,!1),window.removeEventListener("beforeunload",this._trackBeforeUnload,!1),this._hasEnabled=!1)),this._config},ph);function ph(e,t){this._config=Object.assign({},ch,t),this._tracker=e,this._hasEnabled=!1,this._trackFunc=this._trackFunc.bind(this),this._trackBeforeUnload=this._trackBeforeUnload.bind(this),this.configure(this._config)}var dh=function(){return(dh=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},fh=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},hh=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},gh=new _.ConsoleLogger("AnalyticsClass"),vh="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",mh={pageView:$f,event:sf,session:lf},yh=null,lf=(bh.prototype.getModuleName=function(){return"Analytics"},bh.prototype.configure=function(e){var n=this;if(!e)return this._config;gh.debug("configure Analytics",e);var t=_.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,t.Analytics,e),this._config.disabled&&(this._disabled=!0),void 0===this._config.autoSessionRecord&&(this._config.autoSessionRecord=!0),this._pluggables.forEach(function(e){var t="AWSPinpoint"!==e.getProviderName()||n._config.AWSPinpoint?n._config[e.getProviderName()]:n._config;e.configure(dh({disabled:n._config.disabled,autoSessionRecord:n._config.autoSessionRecord},t))}),0===this._pluggables.length&&this.addPluggable(new Mf),_.Hub.dispatch("analytics",{event:"configured",data:null,message:"The Analytics category has been configured successfully"},"Analytics",vh),gh.debug("current configuration",this._config),this._config},bh.prototype.addPluggable=function(e){if(e&&"Analytics"===e.getCategory()){this._pluggables.push(e);var t="AWSPinpoint"!==e.getProviderName()||this._config.AWSPinpoint?this._config[e.getProviderName()]:this._config,t=dh({disabled:this._config.disabled},t);return e.configure(t),t}},bh.prototype.getPluggable=function(e){for(var t=0;t<this._pluggables.length;t+=1){var n=this._pluggables[t];if(n.getProviderName()===e)return n}return gh.debug("No plugin found with providerName",e),null},bh.prototype.removePluggable=function(e){for(var t=0;t<this._pluggables.length&&this._pluggables[t].getProviderName()!==e;)t+=1;t===this._pluggables.length?gh.debug("No plugin found with providerName",e):this._pluggables.splice(t,t+1)},bh.prototype.disable=function(){this._disabled=!0},bh.prototype.enable=function(){this._disabled=!1},bh.prototype.startSession=function(n){return fh(this,void 0,void 0,function(){var t;return hh(this,function(e){return t={event:{name:"_session.start"},provider:n},[2,this._sendEvent(t)]})})},bh.prototype.stopSession=function(n){return fh(this,void 0,void 0,function(){var t;return hh(this,function(e){return t={event:{name:"_session.stop"},provider:n},[2,this._sendEvent(t)]})})},bh.prototype.record=function(n,r,i){return fh(this,void 0,void 0,function(){var t;return hh(this,function(e){return t=null,t="string"==typeof n?{event:{name:n,attributes:r,metrics:i},provider:"AWSPinpoint"}:{event:n,provider:r},[2,this._sendEvent(t)]})})},bh.prototype.updateEndpoint=function(n,r){return fh(this,void 0,void 0,function(){var t;return hh(this,function(e){return t=dh(dh({},n),{name:"_update_endpoint"}),[2,this.record(t,r)]})})},bh.prototype._sendEvent=function(r){var e=this;if(this._disabled)return gh.debug("Analytics has been disabled"),Promise.resolve();var i=r.provider||"AWSPinpoint";return new Promise(function(t,n){e._pluggables.forEach(function(e){e.getProviderName()===i&&e.record(r,{resolve:t,reject:n})})})},bh.prototype.autoTrack=function(e,t){var n;mh[e]?("session"===e&&(this._config.autoSessionRecord=t.enable),(n=this._trackers[e])?n.configure(t):this._trackers[e]=new mh[e](this.record,t)):gh.debug("invalid tracker type")},bh);function bh(){this._config={},this._pluggables=[],this._disabled=!1,this._trackers={},(yh=this).record=this.record.bind(this),_.Hub.listen("auth",_h),_.Hub.listen("storage",_h),_.Hub.listen("analytics",_h)}var Sh=!1,wh=!1,Ch=!1,_h=function(e){var t=e.channel,n=e.payload;switch(gh.debug("on hub capsule "+t,n),t){case"auth":Ah(n);break;case"storage":Eh(n);break;case"analytics":Ih(n)}},Eh=function(e){var t=e.data,e=t.attrs,t=t.metrics;e&&Ch&&yh.record({name:"Storage",attributes:e,metrics:t}).catch(function(e){gh.debug("Failed to send the storage event automatically",e)})},Ah=function(e){e=e.event;if(e){var t=function(n){return fh(void 0,void 0,void 0,function(){var t;return hh(this,function(e){switch(e.label){case 0:if(!wh||!Ch)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,yh.record({name:"_userauth."+n})];case 2:return[2,e.sent()];case 3:return t=e.sent(),gh.debug("Failed to send the "+n+" event automatically",t),[3,4];case 4:return[2]}})})};switch(e){case"signIn":return t("sign_in");case"signUp":return t("sign_up");case"signOut":return t("sign_out");case"signIn_failure":return t("auth_fail");case"configured":(wh=!0)&&Ch&&kh()}}},Ih=function(e){e=e.event;e&&"pinpointProvider_configured"===e&&(Ch=!0,wh&&Ch&&kh())},kh=function(){var e=yh.configure();!Sh&&e.autoSessionRecord&&(yh.updateEndpoint({immediate:!0}).catch(function(e){gh.debug("Failed to update the endpoint",e)}),Sh=!0),yh.autoTrack("session",{enable:e.autoSessionRecord})},Th=new lf;_.Amplify.register(Th);for(var Ph={},Oh={},xh=0;xh<256;xh++){var Lh=xh.toString(16).toLowerCase();1===Lh.length&&(Lh="0"+Lh),Ph[xh]=Lh,Oh[Lh]=xh}function Nh(e){for(var t="",n=0;n<e.byteLength;n++)t+=Ph[e[n]];return t}var Rh=(Mh.fromNumber=function(e){if(0x8000000000000000<e||e<-0x8000000000000000)throw new Error(e+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),n=7,r=Math.abs(Math.round(e));-1<n&&0<r;n--,r/=256)t[n]=r;return e<0&&Uh(t),new Mh(t)},Mh.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&Uh(e),parseInt(Nh(e),16)*(t?-1:1)},Mh.prototype.toString=function(){return String(this.valueOf())},Mh);function Mh(e){if(8!==(this.bytes=e).byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}function Uh(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;-1<t&&(e[t]++,0===e[t]);t--);}var Dh=(Fh.prototype.format=function(e){var t,n,r,i,o=[];try{for(var s=G(Object.keys(e)),a=s.next();!a.done;a=s.next()){var u=a.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=new Uint8Array(o.reduce(function(e,t){return e+t.byteLength},0)),p=0;try{for(var d=G(o),f=d.next();!f.done;f=d.next()){var h=f.value;l.set(h,p),p+=h.byteLength}}catch(e){r={error:e}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return l},Fh.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":var r=new DataView(new ArrayBuffer(3+e.value.byteLength));r.setUint8(0,6),r.setUint16(1,e.value.byteLength,!1);var i=new Uint8Array(r.buffer);return i.set(e.value,3),i;case"string":r=this.fromUtf8(e.value),i=new DataView(new ArrayBuffer(3+r.byteLength));i.setUint8(0,7),i.setUint16(1,r.byteLength,!1);i=new Uint8Array(i.buffer);return i.set(r,3),i;case"timestamp":var o=new Uint8Array(9);return o[0]=8,o.set(Rh.fromNumber(e.value.valueOf()).bytes,1),o;case"uuid":if(!$h.test(e.value))throw new Error("Invalid UUID received: "+e.value);o=new Uint8Array(17);return o[0]=9,o.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in Oh))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=Oh[r]}return t}(e.value.replace(/\-/g,"")),1),o}},Fh.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:jh,value:!0};break;case 1:t[i]={type:jh,value:!1};break;case 2:t[i]={type:Bh,value:e.getInt8(n++)};break;case 3:t[i]={type:zh,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:Vh,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:qh,value:new Rh(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var o=e.getUint16(n,!1);n+=2,t[i]={type:Kh,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:var s=e.getUint16(n,!1);n+=2,t[i]={type:Hh,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s))},n+=s;break;case 8:t[i]={type:Gh,value:new Date(new Rh(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:s=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[i]={type:Wh,value:Nh(s.subarray(0,4))+"-"+Nh(s.subarray(4,6))+"-"+Nh(s.subarray(6,8))+"-"+Nh(s.subarray(8,10))+"-"+Nh(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},Fh);function Fh(e,t){this.toUtf8=e,this.fromUtf8=t}(lf={})[lf.boolTrue=0]="boolTrue",lf[lf.boolFalse=1]="boolFalse",lf[lf.byte=2]="byte",lf[lf.short=3]="short",lf[lf.integer=4]="integer",lf[lf.long=5]="long",lf[lf.byteArray=6]="byteArray",lf[lf.string=7]="string",lf[lf.timestamp=8]="timestamp",lf[lf.uuid=9]="uuid";var jh="boolean",Bh="byte",zh="short",Vh="integer",qh="long",Kh="binary",Hh="string",Gh="timestamp",Wh="uuid",$h=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Yh=(Jh.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,o=new Uint8Array(i),e=new DataView(o.buffer,o.byteOffset,o.byteLength),t=new l.Crc32;return e.setUint32(0,i,!1),e.setUint32(4,r.byteLength,!1),e.setUint32(8,t.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),e.setUint32(i-4,t.update(o.subarray(8,i-4)).digest(),!1),o},Jh.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=(a=new DataView(r,n,t)).getUint32(0,!1);if(t!==i)throw new Error("Reported message length does not match received message length");var o=a.getUint32(4,!1),s=a.getUint32(8,!1),e=a.getUint32(t-4,!1),a=(new l.Crc32).update(new Uint8Array(r,n,8));if(s!==a.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+a.digest()+")");if(a.update(new Uint8Array(r,n+8,t-12)),e!==a.digest())throw new Error("The message checksum ("+a.digest()+") did not match the expected value of "+e);return{headers:new DataView(r,n+8+4,o),body:new Uint8Array(r,n+8+4+o,i-o-16)}}(e),e=t.headers,t=t.body;return{headers:this.headerMarshaller.parse(e),body:t}},Jh.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},Jh);function Jh(e,t){this.headerMarshaller=new Dh(e,t)}function Zh(s){var a=0,u=0,c=null,l=null,e={};return e[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:t=s[Symbol.asyncIterator](),e.label=1;case 1:return[4,Y(t.next())];case 2:return i=e.sent(),n=i.value,i.done?a?[3,4]:[4,Y(void 0)]:[3,10];case 3:return[2,e.sent()];case 4:return a!==u?[3,7]:[4,Y(c)];case 5:return[4,e.sent()];case 6:return e.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,Y(void 0)];case 9:return[2,e.sent()];case 10:o=n.length,r=0,e.label=11;case 11:if(!(r<o))return[3,15];if(!c){if(i=o-r,l=l||new Uint8Array(4),i=Math.min(4-u,i),l.set(n.slice(r,r+i),u),r+=i,(u+=i)<4)return[3,15];!function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);a=e,u=4,c=new Uint8Array(e),new DataView(c.buffer).setUint32(0,e,!1)}(new DataView(l.buffer).getUint32(0,!1)),l=null}return o=Math.min(a-u,o-r),c.set(n.slice(r,r+o),u),u+=o,r+=o,a&&a===u?[4,Y(c)]:[3,14];case 12:return[4,e.sent()];case 13:e.sent(),c=null,u=a=0,e.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},e}var Xh=(Qh.prototype.deserialize=function(e,t){var p,d,e=Zh(e);return p=e,d={eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder},(t={})[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,i,o,s,a,u,c,l;return H(this,function(e){switch(e.label){case 0:e.trys.push([0,12,13,18]),t=Z(p),e.label=1;case 1:return[4,Y(t.next())];case 2:if((n=e.sent()).done)return[3,11];if(s=n.value,r=d.eventMarshaller.unmarshall(s),"error"!==(i=r.headers[":message-type"].value))return[3,3];throw(s=new Error(r.headers[":error-message"].value||"UnknownError")).name=r.headers[":error-code"].value,s;case 3:return"exception"!==i?[3,5]:(o=r.headers[":exception-type"].value,(a={})[o]=r,[4,Y(d.deserializer(a))]);case 4:if((s=e.sent()).$unknown)throw(a=new Error(d.toUtf8(r.body))).name=o,a;throw s[o];case 5:return"event"!==i?[3,9]:((u={})[r.headers[":event-type"].value]=r,[4,Y(d.deserializer(u))]);case 6:return(u=e.sent()).$unknown?[3,10]:[4,Y(u)];case 7:return[4,e.sent()];case 8:return e.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+r.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return c=e.sent(),c={error:c},[3,18];case 13:return e.trys.push([13,,16,17]),n&&!n.done&&(l=t.return)?[4,Y(l.call(t))]:[3,15];case 14:e.sent(),e.label=15;case 15:return[3,17];case 16:if(c)throw c.error;return[7];case 17:return[7];case 18:return[2]}})})},t},Qh.prototype.serialize=function(s,a){var u=this,e={};return e[Symbol.asyncIterator]=function(){return J(this,arguments,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:e.trys.push([0,7,8,13]),t=Z(s),e.label=1;case 1:return[4,Y(t.next())];case 2:return(n=e.sent()).done?[3,6]:(r=n.value,[4,Y(u.eventMarshaller.marshall(a(r)))]);case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return i=e.sent(),i={error:i},[3,13];case 8:return e.trys.push([8,,11,12]),n&&!n.done&&(o=t.return)?[4,Y(o.call(t))]:[3,10];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(i)throw i.error;return[7];case 12:return[7];case 13:return[4,Y(new Uint8Array(0))];case 14:return[4,e.sent()];case 15:return e.sent(),[2]}})})},e},Qh);function Qh(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Yh(t,e),this.utfEncoder=t}var eg=(tg.prototype.deserialize=function(e,t){e="function"==typeof e[Symbol.asyncIterator]?e:function(o){return J(this,arguments,function(){var t,n,r,i;return H(this,function(e){switch(e.label){case 0:n=t=!1,r=new Array,o.on("error",function(e){if(t=t||!0,e)throw e}),o.on("data",function(e){r.push(e)}),o.on("end",function(){t=!0}),e.label=1;case 1:return n?[3,6]:[4,Y(new Promise(function(e){return setTimeout(function(){return e(r.shift())},0)}))];case 2:return(i=e.sent())?[4,Y(i)]:[3,5];case 3:return[4,e.sent()];case 4:e.sent(),e.label=5;case 5:return n=t&&0===r.length,[3,1];case 6:return[2]}})})}(e);return this.universalMarshaller.deserialize(e,t)},tg.prototype.serialize=function(e,t){t=this.universalMarshaller.serialize(e,t);if("function"==typeof u.Readable.from)return u.Readable.from(t);var r=t[Symbol.asyncIterator](),n=new u.Readable({autoDestroy:!0,objectMode:!0,read:function(){return K(this,void 0,void 0,function(){var n=this;return H(this,function(e){return r.next().then(function(e){var t=e.done,e=e.value;t?n.push(null):n.push(e)}).catch(function(e){n.destroy(e)}),[2]})})}});return n.on("error",function(){n.destroy()}),n.on("end",function(){n.destroy()}),n},tg);function tg(e){var t=e.utf8Encoder,e=e.utf8Decoder;this.eventMarshaller=new Yh(t,e),this.universalMarshaller=new Xh({utf8Decoder:e,utf8Encoder:t})}var ng,rg;function ig(t){return t&&["provider"].find(function(e){return t.hasOwnProperty(e)})}function og(e){return void 0!==e.redirectSignIn}(lf=ng=ng||{}).Cognito="COGNITO",lf.Google="Google",lf.Facebook="Facebook",lf.Amazon="LoginWithAmazon",lf.Apple="SignInWithApple",(lf=rg=rg||{}).NoConfig="noConfig",lf.MissingAuthConfig="missingAuthConfig",lf.EmptyUsername="emptyUsername",lf.InvalidUsername="invalidUsername",lf.EmptyPassword="emptyPassword",lf.EmptyCode="emptyCode",lf.SignUpError="signUpError",lf.NoMFA="noMFA",lf.InvalidMFA="invalidMFA",lf.EmptyChallengeResponse="emptyChallengeResponse",lf.NoUserSession="noUserSession",lf.Default="default";var sg,ag=function(){function e(e){var t=e||{},n=t.ValidationData,r=t.Username,i=t.Password,e=t.AuthParameters,t=t.ClientMetadata;this.validationData=n||{},this.authParameters=e||{},this.clientMetadata=t||{},this.username=r,this.password=i}var t=e.prototype;return t.getUsername=function(){return this.username},t.getPassword=function(){return this.password},t.getValidationData=function(){return this.validationData},t.getAuthParameters=function(){return this.authParameters},t.getClientMetadata=function(){return this.clientMetadata},e}();if(!(sg=!(sg=!(sg="undefined"!=typeof window&&window.crypto?window.crypto:sg)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:sg)&&void 0!==S&&S.crypto?S.crypto:sg)&&"function"==typeof require)try{sg=require("crypto")}catch(e){}var ug=function(){function r(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length}var e=r.prototype;return e.random=function(e){for(var t=[],n=0;n<e;n+=4)t.push(function(){if(sg){if("function"==typeof sg.getRandomValues)try{return sg.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof sg.randomBytes)try{return sg.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")}());return new r(t,e)},e.toString=function(){return function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")}(this)},r}();function cg(e,t){null!=e&&this.fromString(e,t)}function lg(){return new cg(null)}lf="undefined"!=typeof navigator,S=lf&&"Microsoft Internet Explorer"==navigator.appName?(cg.prototype.am=function(e,t,n,r,i,o){for(var s=32767&t,a=t>>15;0<=--o;){var u=32767&this[e],c=this[e++]>>15,l=a*u+c*s;i=((u=s*u+((32767&l)<<15)+n[r]+(1073741823&i))>>>30)+(l>>>15)+a*c+(i>>>30),n[r++]=1073741823&u}return i},30):lf&&"Netscape"!=navigator.appName?(cg.prototype.am=function(e,t,n,r,i,o){for(;0<=--o;){var s=t*this[e++]+n[r]+i;i=Math.floor(s/67108864),n[r++]=67108863&s}return i},26):(cg.prototype.am=function(e,t,n,r,i,o){for(var s=16383&t,a=t>>14;0<=--o;){var u=16383&this[e],c=this[e++]>>14,l=a*u+c*s;i=((u=s*u+((16383&l)<<14)+n[r]+i)>>28)+(l>>14)+a*c,n[r++]=268435455&u}return i},28);cg.prototype.DB=S,cg.prototype.DM=(1<<S)-1,cg.prototype.DV=1<<S;cg.prototype.FV=Math.pow(2,52),cg.prototype.F1=52-S,cg.prototype.F2=2*S-52;for(var pg="0123456789abcdefghijklmnopqrstuvwxyz",dg=new Array,fg="0".charCodeAt(0),hg=0;hg<=9;++hg)dg[fg++]=hg;for(fg="a".charCodeAt(0),hg=10;hg<36;++hg)dg[fg++]=hg;for(fg="A".charCodeAt(0),hg=10;hg<36;++hg)dg[fg++]=hg;function gg(e){return pg.charAt(e)}function vg(e){var t=lg();return t.fromInt(e),t}function mg(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}function yg(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function bg(e){return d.Buffer.from((new ug).random(e).toString(),"hex")}yg.prototype.convert=function(e){var t=lg();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&0<t.compareTo(cg.ZERO)&&this.m.subTo(t,t),t},yg.prototype.revert=function(e){var t=lg();return e.copyTo(t),this.reduce(t),t},yg.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),0<=e.compareTo(this.m)&&e.subTo(this.m,e)},yg.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},yg.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},cg.prototype.copyTo=function(e){for(var t=this.t-1;0<=t;--t)e[t]=this[t];e.t=this.t,e.s=this.s},cg.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,0<e?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},cg.prototype.fromString=function(e,t){var n;if(16==t)n=4;else if(8==t)n=3;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");n=2}this.t=0,this.s=0;for(var r=e.length,i=!1,o=0;0<=--r;){var s=(s=r,null==(s=dg[e.charCodeAt(s)])?-1:s);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==o?this[this.t++]=s:o+n>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=n)>=this.DB&&(o-=this.DB))}this.clamp(),i&&cg.ZERO.subTo(this,this)},cg.prototype.clamp=function(){for(var e=this.s&this.DM;0<this.t&&this[this.t-1]==e;)--this.t},cg.prototype.dlShiftTo=function(e,t){for(var n=this.t-1;0<=n;--n)t[n+e]=this[n];for(n=e-1;0<=n;--n)t[n]=0;t.t=this.t+e,t.s=this.s},cg.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},cg.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(e/this.DB),s=this.s<<n&this.DM,a=this.t-1;0<=a;--a)t[a+o+1]=this[a]>>r|s,s=(this[a]&i)<<n;for(a=o-1;0<=a;--a)t[a]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},cg.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,o=(1<<r)-1;t[0]=this[n]>>r;for(var s=n+1;s<this.t;++s)t[s-n-1]|=(this[s]&o)<<i,t[s-n]=this[s]>>r;0<r&&(t[this.t-n-1]|=(this.s&o)<<i),t.t=this.t-n,t.clamp()}},cg.prototype.subTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:0<r&&(t[n++]=r),t.t=n,t.clamp()},cg.prototype.multiplyTo=function(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;0<=--i;)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&cg.ZERO.subTo(t,t)},cg.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;0<=--n;)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}0<e.t&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},cg.prototype.divRemTo=function(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=t&&t.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=lg());var o=lg(),s=this.s,a=e.s,e=this.DB-mg(r[r.t-1]);0<e?(r.lShiftTo(e,o),i.lShiftTo(e,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,c=o[u-1];if(0!=c){var i=c*(1<<this.F1)+(1<u?o[u-2]>>this.F2:0),l=this.FV/i,p=(1<<this.F1)/i,d=1<<this.F2,f=n.t,h=f-u,g=null==t?lg():t;for(o.dlShiftTo(h,g),0<=n.compareTo(g)&&(n[n.t++]=1,n.subTo(g,n)),cg.ONE.dlShiftTo(u,g),g.subTo(o,o);o.t<u;)o[o.t++]=0;for(;0<=--h;){var v=n[--f]==c?this.DM:Math.floor(n[f]*l+(n[f-1]+d)*p);if((n[f]+=o.am(0,v,n,h,0,u))<v)for(o.dlShiftTo(h,g),n.subTo(g,n);n[f]<--v;)n.subTo(g,n)}null!=t&&(n.drShiftTo(u,t),s!=a&&cg.ZERO.subTo(t,t)),n.t=u,n.clamp(),0<e&&n.rShiftTo(e,n),s<0&&cg.ZERO.subTo(n,n)}}},cg.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return 0<(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)?this.DV-t:-t},cg.prototype.addTo=function(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this[n]+e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e[n],t[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,0<r?t[n++]=r:r<-1&&(t[n++]=this.DV+r),t.t=n,t.clamp()},cg.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)throw new Error("Only radix 2, 4, 8, 16, 32 are supported");t=2}var n,r=(1<<t)-1,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(0<s--)for(a<this.DB&&0<(n=this[s]>>a)&&(i=!0,o=gg(n));0<=s;)a<t?(n=(this[s]&(1<<a)-1)<<t-a,n|=this[--s]>>(a+=this.DB-t)):(n=this[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),(i=0<n?!0:i)&&(o+=gg(n));return i?o:"0"},cg.prototype.negate=function(){var e=lg();return cg.ZERO.subTo(this,e),e},cg.prototype.abs=function(){return this.s<0?this.negate():this},cg.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;0<=--n;)if(0!=(t=this[n]-e[n]))return t;return 0},cg.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+mg(this[this.t-1]^this.s&this.DM)},cg.prototype.mod=function(e){var t=lg();return this.abs().divRemTo(e,null,t),this.s<0&&0<t.compareTo(cg.ZERO)&&e.subTo(t,t),t},cg.prototype.equals=function(e){return 0==this.compareTo(e)},cg.prototype.add=function(e){var t=lg();return this.addTo(e,t),t},cg.prototype.subtract=function(e){var t=lg();return this.subTo(e,t),t},cg.prototype.multiply=function(e){var t=lg();return this.multiplyTo(e,t),t},cg.prototype.divide=function(e){var t=lg();return this.divRemTo(e,t,null),t},cg.prototype.modPow=function(e,t,n){var r=e.bitLength(),i=vg(1),o=new yg(t);if(r<=0)return i;var s=r<18?1:r<48?3:r<144?4:r<768?5:6,a=new Array,u=3,c=s-1,l=(1<<s)-1;if(a[1]=o.convert(this),1<s){var p=lg();for(o.sqrTo(a[1],p);u<=l;)a[u]=lg(),o.mulTo(p,a[u-2],a[u]),u+=2}for(var d,f,h=e.t-1,g=!0,v=lg(),r=mg(e[h])-1;0<=h;){for(c<=r?d=e[h]>>r-c&l:(d=(e[h]&(1<<r+1)-1)<<c-r,0<h&&(d|=e[h-1]>>this.DB+r-c)),u=s;0==(1&d);)d>>=1,--u;if((r-=u)<0&&(r+=this.DB,--h),g)a[d].copyTo(i),g=!1;else{for(;1<u;)o.sqrTo(i,v),o.sqrTo(v,i),u-=2;0<u?o.sqrTo(i,v):(f=i,i=v,v=f),o.mulTo(v,a[d],i)}for(;0<=h&&0==(e[h]&1<<r);)o.sqrTo(i,v),f=i,i=v,v=f,--r<0&&(r=this.DB-1,--h)}return t=o.revert(i),n(null,t),t},cg.ZERO=vg(0),cg.ONE=vg(1);var Sg=/^[89a-f]/i,wg=function(){function e(e){this.N=new cg("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",16),this.g=new cg("2",16),this.k=new cg(this.hexHash(""+this.padHex(this.N)+this.padHex(this.g)),16),this.smallAValue=this.generateRandomSmallA(),this.getLargeAValue(function(){}),this.infoBits=d.Buffer.from("Caldera Derived Key","utf8"),this.poolName=e}var t=e.prototype;return t.getSmallAValue=function(){return this.smallAValue},t.getLargeAValue=function(n){var r=this;this.largeAValue?n(null,this.largeAValue):this.calculateA(this.smallAValue,function(e,t){e&&n(e,null),r.largeAValue=t,n(null,r.largeAValue)})},t.generateRandomSmallA=function(){return new cg(bg(128).toString("hex"),16)},t.generateRandomString=function(){return bg(40).toString("base64")},t.getRandomPassword=function(){return this.randomPassword},t.getSaltDevices=function(){return this.SaltToHashDevices},t.getVerifierDevices=function(){return this.verifierDevices},t.generateHashDevice=function(e,t,n){var r=this;this.randomPassword=this.generateRandomString();e=""+e+t+":"+this.randomPassword,t=this.hash(e),e=bg(16).toString("hex");this.SaltToHashDevices=this.padHex(new cg(e,16)),this.g.modPow(new cg(this.hexHash(this.SaltToHashDevices+t),16),this.N,function(e,t){e&&n(e,null),r.verifierDevices=r.padHex(t),n(null,null)})},t.calculateA=function(e,n){var r=this;this.g.modPow(e,this.N,function(e,t){e&&n(e,null),t.mod(r.N).equals(cg.ZERO)&&n(new Error("Illegal paramater. A mod N cannot be 0."),null),n(null,t)})},t.calculateU=function(e,t){return this.UHexHash=this.hexHash(this.padHex(e)+this.padHex(t)),new cg(this.UHexHash,16)},t.hash=function(e){e=e instanceof d.Buffer?w.lib.WordArray.create(e):e,e=E(e).toString();return new Array(64-e.length).join("0")+e},t.hexHash=function(e){return this.hash(d.Buffer.from(e,"hex"))},t.computehkdf=function(e,t){var n=w.lib.WordArray.create(d.Buffer.concat([this.infoBits,d.Buffer.from(String.fromCharCode(1),"utf8")])),e=e instanceof d.Buffer?w.lib.WordArray.create(e):e,t=t instanceof d.Buffer?w.lib.WordArray.create(t):t,t=A(e,t),t=A(n,t);return d.Buffer.from(t.toString(),"hex").slice(0,16)},t.getPasswordAuthenticationKey=function(e,t,n,r,i){var o=this;if(n.mod(this.N).equals(cg.ZERO))throw new Error("B cannot be zero.");if(this.UValue=this.calculateU(this.largeAValue,n),this.UValue.equals(cg.ZERO))throw new Error("U cannot be zero.");t=""+this.poolName+e+":"+t,t=this.hash(t),t=new cg(this.hexHash(this.padHex(r)+t),16);this.calculateS(t,n,function(e,t){e&&i(e,null);t=o.computehkdf(d.Buffer.from(o.padHex(t),"hex"),d.Buffer.from(o.padHex(o.UValue),"hex"));i(null,t)})},t.calculateS=function(n,r,i){var o=this;this.g.modPow(n,this.N,function(e,t){e&&i(e,null),r.subtract(o.k.multiply(t)).modPow(o.smallAValue.add(o.UValue.multiply(n)),o.N,function(e,t){e&&i(e,null),i(null,t.mod(o.N))})})},t.getNewPasswordRequiredChallengeUserAttributePrefix=function(){return"userAttributes."},t.padHex=function(e){if(!(e instanceof cg))throw new Error("Not a BigInteger");var t=e.compareTo(cg.ZERO)<0,e=e.abs().toString(16);return e=e.length%2!=0?"0"+e:e,e=Sg.test(e)?"00"+e:e,e=t&&(e=new cg(e.split("").map(function(e){e=15&~parseInt(e,16);return"0123456789ABCDEF".charAt(e)}).join(""),16).add(cg.ONE).toString(16)).toUpperCase().startsWith("FF8")?e.substring(2):e},e}(),lf=function(){function e(e){this.jwtToken=e||"",this.payload=this.decodePayload()}var t=e.prototype;return t.getJwtToken=function(){return this.jwtToken},t.getExpiration=function(){return this.payload.exp},t.getIssuedAt=function(){return this.payload.iat},t.decodePayload=function(){var e=this.jwtToken.split(".")[1];try{return JSON.parse(d.Buffer.from(e,"base64").toString("utf8"))}catch(e){return{}}},e}();function Cg(e,t){return(Cg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _g=function(t){var e,n;function r(e){e=(void 0===e?{}:e).AccessToken;return t.call(this,e||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),Cg(e.prototype.constructor=e,n),r}(lf);function Eg(e,t){return(Eg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ag=function(t){var e,n;function r(e){e=(void 0===e?{}:e).IdToken;return t.call(this,e||"")||this}return n=t,(e=r).prototype=Object.create(n.prototype),Eg(e.prototype.constructor=e,n),r}(lf),Ig=function(){function e(e){e=(void 0===e?{}:e).RefreshToken;this.token=e||""}return e.prototype.getToken=function(){return this.token},e}(),kg=function(){function e(e){var t=void 0===e?{}:e,n=t.IdToken,r=t.RefreshToken,e=t.AccessToken,t=t.ClockDrift;if(null==e||null==n)throw new Error("Id token and Access Token must be present.");this.idToken=n,this.refreshToken=r,this.accessToken=e,this.clockDrift=void 0===t?this.calculateClockDrift():t}var t=e.prototype;return t.getIdToken=function(){return this.idToken},t.getRefreshToken=function(){return this.refreshToken},t.getAccessToken=function(){return this.accessToken},t.getClockDrift=function(){return this.clockDrift},t.calculateClockDrift=function(){return Math.floor(new Date/1e3)-Math.min(this.accessToken.getIssuedAt(),this.idToken.getIssuedAt())},t.isValid=function(){var e=Math.floor(new Date/1e3)-this.clockDrift;return e<this.accessToken.getExpiration()&&e<this.idToken.getExpiration()},e}(),Tg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Pg=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Og=function(){function e(){}return e.prototype.getNowString=function(){var e=new Date,t=Pg[e.getUTCDay()],n=Tg[e.getUTCMonth()],r=e.getUTCDate(),i=e.getUTCHours();i<10&&(i="0"+i);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();return t+" "+n+" "+r+" "+i+":"+o+":"+(s=s<10?"0"+s:s)+" UTC "+e.getUTCFullYear()},e}(),xg=function(){function e(e){var t=void 0===e?{}:e,e=t.Name,t=t.Value;this.Name=e||"",this.Value=t||""}var t=e.prototype;return t.getValue=function(){return this.Value},t.setValue=function(e){return this.Value=e,this},t.getName=function(){return this.Name},t.setName=function(e){return this.Name=e,this},t.toString=function(){return JSON.stringify(this)},t.toJSON=function(){return{Name:this.Name,Value:this.Value}},e}(),Lg={},Ng=function(){function e(){}return e.setItem=function(e,t){return Lg[e]=t,Lg[e]},e.getItem=function(e){return Object.prototype.hasOwnProperty.call(Lg,e)?Lg[e]:void 0},e.removeItem=function(e){return delete Lg[e]},e.clear=function(){return Lg={}},e}(),Rg=function(){function e(){try{this.storageWindow=window.localStorage,this.storageWindow.setItem("aws.cognito.test-ls",1),this.storageWindow.removeItem("aws.cognito.test-ls")}catch(e){this.storageWindow=Ng}}return e.prototype.getStorage=function(){return this.storageWindow},e}(),Mg="undefined"!=typeof navigator?navigator.userAgent:"nodejs",Ug=function(){function e(e){if(null==e||null==e.Username||null==e.Pool)throw new Error("Username and Pool information are required.");this.username=e.Username||"",this.pool=e.Pool,this.Session=null,this.client=e.Pool.client,this.signInUserSession=null,this.authenticationFlowType="USER_SRP_AUTH",this.storage=e.Storage||(new Rg).getStorage(),this.keyPrefix="CognitoIdentityServiceProvider."+this.pool.getClientId(),this.userDataKey=this.keyPrefix+"."+this.username+".userData"}var t=e.prototype;return t.setSignInUserSession=function(e){this.clearCachedUserData(),this.signInUserSession=e,this.cacheTokens()},t.getSignInUserSession=function(){return this.signInUserSession},t.getUsername=function(){return this.username},t.getAuthenticationFlowType=function(){return this.authenticationFlowType},t.setAuthenticationFlowType=function(e){this.authenticationFlowType=e},t.initiateAuth=function(e,r){var i=this,t=e.getAuthParameters();t.USERNAME=this.username;e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"CUSTOM_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",e,function(e,t){if(e)return r.onFailure(e);var n=t.ChallengeName,e=t.ChallengeParameters;return"CUSTOM_CHALLENGE"===n?(i.Session=t.Session,r.customChallenge(e)):(i.signInUserSession=i.getCognitoUserSession(t.AuthenticationResult),i.cacheTokens(),r.onSuccess(i.signInUserSession))})},t.authenticateUser=function(e,t){return"USER_PASSWORD_AUTH"===this.authenticationFlowType?this.authenticateUserPlainUsernamePassword(e,t):"USER_SRP_AUTH"===this.authenticationFlowType||"CUSTOM_AUTH"===this.authenticationFlowType?this.authenticateUserDefaultAuth(e,t):t.onFailure(new Error("Authentication flow type is invalid."))},t.authenticateUserDefaultAuth=function(n,a){var o,u,c=this,l=new wg(this.pool.getUserPoolId().split("_")[1]),p=new Og,r={};null!=this.deviceKey&&(r.DEVICE_KEY=this.deviceKey),r.USERNAME=this.username,l.getLargeAValue(function(e,t){e&&a.onFailure(e),r.SRP_A=t.toString(16),"CUSTOM_AUTH"===c.authenticationFlowType&&(r.CHALLENGE_NAME="SRP_A");var s=0!==Object.keys(n.getValidationData()).length?n.getValidationData():n.getClientMetadata(),t={AuthFlow:c.authenticationFlowType,ClientId:c.pool.getClientId(),AuthParameters:r,ClientMetadata:s};c.getUserContextData(c.username)&&(t.UserContextData=c.getUserContextData(c.username)),c.client.request("InitiateAuth",t,function(e,r){if(e)return a.onFailure(e);var i=r.ChallengeParameters;c.username=i.USER_ID_FOR_SRP,c.userDataKey=c.keyPrefix+"."+c.username+".userData",o=new cg(i.SRP_B,16),u=new cg(i.SALT,16),c.getCachedDeviceKeyAndPassword(),l.getPasswordAuthenticationKey(c.username,n.getPassword(),o,u,function(e,t){e&&a.onFailure(e);var n=p.getNowString(),e=w.lib.WordArray.create(d.Buffer.concat([d.Buffer.from(c.pool.getUserPoolId().split("_")[1],"utf8"),d.Buffer.from(c.username,"utf8"),d.Buffer.from(i.SECRET_BLOCK,"base64"),d.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),t=I.stringify(A(e,t)),o={};o.USERNAME=c.username,o.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,o.TIMESTAMP=n,o.PASSWORD_CLAIM_SIGNATURE=t,null!=c.deviceKey&&(o.DEVICE_KEY=c.deviceKey);n=function n(r,i){return c.client.request("RespondToAuthChallenge",r,function(e,t){return e&&"ResourceNotFoundException"===e.code&&-1!==e.message.toLowerCase().indexOf("device")?(o.DEVICE_KEY=null,c.deviceKey=null,c.randomPassword=null,c.deviceGroupKey=null,c.clearCachedDeviceKeyAndPassword(),n(r,i)):i(e,t)})},t={ChallengeName:"PASSWORD_VERIFIER",ClientId:c.pool.getClientId(),ChallengeResponses:o,Session:r.Session,ClientMetadata:s};c.getUserContextData()&&(t.UserContextData=c.getUserContextData()),n(t,function(e,t){return e?a.onFailure(e):c.authenticateUserInternal(t,l,a)})})})})},t.authenticateUserPlainUsernamePassword=function(e,n){var r,i=this,t={};t.USERNAME=this.username,t.PASSWORD=e.getPassword(),t.PASSWORD?(r=new wg(this.pool.getUserPoolId().split("_")[1]),this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(t.DEVICE_KEY=this.deviceKey),e=0!==Object.keys(e.getValidationData()).length?e.getValidationData():e.getClientMetadata(),e={AuthFlow:"USER_PASSWORD_AUTH",ClientId:this.pool.getClientId(),AuthParameters:t,ClientMetadata:e},this.getUserContextData(this.username)&&(e.UserContextData=this.getUserContextData(this.username)),this.client.request("InitiateAuth",e,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,r,n)})):n.onFailure(new Error("PASSWORD parameter is required"))},t.authenticateUserInternal=function(n,t,r){var i=this,e=n.ChallengeName,o=n.ChallengeParameters;if("SMS_MFA"===e)return this.Session=n.Session,r.mfaRequired(e,o);if("SELECT_MFA_TYPE"===e)return this.Session=n.Session,r.selectMFAType(e,o);if("MFA_SETUP"===e)return this.Session=n.Session,r.mfaSetup(e,o);if("SOFTWARE_TOKEN_MFA"===e)return this.Session=n.Session,r.totpRequired(e,o);if("CUSTOM_CHALLENGE"===e)return this.Session=n.Session,r.customChallenge(o);if("NEW_PASSWORD_REQUIRED"===e){this.Session=n.Session;var s=null,a=null,u=[],c=t.getNewPasswordRequiredChallengeUserAttributePrefix();if(o&&(s=JSON.parse(n.ChallengeParameters.userAttributes),a=JSON.parse(n.ChallengeParameters.requiredAttributes)),a)for(var l=0;l<a.length;l++)u[l]=a[l].substr(c.length);return r.newPasswordRequired(s,u)}if("DEVICE_SRP_AUTH"!==e){this.signInUserSession=this.getCognitoUserSession(n.AuthenticationResult),this.challengeName=e,this.cacheTokens();var p=n.AuthenticationResult.NewDeviceMetadata;if(null==p)return r.onSuccess(this.signInUserSession);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return r.onFailure(e);e={Salt:d.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:d.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=p.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:p.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:Mg},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))})})}else this.getDeviceResponse(r)},t.completeNewPasswordChallenge=function(e,t,n,r){var i=this;if(!e)return n.onFailure(new Error("New password is required."));var o=new wg(this.pool.getUserPoolId().split("_")[1]),s=o.getNewPasswordRequiredChallengeUserAttributePrefix(),a={};t&&Object.keys(t).forEach(function(e){a[s+e]=t[e]}),a.NEW_PASSWORD=e,a.USERNAME=this.username;r={ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:this.pool.getClientId(),ChallengeResponses:a,Session:this.Session,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",r,function(e,t){return e?n.onFailure(e):i.authenticateUserInternal(t,o,n)})},t.getDeviceResponse=function(o,n){var s=this,a=new wg(this.deviceGroupKey),u=new Og,r={};r.USERNAME=this.username,r.DEVICE_KEY=this.deviceKey,a.getLargeAValue(function(e,t){e&&o.onFailure(e),r.SRP_A=t.toString(16);t={ChallengeName:"DEVICE_SRP_AUTH",ClientId:s.pool.getClientId(),ChallengeResponses:r,ClientMetadata:n};s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,r){if(e)return o.onFailure(e);var i=r.ChallengeParameters,t=new cg(i.SRP_B,16),e=new cg(i.SALT,16);a.getPasswordAuthenticationKey(s.deviceKey,s.randomPassword,t,e,function(e,t){if(e)return o.onFailure(e);var n=u.getNowString(),e=w.lib.WordArray.create(d.Buffer.concat([d.Buffer.from(s.deviceGroupKey,"utf8"),d.Buffer.from(s.deviceKey,"utf8"),d.Buffer.from(i.SECRET_BLOCK,"base64"),d.Buffer.from(n,"utf8")])),t=w.lib.WordArray.create(t),e=I.stringify(A(e,t)),t={};t.USERNAME=s.username,t.PASSWORD_CLAIM_SECRET_BLOCK=i.SECRET_BLOCK,t.TIMESTAMP=n,t.PASSWORD_CLAIM_SIGNATURE=e,t.DEVICE_KEY=s.deviceKey;t={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:s.pool.getClientId(),ChallengeResponses:t,Session:r.Session};s.getUserContextData()&&(t.UserContextData=s.getUserContextData()),s.client.request("RespondToAuthChallenge",t,function(e,t){return e?o.onFailure(e):(s.signInUserSession=s.getCognitoUserSession(t.AuthenticationResult),s.cacheTokens(),o.onSuccess(s.signInUserSession))})})})})},t.confirmRegistration=function(e,t,n,r){r={ClientId:this.pool.getClientId(),ConfirmationCode:e,Username:this.username,ForceAliasCreation:t,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmSignUp",r,function(e){return e?n(e,null):n(null,"SUCCESS")})},t.sendCustomChallengeAnswer=function(e,n,t){var r=this,i={};i.USERNAME=this.username,i.ANSWER=e;var o=new wg(this.pool.getUserPoolId().split("_")[1]);this.getCachedDeviceKeyAndPassword(),null!=this.deviceKey&&(i.DEVICE_KEY=this.deviceKey);t={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:i,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:t};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):r.authenticateUserInternal(t,o,n)})},t.sendMFACode=function(e,r,t,n){var i=this,o={};o.USERNAME=this.username,o.SMS_MFA_CODE=e;t=t||"SMS_MFA";"SOFTWARE_TOKEN_MFA"===t&&(o.SOFTWARE_TOKEN_MFA_CODE=e),null!=this.deviceKey&&(o.DEVICE_KEY=this.deviceKey);n={ChallengeName:t,ChallengeResponses:o,ClientId:this.pool.getClientId(),Session:this.Session,ClientMetadata:n};this.getUserContextData()&&(n.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",n,function(e,n){if(e)return r.onFailure(e);if("DEVICE_SRP_AUTH"!==n.ChallengeName){if(i.signInUserSession=i.getCognitoUserSession(n.AuthenticationResult),i.cacheTokens(),null==n.AuthenticationResult.NewDeviceMetadata)return r.onSuccess(i.signInUserSession);var t=new wg(i.pool.getUserPoolId().split("_")[1]);t.generateHashDevice(n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,n.AuthenticationResult.NewDeviceMetadata.DeviceKey,function(e){if(e)return r.onFailure(e);e={Salt:d.Buffer.from(t.getSaltDevices(),"hex").toString("base64"),PasswordVerifier:d.Buffer.from(t.getVerifierDevices(),"hex").toString("base64")};i.verifierDevices=e.PasswordVerifier,i.deviceGroupKey=n.AuthenticationResult.NewDeviceMetadata.DeviceGroupKey,i.randomPassword=t.getRandomPassword(),i.client.request("ConfirmDevice",{DeviceKey:n.AuthenticationResult.NewDeviceMetadata.DeviceKey,AccessToken:i.signInUserSession.getAccessToken().getJwtToken(),DeviceSecretVerifierConfig:e,DeviceName:Mg},function(e,t){return e?r.onFailure(e):(i.deviceKey=n.AuthenticationResult.NewDeviceMetadata.DeviceKey,i.cacheDeviceKeyAndPassword(),!0===t.UserConfirmationNecessary?r.onSuccess(i.signInUserSession,t.UserConfirmationNecessary):r.onSuccess(i.signInUserSession))})})}else i.getDeviceResponse(r)})},t.changePassword=function(e,t,n,r){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("ChangePassword",{PreviousPassword:e,ProposedPassword:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:r},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.enableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);var e=[];e.push({DeliveryMedium:"SMS",AttributeName:"phone_number"}),this.client.request("SetUserSettings",{MFAOptions:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.setUserMfaPreference=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("SetUserMFAPreference",{SMSMfaSettings:e,SoftwareTokenMfaSettings:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n(e,null):n(null,"SUCCESS")})},t.disableMFA=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("SetUserSettings",{MFAOptions:[],AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.deleteUser=function(t,e){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:e},function(e){return e?t(e,null):(n.clearCachedUser(),t(null,"SUCCESS"))})},t.updateAttributes=function(e,t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("UpdateUserAttributes",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserAttributes:e,ClientMetadata:n},function(e){return e?t(e,null):r.getUserData(function(){return t(null,"SUCCESS")},{bypassCache:!0})})},t.getUserAttributes=function(o){if(null==this.signInUserSession||!this.signInUserSession.isValid())return o(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){if(e)return o(e,null);for(var n=[],r=0;r<t.UserAttributes.length;r++){var i={Name:t.UserAttributes[r].Name,Value:t.UserAttributes[r].Value},i=new xg(i);n.push(i)}return o(null,n)})},t.getMFAOptions=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n(new Error("User is not authenticated"),null);this.client.request("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n(e,null):n(null,t.MFAOptions)})},t.createGetUserRequest=function(){return this.client.promisifyRequest("GetUser",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()})},t.refreshSessionIfPossible=function(n){var r=this;return void 0===n&&(n={}),new Promise(function(e){var t=r.signInUserSession.getRefreshToken();t&&t.getToken()?r.refreshSession(t,e,n.clientMetadata):e()})},t.getUserData=function(t,n){var r=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return this.clearCachedUserData(),t(new Error("User is not authenticated"),null);var e=this.getUserDataFromCache();if(e)if(this.isFetchUserDataAndTokenRequired(n))this.fetchUserData().then(function(e){return r.refreshSessionIfPossible(n).then(function(){return e})}).then(function(e){return t(null,e)}).catch(t);else try{return void t(null,JSON.parse(e))}catch(e){return this.clearCachedUserData(),void t(e,null)}else this.fetchUserData().then(function(e){t(null,e)}).catch(t)},t.getUserDataFromCache=function(){return this.storage.getItem(this.userDataKey)},t.isFetchUserDataAndTokenRequired=function(e){e=(e||{}).bypassCache;return void 0!==e&&e},t.fetchUserData=function(){var t=this;return this.createGetUserRequest().then(function(e){return t.cacheUserData(e),e})},t.deleteAttributes=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t(new Error("User is not authenticated"),null);this.client.request("DeleteUserAttributes",{UserAttributeNames:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t(e,null):t(null,"SUCCESS")})},t.resendConfirmationCode=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.client.request("ResendConfirmationCode",e,function(e,t){return e?n(e,null):n(null,t)})},t.getSession=function(e,t){if(void 0===t&&(t={}),null==this.username)return e(new Error("Username is null. Cannot retrieve a new session"),null);if(null!=this.signInUserSession&&this.signInUserSession.isValid())return e(null,this.signInUserSession);var n="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,r=n+".idToken",i=n+".accessToken",o=n+".refreshToken",n=n+".clockDrift";if(this.storage.getItem(r)){r=new Ag({IdToken:this.storage.getItem(r)}),i=new _g({AccessToken:this.storage.getItem(i)}),o=new Ig({RefreshToken:this.storage.getItem(o)}),n=parseInt(this.storage.getItem(n),0)||0,n=new kg({IdToken:r,AccessToken:i,RefreshToken:o,ClockDrift:n});if(n.isValid())return this.signInUserSession=n,e(null,this.signInUserSession);if(!o.getToken())return e(new Error("Cannot retrieve a new session. Please authenticate."),null);this.refreshSession(o,e,t.clientMetadata)}else e(new Error("Local storage is missing an ID Token, Please authenticate"),null)},t.refreshSession=function(n,e,t){var r=this,i=this.pool.wrapRefreshSessionCallback?this.pool.wrapRefreshSessionCallback(e):e,o={};o.REFRESH_TOKEN=n.getToken();var s="CognitoIdentityServiceProvider."+this.pool.getClientId(),e=s+".LastAuthUser";this.storage.getItem(e)&&(this.username=this.storage.getItem(e),s=s+"."+this.username+".deviceKey",this.deviceKey=this.storage.getItem(s),o.DEVICE_KEY=this.deviceKey);t={ClientId:this.pool.getClientId(),AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:o,ClientMetadata:t};this.getUserContextData()&&(t.UserContextData=this.getUserContextData()),this.client.request("InitiateAuth",t,function(e,t){if(e)return"NotAuthorizedException"===e.code&&r.clearCachedUser(),i(e,null);if(t){t=t.AuthenticationResult;return Object.prototype.hasOwnProperty.call(t,"RefreshToken")||(t.RefreshToken=n.getToken()),r.signInUserSession=r.getCognitoUserSession(t),r.cacheTokens(),i(null,r.signInUserSession)}})},t.cacheTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+"."+this.username+".clockDrift",e=e+".LastAuthUser";this.storage.setItem(t,this.signInUserSession.getIdToken().getJwtToken()),this.storage.setItem(n,this.signInUserSession.getAccessToken().getJwtToken()),this.storage.setItem(r,this.signInUserSession.getRefreshToken().getToken()),this.storage.setItem(i,""+this.signInUserSession.getClockDrift()),this.storage.setItem(e,this.username)},t.cacheUserData=function(e){this.storage.setItem(this.userDataKey,JSON.stringify(e))},t.clearCachedUserData=function(){this.storage.removeItem(this.userDataKey)},t.clearCachedUser=function(){this.clearCachedTokens(),this.clearCachedUserData()},t.cacheDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.setItem(e+".deviceKey",this.deviceKey),this.storage.setItem(t,this.randomPassword),this.storage.setItem(n,this.deviceGroupKey)},t.getCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".deviceKey",n=e+".randomPasswordKey",e=e+".deviceGroupKey";this.storage.getItem(t)&&(this.deviceKey=this.storage.getItem(t),this.randomPassword=this.storage.getItem(n),this.deviceGroupKey=this.storage.getItem(e))},t.clearCachedDeviceKeyAndPassword=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId()+"."+this.username,t=e+".randomPasswordKey",n=e+".deviceGroupKey";this.storage.removeItem(e+".deviceKey"),this.storage.removeItem(t),this.storage.removeItem(n)},t.clearCachedTokens=function(){var e="CognitoIdentityServiceProvider."+this.pool.getClientId(),t=e+"."+this.username+".idToken",n=e+"."+this.username+".accessToken",r=e+"."+this.username+".refreshToken",i=e+".LastAuthUser",e=e+"."+this.username+".clockDrift";this.storage.removeItem(t),this.storage.removeItem(n),this.storage.removeItem(r),this.storage.removeItem(i),this.storage.removeItem(e)},t.getCognitoUserSession=function(e){var t=new Ag(e),n=new _g(e),e=new Ig(e);return new kg({IdToken:t,AccessToken:n,RefreshToken:e})},t.forgotPassword=function(n,e){e={ClientId:this.pool.getClientId(),Username:this.username,ClientMetadata:e};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("ForgotPassword",e,function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess(t)})},t.confirmPassword=function(e,t,n,r){r={ClientId:this.pool.getClientId(),Username:this.username,ConfirmationCode:e,Password:t,ClientMetadata:r};this.getUserContextData()&&(r.UserContextData=this.getUserContextData()),this.client.request("ConfirmForgotPassword",r,function(e){return e?n.onFailure(e):n.onSuccess()})},t.getAttributeVerificationCode=function(e,n,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetUserAttributeVerificationCode",{AttributeName:e,AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),ClientMetadata:t},function(e,t){return e?n.onFailure(e):"function"==typeof n.inputVerificationCode?n.inputVerificationCode(t):n.onSuccess()})},t.verifyAttribute=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("VerifyUserAttribute",{AttributeName:e,Code:t,AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?n.onFailure(e):n.onSuccess("SUCCESS")})},t.getDevice=function(n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));this.client.request("GetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey},function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.forgetSpecificDevice=function(e,t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("ForgetDevice",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:e},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.forgetDevice=function(t){var n=this;this.forgetSpecificDevice(this.deviceKey,{onFailure:t.onFailure,onSuccess:function(e){return n.deviceKey=null,n.deviceGroupKey=null,n.randomPassword=null,n.clearCachedDeviceKeyAndPassword(),t.onSuccess(e)}})},t.setDeviceStatusRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.setDeviceStatusNotRemembered=function(t){if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("UpdateDeviceStatus",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),DeviceKey:this.deviceKey,DeviceRememberedStatus:"not_remembered"},function(e){return e?t.onFailure(e):t.onSuccess("SUCCESS")})},t.listDevices=function(e,t,n){if(null==this.signInUserSession||!this.signInUserSession.isValid())return n.onFailure(new Error("User is not authenticated"));e={AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),Limit:e};t&&(e.PaginationToken=t),this.client.request("ListDevices",e,function(e,t){return e?n.onFailure(e):n.onSuccess(t)})},t.globalSignOut=function(t){var n=this;if(null==this.signInUserSession||!this.signInUserSession.isValid())return t.onFailure(new Error("User is not authenticated"));this.client.request("GlobalSignOut",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e){return e?t.onFailure(e):(n.clearCachedUser(),t.onSuccess("SUCCESS"))})},t.signOut=function(){this.signInUserSession=null,this.clearCachedUser()},t.sendMFASelectionAnswer=function(n,r){var i=this,e={};e.USERNAME=this.username,e.ANSWER=n;e={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:e,ClientId:this.pool.getClientId(),Session:this.Session};this.getUserContextData()&&(e.UserContextData=this.getUserContextData()),this.client.request("RespondToAuthChallenge",e,function(e,t){return e?r.onFailure(e):(i.Session=t.Session,"SMS_MFA"===n?r.mfaRequired(t.ChallengeName,t.ChallengeParameters):"SOFTWARE_TOKEN_MFA"===n?r.totpRequired(t.ChallengeName,t.ChallengeParameters):void 0)})},t.getUserContextData=function(){return this.pool.getUserContextData(this.username)},t.associateSoftwareToken=function(n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("AssociateSoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken()},function(e,t){return e?n.onFailure(e):n.associateSecretCode(t.SecretCode)}):this.client.request("AssociateSoftwareToken",{Session:this.Session},function(e,t){return e?n.onFailure(e):(r.Session=t.Session,n.associateSecretCode(t.SecretCode))})},t.verifySoftwareToken=function(e,t,n){var r=this;null!=this.signInUserSession&&this.signInUserSession.isValid()?this.client.request("VerifySoftwareToken",{AccessToken:this.signInUserSession.getAccessToken().getJwtToken(),UserCode:e,FriendlyDeviceName:t},function(e,t){return e?n.onFailure(e):n.onSuccess(t)}):this.client.request("VerifySoftwareToken",{Session:this.Session,UserCode:e,FriendlyDeviceName:t},function(e,t){if(e)return n.onFailure(e);r.Session=t.Session;t={};t.USERNAME=r.username;t={ChallengeName:"MFA_SETUP",ClientId:r.pool.getClientId(),ChallengeResponses:t,Session:r.Session};r.getUserContextData()&&(t.UserContextData=r.getUserContextData()),r.client.request("RespondToAuthChallenge",t,function(e,t){return e?n.onFailure(e):(r.signInUserSession=r.getCognitoUserSession(t.AuthenticationResult),r.cacheTokens(),n.onSuccess(r.signInUserSession))})})},e}();function Dg(){}function Fg(e){var n="function"==typeof Map?new Map:void 0;return(Fg=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return jg(e,arguments,zg(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Bg(t,e)})(e)}function jg(e,t,n){return(jg=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&Bg(r,n.prototype),r}).apply(null,arguments)}function Bg(e,t){return(Bg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zg(e){return(zg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Dg.prototype.userAgent="aws-amplify/0.1.x js";function Vg(e){return(e=window.open(e,"_self"))?Promise.resolve(e):Promise.reject()}function qg(e,t,n){_.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",Qg)}var Kg=function(i){var e,t;function n(e,t,n,r){e=i.call(this,e)||this;return e.code=t,e.name=n,e.statusCode=r,e}return t=i,(e=n).prototype=Object.create(t.prototype),Bg(e.prototype.constructor=e,t),n}(Fg(Error)),Hg=function(){function e(e,t,n){this.endpoint=t||"https://cognito-idp."+e+".amazonaws.com/";n=(n||{}).credentials;this.fetchOptions=n?{credentials:n}:{}}var t=e.prototype;return t.promisifyRequest=function(e,t){var i=this;return new Promise(function(n,r){i.request(e,t,function(e,t){e?r(new Kg(e.message,e.code,e.name,e.statusCode)):n(t)})})},t.request=function(e,t,i){var o,t=Object.assign({},this.fetchOptions,{headers:{"Content-Type":"application/x-amz-json-1.1","X-Amz-Target":"AWSCognitoIdentityProviderService."+e,"X-Amz-User-Agent":Dg.prototype.userAgent},method:"POST",mode:"cors",cache:"no-cache",body:JSON.stringify(t)});fetch(this.endpoint,t).then(function(e){return o=e},function(e){if(e instanceof TypeError)throw new Error("Network error");throw e}).then(function(e){return e.json().catch(function(){return{}})}).then(function(e){if(o.ok)return i(null,e);var t=(e.__type||e.code).split("#").pop(),e={code:t,name:t,message:e.message||e.Message||null};return i(e)}).catch(function(t){if(!(o&&o.headers&&o.headers.get("x-amzn-errortype"))){if(t instanceof Error&&"Network error"===t.message){var e={code:"NetworkError",name:t.name,message:t.message};return i(e)}return i(t)}try{var n=o.headers.get("x-amzn-errortype").split(":")[0],r={code:n,name:n,statusCode:o.status,message:o.status?o.status.toString():null};return i(r)}catch(e){return i(t)}})},e}(),Gg=function(){function e(e,t){var n=e||{},r=n.UserPoolId,i=n.ClientId,o=n.endpoint,s=n.fetchOptions,a=n.AdvancedSecurityDataCollectionFlag;if(!r||!i)throw new Error("Both UserPoolId and ClientId are required.");if(!/^[\w-]+_.+$/.test(r))throw new Error("Invalid UserPoolId format.");n=r.split("_")[0];this.userPoolId=r,this.clientId=i,this.client=new Hg(n,o,s),this.advancedSecurityDataCollectionFlag=!1!==a,this.storage=e.Storage||(new Rg).getStorage(),t&&(this.wrapRefreshSessionCallback=t)}var t=e.prototype;return t.getUserPoolId=function(){return this.userPoolId},t.getClientId=function(){return this.clientId},t.signUp=function(n,e,t,r,i,o){var s=this,o={ClientId:this.clientId,Username:n,Password:e,UserAttributes:t,ValidationData:r,ClientMetadata:o};this.getUserContextData(n)&&(o.UserContextData=this.getUserContextData(n)),this.client.request("SignUp",o,function(e,t){if(e)return i(e,null);e={Username:n,Pool:s,Storage:s.storage},t={user:new Ug(e),userConfirmed:t.UserConfirmed,userSub:t.UserSub,codeDeliveryDetails:t.CodeDeliveryDetails};return i(null,t)})},t.getCurrentUser=function(){var e="CognitoIdentityServiceProvider."+this.clientId+".LastAuthUser",e=this.storage.getItem(e);if(e){e={Username:e,Pool:this,Storage:this.storage};return new Ug(e)}return null},t.getUserContextData=function(e){if("undefined"!=typeof AmazonCognitoAdvancedSecurityData){var t=AmazonCognitoAdvancedSecurityData;if(this.advancedSecurityDataCollectionFlag){e=t.getData(e,this.userPoolId,this.clientId);if(e)return{EncodedData:e}}return{}}},e}(),Wg=function(){function e(e){if(!e.domain)throw new Error("The domain of cookieStorage can not be undefined.");if(this.domain=e.domain,e.path?this.path=e.path:this.path="/",Object.prototype.hasOwnProperty.call(e,"expires")?this.expires=e.expires:this.expires=365,Object.prototype.hasOwnProperty.call(e,"secure")?this.secure=e.secure:this.secure=!0,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!["strict","lax","none"].includes(e.sameSite))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===e.sameSite&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=e.sameSite}else this.sameSite=null}var t=e.prototype;return t.setItem=function(e,t){var n={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(n.sameSite=this.sameSite),T.set(e,t,n),T.get(e)},t.getItem=function(e){return T.get(e)},t.removeItem=function(e){var t={path:this.path,expires:this.expires,domain:this.domain,secure:this.secure};return this.sameSite&&(t.sameSite=this.sameSite),T.remove(e,t)},t.clear=function(){for(var e=T.get(),t=Object.keys(e).length,n=0;n<t;++n)this.removeItem(Object.keys(e)[n]);return{}},e}(),$g=new Map,Yg=function(){return(Yg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Jg=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Zg=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Xg=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},Qg="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",ev=new _.ConsoleLogger("OAuth"),tv=(nv.prototype.isValidScopes=function(e){return Array.isArray(e)&&e.every(function(e){return"string"==typeof e})},nv.prototype.oauthSignIn=function(e,t,n,r,i,o){void 0===e&&(e="code"),void 0===i&&(i=ng.Cognito);var s=this._generateState(32),a=o?s+"-"+_.urlSafeEncode(o):s;$g.set("oauth_state",a);o=this._generateRandom(128);$g.set("ouath_pkce_key",o);s=this._generateChallenge(o),o=this._scopes.join(" "),e="https://"+t+"/oauth2/authorize?"+Object.entries(Yg(Yg({redirect_uri:n,response_type:e,client_id:r,identity_provider:i,scope:o,state:a},"code"===e?{code_challenge:s}:{}),"code"===e?{code_challenge_method:"S256"}:{})).map(function(e){var t=Xg(e,2),e=t[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&");ev.debug("Redirecting to "+e),this._urlOpener(e,n)},nv.prototype._handleCodeFlow=function(c){return Jg(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Zg(this,function(e){switch(e.label){case 0:return(n=(h.parse(c).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Xg(t,2),t=n[0],n=n[1];return Yg(Yg({},e),((e={})[t]=n,e))},{code:void 0}).code,r=h.parse(c).pathname||"/",i=h.parse(this._config.redirectSignIn).pathname||"/",n&&r===i)?(s="https://"+this._config.domain+"/oauth2/token",qg("codeFlow",{},"Retrieving tokens from "+s),o=og(this._config)?this._cognitoClientId:this._config.clientID,a=og(this._config)?this._config.redirectSignIn:this._config.redirectUri,t=$g.get("ouath_pkce_key"),$g.delete("ouath_pkce_key"),o=Yg({grant_type:"authorization_code",code:n,client_id:o,redirect_uri:a},(u=t)?{code_verifier:u}:{}),ev.debug("Calling token endpoint: "+s+" with",o),a=Object.entries(o).map(function(e){var t=Xg(e,2),e=t[0],t=t[1];return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"),[4,fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a})]):[2];case 1:return[4,e.sent().json()];case 2:if(u=e.sent(),o=u.access_token,s=u.refresh_token,a=u.id_token,u=u.error)throw new Error(u);return[2,{accessToken:o,refreshToken:s,idToken:a}]}var t})})},nv.prototype._handleImplicitFlow=function(r){return Jg(this,void 0,void 0,function(){var t,n;return Zg(this,function(e){return n=(h.parse(r).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Xg(t,2),t=n[0],n=n[1];return Yg(Yg({},e),((e={})[t]=n,e))},{id_token:void 0,access_token:void 0}),t=n.id_token,n=n.access_token,qg("implicitFlow",{},"Got tokens from "+r),ev.debug("Retrieving implicit tokens from "+r+" with"),[2,{accessToken:n,idToken:t,refreshToken:null}]})})},nv.prototype.handleAuthResponse=function(s){return Jg(this,void 0,void 0,function(){var t,n,r,i,o;return Zg(this,function(e){switch(e.label){case 0:if(e.trys.push([0,5,,6]),o=s?Yg(Yg({},(h.parse(s).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Xg(t,2),t=n[0],n=n[1];return e[t]=n,e},{})),(h.parse(s).query||"").split("&").map(function(e){return e.split("=")}).reduce(function(e,t){var n=Xg(t,2),t=n[0],n=n[1];return e[t]=n,e},{})):{},t=o.error,n=o.error_description,t)throw new Error(n);return(o=this._validateState(o),ev.debug("Starting "+this._config.responseType+" flow with "+s),"code"!==this._config.responseType)?[3,2]:(r=[{}],[4,this._handleCodeFlow(s)]);case 1:return[2,Yg.apply(void 0,[Yg.apply(void 0,r.concat([e.sent()])),{state:o}])];case 2:return i=[{}],[4,this._handleImplicitFlow(s)];case 3:return[2,Yg.apply(void 0,[Yg.apply(void 0,i.concat([e.sent()])),{state:o}])];case 4:return[3,6];case 5:throw o=e.sent(),ev.error("Error handling auth response.",o),o;case 6:return[2]}})})},nv.prototype._validateState=function(e){if(e){var t,t=(t=$g.get("oauth_state"),$g.delete("oauth_state"),t),e=e.state;if(t&&t!==e)throw new Error("Invalid state in OAuth flow");return e}},nv.prototype.signOut=function(){return Jg(this,void 0,void 0,function(){var t,n,r;return Zg(this,function(e){return t="https://"+this._config.domain+"/logout?",n=og(this._config)?this._cognitoClientId:this._config.oauth.clientID,r=og(this._config)?this._config.redirectSignOut:this._config.returnTo,t+=Object.entries({client_id:n,logout_uri:encodeURIComponent(r)}).map(function(e){e=Xg(e,2);return e[0]+"="+e[1]}).join("&"),qg("oAuthSignOut",{oAuth:"signOut"},"Signing out from "+t),ev.debug("Signing out from "+t),[2,this._urlOpener(t)]})})},nv.prototype._generateState=function(e){for(var t="",n=e,r="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";0<n;--n)t+=r[Math.round(Math.random()*(r.length-1))];return t},nv.prototype._generateChallenge=function(e){return this._base64URL(E(e))},nv.prototype._base64URL=function(e){return e.toString(I).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},nv.prototype._generateRandom=function(e){var t=new Uint8Array(e);if("undefined"!=typeof window&&window.crypto)window.crypto.getRandomValues(t);else for(var n=0;n<e;n+=1)t[n]=Math.random()*"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~".length|0;return this._bufferToString(t)},nv.prototype._bufferToString=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=[],r=0;r<e.byteLength;r+=1){var i=e[r]%t.length;n.push(t[i])}return n.join("")},nv);function nv(e){var t=e.config,n=e.cognitoClientId,e=e.scopes,e=void 0===e?[]:e;if(this._urlOpener=t.urlOpener||Vg,this._config=t,this._cognitoClientId=n,!this.isValidScopes(e))throw Error("scopes must be a String Array");this._scopes=e}(S=nm=nm||{}).DEFAULT_MSG="Authentication Error",S.EMPTY_USERNAME="Username cannot be empty",S.INVALID_USERNAME="The username should either be a string or one of the sign in types",S.EMPTY_PASSWORD="Password cannot be empty",S.EMPTY_CODE="Confirmation code cannot be empty",S.SIGN_UP_ERROR="Error creating account",S.NO_MFA="No valid MFA method provided",S.INVALID_MFA="Invalid MFA type",S.EMPTY_CHALLENGE="Challenge response cannot be empty",S.NO_USER_SESSION="Failed to get the session because the user is empty";var rv,iv,lf=(rv=function(e,t){return(rv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}rv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ov=new _.ConsoleLogger("AuthError"),sv=(iv=Error,lf(av,iv),av);function av(e){var t=this,n=dv[e],e=n.message,n=n.log;return(t=iv.call(this,e)||this).constructor=av,Object.setPrototypeOf(t,av.prototype),t.name="AuthError",t.log=n||e,ov.error(t.log),t}var uv,cv=(lf(lv,uv=sv),lv);function lv(e){e=uv.call(this,e)||this;return e.constructor=lv,Object.setPrototypeOf(e,lv.prototype),e.name="NoUserPoolError",e}function pv(e,t,n){_.Hub.dispatch("auth",{event:e,data:t,message:n},"Auth",bv)}var dv={noConfig:{message:nm.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        "},missingAuthConfig:{message:nm.DEFAULT_MSG,log:"\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run `amplify push` after adding auth via `amplify add auth`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        "},emptyUsername:{message:nm.EMPTY_USERNAME},invalidUsername:{message:nm.INVALID_USERNAME},emptyPassword:{message:nm.EMPTY_PASSWORD},emptyCode:{message:nm.EMPTY_CODE},signUpError:{message:nm.SIGN_UP_ERROR,log:"The first parameter should either be non-null string or object"},noMFA:{message:nm.NO_MFA},invalidMFA:{message:nm.INVALID_MFA},emptyChallengeResponse:{message:nm.EMPTY_CHALLENGE},noUserSession:{message:nm.NO_USER_SESSION},default:{message:nm.DEFAULT_MSG}},fv=function(){return(fv=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},hv=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},gv=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},vv=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},mv=new _.ConsoleLogger("AuthClass"),yv="aws.cognito.signin.user.admin",bv="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default";function Sv(e){var t=this;this.userPool=null,this.user=null,this.oAuthFlowInProgress=!1,this.Credentials=_.Credentials,this.wrapRefreshSessionCallback=function(n){return function(e,t){return t?pv("tokenRefresh",void 0,"New token retrieved"):pv("tokenRefresh_failure",e,"Failed to retrieve new token"),n(e,t)}},this.configure(e),this.currentCredentials=this.currentCredentials.bind(this),this.currentUserCredentials=this.currentUserCredentials.bind(this),_.Hub.listen("auth",function(e){switch(e.payload.event){case"signIn":t._storage.setItem("amplify-signin-with-hostedUI","false");break;case"signOut":t._storage.removeItem("amplify-signin-with-hostedUI");break;case"cognitoHostedUI":t._storage.setItem("amplify-signin-with-hostedUI","true")}})}var wv=new(Sv.prototype.getModuleName=function(){return"Auth"},Sv.prototype.configure=function(e){var t=this;if(!e)return this._config||{};mv.debug("configure Auth");var n=Object.assign({},this._config,_.Parser.parseMobilehubConfig(e).Auth,e);this._config=n;var r=this._config,i=r.userPoolId,o=r.userPoolWebClientId,s=r.cookieStorage,a=r.oauth,u=r.region,c=r.identityPoolId,l=r.mandatorySignIn,p=r.refreshHandlers,d=r.identityPoolRegion,n=r.clientMetadata,r=r.endpoint;if(this._config.storage){if(!this._isValidAuthStorage(this._config.storage))throw mv.error("The storage in the Auth config is not valid!"),new Error("Empty storage object");this._storage=this._config.storage}else this._storage=s?new Wg(s):e.ssr?new _.UniversalStorage:(new _.StorageHelper).getStorage();this._storageSync=Promise.resolve(),"function"==typeof this._storage.sync&&(this._storageSync=this._storage.sync()),i&&((r={UserPoolId:i,ClientId:o,endpoint:r}).Storage=this._storage,this.userPool=new Gg(r,this.wrapRefreshSessionCallback)),this.Credentials.configure({mandatorySignIn:l,region:d||u,userPoolId:i,identityPoolId:c,refreshHandlers:p,storage:this._storage});var f,a=a?og(this._config.oauth)?a:a.awsCognito:void 0;return a&&(a=Object.assign({cognitoClientId:o,UserPoolId:i,domain:a.domain,scopes:a.scope,redirectSignIn:a.redirectSignIn,redirectSignOut:a.redirectSignOut,responseType:a.responseType,Storage:this._storage,urlOpener:a.urlOpener,clientMetadata:n},a.options),this._oAuthHandler=new tv({scopes:a.scopes,config:a,cognitoClientId:a.cognitoClientId}),f={},function(e){if(_.JS.browserOrNode().isBrowser&&window.location)e({url:window.location.href});else if(!_.JS.browserOrNode().isNode)throw new Error("Not supported")}(function(e){e=e.url;f[e]||(f[e]=!0,t._handleAuthResponse(e))})),pv("configured",null,"The Auth category has been configured successfully"),this._config},Sv.prototype.signUp=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!this.userPool)return this.rejectNoUserPool();var i,o=null,s=null,a=[],u=null;if(e&&"string"==typeof e){var o=e,s=n?n[0]:null,c=n?n[1]:null,l=n?n[2]:null;c&&a.push(new xg({Name:"email",Value:c})),l&&a.push(new xg({Name:"phone_number",Value:l}))}else{if(!e||"object"!=typeof e)return this.rejectAuthError(rg.SignUpError);o=e.username,s=e.password,e&&e.clientMetadata?i=e.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata);var p=e.attributes;p&&Object.keys(p).map(function(e){a.push(new xg({Name:e,Value:p[e]}))});var d=e.validationData;d&&(u=[],Object.keys(d).map(function(e){u.push(new xg({Name:e,Value:d[e]}))}))}return o?s?(mv.debug("signUp attrs:",a),mv.debug("signUp validation data:",u),new Promise(function(n,r){t.userPool.signUp(o,s,a,u,function(e,t){e?(pv("signUp_failure",e,o+" failed to signup"),r(e)):(pv("signUp",t,o+" has signed up successfully"),n(t))},i)})):this.rejectAuthError(rg.EmptyPassword):this.rejectAuthError(rg.EmptyUsername)},Sv.prototype.confirmSignUp=function(e,t,n){if(!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(rg.EmptyUsername);if(!t)return this.rejectAuthError(rg.EmptyCode);var i,o=this.createCognitoUser(e),s=!n||"boolean"!=typeof n.forceAliasCreation||n.forceAliasCreation;return n&&n.clientMetadata?i=n.clientMetadata:this._config.clientMetadata&&(i=this._config.clientMetadata),new Promise(function(n,r){o.confirmRegistration(t,s,function(e,t){e?r(e):n(t)},i)})},Sv.prototype.resendSignUp=function(e,t){if(void 0===t&&(t=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!e)return this.rejectAuthError(rg.EmptyUsername);var i=this.createCognitoUser(e);return new Promise(function(n,r){i.resendConfirmationCode(function(e,t){e?r(e):n(t)},t)})},Sv.prototype.signIn=function(e,t,n){if(void 0===n&&(n=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();var r=null,i=null,o={};if("string"==typeof e)r=e,i=t;else{if(!e.username)return this.rejectAuthError(rg.InvalidUsername);void 0!==t&&mv.warn("The password should be defined under the first parameter object!"),r=e.username,i=e.password,o=e.validationData}if(!r)return this.rejectAuthError(rg.EmptyUsername);n=new ag({Username:r,Password:i,ValidationData:o,ClientMetadata:n});return i?this.signInWithPassword(n):this.signInWithoutPassword(n)},Sv.prototype.authCallbacks=function(i,o,s){var e=this,a=this;return{onSuccess:function(r){return hv(e,void 0,void 0,function(){var t,n;return gv(this,function(e){switch(e.label){case 0:mv.debug(r),delete i.challengeName,delete i.challengeParam,e.label=1;case 1:return e.trys.push([1,4,5,9]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(r,"session")];case 3:return t=e.sent(),mv.debug("succeed to get cognito credentials",t),[3,9];case 4:return t=e.sent(),mv.debug("cannot get cognito credentials",t),[3,9];case 5:return e.trys.push([5,7,,8]),[4,this.currentUserPoolUser()];case 6:return n=e.sent(),a.user=n,pv("signIn",n,"A user "+i.getUsername()+" has been signed in"),o(n),[3,8];case 7:return n=e.sent(),mv.error("Failed to get the signed in user",n),s(n),[3,8];case 8:return[7];case 9:return[2]}})})},onFailure:function(e){mv.debug("signIn failure",e),pv("signIn_failure",e,i.getUsername()+" failed to signin"),s(e)},customChallenge:function(e){mv.debug("signIn custom challenge answer required"),i.challengeName="CUSTOM_CHALLENGE",i.challengeParam=e,o(i)},mfaRequired:function(e,t){mv.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,o(i)},mfaSetup:function(e,t){mv.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,o(i)},newPasswordRequired:function(e,t){mv.debug("signIn new password"),i.challengeName="NEW_PASSWORD_REQUIRED",i.challengeParam={userAttributes:e,requiredAttributes:t},o(i)},totpRequired:function(e,t){mv.debug("signIn totpRequired"),i.challengeName=e,i.challengeParam=t,o(i)},selectMFAType:function(e,t){mv.debug("signIn selectMFAType",e),i.challengeName=e,i.challengeParam=t,o(i)}}},Sv.prototype.signInWithPassword=function(e){var r=this;if(this.pendingSignIn)throw new Error("Pending sign-in attempt already in progress");var i=this.createCognitoUser(e.getUsername());return this.pendingSignIn=new Promise(function(t,n){i.authenticateUser(e,r.authCallbacks(i,function(e){r.pendingSignIn=null,t(e)},function(e){r.pendingSignIn=null,n(e)}))}),this.pendingSignIn},Sv.prototype.signInWithoutPassword=function(n){var r=this,i=this.createCognitoUser(n.getUsername());return i.setAuthenticationFlowType("CUSTOM_AUTH"),new Promise(function(e,t){i.initiateAuth(n,r.authCallbacks(i,e,t))})},Sv.prototype.getMFAOptions=function(e){return new Promise(function(n,r){e.getMFAOptions(function(e,t){return e?(mv.debug("get MFA Options failed",e),void r(e)):(mv.debug("get MFA options success",t),void n(t))})})},Sv.prototype.getPreferredMFA=function(i,o){var s=this,a=this;return new Promise(function(n,r){var e=s._config.clientMetadata,t=!!o&&o.bypassCache;i.getUserData(function(e,t){if(e)return mv.debug("getting preferred mfa failed",e),void r(e);t=a._getMfaTypeFromUserData(t);t?n(t):r("invalid MFA Type")},{bypassCache:t,clientMetadata:e})})},Sv.prototype._getMfaTypeFromUserData=function(e){var t=null,n=e.PreferredMfaSetting;return n?t=n:(n=e.UserMFASettingList)?0===n.length?t="NOMFA":mv.debug("invalid case for getPreferredMFA",e):t=e.MFAOptions?"SMS_MFA":"NOMFA",t},Sv.prototype._getUserData=function(e,t){return new Promise(function(n,r){e.getUserData(function(e,t){e?(mv.debug("getting user data failed",e),r(e)):n(t)},t)})},Sv.prototype.setPreferredMFA=function(s,a){return hv(this,void 0,void 0,function(){var t,n,o,r,i;return gv(this,function(e){switch(e.label){case 0:return t=this._config.clientMetadata,[4,this._getUserData(s,{bypassCache:!0,clientMetadata:t})];case 1:switch(i=e.sent(),o=n=null,a){case"TOTP":return[3,2];case"SMS":return[3,3];case"NOMFA":return[3,4]}return[3,6];case 2:return o={PreferredMfa:!0,Enabled:!0},[3,7];case 3:return n={PreferredMfa:!0,Enabled:!0},[3,7];case 4:return r=i.UserMFASettingList,[4,this._getMfaTypeFromUserData(i)];case 5:if("NOMFA"===(i=e.sent()))return[2,Promise.resolve("No change for mfa type")];if("SMS_MFA"===i)n={PreferredMfa:!1,Enabled:!1};else{if("SOFTWARE_TOKEN_MFA"!==i)return[2,this.rejectAuthError(rg.InvalidMFA)];o={PreferredMfa:!1,Enabled:!1}}return r&&0!==r.length&&r.forEach(function(e){"SMS_MFA"===e?n={PreferredMfa:!1,Enabled:!1}:"SOFTWARE_TOKEN_MFA"===e&&(o={PreferredMfa:!1,Enabled:!1})}),[3,7];case 6:return mv.debug("no validmfa method provided"),[2,this.rejectAuthError(rg.NoMFA)];case 7:return[2,new Promise(function(r,i){s.setUserMfaPreference(n,o,function(e,n){return e?(mv.debug("Set user mfa preference error",e),i(e)):(mv.debug("Set user mfa success",n),mv.debug("Caching the latest user data into local"),void s.getUserData(function(e,t){return e?(mv.debug("getting user data failed",e),i(e)):r(n)},{bypassCache:!0,clientMetadata:t}))})})]}})})},Sv.prototype.disableSMS=function(e){return new Promise(function(n,r){e.disableMFA(function(e,t){return e?(mv.debug("disable mfa failed",e),void r(e)):(mv.debug("disable mfa succeed",t),void n(t))})})},Sv.prototype.enableSMS=function(e){return new Promise(function(n,r){e.enableMFA(function(e,t){return e?(mv.debug("enable mfa failed",e),void r(e)):(mv.debug("enable mfa succeed",t),void n(t))})})},Sv.prototype.setupTOTP=function(e){return new Promise(function(t,n){e.associateSoftwareToken({onFailure:function(e){mv.debug("associateSoftwareToken failed",e),n(e)},associateSecretCode:function(e){mv.debug("associateSoftwareToken sucess",e),t(e)}})})},Sv.prototype.verifyTotpToken=function(r,e){return mv.debug("verification totp token",r,e),new Promise(function(t,n){r.verifySoftwareToken(e,"My TOTP device",{onFailure:function(e){mv.debug("verifyTotpToken failed",e),n(e)},onSuccess:function(e){pv("signIn",r,"A user "+r.getUsername()+" has been signed in"),mv.debug("verifyTotpToken success",e),t(e)}})})},Sv.prototype.confirmSignIn=function(i,e,n,o){var s=this;if(void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(rg.EmptyCode);var a=this;return new Promise(function(r,t){i.sendMFACode(e,{onSuccess:function(n){return hv(s,void 0,void 0,function(){var t;return gv(this,function(e){switch(e.label){case 0:mv.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),mv.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),mv.debug("cannot get cognito credentials",t),[3,6];case 5:return a.user=i,pv("signIn",i,"A user "+i.getUsername()+" has been signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){mv.debug("confirm signIn failure",e),t(e)}},n,o)})},Sv.prototype.completeNewPassword=function(i,e,n,o){var s=this;if(void 0===n&&(n={}),void 0===o&&(o=this._config.clientMetadata),!e)return this.rejectAuthError(rg.EmptyPassword);var a=this;return new Promise(function(r,t){i.completeNewPasswordChallenge(e,n,{onSuccess:function(n){return hv(s,void 0,void 0,function(){var t;return gv(this,function(e){switch(e.label){case 0:mv.debug(n),e.label=1;case 1:return e.trys.push([1,4,5,6]),[4,this.Credentials.clear()];case 2:return e.sent(),[4,this.Credentials.set(n,"session")];case 3:return t=e.sent(),mv.debug("succeed to get cognito credentials",t),[3,6];case 4:return t=e.sent(),mv.debug("cannot get cognito credentials",t),[3,6];case 5:return a.user=i,pv("signIn",i,"A user "+i.getUsername()+" has been signed in"),r(i),[7];case 6:return[2]}})})},onFailure:function(e){mv.debug("completeNewPassword failure",e),pv("completeNewPassword_failure",e,s.user+" failed to complete the new password flow"),t(e)},mfaRequired:function(e,t){mv.debug("signIn MFA required"),i.challengeName=e,i.challengeParam=t,r(i)},mfaSetup:function(e,t){mv.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)},totpRequired:function(e,t){mv.debug("signIn mfa setup",e),i.challengeName=e,i.challengeParam=t,r(i)}},o)})},Sv.prototype.sendCustomChallengeAnswer=function(n,r,i){var o=this;return void 0===i&&(i=this._config.clientMetadata),this.userPool?r?new Promise(function(e,t){n.sendCustomChallengeAnswer(r,o.authCallbacks(n,e,t),i)}):this.rejectAuthError(rg.EmptyChallengeResponse):this.rejectNoUserPool()},Sv.prototype.updateUserAttributes=function(i,o,s){void 0===s&&(s=this._config.clientMetadata);var a=[],e=this;return new Promise(function(n,r){e.userSession(i).then(function(e){for(var t in o)"sub"!==t&&t.indexOf("_verified")<0&&(t={Name:t,Value:o[t]},a.push(t));i.updateAttributes(a,function(e,t){return e?r(e):n(t)},s)})})},Sv.prototype.userAttributes=function(t){var e=this;return new Promise(function(n,r){e.userSession(t).then(function(e){t.getUserAttributes(function(e,t){e?r(e):n(t)})})})},Sv.prototype.verifiedContact=function(e){var r=this;return this.userAttributes(e).then(function(e){var t=r.attributesToObject(e),n={},e={};return t.email&&(t.email_verified?e.email=t.email:n.email=t.email),t.phone_number&&(t.phone_number_verified?e.phone_number=t.phone_number:n.phone_number=t.phone_number),{verified:e,unverified:n}})},Sv.prototype.currentUserPoolUser=function(l){var e=this;return this.userPool?new Promise(function(u,c){e._storageSync.then(function(){return hv(e,void 0,void 0,function(){var a,t,n=this;return gv(this,function(e){switch(e.label){case 0:return this.isOAuthInProgress()?(mv.debug("OAuth signIn in progress, waiting for resolution..."),[4,new Promise(function(t){var n=setTimeout(function(){mv.debug("OAuth signIn in progress timeout"),_.Hub.remove("auth",r),t()},1e4);function r(e){e=e.payload.event;"cognitoHostedUI"!==e&&"cognitoHostedUI_failure"!==e||(mv.debug("OAuth signIn resolved: "+e),clearTimeout(n),_.Hub.remove("auth",r),t())}_.Hub.listen("auth",r)})]):[3,2];case 1:e.sent(),e.label=2;case 2:return(a=this.userPool.getCurrentUser())?(t=this._config.clientMetadata,a.getSession(function(i,o){return hv(n,void 0,void 0,function(){var t,n,r,s=this;return gv(this,function(e){switch(e.label){case 0:return i?(mv.debug("Failed to get the user session",i),c(i),[2]):(t=!!l&&l.bypassCache)?[4,this.Credentials.clear()]:[3,2];case 1:e.sent(),e.label=2;case 2:return(n=this._config.clientMetadata,r=o.getAccessToken().decodePayload().scope,(void 0===r?"":r).split(" ").includes(yv))?(a.getUserData(function(e,t){if(e)return mv.debug("getting user data failed",e),void("User is disabled."===e.message||"User does not exist."===e.message||"Access Token has been revoked"===e.message?c(e):u(a));for(var n=t.PreferredMfaSetting||"NOMFA",r=[],i=0;i<t.UserAttributes.length;i++){var o={Name:t.UserAttributes[i].Name,Value:t.UserAttributes[i].Value},o=new xg(o);r.push(o)}e=s.attributesToObject(r);return Object.assign(a,{attributes:e,preferredMFA:n}),u(a)},{bypassCache:t,clientMetadata:n}),[2]):(mv.debug("Unable to get the user data because the "+yv+" is not in the scopes of the access token"),[2,u(a)])}})})},{clientMetadata:t}),[2]):(mv.debug("Failed to get user from user pool"),c("No current user"),[2])}})})}).catch(function(e){return mv.debug("Failed to sync cache info into memory",e),c(e)})}):this.rejectNoUserPool()},Sv.prototype.isOAuthInProgress=function(){return this.oAuthFlowInProgress},Sv.prototype.currentAuthenticatedUser=function(o){return hv(this,void 0,void 0,function(){var t,n,r,i;return gv(this,function(e){switch(e.label){case 0:mv.debug("getting current authenticated user"),i=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),mv.debug("Failed to sync cache info into memory",t),t;case 4:try{(n=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")))&&(i=fv(fv({},n.user),{token:n.token}))}catch(e){mv.debug("cannot load federated user from auth storage")}return i?(this.user=i,mv.debug("get current authenticated federated user",this.user),[2,this.user]):[3,5];case 5:mv.debug("get current authenticated userpool user"),r=null,e.label=6;case 6:return e.trys.push([6,8,,9]),[4,this.currentUserPoolUser(o)];case 7:return r=e.sent(),[3,9];case 8:return"No userPool"===(i=e.sent())&&mv.error("Cannot get the current user because the user pool is missing. Please make sure the Auth module is configured with a valid Cognito User Pool ID"),mv.debug("The user is not authenticated by the error",i),[2,Promise.reject("The user is not authenticated")];case 9:return this.user=r,[2,this.user]}})})},Sv.prototype.currentSession=function(){var r=this;return mv.debug("Getting current session"),this.userPool?new Promise(function(t,n){r.currentUserPoolUser().then(function(e){r.userSession(e).then(function(e){t(e)}).catch(function(e){mv.debug("Failed to get the current session",e),n(e)})}).catch(function(e){mv.debug("Failed to get the current user",e),n(e)})}):Promise.reject()},Sv.prototype.userSession=function(i){if(!i)return mv.debug("the user is null"),this.rejectAuthError(rg.NoUserSession);var e=this._config.clientMetadata;return new Promise(function(n,r){mv.debug("Getting the session from this user:",i),i.getSession(function(e,t){e?(mv.debug("Failed to get the session from user",i),r(e)):(mv.debug("Succeed to get the user session",t),n(t))},{clientMetadata:e})})},Sv.prototype.currentUserCredentials=function(){return hv(this,void 0,void 0,function(){var t,n=this;return gv(this,function(e){switch(e.label){case 0:mv.debug("Getting current user credentials"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this._storageSync];case 2:return e.sent(),[3,4];case 3:throw t=e.sent(),mv.debug("Failed to sync cache info into memory",t),t;case 4:t=null;try{t=JSON.parse(this._storage.getItem("aws-amplify-federatedInfo"))}catch(e){mv.debug("failed to get or parse item aws-amplify-federatedInfo",e)}return t?[2,this.Credentials.refreshFederatedToken(t)]:[2,this.currentSession().then(function(e){return mv.debug("getting session success",e),n.Credentials.set(e,"session")}).catch(function(e){return mv.debug("getting session failed",e),n.Credentials.set(null,"guest")})]}})})},Sv.prototype.currentCredentials=function(){return mv.debug("getting current credentials"),this.Credentials.get()},Sv.prototype.verifyUserAttribute=function(n,r,i){return void 0===i&&(i=this._config.clientMetadata),new Promise(function(e,t){n.getAttributeVerificationCode(r,{onSuccess:function(){return e()},onFailure:function(e){return t(e)}},i)})},Sv.prototype.verifyUserAttributeSubmit=function(e,r,i){return i?new Promise(function(t,n){e.verifyAttribute(r,i,{onSuccess:function(e){t(e)},onFailure:function(e){n(e)}})}):this.rejectAuthError(rg.EmptyCode)},Sv.prototype.verifyCurrentUserAttribute=function(t){var n=this;return n.currentUserPoolUser().then(function(e){return n.verifyUserAttribute(e,t)})},Sv.prototype.verifyCurrentUserAttributeSubmit=function(t,n){var r=this;return r.currentUserPoolUser().then(function(e){return r.verifyUserAttributeSubmit(e,t,n)})},Sv.prototype.cognitoIdentitySignOut=function(s,a){return hv(this,void 0,void 0,function(){var t,i,o=this;return gv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._storageSync];case 1:return e.sent(),[3,3];case 2:throw t=e.sent(),mv.debug("Failed to sync cache info into memory",t),t;case 3:return i=this._oAuthHandler&&"true"===this._storage.getItem("amplify-signin-with-hostedUI"),[2,new Promise(function(n,r){if(s&&s.global){mv.debug("user global sign out",a);var e=o._config.clientMetadata;a.getSession(function(e,t){return e?(mv.debug("failed to get the user session",e),r(e)):void a.globalSignOut({onSuccess:function(e){if(mv.debug("global sign out success"),!i)return n();o.oAuthSignOutRedirect(n,r)},onFailure:function(e){return mv.debug("global sign out failed",e),r(e)}})},{clientMetadata:e})}else{if(mv.debug("user sign out",a),a.signOut(),!i)return n();o.oAuthSignOutRedirect(n,r)}})]}})})},Sv.prototype.oAuthSignOutRedirect=function(e,t){_.JS.browserOrNode().isBrowser?this.oAuthSignOutRedirectOrReject(t):this.oAuthSignOutAndResolve(e)},Sv.prototype.oAuthSignOutAndResolve=function(e){this._oAuthHandler.signOut(),e()},Sv.prototype.oAuthSignOutRedirectOrReject=function(e){this._oAuthHandler.signOut(),setTimeout(function(){return e("Signout timeout fail")},3e3)},Sv.prototype.signOut=function(n){return hv(this,void 0,void 0,function(){var t;return gv(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.cleanCachedItems()];case 1:return e.sent(),[3,3];case 2:return e.sent(),mv.debug("failed to clear cached items"),[3,3];case 3:return this.userPool?(t=this.userPool.getCurrentUser())?[4,this.cognitoIdentitySignOut(n,t)]:[3,5]:[3,7];case 4:return e.sent(),[3,6];case 5:mv.debug("no current Cognito user"),e.label=6;case 6:return[3,8];case 7:mv.debug("no Congito User pool"),e.label=8;case 8:return pv("signOut",this.user,"A user has been signed out"),this.user=null,[2]}})})},Sv.prototype.cleanCachedItems=function(){return hv(this,void 0,void 0,function(){return gv(this,function(e){switch(e.label){case 0:return[4,this.Credentials.clear()];case 1:return e.sent(),[2]}})})},Sv.prototype.changePassword=function(t,i,o,s){var e=this;return void 0===s&&(s=this._config.clientMetadata),new Promise(function(n,r){e.userSession(t).then(function(e){t.changePassword(i,o,function(e,t){return e?(mv.debug("change password failure",e),r(e)):n(t)},s)})})},Sv.prototype.forgotPassword=function(r,e){if(void 0===e&&(e=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!r)return this.rejectAuthError(rg.EmptyUsername);var i=this.createCognitoUser(r);return new Promise(function(t,n){i.forgotPassword({onSuccess:function(){t()},onFailure:function(e){mv.debug("forgot password failure",e),pv("forgotPassword_failure",e,r+" forgotPassword failed"),n(e)},inputVerificationCode:function(e){pv("forgotPassword",i,r+" has initiated forgot password flow"),t(e)}},e)})},Sv.prototype.forgotPasswordSubmit=function(n,r,i,o){if(void 0===o&&(o=this._config.clientMetadata),!this.userPool)return this.rejectNoUserPool();if(!n)return this.rejectAuthError(rg.EmptyUsername);if(!r)return this.rejectAuthError(rg.EmptyCode);if(!i)return this.rejectAuthError(rg.EmptyPassword);var s=this.createCognitoUser(n);return new Promise(function(e,t){s.confirmPassword(r,i,{onSuccess:function(){pv("forgotPasswordSubmit",s,n+" forgotPasswordSubmit successful"),e()},onFailure:function(e){pv("forgotPasswordSubmit_failure",e,n+" forgotPasswordSubmit failed"),t(e)}},o)})},Sv.prototype.currentUserInfo=function(){return hv(this,void 0,void 0,function(){var t,n,r,i,o;return gv(this,function(e){switch(e.label){case 0:return(t=this.Credentials.getCredSource())&&"aws"!==t&&"userPool"!==t?[3,9]:[4,this.currentUserPoolUser().catch(function(e){return mv.debug(e)})];case 1:if(!(o=e.sent()))return[2,null];e.label=2;case 2:return e.trys.push([2,8,,9]),[4,this.userAttributes(o)];case 3:r=e.sent(),i=this.attributesToObject(r),n=null,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.currentCredentials()];case 5:return n=e.sent(),[3,7];case 6:return r=e.sent(),mv.debug("Failed to retrieve credentials while getting current user info",r),[3,7];case 7:return[2,{id:n?n.identityId:void 0,username:o.getUsername(),attributes:i}];case 8:return i=e.sent(),mv.debug("currentUserInfo error",i),[2,{}];case 9:return"federated"===t?[2,(o=this.user)||{}]:[2]}})})},Sv.prototype.federatedSignIn=function(c,l,p){return hv(this,void 0,void 0,function(){var r,i,o,s,a,u;return gv(this,function(e){switch(e.label){case 0:if(!this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation requires either a User Pool or Identity Pool in config");if(void 0===c&&this._config.identityPoolId&&!this._config.userPoolId)throw new Error("Federation with Identity Pools requires tokens passed as arguments");return ig(c)||(n=c)&&["customProvider"].find(function(e){return n.hasOwnProperty(e)})||(t=c)&&["customState"].find(function(e){return t.hasOwnProperty(e)})||void 0===c?(r=c||{provider:ng.Cognito},i=ig(r)?r.provider:r.customProvider,ig(r),s=r.customState,this._config.userPoolId&&(o=og(this._config.oauth)?this._config.userPoolWebClientId:this._config.oauth.clientID,r=og(this._config.oauth)?this._config.oauth.redirectSignIn:this._config.oauth.redirectUri,this._oAuthHandler.oauthSignIn(this._config.oauth.responseType,this._config.oauth.domain,r,o,i,s)),[3,4]):[3,1];case 1:i=c;try{(u=JSON.stringify(JSON.parse(this._storage.getItem("aws-amplify-federatedInfo")).user))&&mv.warn("There is already a signed in user: "+u+" in your app.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tYou should not call Auth.federatedSignIn method again as it may cause unexpected behavior.")}catch(e){}return o=l.token,s=l.identity_id,u=l.expires_at,[4,this.Credentials.set({provider:i,token:o,identity_id:s,user:p,expires_at:u},"federation")];case 2:return a=e.sent(),[4,this.currentAuthenticatedUser()];case 3:return u=e.sent(),pv("signIn",u,"A user "+u.username+" has been signed in"),mv.debug("federated sign in credentials",a),[2,a];case 4:return[2]}var t,n})})},Sv.prototype._handleAuthResponse=function(c){return hv(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u;return gv(this,function(e){switch(e.label){case 0:if(this.oAuthFlowInProgress)return mv.debug("Skipping URL "+c+" current flow in progress"),[2];e.label=1;case 1:if(e.trys.push([1,,8,9]),this.oAuthFlowInProgress=!0,!this._config.userPoolId)throw new Error("OAuth responses require a User Pool defined in config");if(pv("parsingCallbackUrl",{url:c},"The callback url is being parsed"),t=c||(_.JS.browserOrNode().isBrowser?window.location.href:""),n=!!(h.parse(t).query||"").split("&").map(function(e){return e.split("=")}).find(function(e){e=vv(e,1)[0];return"code"===e||"error"===e}),r=!!(h.parse(t).hash||"#").substr(1).split("&").map(function(e){return e.split("=")}).find(function(e){e=vv(e,1)[0];return"access_token"===e||"error"===e}),!n&&!r)return[3,7];this._storage.setItem("amplify-redirected-from-hosted-ui","true"),e.label=2;case 2:return e.trys.push([2,6,,7]),[4,this._oAuthHandler.handleAuthResponse(t)];case 3:return i=e.sent(),s=i.accessToken,u=i.idToken,o=i.refreshToken,a=i.state,i=new kg({IdToken:new Ag({IdToken:u}),RefreshToken:new Ig({RefreshToken:o}),AccessToken:new _g({AccessToken:s})}),u=void 0,this._config.identityPoolId?[4,this.Credentials.set(i,"session")]:[3,5];case 4:u=e.sent(),mv.debug("AWS credentials",u),e.label=5;case 5:return o=/-/.test(a),(s=this.createCognitoUser(i.getIdToken().decodePayload()["cognito:username"])).setSignInUserSession(i),window&&void 0!==window.history&&window.history.replaceState({},null,this._config.oauth.redirectSignIn),pv("signIn",s,"A user "+s.getUsername()+" has been signed in"),pv("cognitoHostedUI",s,"A user "+s.getUsername()+" has been signed in via Cognito Hosted UI"),o&&(a=a.split("-").splice(1).join("-"),pv("customOAuthState",_.urlSafeDecode(a),"State for user "+s.getUsername())),[2,u];case 6:return u=e.sent(),mv.debug("Error in cognito hosted auth response",u),pv("signIn_failure",u,"The OAuth response flow failed"),pv("cognitoHostedUI_failure",u,"A failure occurred when returning to the Cognito Hosted UI"),pv("customState_failure",u,"A failure occurred when returning state"),[3,7];case 7:return[3,9];case 8:return this.oAuthFlowInProgress=!1,[7];case 9:return[2]}})})},Sv.prototype.essentialCredentials=function(e){return{accessKeyId:e.accessKeyId,sessionToken:e.sessionToken,secretAccessKey:e.secretAccessKey,identityId:e.identityId,authenticated:e.authenticated}},Sv.prototype.attributesToObject=function(e){var t=this,n={};return e&&e.map(function(e){"email_verified"===e.Name||"phone_number_verified"===e.Name?n[e.Name]=t.isTruthyString(e.Value)||!0===e.Value:n[e.Name]=e.Value}),n},Sv.prototype.isTruthyString=function(e){return"function"==typeof e.toLowerCase&&"true"===e.toLowerCase()},Sv.prototype.createCognitoUser=function(e){var t={Username:e,Pool:this.userPool};t.Storage=this._storage;e=this._config.authenticationFlowType,t=new Ug(t);return e&&t.setAuthenticationFlowType(e),t},Sv.prototype._isValidAuthStorage=function(e){return!!e&&"function"==typeof e.getItem&&"function"==typeof e.setItem&&"function"==typeof e.removeItem&&"function"==typeof e.clear},Sv.prototype.noUserPoolErrorHandler=function(e){return!e||e.userPoolId&&e.identityPoolId?rg.NoConfig:rg.MissingAuthConfig},Sv.prototype.rejectAuthError=function(e){return Promise.reject(new sv(e))},Sv.prototype.rejectNoUserPool=function(){var e=this.noUserPoolErrorHandler(this._config);return Promise.reject(new cv(e))},Sv)(null);_.Amplify.register(wv);var Cv=function(e,t){return(Cv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function _v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Cv(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ev=function(){return(Ev=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Av(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function Iv(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var kv,S="3.6.1",Tv=(F(Pv,kv=u.Writable),Pv.prototype._write=function(e,t,n){try{this.hash.update(e)}catch(e){return n(e)}n()},Pv);function Pv(e,t){t=kv.call(this,t)||this;return t.hash=e,t}function Ov(e){return qv(e)?e.replace(/fips-|-fips/,""):e}function xv(e){var t=e.match(Bv);return[t[2],e.replace(new RegExp("^"+t[0]),"")]}function Lv(e,t){if(void 0===t&&(t={tlsCompatible:!0}),64<=e.length||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||null!=t&&t.tlsCompatible&&jv.test(e))throw new Error("Invalid DNS label "+e)}function Nv(e){var t=e.isCustomEndpoint,n=(e.baseHostname,e.dualstackEndpoint),r=e.accelerateEndpoint;if(t){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(r)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return("string"==typeof e.bucketName?Gv:Hv)(j(j({},e),{isCustomEndpoint:t}))}function Rv(v){return function(h,g){return function(f){return K(void 0,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,p,d;return H(this,function(e){switch(e.label){case 0:return(n=f.input.Bucket,r=v.bucketEndpoint,i=f.request,na.isInstance(i))?v.bucketEndpoint?(i.hostname=n,[3,7]):[3,1]:[3,8];case 1:return"string"==typeof(t=n)&&0===t.indexOf("arn:")&&6<=t.split(":").length?(u=function(e){e=e.split(":");if(e.length<6||"arn"!==e[0])throw new Error("Malformed ARN");e=W(e);return{partition:e[1],service:e[2],region:e[3],accountId:e[4],resource:e.slice(5).join(":")}}(n),o=Ov,[4,v.region()]):[3,5];case 2:return l=o.apply(void 0,[e.sent()]),[4,v.regionInfoProvider(l)];case 3:return s=e.sent()||{},a=s.partition,s=s.signingRegion,s=void 0===s?l:s,[4,v.useArnRegion()];case 4:return d=e.sent(),u=Nv({bucketName:u,baseHostname:i.hostname,accelerateEndpoint:v.useAccelerateEndpoint,dualstackEndpoint:v.useDualstackEndpoint,pathStyleEndpoint:v.forcePathStyle,tlsCompatible:"https:"===i.protocol,useArnRegion:d,clientPartition:a,clientSigningRegion:s,clientRegion:l,isCustomEndpoint:v.isCustomEndpoint}),p=u.hostname,d=u.bucketEndpoint,a=u.signingRegion,u=u.signingService,a&&a!==s&&(g.signing_region=a),u&&"s3"!==u&&(g.signing_service=u),i.hostname=p,r=d,[3,7];case 5:return c=Ov,[4,v.region()];case 6:l=c.apply(void 0,[e.sent()]),l=Nv({bucketName:n,clientRegion:l,baseHostname:i.hostname,accelerateEndpoint:v.useAccelerateEndpoint,dualstackEndpoint:v.useDualstackEndpoint,pathStyleEndpoint:v.forcePathStyle,tlsCompatible:"https:"===i.protocol,isCustomEndpoint:v.isCustomEndpoint}),p=l.hostname,d=l.bucketEndpoint,i.hostname=p,r=d,e.label=7;case 7:r&&(i.path=i.path.replace(/^(\/)?[^\/]+/,""),""===i.path&&(i.path="/")),e.label=8;case 8:return[2,h(j(j({},f),{request:i}))]}var t})})}}}function Mv(t){return{applyToStack:function(e){e.addRelativeTo(Rv(t),Wv)}}}var Uv=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Dv=/(\d+\.){3}\d+/,Fv=/\.\./,jv=/\./,Bv=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,zv=/^s3(-external-1)?\.amazonaws\.com$/,Vv="amazonaws.com",qv=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},Kv=function(e,t){return e===t||Ov(e)===t||e===Ov(t)},Hv=function(e){var t=e.isCustomEndpoint,n=e.baseHostname,r=W(t?[e.clientRegion,n]:(d=n,zv.test(d)?[d.replace("."+Vv,""),Vv]:xv(d)),2),i=r[0],o=r[1],s=e.pathStyleEndpoint,a=e.dualstackEndpoint,u=void 0!==a&&a,c=e.accelerateEndpoint,l=e.tlsCompatible,p=void 0===l||l,n=e.useArnRegion,d=e.bucketName,r=e.clientPartition,a=void 0===r?"aws":r,l=e.clientSigningRegion,r=void 0===l?i:l;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:s,accelerateEndpoint:void 0!==c&&c,tlsCompatible:p});e=d.service,l=d.partition,s=d.accountId,c=d.region,d=d.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e)throw new Error("Expect 's3' or 's3-outposts' in ARN service component")}(e),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(l,{clientPartition:a}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(s),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!Kv(e,t.clientRegion)&&!Kv(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&qv(e))throw new Error("Endpoint does not support FIPS region")}(c,{useArnRegion:n,clientRegion:i,clientSigningRegion:r});a=function(e){var t=e.includes(":")?":":"/",n=W(e.split(t)),e=n[0],n=n.slice(1);if("accesspoint"===e){if(1!==n.length||""===n[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:n[0]}}if("outpost"!==e)throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'");if(!n[0]||"accesspoint"!==n[1]||!n[2]||3!==n.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");t=W(n,3),n=t[0],t[1];return{outpostId:n,accesspointName:t[2]}}(d),d=a.accesspointName,a=a.outpostId;Lv(d+"-"+s,{tlsCompatible:p});i=n?c:i,r=n?c:r;return a?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(e),Lv(a,{tlsCompatible:p}),function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")}(u),function(e){if(qv(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(i),{bucketEndpoint:!0,hostname:d+"-"+s+"."+a+(t?"":".s3-outposts."+i)+"."+o,signingRegion:r,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(e),{bucketEndpoint:!0,hostname:d+"-"+s+(t?"":".s3-accesspoint"+(u?".dualstack":"")+"."+i)+"."+o,signingRegion:r})},Gv=function(e){var t,n=e.accelerateEndpoint,r=void 0!==n&&n,i=e.clientRegion,o=e.baseHostname,s=e.bucketName,a=e.dualstackEndpoint,u=void 0!==a&&a,n=e.pathStyleEndpoint,a=void 0!==n&&n,n=e.tlsCompatible,n=void 0===n||n,e=e.isCustomEndpoint,i=W(void 0!==e&&e?[i,o]:(t=o,zv.test(t)?["us-east-1",Vv]:xv(t)),2),t=i[0],i=i[1];return a||(a=s,!Uv.test(a)||Dv.test(a)||Fv.test(a))||n&&jv.test(s)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+t+"."+i:o}:(r?o="s3-accelerate"+(u?".dualstack":"")+"."+i:u&&(o="s3.dualstack."+t+"."+i),{bucketEndpoint:!0,hostname:s+"."+o})},Wv={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0};var $v="AWS_S3_USE_ARN_REGION",Yv="s3_use_arn_region",lf={environmentVariableSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,$v)){if("true"===e[$v])return!0;if("false"===e[$v])return!1;throw new Error("Cannot load env "+$v+'. Expected "true" or "false", got '+e[$v]+".")}},configFileSelector:function(e){if(Object.prototype.hasOwnProperty.call(e,Yv)){if("true"===e[Yv])return!0;if("false"===e[Yv])return!1;throw new Error("Cannot load shared config entry "+Yv+'. Expected "true" or "false", got '+e[Yv]+".")}},default:!1},Jv="s3.{region}.amazonaws.com",Zv=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),Xv=new Set(["cn-north-1","cn-northwest-1"]),Qv=new Set(["us-iso-east-1"]),em=new Set(["us-isob-east-1"]),tm=new Set(["us-gov-east-1","us-gov-west-1"]),nm={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":n={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Zv.has(e)&&(n={hostname:Jv.replace("{region}",e),partition:"aws"}),Xv.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Qv.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),em.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=tm.has(e)?{hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:Jv.replace("{region}",e),partition:"aws"})}return Promise.resolve(Ev({signingService:"s3"},n))},serviceId:"S3",signingEscapePath:!1,urlParser:jt,useArnRegion:!1},rm=Ev(Ev({},nm),{runtime:"node",base64Decoder:Su,base64Encoder:wu,bodyLengthChecker:Cu,credentialDefaultProvider:Me,defaultUserAgentProvider:pn({serviceId:nm.serviceId,clientVersion:S}),eventStreamSerdeProvider:function(e){return new eg(e)},maxAttempts:_a(b),md5:ln.bind(null,"md5"),region:_a(fn,mn),requestHandler:new Le,sha256:ln.bind(null,"sha256"),streamCollector:Wn,streamHasher:function(o,s){return new Promise(function(e,t){var n,r,i;"string"==typeof s.path?(n=a.createReadStream(s.path,{start:s.start,end:s.end}),r=new o,i=new Tv(r),n.pipe(i),n.on("error",function(e){i.end(),t(e)}),i.on("error",t),i.on("finish",function(){r.digest().then(e).catch(t)})):t(new Error("Unable to calculate hash for non-file streams."))})},useArnRegion:_a(lf),utf8Decoder:Ye,utf8Encoder:ct});function im(t){return{applyToStack:function(e){e.add(function(i){var e=this;return function(r){return function(n){return K(e,void 0,void 0,function(){var t;return H(this,function(e){return t=n.request,na.isInstance(t)&&t.body&&"node"===i.runtime&&(t.headers=j(j({},t.headers),{Expect:"100-continue"})),[2,r(j(j({},n),{request:t}))]})})}}}(t),om)}}}var om={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0};function sm(){var e=this;return function(i){return function(r){return K(e,void 0,void 0,function(){var n;return H(this,function(e){if("string"==typeof(n=r.input.Bucket)&&!("string"==typeof(t=n)&&0===t.indexOf("arn:")&&6<=t.split(":").length)&&0<=n.indexOf("/"))throw(n=new Error("Bucket name shouldn't contain '/', received '"+n+"'")).name="InvalidBucketName",n;var t;return[2,i(j({},r))]})})}}}function am(t){return{applyToStack:function(e){var o;e.add((o=t,function(i){return function(r){return K(void 0,void 0,void 0,function(){var t,n;return H(this,function(e){switch(e.label){case 0:return(t=r.request,!na.isInstance(t)||o.isCustomEndpoint)?[2,i(j({},r))]:"s3.amazonaws.com"!==t.hostname?[3,1]:(t.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return n="aws-global",[4,o.region()];case 2:n===e.sent()&&(t.hostname="s3.amazonaws.com"),e.label=3;case 3:return[2,i(j({},r))]}})})}}),G1)}}}function um(t){return{applyToStack:function(e){var u;e.addRelativeTo((u=t,function(a){return function(s){return K(void 0,void 0,void 0,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:return[4,a(s)];case 1:return(t=e.sent(),n=t.response,ea.isInstance(n))?(i=n.statusCode,o=n.body,i<200&&300<=i?[2,t]:[4,W1(o,u)]):[2,t];case 2:return r=e.sent(),[4,$1(r,u)];case 3:if(i=e.sent(),0===r.length)throw(o=new Error("S3 aborted request")).name="InternalError",o;return i&&i.match("<Error>")&&(n.statusCode=400),n.body=r,[2,t]}})})}}),Y1)}}}var cm,lm,pm,dm,fm,hm,gm,vm,mm,ym,bm,Sm,wm,Cm,_m,Em,Am,Im,km,Tm,Pm,Om,xm,Lm,Nm,Rm,Mm,Um,Dm,Fm,jm,Bm,zm,Vm,qm,Km,Hm,Gm,Wm,$m,Ym,Jm,Zm,Xm,Qm,ey,ty,ny,ry,iy,oy,sy,ay,uy,cy,ly,py,dy,fy,hy,gy,vy,my,yy,by,Sy,wy,Cy,_y,Ey,Ay,Iy,ky,Ty,Py,Oy,xy,Ly,Ny,Ry,My,Uy,Dy,Fy,jy,By,zy,Vy,qy,Ky,Hy,Gy,Wy,$y,Yy,Jy,Zy,Xy,Qy,e0,t0,n0,r0,i0,o0,s0,a0,u0,c0,l0,p0,d0,f0,h0,g0,v0,m0,y0,b0,S0,w0,C0,_0,E0,A0,I0,k0,T0,P0,O0,x0,L0,N0,R0,M0,U0,D0,F0,j0,B0,z0,V0,q0,K0,H0,G0,W0,$0,Y0,J0,Z0,X0,Q0,eb,tb,nb,rb,ib,ob,sb,ab,ub,cb,lb,pb,db,fb,hb,gb,vb,mb,yb,bb,Sb,wb,Cb,_b,Eb,Ab,Ib,kb,Tb,Pb,Ob,xb,Lb,Nb,Rb,Mb,Ub,Db,Fb,jb,Bb,zb,Vb,qb,Kb,Hb,Gb,Wb,$b,Yb,Jb,Zb,Xb,Qb,e1,t1,n1,r1,i1,o1,s1,a1,u1,c1,l1,p1,d1,f1,h1,g1,v1,m1,y1,b1,S1,w1,C1,_1,E1,A1,I1,k1,T1,P1,O1,x1,L1,N1,R1,M1,U1,D1,F1,j1,B1,z1,V1,q1,K1,H1={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},G1={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},W1=function(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},$1=function(e,t){return W1(e,t).then(function(e){return t.utf8Encoder(e)})},Y1={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},J1=(_v(Z1,cm=C),Z1.prototype.destroy=function(){cm.prototype.destroy.call(this)},Z1);function Z1(e){var t,n,r=this,i=Ev(Ev({},rm),e),o=Lo(i),s=wc(xo(o)),a=ha(s),s=kc((e=void 0!==(t=a.bucketEndpoint)&&t,i=a.forcePathStyle,o=void 0!==i&&i,t=void 0!==(s=a.useAccelerateEndpoint)&&s,s=void 0!==(i=a.useDualstackEndpoint)&&i,n=void 0!==(i=a.useArnRegion)&&i,j(j({},a),{bucketEndpoint:e,forcePathStyle:o,useAccelerateEndpoint:t,useDualstackEndpoint:s,useArnRegion:"function"==typeof n?n:function(){return Promise.resolve(n)}}))),s=j(j({},s=s),{eventStreamMarshaller:s.eventStreamSerdeProvider(s)});return(r=cm.call(this,s)||this).config=s,r.middlewareStack.use(Ac(r.config)),r.middlewareStack.use(Xs(r.config)),r.middlewareStack.use(Lu(r.config)),r.middlewareStack.use(Mu(r.config)),r.middlewareStack.use(Du(r.config)),r.middlewareStack.use((r.config,{applyToStack:function(e){e.add(sm(),H1)}})),r.middlewareStack.use(am(r.config)),r.middlewareStack.use(im(r.config)),r.middlewareStack.use(Tc(r.config)),r}(lm||{}).filterSensitiveLog=function(e){return Ev({},e)},(pm||(pm={})).filterSensitiveLog=function(e){return Ev({},e)},(dm||(dm={})).filterSensitiveLog=function(e){return Ev({},e)},(fm||{}).filterSensitiveLog=function(e){return Ev({},e)},(hm||{}).filterSensitiveLog=function(e){return Ev({},e)},(gm||{}).filterSensitiveLog=function(e){return Ev({},e)},(vm||{}).filterSensitiveLog=function(e){return Ev({},e)},(mm||{}).filterSensitiveLog=function(e){return Ev({},e)},(ym||{}).filterSensitiveLog=function(e){return Ev({},e)},(bm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Sm||(Sm={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc})},(wm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Cm||{}).filterSensitiveLog=function(e){return Ev({},e)},(_m||(_m={})).filterSensitiveLog=function(e){return Ev({},e)},(Em||{}).filterSensitiveLog=function(e){return Ev({},e)},(Am||{}).filterSensitiveLog=function(e){return Ev(Ev(Ev({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Wc})},(Im||{}).filterSensitiveLog=function(e){return Ev(Ev(Ev(Ev(Ev({},e),e.SSECustomerKey&&{SSECustomerKey:Wc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Wc}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Wc})},(km||{}).filterSensitiveLog=function(e){return Ev({},e)},(Tm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Pm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Om||{}).filterSensitiveLog=function(e){return Ev({},e)},(xm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Lm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Nm||(Nm={})).filterSensitiveLog=function(e){return Ev(Ev(Ev({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Wc})},(Rm||(Rm={})).filterSensitiveLog=function(e){return Ev(Ev(Ev(Ev({},e),e.SSECustomerKey&&{SSECustomerKey:Wc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Wc})},(Mm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Um||{}).filterSensitiveLog=function(e){return Ev({},e)},(Dm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Fm||{}).filterSensitiveLog=function(e){return Ev({},e)},(jm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Bm||{}).filterSensitiveLog=function(e){return Ev({},e)},(zm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Vm||{}).filterSensitiveLog=function(e){return Ev({},e)},(qm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Km||{}).filterSensitiveLog=function(e){return Ev({},e)},(Hm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Gm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Wm||{}).filterSensitiveLog=function(e){return Ev({},e)},($m||($m={})).filterSensitiveLog=function(e){return Ev({},e)},(Ym||(Ym={})).filterSensitiveLog=function(e){return Ev({},e)},(Jm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Zm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Xm||{}).filterSensitiveLog=function(e){return Ev({},e)},(Qm||{}).filterSensitiveLog=function(e){return Ev({},e)},(ey||{}).filterSensitiveLog=function(e){return Ev({},e)},(ty||{}).filterSensitiveLog=function(e){return Ev({},e)},(ny||{}).filterSensitiveLog=function(e){return Ev({},e)},(ry||{}).filterSensitiveLog=function(e){return Ev({},e)},(iy||{}).filterSensitiveLog=function(e){return Ev({},e)},(oy||{}).filterSensitiveLog=function(e){return Ev({},e)},(sy||{}).filterSensitiveLog=function(e){return Ev({},e)},(ay||{}).filterSensitiveLog=function(e){return Ev({},e)},(py||(py={})).filterSensitiveLog=function(e){return Ev({},e)},(uy||(uy={})).filterSensitiveLog=function(e){return Ev({},e)},(cy||(cy={})).filterSensitiveLog=function(e){return Ev({},e)},(py=ly=ly||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},py.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:uy.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:cy.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(dy||{}).filterSensitiveLog=function(e){return Ev({},e)},(fy||{}).filterSensitiveLog=function(e){return Ev({},e)},(hy||{}).filterSensitiveLog=function(e){return Ev({},e)},(gy||{}).filterSensitiveLog=function(e){return Ev({},e)},(vy||(vy={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Filter&&{Filter:ly.filterSensitiveLog(e.Filter)})},(my||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:vy.filterSensitiveLog(e.AnalyticsConfiguration)})},(yy||{}).filterSensitiveLog=function(e){return Ev({},e)},(by||{}).filterSensitiveLog=function(e){return Ev({},e)},(Sy||{}).filterSensitiveLog=function(e){return Ev({},e)},(wy||{}).filterSensitiveLog=function(e){return Ev({},e)},(Cy||(Cy={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:Wc})},(_y||(_y={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:Cy.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})},(Ey||(Ey={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Rules&&{Rules:e.Rules.map(function(e){return _y.filterSensitiveLog(e)})})},(Ay||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ey.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(Iy||{}).filterSensitiveLog=function(e){return Ev({},e)},(ky||{}).filterSensitiveLog=function(e){return Ev({},e)},(Ty||{}).filterSensitiveLog=function(e){return Ev({},e)},(Py||{}).filterSensitiveLog=function(e){return Ev({},e)},(Oy||{}).filterSensitiveLog=function(e){return Ev({},e)},(xy||{}).filterSensitiveLog=function(e){return Ev({},e)},(Ly||{}).filterSensitiveLog=function(e){return Ev({},e)},(Ny||(Ny={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.KeyId&&{KeyId:Wc})},(Ry||{}).filterSensitiveLog=function(e){return Ev({},e)},(My||(My={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSEKMS&&{SSEKMS:Ny.filterSensitiveLog(e.SSEKMS)})},(Uy||(Uy={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Encryption&&{Encryption:My.filterSensitiveLog(e.Encryption)})},(Dy||(Dy={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.S3BucketDestination&&{S3BucketDestination:Uy.filterSensitiveLog(e.S3BucketDestination)})},(Fy||{}).filterSensitiveLog=function(e){return Ev({},e)},(jy||{}).filterSensitiveLog=function(e){return Ev({},e)},(By||(By={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Destination&&{Destination:Dy.filterSensitiveLog(e.Destination)})},(zy||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.InventoryConfiguration&&{InventoryConfiguration:By.filterSensitiveLog(e.InventoryConfiguration)})},(Vy||{}).filterSensitiveLog=function(e){return Ev({},e)},(Hy||(Hy={})).filterSensitiveLog=function(e){return Ev({},e)},(qy||(qy={})).filterSensitiveLog=function(e){return Ev({},e)},(Hy=Ky=Ky||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},Hy.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:uy.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:qy.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(Gy||{}).filterSensitiveLog=function(e){return Ev({},e)},(Wy||{}).filterSensitiveLog=function(e){return Ev({},e)},($y||{}).filterSensitiveLog=function(e){return Ev({},e)},(Yy||(Yy={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Filter&&{Filter:Ky.filterSensitiveLog(e.Filter)})},(Jy||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Rules&&{Rules:e.Rules.map(function(e){return Yy.filterSensitiveLog(e)})})},(Zy||{}).filterSensitiveLog=function(e){return Ev({},e)},(Xy||{}).filterSensitiveLog=function(e){return Ev({},e)},(Qy||{}).filterSensitiveLog=function(e){return Ev({},e)},(e0||{}).filterSensitiveLog=function(e){return Ev({},e)},(t0||{}).filterSensitiveLog=function(e){return Ev({},e)},(n0||{}).filterSensitiveLog=function(e){return Ev({},e)},(o0||(o0={})).filterSensitiveLog=function(e){return Ev({},e)},(r0||(r0={})).filterSensitiveLog=function(e){return Ev({},e)},(o0=i0=i0||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},o0.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:uy.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:r0.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(s0||(s0={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Filter&&{Filter:i0.filterSensitiveLog(e.Filter)})},(a0||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.MetricsConfiguration&&{MetricsConfiguration:s0.filterSensitiveLog(e.MetricsConfiguration)})},(u0||{}).filterSensitiveLog=function(e){return Ev({},e)},(c0||{}).filterSensitiveLog=function(e){return Ev({},e)},(l0||{}).filterSensitiveLog=function(e){return Ev({},e)},(p0||{}).filterSensitiveLog=function(e){return Ev({},e)},(d0||{}).filterSensitiveLog=function(e){return Ev({},e)},(f0||{}).filterSensitiveLog=function(e){return Ev({},e)},(h0||{}).filterSensitiveLog=function(e){return Ev({},e)},(g0||{}).filterSensitiveLog=function(e){return Ev({},e)},(v0||{}).filterSensitiveLog=function(e){return Ev({},e)},(m0||{}).filterSensitiveLog=function(e){return Ev({},e)},(y0||{}).filterSensitiveLog=function(e){return Ev({},e)},(b0||{}).filterSensitiveLog=function(e){return Ev({},e)},(S0||{}).filterSensitiveLog=function(e){return Ev({},e)},(w0||{}).filterSensitiveLog=function(e){return Ev({},e)},(C0||{}).filterSensitiveLog=function(e){return Ev({},e)},(_0||{}).filterSensitiveLog=function(e){return Ev({},e)},(E0||{}).filterSensitiveLog=function(e){return Ev({},e)},(A0||{}).filterSensitiveLog=function(e){return Ev({},e)},(I0||{}).filterSensitiveLog=function(e){return Ev({},e)},(k0||{}).filterSensitiveLog=function(e){return Ev({},e)},(T0||{}).filterSensitiveLog=function(e){return Ev({},e)},(P0||{}).filterSensitiveLog=function(e){return Ev({},e)},(O0||{}).filterSensitiveLog=function(e){return Ev({},e)},(x0||{}).filterSensitiveLog=function(e){return Ev({},e)},(R0||(R0={})).filterSensitiveLog=function(e){return Ev({},e)},(L0||(L0={})).filterSensitiveLog=function(e){return Ev({},e)},(R0=N0=N0||{}).visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},R0.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:uy.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:L0.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(M0||{}).filterSensitiveLog=function(e){return Ev({},e)},(U0||{}).filterSensitiveLog=function(e){return Ev({},e)},(D0||{}).filterSensitiveLog=function(e){return Ev({},e)},(F0||(F0={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Filter&&{Filter:N0.filterSensitiveLog(e.Filter)})},(j0||(j0={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Rules&&{Rules:e.Rules.map(function(e){return F0.filterSensitiveLog(e)})})},(B0||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:j0.filterSensitiveLog(e.ReplicationConfiguration)})},(z0||{}).filterSensitiveLog=function(e){return Ev({},e)},(V0||{}).filterSensitiveLog=function(e){return Ev({},e)},(q0||{}).filterSensitiveLog=function(e){return Ev({},e)},(K0||{}).filterSensitiveLog=function(e){return Ev({},e)},(H0||{}).filterSensitiveLog=function(e){return Ev({},e)},(G0||{}).filterSensitiveLog=function(e){return Ev({},e)},(W0||{}).filterSensitiveLog=function(e){return Ev({},e)},($0||{}).filterSensitiveLog=function(e){return Ev({},e)},(Y0||{}).filterSensitiveLog=function(e){return Ev({},e)},(J0||{}).filterSensitiveLog=function(e){return Ev({},e)},(Z0||{}).filterSensitiveLog=function(e){return Ev({},e)},(X0||{}).filterSensitiveLog=function(e){return Ev({},e)},(Q0||{}).filterSensitiveLog=function(e){return Ev({},e)},(eb||{}).filterSensitiveLog=function(e){return Ev({},e)},(tb||{}).filterSensitiveLog=function(e){return Ev({},e)},(nb||(nb={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc})},(rb||(rb={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSECustomerKey&&{SSECustomerKey:Wc})},(ib||{}).filterSensitiveLog=function(e){return Ev({},e)},(ob||{}).filterSensitiveLog=function(e){return Ev({},e)},(sb||{}).filterSensitiveLog=function(e){return Ev({},e)},(ab||{}).filterSensitiveLog=function(e){return Ev({},e)},(ub||{}).filterSensitiveLog=function(e){return Ev({},e)},(cb||{}).filterSensitiveLog=function(e){return Ev({},e)},(lb||{}).filterSensitiveLog=function(e){return Ev({},e)},(pb||{}).filterSensitiveLog=function(e){return Ev({},e)},(db||{}).filterSensitiveLog=function(e){return Ev({},e)},(fb||{}).filterSensitiveLog=function(e){return Ev({},e)},(hb||{}).filterSensitiveLog=function(e){return Ev({},e)},(gb||{}).filterSensitiveLog=function(e){return Ev({},e)},(vb||{}).filterSensitiveLog=function(e){return Ev({},e)},(mb||{}).filterSensitiveLog=function(e){return Ev({},e)},(yb||{}).filterSensitiveLog=function(e){return Ev({},e)},(bb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Sb||{}).filterSensitiveLog=function(e){return Ev({},e)},(wb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Cb||{}).filterSensitiveLog=function(e){return Ev({},e)},(_b||{}).filterSensitiveLog=function(e){return Ev({},e)},(Eb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Ab||{}).filterSensitiveLog=function(e){return Ev({},e)},(Ib||{}).filterSensitiveLog=function(e){return Ev({},e)},(kb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Tb||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc})},(Pb||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSECustomerKey&&{SSECustomerKey:Wc})},(Ob||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.AnalyticsConfigurationList&&{AnalyticsConfigurationList:e.AnalyticsConfigurationList.map(function(e){return vy.filterSensitiveLog(e)})})},(xb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Lb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Nb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Rb||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map(function(e){return By.filterSensitiveLog(e)})})},(Mb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Ub||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.MetricsConfigurationList&&{MetricsConfigurationList:e.MetricsConfigurationList.map(function(e){return s0.filterSensitiveLog(e)})})},(Db||{}).filterSensitiveLog=function(e){return Ev({},e)},(Fb||{}).filterSensitiveLog=function(e){return Ev({},e)},(jb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Bb||{}).filterSensitiveLog=function(e){return Ev({},e)},(zb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Vb||{}).filterSensitiveLog=function(e){return Ev({},e)},(qb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Kb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Hb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Gb||(Gb={})).filterSensitiveLog=function(e){return Ev({},e)},(Wb||(Wb={})).filterSensitiveLog=function(e){return Ev({},e)},($b||{}).filterSensitiveLog=function(e){return Ev({},e)},(Yb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Jb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Zb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Xb||{}).filterSensitiveLog=function(e){return Ev({},e)},(Qb||{}).filterSensitiveLog=function(e){return Ev({},e)},(e1||{}).filterSensitiveLog=function(e){return Ev({},e)},(t1||(t1={})).filterSensitiveLog=function(e){return Ev({},e)},(n1||(n1={})).filterSensitiveLog=function(e){return Ev({},e)},(r1||{}).filterSensitiveLog=function(e){return Ev({},e)},(i1||{}).filterSensitiveLog=function(e){return Ev({},e)},(o1||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:vy.filterSensitiveLog(e.AnalyticsConfiguration)})},(s1||{}).filterSensitiveLog=function(e){return Ev({},e)},(a1||{}).filterSensitiveLog=function(e){return Ev({},e)},(u1||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:Ey.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})},(c1||{}).filterSensitiveLog=function(e){return Ev({},e)},(l1||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.InventoryConfiguration&&{InventoryConfiguration:By.filterSensitiveLog(e.InventoryConfiguration)})},(p1||(p1={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Rules&&{Rules:e.Rules.map(function(e){return Yy.filterSensitiveLog(e)})})},(d1||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.LifecycleConfiguration&&{LifecycleConfiguration:p1.filterSensitiveLog(e.LifecycleConfiguration)})},(f1||{}).filterSensitiveLog=function(e){return Ev({},e)},(h1||{}).filterSensitiveLog=function(e){return Ev({},e)},(g1||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.MetricsConfiguration&&{MetricsConfiguration:s0.filterSensitiveLog(e.MetricsConfiguration)})},(v1||{}).filterSensitiveLog=function(e){return Ev({},e)},(m1||{}).filterSensitiveLog=function(e){return Ev({},e)},(y1||{}).filterSensitiveLog=function(e){return Ev({},e)},(b1||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:j0.filterSensitiveLog(e.ReplicationConfiguration)})},(S1||{}).filterSensitiveLog=function(e){return Ev({},e)},(w1||{}).filterSensitiveLog=function(e){return Ev({},e)},(C1||{}).filterSensitiveLog=function(e){return Ev({},e)},(_1||{}).filterSensitiveLog=function(e){return Ev({},e)},(E1||{}).filterSensitiveLog=function(e){return Ev({},e)},(A1||{}).filterSensitiveLog=function(e){return Ev({},e)},(I1||{}).filterSensitiveLog=function(e){return Ev({},e)},(k1||{}).filterSensitiveLog=function(e){return Ev({},e)},(T1||(T1={})).filterSensitiveLog=function(e){return Ev(Ev(Ev({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Wc})},(P1||(P1={})).filterSensitiveLog=function(e){return Ev(Ev(Ev(Ev({},e),e.SSECustomerKey&&{SSECustomerKey:Wc}),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Wc})},(O1||{}).filterSensitiveLog=function(e){return Ev({},e)},(x1||{}).filterSensitiveLog=function(e){return Ev({},e)},(L1||{}).filterSensitiveLog=function(e){return Ev({},e)},(N1||{}).filterSensitiveLog=function(e){return Ev({},e)},(R1||{}).filterSensitiveLog=function(e){return Ev({},e)},(M1||{}).filterSensitiveLog=function(e){return Ev({},e)},(U1||{}).filterSensitiveLog=function(e){return Ev({},e)},(D1||{}).filterSensitiveLog=function(e){return Ev({},e)},(F1||{}).filterSensitiveLog=function(e){return Ev({},e)},(j1||{}).filterSensitiveLog=function(e){return Ev({},e)},(B1||{}).filterSensitiveLog=function(e){return Ev({},e)},(z1||{}).filterSensitiveLog=function(e){return Ev({},e)},(V1||{}).filterSensitiveLog=function(e){return Ev({},e)},(q1||{}).filterSensitiveLog=function(e){return Ev({},e)},(K1||(K1={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.KMSKeyId&&{KMSKeyId:Wc})};var X1=(Q1.prototype.withName=function(e){return this.name=e,this},Q1.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},Q1.prototype.addChildNode=function(e){return this.children.push(e),this},Q1.prototype.removeAttribute=function(e){return delete this.attributes[e],this},Q1.prototype.toString=function(){var t,e,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=G(Object.keys(i)),s=o.next();!s.done;s=o.next()){var a=s.value,u=i[a];null!=u&&(r+=" "+a+'="'+(""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"')}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return r+(n?">"+this.children.map(function(e){return e.toString()}).join("")+"</"+this.name+">":"/>")},Q1);function Q1(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}var eS=(tS.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},tS);function tS(e){this.value=e}var nS,rS=function(a,u){return Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Iv(this,function(e){switch(e.label){case 0:return t=[Ev({},a)],s={},[4,IS(a.body,u)];case 1:switch(i=Ev.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=kS(a,i.body)){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return r=[{}],[4,gS(i)];case 3:return n=Ev.apply(void 0,[Ev.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:_S(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=Ev(Ev({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:_S(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})})},iS=function(r,i){return Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return t=[Ev({},r)],n={},[4,IS(r.body,i)];case 1:return t=Ev.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=kS(r,t.body),t=t.body,n=t.code||t.Code||n,t=Ev(Ev({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:_S(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},oS=function(r,i){return Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return t=[Ev({},r)],n={},[4,IS(r.body,i)];case 1:return t=Ev.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=kS(r,t.body),t=t.body,n=t.code||t.Code||n,t=Ev(Ev({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:_S(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},sS=function(r,i){return Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return t=[Ev({},r)],n={},[4,IS(r.body,i)];case 1:return t=Ev.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=kS(r,t.body),t=t.body,n=t.code||t.Code||n,t=Ev(Ev({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:_S(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},aS=function(u,c){return Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return Iv(this,function(e){switch(e.label){case 0:return t=[Ev({},u)],a={},[4,IS(u.body,c)];case 1:switch(o=Ev.apply(void 0,t.concat([(a.body=e.sent(),a)])),s="UnknownError",s=kS(u,o.body)){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return r=[{}],[4,dS(o)];case 3:return n=Ev.apply(void 0,[Ev.apply(void 0,r.concat([e.sent()])),{name:s,$metadata:_S(u)}]),[3,7];case 4:return i=[{}],[4,hS(o)];case 5:return n=Ev.apply(void 0,[Ev.apply(void 0,i.concat([e.sent()])),{name:s,$metadata:_S(u)}]),[3,7];case 6:o=o.body,s=o.code||o.Code||s,n=Ev(Ev({},o),{name:""+s,message:o.message||o.Message||s,$fault:"client",$metadata:_S(u)}),e.label=7;case 7:return s=n.message||n.Message||s,n.message=s,delete n.Message,[2,Promise.reject(Object.assign(new Error(s),n))]}})})},uS=function(a,u){return Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Iv(this,function(e){switch(e.label){case 0:return t=[Ev({},a)],s={},[4,IS(a.body,u)];case 1:switch(i=Ev.apply(void 0,t.concat([(s.body=e.sent(),s)])),o="UnknownError",o=kS(a,i.body)){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return r=[{}],[4,fS(i)];case 3:return n=Ev.apply(void 0,[Ev.apply(void 0,r.concat([e.sent()])),{name:o,$metadata:_S(a)}]),[3,5];case 4:i=i.body,o=i.code||i.Code||o,n=Ev(Ev({},i),{name:""+o,message:i.message||i.Message||o,$fault:"client",$metadata:_S(a)}),e.label=5;case 5:return o=n.message||n.Message||o,n.message=o,delete n.Message,[2,Promise.reject(Object.assign(new Error(o),n))]}})})},cS=function(r,i){return Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return t=[Ev({},r)],n={},[4,IS(r.body,i)];case 1:return t=Ev.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=kS(r,t.body),t=t.body,n=t.code||t.Code||n,t=Ev(Ev({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:_S(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},lS=function(r,i){return Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return t=[Ev({},r)],n={},[4,IS(r.body,i)];case 1:return t=Ev.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=kS(r,t.body),t=t.body,n=t.code||t.Code||n,t=Ev(Ev({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:_S(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},pS=function(r,i){return Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return t=[Ev({},r)],n={},[4,IS(r.body,i)];case 1:return t=Ev.apply(void 0,t.concat([(n.body=e.sent(),n)])),n="UnknownError",n=kS(r,t.body),t=t.body,n=t.code||t.Code||n,t=Ev(Ev({},t),{name:""+n,message:t.message||t.Message||n,$fault:"client",$metadata:_S(r)}),n=t.message||t.Message||n,t.message=n,delete t.Message,[2,Promise.reject(Object.assign(new Error(n),t))]}})})},dS=function(r,e){return Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){return t={name:"InvalidObjectState",$fault:"client",$metadata:_S(r),AccessTier:void 0,StorageClass:void 0},void 0!==(n=r.body).AccessTier&&(t.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),[2,t]})})},fS=function(n,e){return Av(void 0,void 0,void 0,function(){var t;return Iv(this,function(e){return t={name:"NoSuchBucket",$fault:"client",$metadata:_S(n)},n.body,[2,t]})})},hS=function(n,e){return Av(void 0,void 0,void 0,function(){var t;return Iv(this,function(e){return t={name:"NoSuchKey",$fault:"client",$metadata:_S(n)},n.body,[2,t]})})},gS=function(n,e){return Av(void 0,void 0,void 0,function(){var t;return Iv(this,function(e){return t={name:"NoSuchUpload",$fault:"client",$metadata:_S(n)},n.body,[2,t]})})},vS=function(e,t){var n=new X1("CompletedMultipartUpload");return void 0!==e.Parts&&null!==e.Parts&&mS(e.Parts).map(function(e){e=e.withName("Part"),n.addChildNode(e)}),n},mS=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:(t=e,e=new X1("CompletedPart"),void 0!==t.ETag&&null!==t.ETag&&(n=new X1("ETag").addChildNode(new eS(t.ETag)).withName("ETag"),e.addChildNode(n)),void 0!==t.PartNumber&&null!==t.PartNumber&&(n=new X1("PartNumber").addChildNode(new eS(String(t.PartNumber))).withName("PartNumber"),e.addChildNode(n)),e).withName("member");var t,n})},yS=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:(t={Prefix:void 0},void 0!==(e=e).Prefix&&(t.Prefix=e.Prefix),t);var t})},bS=function(e,t){var n={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=e.ID),void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),n},SS=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:(t={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0},void 0!==(e=e).Key&&(t.Key=e.Key),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(t.StorageClass=e.StorageClass),void 0!==e.Owner&&(t.Owner=wS(e.Owner)),t);var t})},wS=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},CS=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:(t={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0},void 0!==(e=e).PartNumber&&(t.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(t.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(t.ETag=e.ETag),void 0!==e.Size&&(t.Size=parseInt(e.Size)),t);var t})},_S=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},ES=function(e,t){return(e=void 0===e?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},AS=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},IS=function(e,t){return ES(e,n=t).then(function(e){return n.utf8Encoder(e)}).then(function(e){if(e.length){var t=P.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,tagValueProcessor:function(e,t){return e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),e=Object.keys(t)[0],t=t[e];return t["#text"]&&(t[e]=t["#text"],delete t["#text"]),jc(t)}return{}});var n},kS=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},TS=(_v(PS,nS=at),PS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize)),this.middlewareStack.use(Mv(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:dm.filterSensitiveLog,outputFilterSensitiveLog:pm.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},PS.prototype.serialize=function(e,t){return a=e,u=t,Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Iv(this,function(e){switch(e.label){case 0:if(t=Ev(Ev({},AS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),AS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Dc(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Dc).join("/")),r=Ev({"x-id":"AbortMultipartUpload"},void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},PS.prototype.deserialize=function(e,t){return n=e,r=t,Av(void 0,void 0,void 0,function(){var t;return Iv(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,rS(n,r)]:(t={$metadata:_S(n),RequestCharged:void 0},void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,ES(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},PS);function PS(e){var t=nS.call(this)||this;return t.input=e,t}var OS,xS=(_v(LS,OS=at),LS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize)),this.middlewareStack.use(um(t)),this.middlewareStack.use(Mv(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:_m.filterSensitiveLog,outputFilterSensitiveLog:Sm.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},LS.prototype.serialize=function(e,t){return u=e,c=t,Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return Iv(this,function(e){switch(e.label){case 0:if(t=Ev(Ev({"content-type":"application/xml"},AS(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),AS(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Dc(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Dc).join("/")),r=Ev({},void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.MultipartUpload&&(s=vS(u.MultipartUpload),i='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),i+=s.toString()),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new na({protocol:s,hostname:o,port:a,method:"POST",headers:t,path:n,query:r,body:i})]}})});var u,c},LS.prototype.deserialize=function(e,t){return r=e,i=t,Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,iS(r,i)]:(t={$metadata:_S(r),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,IS(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.ETag&&(t.ETag=n.ETag),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.Location&&(t.Location=n.Location),[2,Promise.resolve(t)]}})});var r,i},LS);function LS(e){var t=OS.call(this)||this;return t.input=e,t}function NS(t){return{applyToStack:function(e){e.add(function(g){var e=this;return function(h){return function(f){return K(e,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d;return H(this,function(e){switch(e.label){case 0:t=j({},f.input),o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],e.label=1;case 1:e.trys.push([1,6,7,8]),n=G(o),r=n.next(),e.label=2;case 2:return r.done?[3,5]:(i=r.value,(o=t[i.target])?(u=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):"string"==typeof o?g.utf8Decoder(o):new Uint8Array(o),c=g.base64Encoder(u),(o=new g.md5).update(u),s=[j({},t)],(d={})[i.target]=c,a=i.hash,c=(u=g).base64Encoder,[4,o.digest()]):[3,4]);case 3:t=j.apply(void 0,s.concat([(d[a]=c.apply(u,[e.sent()]),d)])),e.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return l=e.sent(),l={error:l},[3,8];case 7:try{r&&!r.done&&(p=n.return)&&p.call(n)}finally{if(l)throw l.error}return[7];case 8:return[2,h(j(j({},f),{input:t}))]}})})}}}(t),MS)}}}var RS,MS={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},US=(_v(DS,RS=at),DS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize)),this.middlewareStack.use(NS(t)),this.middlewareStack.use(Mv(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:Rm.filterSensitiveLog,outputFilterSensitiveLog:Nm.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},DS.prototype.serialize=function(e,t){return a=e,u=t,Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Iv(this,function(e){switch(e.label){case 0:if(t=Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev({},AS(a.ACL)&&{"x-amz-acl":a.ACL}),AS(a.CacheControl)&&{"cache-control":a.CacheControl}),AS(a.ContentDisposition)&&{"content-disposition":a.ContentDisposition}),AS(a.ContentEncoding)&&{"content-encoding":a.ContentEncoding}),AS(a.ContentLanguage)&&{"content-language":a.ContentLanguage}),AS(a.ContentType)&&{"content-type":a.ContentType}),AS(a.Expires)&&{expires:Hc(a.Expires).toString()}),AS(a.GrantFullControl)&&{"x-amz-grant-full-control":a.GrantFullControl}),AS(a.GrantRead)&&{"x-amz-grant-read":a.GrantRead}),AS(a.GrantReadACP)&&{"x-amz-grant-read-acp":a.GrantReadACP}),AS(a.GrantWriteACP)&&{"x-amz-grant-write-acp":a.GrantWriteACP}),AS(a.ServerSideEncryption)&&{"x-amz-server-side-encryption":a.ServerSideEncryption}),AS(a.StorageClass)&&{"x-amz-storage-class":a.StorageClass}),AS(a.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":a.WebsiteRedirectLocation}),AS(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),AS(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),AS(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":a.SSECustomerKeyMD5}),AS(a.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":a.SSEKMSKeyId}),AS(a.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":a.SSEKMSEncryptionContext}),AS(a.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":a.BucketKeyEnabled.toString()}),AS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),AS(a.Tagging)&&{"x-amz-tagging":a.Tagging}),AS(a.ObjectLockMode)&&{"x-amz-object-lock-mode":a.ObjectLockMode}),AS(a.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(a.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),AS(a.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":a.ObjectLockLegalHoldStatus}),AS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),void 0!==a.Metadata&&Object.keys(a.Metadata).reduce(function(e,t){return Ev(Ev({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=a.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Dc(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Dc).join("/")),r={uploads:""},[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,query:r,body:void 0})]}})});var a,u},DS.prototype.deserialize=function(e,t){return r=e,i=t,Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,oS(r,i)]:(t={$metadata:_S(r),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=r.headers["x-amz-server-side-encryption-context"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,IS(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})});var r,i},DS);function DS(e){var t=RS.call(this)||this;return t.input=e,t}var FS,jS=(_v(BS,FS=at),BS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize)),this.middlewareStack.use(Mv(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:Ym.filterSensitiveLog,outputFilterSensitiveLog:$m.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},BS.prototype.serialize=function(e,t){return a=e,u=t,Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Iv(this,function(e){switch(e.label){case 0:if(t=Ev(Ev(Ev(Ev({},AS(a.MFA)&&{"x-amz-mfa":a.MFA}),AS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),AS(a.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":a.BypassGovernanceRetention.toString()}),AS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Dc(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Dc).join("/")),r=Ev({"x-id":"DeleteObject"},void 0!==a.VersionId&&{versionId:a.VersionId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"DELETE",headers:t,path:n,query:r,body:void 0})]}})});var a,u},BS.prototype.deserialize=function(e,t){return n=e,r=t,Av(void 0,void 0,void 0,function(){var t;return Iv(this,function(e){switch(e.label){case 0:return 204!==n.statusCode&&300<=n.statusCode?[2,sS(n,r)]:(t={$metadata:_S(n),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==n.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===n.headers["x-amz-delete-marker"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,ES(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},BS);function BS(e){var t=FS.call(this)||this;return t.input=e,t}var zS,VS=(_v(qS,zS=at),qS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize)),this.middlewareStack.use(NS(t)),this.middlewareStack.use(Mv(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:rb.filterSensitiveLog,outputFilterSensitiveLog:nb.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},qS.prototype.serialize=function(e,t){return a=e,u=t,Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Iv(this,function(e){switch(e.label){case 0:if(t=Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev({},AS(a.IfMatch)&&{"if-match":a.IfMatch}),AS(a.IfModifiedSince)&&{"if-modified-since":Hc(a.IfModifiedSince).toString()}),AS(a.IfNoneMatch)&&{"if-none-match":a.IfNoneMatch}),AS(a.IfUnmodifiedSince)&&{"if-unmodified-since":Hc(a.IfUnmodifiedSince).toString()}),AS(a.Range)&&{range:a.Range}),AS(a.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":a.SSECustomerAlgorithm}),AS(a.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":a.SSECustomerKey}),AS(a.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":a.SSECustomerKeyMD5}),AS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),AS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Dc(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Dc).join("/")),r=Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev({"x-id":"GetObject"},void 0!==a.ResponseCacheControl&&{"response-cache-control":a.ResponseCacheControl}),void 0!==a.ResponseContentDisposition&&{"response-content-disposition":a.ResponseContentDisposition}),void 0!==a.ResponseContentEncoding&&{"response-content-encoding":a.ResponseContentEncoding}),void 0!==a.ResponseContentLanguage&&{"response-content-language":a.ResponseContentLanguage}),void 0!==a.ResponseContentType&&{"response-content-type":a.ResponseContentType}),void 0!==a.ResponseExpires&&{"response-expires":(a.ResponseExpires.toISOString().split(".")[0]+"Z").toString()}),void 0!==a.VersionId&&{versionId:a.VersionId}),void 0!==a.PartNumber&&{partNumber:a.PartNumber.toString()}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},qS.prototype.deserialize=function(e,t){return r=e,i=t,Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,aS(r,i)]:(t={$metadata:_S(r),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==r.headers["x-amz-delete-marker"]&&(t.DeleteMarker="true"===r.headers["x-amz-delete-marker"]),void 0!==r.headers["accept-ranges"]&&(t.AcceptRanges=r.headers["accept-ranges"]),void 0!==r.headers["x-amz-expiration"]&&(t.Expiration=r.headers["x-amz-expiration"]),void 0!==r.headers["x-amz-restore"]&&(t.Restore=r.headers["x-amz-restore"]),void 0!==r.headers["last-modified"]&&(t.LastModified=new Date(r.headers["last-modified"])),void 0!==r.headers["content-length"]&&(t.ContentLength=parseInt(r.headers["content-length"],10)),void 0!==r.headers.etag&&(t.ETag=r.headers.etag),void 0!==r.headers["x-amz-missing-meta"]&&(t.MissingMeta=parseInt(r.headers["x-amz-missing-meta"],10)),void 0!==r.headers["x-amz-version-id"]&&(t.VersionId=r.headers["x-amz-version-id"]),void 0!==r.headers["cache-control"]&&(t.CacheControl=r.headers["cache-control"]),void 0!==r.headers["content-disposition"]&&(t.ContentDisposition=r.headers["content-disposition"]),void 0!==r.headers["content-encoding"]&&(t.ContentEncoding=r.headers["content-encoding"]),void 0!==r.headers["content-language"]&&(t.ContentLanguage=r.headers["content-language"]),void 0!==r.headers["content-range"]&&(t.ContentRange=r.headers["content-range"]),void 0!==r.headers["content-type"]&&(t.ContentType=r.headers["content-type"]),void 0!==r.headers.expires&&(t.Expires=new Date(r.headers.expires)),void 0!==r.headers["x-amz-website-redirect-location"]&&(t.WebsiteRedirectLocation=r.headers["x-amz-website-redirect-location"]),void 0!==r.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=r.headers["x-amz-server-side-encryption"]),void 0!==r.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=r.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==r.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=r.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==r.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=r.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==r.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===r.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==r.headers["x-amz-storage-class"]&&(t.StorageClass=r.headers["x-amz-storage-class"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),void 0!==r.headers["x-amz-replication-status"]&&(t.ReplicationStatus=r.headers["x-amz-replication-status"]),void 0!==r.headers["x-amz-mp-parts-count"]&&(t.PartsCount=parseInt(r.headers["x-amz-mp-parts-count"],10)),void 0!==r.headers["x-amz-tagging-count"]&&(t.TagCount=parseInt(r.headers["x-amz-tagging-count"],10)),void 0!==r.headers["x-amz-object-lock-mode"]&&(t.ObjectLockMode=r.headers["x-amz-object-lock-mode"]),void 0!==r.headers["x-amz-object-lock-retain-until-date"]&&(t.ObjectLockRetainUntilDate=new Date(r.headers["x-amz-object-lock-retain-until-date"])),void 0!==r.headers["x-amz-object-lock-legal-hold"]&&(t.ObjectLockLegalHoldStatus=r.headers["x-amz-object-lock-legal-hold"]),Object.keys(r.headers).forEach(function(e){void 0===t.Metadata&&(t.Metadata={}),e.startsWith("x-amz-meta-")&&(t.Metadata[e.substring(11)]=r.headers[e])}),n=r.body,t.Body=n,[2,Promise.resolve(t)])})});var r,i},qS);function qS(e){var t=zS.call(this)||this;return t.input=e,t}var KS,HS=(_v(GS,KS=at),GS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize)),this.middlewareStack.use(Mv(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:Wb.filterSensitiveLog,outputFilterSensitiveLog:Gb.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},GS.prototype.serialize=function(e,t){return a=e,u=t,Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Iv(this,function(e){switch(e.label){case 0:if(t=Ev(Ev({},AS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),AS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return n=n.replace("{Bucket}",Dc(o)),r=Ev(Ev(Ev(Ev(Ev({},void 0!==a.Delimiter&&{delimiter:a.Delimiter}),void 0!==a.EncodingType&&{"encoding-type":a.EncodingType}),void 0!==a.Marker&&{marker:a.Marker}),void 0!==a.MaxKeys&&{"max-keys":a.MaxKeys.toString()}),void 0!==a.Prefix&&{prefix:a.Prefix}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},GS.prototype.deserialize=function(e,t){return r=e,i=t,Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,uS(r,i)]:(t={$metadata:_S(r),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,IS(r.body,i)]);case 1:return""===(n=e.sent()).CommonPrefixes&&(t.CommonPrefixes=[]),void 0!==n.CommonPrefixes&&(t.CommonPrefixes=yS(Fc(n.CommonPrefixes))),""===n.Contents&&(t.Contents=[]),void 0!==n.Contents&&(t.Contents=SS(Fc(n.Contents))),void 0!==n.Delimiter&&(t.Delimiter=n.Delimiter),void 0!==n.EncodingType&&(t.EncodingType=n.EncodingType),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Marker&&(t.Marker=n.Marker),void 0!==n.MaxKeys&&(t.MaxKeys=parseInt(n.MaxKeys)),void 0!==n.Name&&(t.Name=n.Name),void 0!==n.NextMarker&&(t.NextMarker=n.NextMarker),void 0!==n.Prefix&&(t.Prefix=n.Prefix),[2,Promise.resolve(t)]}})});var r,i},GS);function GS(e){var t=KS.call(this)||this;return t.input=e,t}var WS,$S=(_v(YS,WS=at),YS.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize)),this.middlewareStack.use(Mv(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:n1.filterSensitiveLog,outputFilterSensitiveLog:t1.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},YS.prototype.serialize=function(e,t){return a=e,u=t,Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return Iv(this,function(e){switch(e.label){case 0:if(t=Ev(Ev({},AS(a.RequestPayer)&&{"x-amz-request-payer":a.RequestPayer}),AS(a.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":a.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===a.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=a.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Dc(o)),void 0===a.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=a.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Dc).join("/")),r=Ev(Ev(Ev({"x-id":"ListParts"},void 0!==a.MaxParts&&{"max-parts":a.MaxParts.toString()}),void 0!==a.PartNumberMarker&&{"part-number-marker":a.PartNumberMarker}),void 0!==a.UploadId&&{uploadId:a.UploadId}),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"GET",headers:t,path:n,query:r,body:void 0})]}})});var a,u},YS.prototype.deserialize=function(e,t){return r=e,i=t,Av(void 0,void 0,void 0,function(){var t,n;return Iv(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,cS(r,i)]:(t={$metadata:_S(r),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==r.headers["x-amz-abort-date"]&&(t.AbortDate=new Date(r.headers["x-amz-abort-date"])),void 0!==r.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=r.headers["x-amz-abort-rule-id"]),void 0!==r.headers["x-amz-request-charged"]&&(t.RequestCharged=r.headers["x-amz-request-charged"]),[4,IS(r.body,i)]);case 1:return void 0!==(n=e.sent()).Bucket&&(t.Bucket=n.Bucket),void 0!==n.Initiator&&(t.Initiator=bS(n.Initiator)),void 0!==n.IsTruncated&&(t.IsTruncated="true"==n.IsTruncated),void 0!==n.Key&&(t.Key=n.Key),void 0!==n.MaxParts&&(t.MaxParts=parseInt(n.MaxParts)),void 0!==n.NextPartNumberMarker&&(t.NextPartNumberMarker=n.NextPartNumberMarker),void 0!==n.Owner&&(t.Owner=wS(n.Owner)),void 0!==n.PartNumberMarker&&(t.PartNumberMarker=n.PartNumberMarker),""===n.Part&&(t.Parts=[]),void 0!==n.Part&&(t.Parts=CS(Fc(n.Part))),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),void 0!==n.UploadId&&(t.UploadId=n.UploadId),[2,Promise.resolve(t)]}})});var r,i},YS);function YS(e){var t=WS.call(this)||this;return t.input=e,t}var JS,ZS,XS,QS,ew,tw,nw,rw,iw,ow,sw,aw,uw,cw,lw,pw,dw,fw,hw,gw,vw,mw,yw,bw,Sw,ww,Cw,_w,Ew=(_v(Aw,JS=at),Aw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize)),this.middlewareStack.use(NS(t)),this.middlewareStack.use(Mv(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:P1.filterSensitiveLog,outputFilterSensitiveLog:T1.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Aw.prototype.serialize=function(e,t){return u=e,c=t,Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return Iv(this,function(e){switch(e.label){case 0:if(t=Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev(Ev({"content-type":"application/octet-stream"},AS(u.ACL)&&{"x-amz-acl":u.ACL}),AS(u.CacheControl)&&{"cache-control":u.CacheControl}),AS(u.ContentDisposition)&&{"content-disposition":u.ContentDisposition}),AS(u.ContentEncoding)&&{"content-encoding":u.ContentEncoding}),AS(u.ContentLanguage)&&{"content-language":u.ContentLanguage}),AS(u.ContentLength)&&{"content-length":u.ContentLength.toString()}),AS(u.ContentMD5)&&{"content-md5":u.ContentMD5}),AS(u.ContentType)&&{"content-type":u.ContentType}),AS(u.Expires)&&{expires:Hc(u.Expires).toString()}),AS(u.GrantFullControl)&&{"x-amz-grant-full-control":u.GrantFullControl}),AS(u.GrantRead)&&{"x-amz-grant-read":u.GrantRead}),AS(u.GrantReadACP)&&{"x-amz-grant-read-acp":u.GrantReadACP}),AS(u.GrantWriteACP)&&{"x-amz-grant-write-acp":u.GrantWriteACP}),AS(u.ServerSideEncryption)&&{"x-amz-server-side-encryption":u.ServerSideEncryption}),AS(u.StorageClass)&&{"x-amz-storage-class":u.StorageClass}),AS(u.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":u.WebsiteRedirectLocation}),AS(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),AS(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),AS(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":u.SSECustomerKeyMD5}),AS(u.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":u.SSEKMSKeyId}),AS(u.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":u.SSEKMSEncryptionContext}),AS(u.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":u.BucketKeyEnabled.toString()}),AS(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),AS(u.Tagging)&&{"x-amz-tagging":u.Tagging}),AS(u.ObjectLockMode)&&{"x-amz-object-lock-mode":u.ObjectLockMode}),AS(u.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(u.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),AS(u.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":u.ObjectLockLegalHoldStatus}),AS(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),void 0!==u.Metadata&&Object.keys(u.Metadata).reduce(function(e,t){return Ev(Ev({},e),((e={})["x-amz-meta-"+t.toLowerCase()]=u.Metadata[t],e))},{})),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Dc(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Dc).join("/")),r={"x-id":"PutObject"},void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new na({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},Aw.prototype.deserialize=function(e,t){return n=e,r=t,Av(void 0,void 0,void 0,function(){var t;return Iv(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,lS(n,r)]:(t={$metadata:_S(n),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==n.headers["x-amz-expiration"]&&(t.Expiration=n.headers["x-amz-expiration"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers["x-amz-version-id"]&&(t.VersionId=n.headers["x-amz-version-id"]),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=n.headers["x-amz-server-side-encryption-context"]),void 0!==n.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===n.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,ES(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},Aw);function Aw(e){var t=JS.call(this)||this;return t.input=e,t}(QS||(QS={})).filterSensitiveLog=function(e){return Ev({},e)},(ZS||(ZS={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Encryption&&{Encryption:K1.filterSensitiveLog(e.Encryption)})},(XS||(XS={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.S3&&{S3:ZS.filterSensitiveLog(e.S3)})},(QS={}).IGNORE="IGNORE",QS.NONE="NONE",QS.USE="USE",(ew||(ew={})).filterSensitiveLog=function(e){return Ev({},e)},(ew={}).DOCUMENT="DOCUMENT",ew.LINES="LINES",(tw||{}).filterSensitiveLog=function(e){return Ev({},e)},(nw||{}).filterSensitiveLog=function(e){return Ev({},e)},(rw||(rw={})).filterSensitiveLog=function(e){return Ev({},e)},(rw={}).ALWAYS="ALWAYS",rw.ASNEEDED="ASNEEDED",(iw||{}).filterSensitiveLog=function(e){return Ev({},e)},(ow||{}).filterSensitiveLog=function(e){return Ev({},e)},(sw||{}).filterSensitiveLog=function(e){return Ev({},e)},(aw||{}).filterSensitiveLog=function(e){return Ev({},e)},(uw||(uw={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.OutputLocation&&{OutputLocation:XS.filterSensitiveLog(e.OutputLocation)})},(cw||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.RestoreRequest&&{RestoreRequest:uw.filterSensitiveLog(e.RestoreRequest)})},(lw||(lw={})).filterSensitiveLog=function(e){return Ev({},e)},(pw||(pw={})).filterSensitiveLog=function(e){return Ev({},e)},(dw||{}).filterSensitiveLog=function(e){return Ev({},e)},(fw||(fw={})).filterSensitiveLog=function(e){return Ev({},e)},(hw||(hw={})).filterSensitiveLog=function(e){return Ev({},e)},(vw||(vw={})).filterSensitiveLog=function(e){return Ev({},e)},(gw||(gw={})).filterSensitiveLog=function(e){return Ev({},e)},(vw={}).visit=function(e,t){return void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])},vw.filterSensitiveLog=function(e){var t;return void 0!==e.Records?{Records:hw.filterSensitiveLog(e.Records)}:void 0!==e.Stats?{Stats:gw.filterSensitiveLog(e.Stats)}:void 0!==e.Progress?{Progress:fw.filterSensitiveLog(e.Progress)}:void 0!==e.Cont?{Cont:lw.filterSensitiveLog(e.Cont)}:void 0!==e.End?{End:pw.filterSensitiveLog(e.End)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0},(mw||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})},(yw||{}).filterSensitiveLog=function(e){return Ev({},e)},(bw||{}).filterSensitiveLog=function(e){return Ev({},e)},(Sw||{}).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSECustomerKey&&{SSECustomerKey:Wc})},(ww||(ww={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc})},(Cw||(Cw={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSECustomerKey&&{SSECustomerKey:Wc})},(_w||{}).filterSensitiveLog=function(e){return Ev({},e)},(y2||(y2={})).filterSensitiveLog=function(e){return Ev(Ev({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:Wc})},(W_||(W_={})).filterSensitiveLog=function(e){return Ev(Ev(Ev({},e),e.SSECustomerKey&&{SSECustomerKey:Wc}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:Wc})};var Iw,kw=(_v(Tw,Iw=at),Tw.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize)),this.middlewareStack.use(NS(t)),this.middlewareStack.use(Mv(t));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Cw.filterSensitiveLog,outputFilterSensitiveLog:ww.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},Tw.prototype.serialize=function(e,t){return u=e,c=t,Av(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return Iv(this,function(e){switch(e.label){case 0:if(t=Ev(Ev(Ev(Ev(Ev(Ev(Ev({"content-type":"application/octet-stream"},AS(u.ContentLength)&&{"content-length":u.ContentLength.toString()}),AS(u.ContentMD5)&&{"content-md5":u.ContentMD5}),AS(u.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":u.SSECustomerAlgorithm}),AS(u.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":u.SSECustomerKey}),AS(u.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":u.SSECustomerKeyMD5}),AS(u.RequestPayer)&&{"x-amz-request-payer":u.RequestPayer}),AS(u.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":u.ExpectedBucketOwner}),n="/{Bucket}/{Key+}",void 0===u.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((o=u.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(n=n.replace("{Bucket}",Dc(o)),void 0===u.Key)throw new Error("No value provided for input HTTP label: Key.");if((o=u.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return n=n.replace("{Key+}",o.split("/").map(Dc).join("/")),r=Ev(Ev({"x-id":"UploadPart"},void 0!==u.PartNumber&&{partNumber:u.PartNumber.toString()}),void 0!==u.UploadId&&{uploadId:u.UploadId}),void 0!==u.Body&&(s=u.Body,i=s),[4,c.endpoint()];case 1:return a=e.sent(),o=a.hostname,s=a.protocol,s=void 0===s?"https":s,a=a.port,[2,new na({protocol:s,hostname:o,port:a,method:"PUT",headers:t,path:n,query:r,body:i})]}})});var u,c},Tw.prototype.deserialize=function(e,t){return n=e,r=t,Av(void 0,void 0,void 0,function(){var t;return Iv(this,function(e){switch(e.label){case 0:return 200!==n.statusCode&&300<=n.statusCode?[2,pS(n,r)]:(t={$metadata:_S(n),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==n.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=n.headers["x-amz-server-side-encryption"]),void 0!==n.headers.etag&&(t.ETag=n.headers.etag),void 0!==n.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=n.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==n.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=n.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==n.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=n.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==n.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled="true"===n.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==n.headers["x-amz-request-charged"]&&(t.RequestCharged=n.headers["x-amz-request-charged"]),[4,ES(n.body,r)]);case 1:return e.sent(),[2,Promise.resolve(t)]}})});var n,r},Tw);function Tw(e){var t=Iw.call(this)||this;return t.input=e,t}var Pw=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Ow)},Ow=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function xw(e){var t,n,r=[];try{for(var i=G(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var s=e[a=o.value],a=Pw(a);if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+Pw(s[u]));else{var l=a;!s&&"string"!=typeof s||(l+="="+Pw(s)),r.push(l)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}function Lw(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,e=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),t&&(e+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i);n=n?xw(n):"";return r+"//"+e+i+(n=n&&"?"!==n[0]?"?"+n:n)}for(var Nw={},Rw=0;Rw<256;Rw++){var Mw=Rw.toString(16).toLowerCase();1===Mw.length&&(Mw="0"+Mw),Nw[Rw]=Mw}function Uw(e){for(var t="",n=0;n<e.byteLength;n++)t+=Nw[e[n]];return t}var Dw="X-Amz-Date",Fw="X-Amz-Signature",jw="X-Amz-Security-Token",Bw="authorization",zw=Dw.toLowerCase(),Vw=[Bw,zw,"date"],qw=Fw.toLowerCase(),Kw="x-amz-content-sha256",Hw=jw.toLowerCase(),Gw={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Ww=/^proxy-/,$w=/^sec-/,Yw="AWS4-HMAC-SHA256",Jw="AWS4-HMAC-SHA256-PAYLOAD",Zw="aws4_request",Xw={},Qw=[];function eC(e,t,n){return e+"/"+t+"/"+n+"/"+Zw}function tC(e,t,n){t=new e(t);return t.update(n),t.digest()}function nC(e,t,n){var r,i,o=e.headers,s={};try{for(var a=G(Object.keys(o).sort()),u=a.next();!u.done;u=a.next()){var c=u.value,l=c.toLowerCase();(l in Gw||null!=t&&t.has(l)||Ww.test(l)||$w.test(l))&&(!n||n&&!n.has(l))||(s[l]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return s}function rC(e){return encodeURIComponent(e).replace(/[!'()*]/g,iC)}var iC=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};function oC(e){var t,n,e=e.query,r=void 0===e?{}:e,i=[],o={};try{for(var s=G(Object.keys(r).sort()),a=s.next();!a.done;a=s.next())!function(n){if(n.toLowerCase()===qw)return;i.push(n);var e=r[n];"string"==typeof e?o[n]=rC(n)+"="+rC(e):Array.isArray(e)&&(o[n]=e.slice(0).sort().reduce(function(e,t){return e.concat([rC(n)+"="+rC(t)])},[]).join("&"))}(a.value)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i.map(function(e){return o[e]}).filter(function(e){return e}).join("&")}function sC(e,u){var c=e.headers,l=e.body;return K(this,void 0,void 0,function(){var n,r,i,o,s,a;return H(this,function(e){switch(e.label){case 0:try{for(n=G(Object.keys(c)),r=n.next();!r.done;r=n.next())if((i=r.value).toLowerCase()===Kw)return[2,c[i]]}catch(e){s={error:e}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return null!=l?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof l||ArrayBuffer.isView(l)||(t=l,"function"==typeof ArrayBuffer&&t instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(t))?((s=new u).update(l),o=Uw,[4,s.digest()]):[3,3];case 2:return[2,o.apply(void 0,[e.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var t})})}function aC(e){var r,t=e.headers,n=e.query,e=B(e,["headers","query"]);return j(j({},e),{headers:j({},t),query:n?(r=n,Object.keys(r).reduce(function(e,t){var n=r[t];return j(j({},e),((e={})[t]=Array.isArray(n)?$(n):n,e))},{})):void 0})}function uC(e){var t,n;e="function"==typeof e.clone?e.clone():aC(e);try{for(var r=G(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;-1<Vw.indexOf(o.toLowerCase())&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function cC(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"!=typeof e)return e;if(Number(e))return new Date(1e3*Number(e));return new Date(e)}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var lC=(pC.prototype.presign=function(m,y){return void 0===y&&(y={}),K(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v;return H(this,function(e){switch(e.label){case 0:return a=y.signingDate,u=void 0===a?new Date:a,o=y.expiresIn,t=void 0===o?3600:o,n=y.unsignableHeaders,r=y.unhoistableHeaders,i=y.signableHeaders,a=y.signingRegion,o=y.signingService,[4,this.credentialProvider()];case 1:return(s=e.sent(),null==a)?[3,2]:(c=a,[3,4]);case 2:return[4,this.regionProvider()];case 3:c=e.sent(),e.label=4;case 4:return(a=c,c=dC(u),u=c.longDate,c=c.shortDate,604800<t)?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=eC(c,a,null!=o?o:this.service),l=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():aC(e),s=o.headers,a=void 0===(o=o.query)?{}:o;try{for(var u=G(Object.keys(s)),c=u.next();!c.done;c=u.next()){var l=c.value,p=l.toLowerCase();"x-amz-"!==p.substr(0,6)||null!==(i=t.unhoistableHeaders)&&void 0!==i&&i.has(p)||(a[l]=s[l],delete s[l])}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return j(j({},e),{headers:s,query:a})}(uC(m),{unhoistableHeaders:r}),s.sessionToken&&(l.query[jw]=s.sessionToken),l.query["X-Amz-Algorithm"]=Yw,l.query["X-Amz-Credential"]=s.accessKeyId+"/"+g,l.query[Dw]=u,l.query["X-Amz-Expires"]=t.toString(10),v=nC(l,n,i),l.query["X-Amz-SignedHeaders"]=fC(v),p=l.query,d=Fw,f=this.getSignature,h=[u,g,this.getSigningKey(s,a,c,o)],g=this.createCanonicalRequest,v=[l,v],[4,sC(m,this.sha256)]);case 5:return[4,f.apply(this,h.concat([g.apply(this,v.concat([e.sent()]))]))];case 6:return p[d]=e.sent(),[2,l]}})})},pC.prototype.sign=function(t,n){return K(this,void 0,void 0,function(){return H(this,function(e){return"string"==typeof t?[2,this.signString(t,n)]:t.headers&&t.payload?[2,this.signEvent(t,n)]:[2,this.signRequest(t,n)]})})},pC.prototype.signEvent=function(e,t){var u=e.headers,c=e.payload,e=t.signingDate,l=void 0===e?new Date:e,p=t.priorSignature,d=t.signingRegion,f=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return H(this,function(e){switch(e.label){case 0:return null==d?[3,1]:(n=d,[3,3]);case 1:return[4,this.regionProvider()];case 2:n=e.sent(),e.label=3;case 3:return t=n,i=dC(l),o=i.shortDate,r=i.longDate,i=eC(o,t,null!=f?f:this.service),[4,sC({headers:{},body:c},this.sha256)];case 4:return a=e.sent(),(o=new this.sha256).update(u),s=Uw,[4,o.digest()];case 5:return s=s.apply(void 0,[e.sent()]),a=[Jw,r,i,p,s,a].join("\n"),[2,this.signString(a,{signingDate:l,signingRegion:t,signingService:f})]}})})},pC.prototype.signString=function(a,e){var t=void 0===e?{}:e,e=t.signingDate,u=void 0===e?new Date:e,c=t.signingRegion,l=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,i,o,s;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==c)?[3,2]:(r=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,r=dC(u).shortDate,o=(i=this.sha256).bind,[4,this.getSigningKey(t,n,r,l)];case 5:return(i=new(o.apply(i,[void 0,e.sent()]))).update(a),s=Uw,[4,i.digest()];case 6:return[2,s.apply(void 0,[e.sent()])]}})})},pC.prototype.signRequest=function(l,e){var t=void 0===e?{}:e,e=t.signingDate,p=void 0===e?new Date:e,d=t.signableHeaders,f=t.unsignableHeaders,h=t.signingRegion,g=t.signingService;return K(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return H(this,function(e){switch(e.label){case 0:return[4,this.credentialProvider()];case 1:return(t=e.sent(),null==h)?[3,2]:(r=h,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=e.sent(),e.label=4;case 4:return n=r,i=uC(l),a=dC(p),o=a.longDate,s=a.shortDate,a=eC(s,n,null!=g?g:this.service),i.headers[zw]=o,t.sessionToken&&(i.headers[Hw]=t.sessionToken),[4,sC(i,this.sha256)];case 5:return c=e.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=G(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return 1}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(Kw,i.headers)&&this.applyChecksum&&(i.headers[Kw]=c),u=nC(i,f,d),[4,this.getSignature(o,a,this.getSigningKey(t,n,s,g),this.createCanonicalRequest(i,u,c))];case 6:return c=e.sent(),i.headers[Bw]=Yw+" Credential="+t.accessKeyId+"/"+a+", SignedHeaders="+fC(u)+", Signature="+c,[2,i]}})})},pC.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+oC(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},pC.prototype.createStringToSign=function(n,r,i){return K(this,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return(t=new this.sha256).update(i),[4,t.digest()];case 1:return t=e.sent(),[2,Yw+"\n"+n+"\n"+r+"\n"+Uw(t)]}})})},pC.prototype.getCanonicalPath=function(e){e=e.path;return this.uriEscapePath?"/"+encodeURIComponent(e.replace(/^\//,"")).replace(/%2F/g,"/"):e},pC.prototype.getSignature=function(o,s,a,u){return K(this,void 0,void 0,function(){var t,n,r,i;return H(this,function(e){switch(e.label){case 0:return[4,this.createStringToSign(o,s,u)];case 1:return t=e.sent(),r=(n=this.sha256).bind,[4,a];case 2:return(n=new(r.apply(n,[void 0,e.sent()]))).update(t),i=Uw,[4,n.digest()];case 3:return[2,i.apply(void 0,[e.sent()])]}})})},pC.prototype.getSigningKey=function(e,t,n,r){return u=this.sha256,c=e,l=n,p=t,d=r||this.service,K(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a;return H(this,function(e){switch(e.label){case 0:return[4,tC(u,c.secretAccessKey,c.accessKeyId)];case 1:if(o=e.sent(),(t=l+":"+p+":"+d+":"+Uw(o)+":"+c.sessionToken)in Xw)return[2,Xw[t]];for(Qw.push(t);50<Qw.length;)delete Xw[Qw.shift()];n="AWS4"+c.secretAccessKey,e.label=2;case 2:e.trys.push([2,7,8,9]),r=G([l,p,d,Zw]),i=r.next(),e.label=3;case 3:return i.done?[3,6]:(o=i.value,[4,tC(u,n,o)]);case 4:n=e.sent(),e.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return s=e.sent(),s={error:s},[3,9];case 8:try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}return[7];case 9:return[2,Xw[t]=n]}})});var u,c,l,p,d},pC);function pC(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,e=e.uriEscapePath,e=void 0===e||e;this.service=i,this.sha256=o,this.uriEscapePath=e,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=hC(r),this.credentialProvider=gC(n)}var dC=function(e){e=cC(e).replace(/[\-:]/g,"");return{longDate:e,shortDate:e.substr(0,8)}},fC=function(e){return Object.keys(e).sort().join(";")},hC=function(e){if("string"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},gC=function(e){if("object"!=typeof e)return e;var t=Promise.resolve(e);return function(){return t}},vC=(mC.prototype.presign=function(t,e){var n=(e=void 0===e?{}:e).unsignableHeaders,r=void 0===n?new Set:n,n=e.unhoistableHeaders,i=void 0===n?new Set:n,o=B(e,["unsignableHeaders","unhoistableHeaders"]);return K(this,void 0,void 0,function(){return H(this,function(e){return r.add("content-type"),Object.keys(t.headers).map(function(e){return e.toLowerCase()}).filter(function(e){return e.startsWith("x-amz-server-side-encryption")}).forEach(function(e){i.add(e)}),t.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",t.headers.host||(t.headers.host=t.hostname),[2,this.signer.presign(t,j({expiresIn:900,unsignableHeaders:r,unhoistableHeaders:i},o))]})})},mC);function mC(e){e=j({service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1},e);this.signer=new lC(e)}var yC=new _.ConsoleLogger("axios-http-handler"),bC="sendProgress",SC=(wC.prototype.destroy=function(){},wC.prototype.handle=function(e,t){var n=this.httpOptions.requestTimeout,r=this.emitter,i=e.path;!e.query||(o=xw(e.query))&&(i+="?"+o);var o=e.port,o=e.protocol+"//"+e.hostname+(o?":"+o:"")+i,i={};i.url=o,i.method=e.method,i.headers=e.headers,delete i.headers.host,e.body?i.data=e.body:i.headers["Content-Type"]&&(i.data=null),r&&(i.onUploadProgress=function(e){r.emit(bC,e),yC.debug(e)}),this.cancelTokenSource&&(i.cancelToken=this.cancelTokenSource.token),i.responseType="blob";n=[O.request(i).then(function(e){return{response:new ea({headers:e.headers,statusCode:e.status,body:e.data})}}).catch(function(e){throw yC.error(e),e}),function(n){void 0===n&&(n=0);return new Promise(function(e,t){n&&setTimeout(function(){var e=new Error("Request did not complete within "+n+" ms");e.name="TimeoutError",t(e)},n)})}(n)];return Promise.race(n)},wC);function wC(e,t,n){this.httpOptions=e=void 0===e?{}:e,this.emitter=t,this.cancelTokenSource=n}for(var CC={},_C=new Array(64),EC=0,AC="A".charCodeAt(0),IC="Z".charCodeAt(0);EC+AC<=IC;EC++){var kC=String.fromCharCode(EC+AC);_C[CC[kC]=EC]=kC}for(EC=0,AC="a".charCodeAt(0),IC="z".charCodeAt(0);EC+AC<=IC;EC++){kC=String.fromCharCode(EC+AC);_C[CC[kC]=EC+26]=kC}for(EC=0;EC<10;EC++){CC[EC.toString(10)]=EC+52;kC=EC.toString(10);_C[CC[kC]=EC+52]=kC}_C[CC["+"]=62]="+",_C[CC["/"]=63]="/";var TC=6,PC=8;function OC(e){return("function"==typeof Blob&&e instanceof Blob?function(r){return K(this,void 0,void 0,function(){var n;return H(this,function(e){switch(e.label){case 0:return[4,(t=r,new Promise(function(n,r){var i=new FileReader;i.onloadend=function(){if(2!==i.readyState)return r(new Error("Reader aborted too early"));var e=null!==(t=i.result)&&void 0!==t?t:"",t=e.indexOf(","),t=-1<t?t+1:e.length;n(e.substring(t))},i.onabort=function(){return r(new Error("Read aborted"))},i.onerror=function(){return r(i.error)},i.readAsDataURL(t)}))];case 1:return n=e.sent(),n=function(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var t=new ArrayBuffer(t),n=new DataView(t),r=0;r<e.length;r+=4){for(var i=0,o=0,s=r,a=r+3;s<=a;s++)"="!==e[s]?(i|=CC[e[s]]<<(a-s)*TC,o+=TC):i>>=TC;var u=r/4*3;i>>=o%PC;for(var c=Math.floor(o/PC),l=0;l<c;l++){var p=(c-l-1)*PC;n.setUint8(u+l,(i&255<<p)>>p)}}return new Uint8Array(t)}(n),[2,new Uint8Array(n)]}var t})})}:function(s){return K(this,void 0,void 0,function(){var t,n,r,i,o;return H(this,function(e){switch(e.label){case 0:t=new Uint8Array(0),i=s.getReader(),n=!1,e.label=1;case 1:return n?[3,3]:[4,i.read()];case 2:return o=e.sent(),r=o.done,(i=o.value)&&(o=t,(t=new Uint8Array(o.length+i.length)).set(o),t.set(i,o.length)),n=r,[3,1];case 3:return[2,t]}})})})(e)}var xC=function(){return(xC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},LC=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},NC=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},RC=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},MC=new _.ConsoleLogger("AWSS3ProviderManagedUpload"),UC=(DC.prototype.upload=function(){return LC(this,void 0,void 0,function(){var t,n,r,i,o;return NC(this,function(e){switch(e.label){case 0:return[4,(t=this).validateAndSanitizeBody(this.params.Body)];case 1:return(t.body=e.sent(),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=this.minPartSize)?(this.params.Body=this.body,n=new Ew(this.params),[4,this._createNewS3Client(this.opts,this.emitter)]):[3,3];case 2:return[2,e.sent().send(n)];case 3:return[4,this.createMultiPartUpload()];case 4:r=e.sent(),o=Math.ceil(this.totalBytesToUpload/this.minPartSize),i=0,e.label=5;case 5:return i<o?[4,this.checkIfUploadCancelled(r)]:[3,10];case 6:return e.sent(),o=this.createParts(i),[4,this.uploadParts(r,o)];case 7:return e.sent(),[4,this.checkIfUploadCancelled(r)];case 8:e.sent(),e.label=9;case 9:return i+=this.queueSize,[3,5];case 10:return[4,this.finishMultiPartUpload(r)];case 11:return[2,e.sent()]}})})},DC.prototype.createParts=function(e){for(var t=[],n=e,r=e*this.minPartSize;r<this.totalBytesToUpload&&t.length<this.queueSize;){var i=Math.min(r+this.minPartSize,this.totalBytesToUpload);t.push({bodyPart:this.body.slice(r,i),partNumber:++n,emitter:new x.EventEmitter,_lastUploadedBytes:0}),r+=this.minPartSize}return t},DC.prototype.createMultiPartUpload=function(){return LC(this,void 0,void 0,function(){var t,n,r=this;return NC(this,function(e){switch(e.label){case 0:return n=new US(this.params),[4,this._createNewS3Client(this.opts)];case 1:return(t=e.sent()).middlewareStack.add(function(t){return function(e){return r.params.ContentType&&e&&e.request&&e.request.headers&&(e.request.headers["Content-Type"]=r.params.ContentType),t(e)}},{step:"build"}),[4,t.send(n)];case 2:return n=e.sent(),MC.debug(n.UploadId),[2,n.UploadId]}})})},DC.prototype.uploadParts=function(l,p){return LC(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c;return NC(this,function(e){switch(e.label){case 0:a=[],e.label=1;case 1:e.trys.push([1,6,7,8]),t=RC(p),n=t.next(),e.label=2;case 2:return n.done?[3,5]:(i=n.value,this.setupEventListener(i),r={PartNumber:i.partNumber,Body:i.bodyPart,UploadId:l,Key:this.params.Key,Bucket:this.params.Bucket},r=new kw(r),[4,this._createNewS3Client(this.opts,i.emitter)]);case 3:i=e.sent(),a.push(i.send(r)),e.label=4;case 4:return n=t.next(),[3,2];case 5:return[3,8];case 6:return u=e.sent(),u={error:u},[3,8];case 7:try{n&&!n.done&&(c=t.return)&&c.call(t)}finally{if(u)throw u.error}return[7];case 8:return e.trys.push([8,10,,11]),[4,Promise.all(a)];case 9:for(o=e.sent(),s=0;s<o.length;s++)this.multiPartMap.push({PartNumber:p[s].partNumber,ETag:o[s].ETag});return[3,11];case 10:return a=e.sent(),MC.error("error happened while uploading a part. Cancelling the multipart upload",a),this.cancelUpload(),[2];case 11:return[2]}})})},DC.prototype.finishMultiPartUpload=function(r){return LC(this,void 0,void 0,function(){var t,n;return NC(this,function(e){switch(e.label){case 0:return n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r,MultipartUpload:{Parts:this.multiPartMap}},n=new xS(n),[4,this._createNewS3Client(this.opts)];case 1:t=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,t.send(n)];case 3:return[2,e.sent().Key];case 4:return n=e.sent(),MC.error("error happened while finishing the upload. Cancelling the multipart upload",n),this.cancelUpload(),[2];case 5:return[2]}})})},DC.prototype.checkIfUploadCancelled=function(r){return LC(this,void 0,void 0,function(){var t,n;return NC(this,function(e){switch(e.label){case 0:if(!this.cancel)return[3,5];t="Upload was cancelled.",e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cleanup(r)];case 2:return e.sent(),[3,4];case 3:return n=e.sent(),t+=n.errorMessage,[3,4];case 4:throw new Error(t);case 5:return[2]}})})},DC.prototype.cancelUpload=function(){this.cancel=!0},DC.prototype.cleanup=function(r){return LC(this,void 0,void 0,function(){var t,n;return NC(this,function(e){switch(e.label){case 0:return this.body=null,this.multiPartMap=[],this.bytesUploaded=0,this.totalBytesToUpload=0,n={Bucket:this.params.Bucket,Key:this.params.Key,UploadId:r},[4,this._createNewS3Client(this.opts)];case 1:return[4,(t=e.sent()).send(new TS(n))];case 2:return e.sent(),[4,t.send(new $S(n))];case 3:if((n=e.sent())&&n.Parts&&0<n.Parts.length)throw new Error("Multi Part upload clean up failed");return[2]}})})},DC.prototype.setupEventListener=function(t){var n=this;t.emitter.on(bC,function(e){n.progressChanged(t.partNumber,e.loaded-t._lastUploadedBytes),t._lastUploadedBytes=e.loaded})},DC.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(bC,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},DC.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},DC.prototype.validateAndSanitizeBody=function(t){return LC(this,void 0,void 0,function(){return NC(this,function(e){switch(e.label){case 0:return this.isGenericObject(t)?[2,JSON.stringify(t)]:[3,1];case 1:return this.isBlob(t)?_.Platform.isReactNative?[4,OC(t)]:[3,3]:[3,4];case 2:return[2,e.sent()];case 3:case 4:return[2,t]}})})},DC.prototype.isBlob=function(e){return"undefined"!=typeof Blob&&e instanceof Blob},DC.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(0<=this.byteLength(e))}catch(e){return!0}return!1},DC.prototype._createNewS3Client=function(o,s){return LC(this,void 0,void 0,function(){var t,n,r,i;return NC(this,function(e){switch(e.label){case 0:return[4,this._getCredentials()];case 1:return t=e.sent(),n=o.region,r=o.dangerouslyConnectToHttpEndpointForTesting,i=o.cancelTokenSource,(i=new J1(xC(xC({region:n,credentials:t},r?{endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}:{}),{requestHandler:new SC({},s,i),customUserAgent:_.getAmplifyUserAgent()}))).middlewareStack.remove("contentLengthMiddleware"),[2,i]}})})},DC.prototype._getCredentials=function(){return _.Credentials.get().then(function(e){if(!e)return!1;e=_.Credentials.shear(e);return MC.debug("set credentials for storage",e),e}).catch(function(e){return MC.warn("ensure credentials error",e),!1})},DC);function DC(e,t,n){this.minPartSize=5242880,this.queueSize=4,this.body=null,this.params=null,this.opts=null,this.multiPartMap=[],this.cancel=!1,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=t,this.emitter=n}function FC(e,t,n,r,i){e&&(n={attrs:n},r&&(n.metrics=r),_.Hub.dispatch("storage",{event:t,data:n,message:i},"Storage",qC))}var jC=function(){return(jC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},BC=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},zC=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},VC=new _.ConsoleLogger("AWSS3Provider"),qC="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",KC=(HC.prototype.getCategory=function(){return HC.CATEGORY},HC.prototype.getProviderName=function(){return HC.PROVIDER_NAME},HC.prototype.configure=function(e){if(VC.debug("configure Storage",e),!e)return this._config;e=_.Parser.parseMobilehubConfig(e);return this._config=Object.assign({},this._config,e.Storage),this._config.bucket||VC.debug("Do not have bucket yet"),this._config},HC.prototype.get=function(v,m){return BC(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g;return zC(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];if(f=Object.assign({},this._config,m),t=f.bucket,l=f.download,n=f.cacheControl,r=f.contentDisposition,i=f.contentEncoding,o=f.contentLanguage,s=f.contentType,a=f.expires,u=f.track,c=this._prefix(f),c=c+v,f=this._createNewS3Client(f),VC.debug("get "+v+" from "+c),c={Bucket:t,Key:c},n&&(c.ResponseCacheControl=n),r&&(c.ResponseContentDisposition=r),i&&(c.ResponseContentEncoding=i),o&&(c.ResponseContentLanguage=o),s&&(c.ResponseContentType=s),!0!==l)return[3,5];l=new VS(c),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,f.send(l)];case 3:return p=e.sent(),FC(u,"download",{method:"get",result:"success"},{fileSize:Number(p.Body.size||p.Body.length)},"Download success for "+v),[2,p];case 4:throw p=e.sent(),FC(u,"download",{method:"get",result:"failed"},null,"Download failed with "+p.message),p;case 5:c.Expires=a||900,e.label=6;case 6:return e.trys.push([6,9,,10]),d=new vC(jC({},f.config)),[4,function(i,o){return K(this,void 0,void 0,function(){var t,n,r=this;return H(this,function(e){switch(e.label){case 0:return t=function(e){return function(t){return K(r,void 0,void 0,function(){return H(this,function(e){return[2,{output:{request:t.request},response:void 0}]})})}},(n=i.middlewareStack.clone()).add(t,{step:"build",priority:"low"}),[4,o.resolveMiddleware(n,i.config,void 0)(o).then(function(e){return e.output.request})];case 1:return[2,e.sent()]}})})}(f,new VS(c))];case 7:return f=e.sent(),h=Lw,[4,d.presign(f,{expiresIn:c.Expires})];case 8:return g=h.apply(void 0,[e.sent()]),FC(u,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: "+g),[2,g];case 9:throw g=e.sent(),VC.warn("get signed url error",g),FC(u,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for "+v),g;case 10:return[2]}})})},HC.prototype.put=function(b,S,w){return BC(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v,m,y;return zC(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];m=Object.assign({},this._config,w),t=m.bucket,n=m.track,r=m.progressCallback,h=m.contentType,i=m.contentDisposition,o=m.cacheControl,s=m.expires,a=m.metadata,u=m.tagging,c=m.acl,l=m.serverSideEncryption,p=m.SSECustomerAlgorithm,d=m.SSECustomerKey,f=m.SSECustomerKeyMD5,v=m.SSEKMSKeyId,g=h||"binary/octet-stream",h=this._prefix(m),h=h+b,VC.debug("put "+b+" to "+h),g={Bucket:t,Key:h,Body:S,ContentType:g},o&&(g.CacheControl=o),i&&(g.ContentDisposition=i),s&&(g.Expires=s),a&&(g.Metadata=a),u&&(g.Tagging=u),l&&(g.ServerSideEncryption=l,p&&(g.SSECustomerAlgorithm=p),d&&(g.SSECustomerKey=d),f&&(g.SSECustomerKeyMD5=f),v&&(g.SSEKMSKeyId=v)),v=new x.EventEmitter,m=new UC(g,m,v),c&&(g.ACL=c),e.label=2;case 2:return e.trys.push([2,4,,5]),v.on("sendProgress",function(e){r&&("function"==typeof r?r(e):VC.warn("progressCallback should be a function, not a "+typeof r))}),[4,m.upload()];case 3:return y=e.sent(),VC.debug("upload result",y),FC(n,"upload",{method:"put",result:"success"},null,"Upload success for "+b),[2,{key:b}];case 4:throw y=e.sent(),VC.warn("error uploading",y),FC(n,"upload",{method:"put",result:"failed"},null,"Error uploading "+b),y;case 5:return[2]}})})},HC.prototype.remove=function(s,a){return BC(this,void 0,void 0,function(){var t,n,r,i,o;return zC(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];r=Object.assign({},this._config,a),t=r.bucket,n=r.track,i=this._prefix(r),i=i+s,r=this._createNewS3Client(r),VC.debug("remove "+s+" from "+i),i=new jS({Bucket:t,Key:i}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,r.send(i)];case 3:return o=e.sent(),FC(n,"delete",{method:"remove",result:"success"},null,"Deleted "+s+" successfully"),[2,o];case 4:throw o=e.sent(),FC(n,"delete",{method:"remove",result:"failed"},null,"Deletion of "+s+" failed with "+o),o;case 5:return[2]}})})},HC.prototype.list=function(u,c){return BC(this,void 0,void 0,function(){var t,n,r,i,o,s,a;return zC(this,function(e){switch(e.label){case 0:return[4,this._ensureCredentials()];case 1:if(!e.sent())return[2,Promise.reject("No credentials")];o=Object.assign({},this._config,c),t=o.bucket,n=o.track,s=o.maxKeys,r=this._prefix(o),i=r+u,o=this._createNewS3Client(o),VC.debug("list "+u+" from "+i),s=new HS({Bucket:t,Prefix:i,MaxKeys:s}),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,o.send(s)];case 3:return s=e.sent(),a=[],s&&s.Contents&&(a=s.Contents.map(function(e){return{key:e.Key.substr(r.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),FC(n,"list",{method:"list",result:"success"},null,a.length+" items returned from list operation"),VC.debug("list",a),[2,a];case 4:throw a=e.sent(),VC.warn("list error",a),FC(n,"list",{method:"list",result:"failed"},null,"Listing items failed: "+a.message),a;case 5:return[2]}})})},HC.prototype._ensureCredentials=function(){var t=this;return _.Credentials.get().then(function(e){if(!e)return!1;e=_.Credentials.shear(e);return VC.debug("set credentials for storage",e),t._config.credentials=e,!0}).catch(function(e){return VC.warn("ensure credentials error",e),!1})},HC.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},t=e.identityId||t.identityId,i=(void 0!==r.private?r.private:"private/")+t+"/",o=(void 0!==r.protected?r.protected:"protected/")+t+"/",s=void 0!==r.public?r.public:"public/";switch(n){case"private":return i;case"protected":return o;default:return s}},HC.prototype._createNewS3Client=function(e,t){var n=e.region,r=e.credentials,i=e.cancelTokenSource,o={};return e.dangerouslyConnectToHttpEndpointForTesting&&(o={endpoint:"http://localhost:20005",tls:!1,bucketEndpoint:!1,forcePathStyle:!0}),new J1(jC(jC({region:n,credentials:r,customUserAgent:_.getAmplifyUserAgent()},o),{requestHandler:new SC({},t,i)}))},HC.CATEGORY="Storage",HC.PROVIDER_NAME="AWSS3",HC);function HC(e){this._config=e||{},VC.debug("Storage Options",this._config)}var GC=function(){return(GC=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},WC=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},$C=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},YC=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},JC=new _.ConsoleLogger("StorageClass"),ZC="AWSS3",XC=(QC.prototype.getModuleName=function(){return"Storage"},QC.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory()){this._pluggables.push(e);return e.configure(this._config[e.getProviderName()])}},QC.prototype.getPluggable=function(t){var e=this._pluggables.find(function(e){return e.getProviderName()===t});return void 0===e?(JC.debug("No plugin found with providerName",t),null):e},QC.prototype.removePluggable=function(t){this._pluggables=this._pluggables.filter(function(e){return e.getProviderName()!==t})},QC.prototype.configure=function(e){var t=this;if(JC.debug("configure Storage"),!e)return this._config;function n(t){return o.some(function(e){return e===t})}var r=_.Parser.parseMobilehubConfig(e),i=Object.keys(r.Storage),o=["bucket","region","level","track","customPrefix","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return i&&i.find(n)&&!r.Storage[ZC]&&(r.Storage[ZC]={}),Object.entries(r.Storage).map(function(e){var t=YC(e,2),e=t[0],t=t[1];e&&n(e)&&void 0!==t&&(r.Storage[ZC][e]=t,delete r.Storage[e])}),Object.keys(r.Storage).forEach(function(e){"string"!=typeof r.Storage[e]&&(t._config[e]=GC(GC({},t._config[e]),r.Storage[e]))}),this._pluggables.forEach(function(e){e.configure(t._config[e.getProviderName()])}),0===this._pluggables.length&&this.addPluggable(new KC),this._config},QC.prototype.getCancellableTokenSource=function(){return O.CancelToken.source()},QC.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenSourceMap.set(e,t)},QC.prototype.cancel=function(e,t){e=this._cancelTokenSourceMap.get(e);e?e.cancel(t):JC.debug("The request does not map to any cancel token")},QC.prototype.get=function(e,t){var n=(t||{}).provider,r=void 0===n?ZC:n,i=this._pluggables.find(function(e){return e.getProviderName()===r});if(void 0===i)return JC.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");n=this.getCancellableTokenSource(),t=i.get(e,GC(GC({},t),{cancelTokenSource:n}));return this.updateRequestToBeCancellable(t,n),t},QC.prototype.isCancelError=function(e){return O.isCancel(e)},QC.prototype.put=function(e,t,n){var r=(n||{}).provider,i=void 0===r?ZC:r,o=this._pluggables.find(function(e){return e.getProviderName()===i});if(void 0===o)return JC.debug("No plugin found with providerName",i),Promise.reject("No plugin found in Storage for the provider");r=this.getCancellableTokenSource(),n=o.put(e,t,GC(GC({},n),{cancelTokenSource:r}));return this.updateRequestToBeCancellable(n,r),n},QC.prototype.remove=function(r,i){return WC(this,void 0,void 0,function(){var t,n;return $C(this,function(e){return n=(i||{}).provider,t=void 0===n?ZC:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))?(JC.debug("No plugin found with providerName",t),[2,Promise.reject("No plugin found in Storage for the provider")]):[2,n.remove(r,i)]})})},QC.prototype.list=function(r,i){return WC(this,void 0,void 0,function(){var t,n;return $C(this,function(e){return n=(i||{}).provider,t=void 0===n?ZC:n,void 0===(n=this._pluggables.find(function(e){return e.getProviderName()===t}))?(JC.debug("No plugin found with providerName",t),[2,Promise.reject("No plugin found in Storage for the provider")]):[2,n.list(r,i)]})})},QC);function QC(){this._config={},this._pluggables=[],this._cancelTokenSourceMap=new WeakMap,JC.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}var e2=function(){return(e2=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},t2=new _.ConsoleLogger("Storage"),n2=null,r2=function(){if(n2)return n2;t2.debug("Create Storage Instance, debug"),(n2=new XC).vault=new XC;var n=n2.configure;return n2.configure=function(e){t2.debug("storage configure called");var t=e2({},n.call(n2,e));Object.keys(t).forEach(function(e){"string"!=typeof t[e]&&(t[e]=e2(e2({},t[e]),{level:"private"}))}),t2.debug("storage vault configure called"),n2.vault.configure(t)},n2}();_.Amplify.register(r2);var i2=function(){return(i2=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o2=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},s2=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},a2=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},u2=new _.ConsoleLogger("RestClient"),c2=(l2.prototype.ajax=function(p,d,f){return o2(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l=this;return s2(this,function(e){switch(e.label){case 0:return u2.debug(d,p),t="us-east-1",n="execute-api",r=void 0,"string"==typeof p?(o=this._parseUrl(p),c=p):(c=p.endpoint,r=p.custom_header,t=p.region,n=p.service,o=this._parseUrl(p.endpoint)),i={method:d,url:c,host:o.host,path:o.path,headers:{},data:null,responseType:"json",timeout:0,cancelToken:null},o={},_.Platform.isReactNative&&(s=_.Platform.userAgent||"aws-amplify/0.1.x",o={"User-Agent":s}),s=Object.assign({},f),a=s.response,s.body&&("function"==typeof FormData&&s.body instanceof FormData?(o["Content-Type"]="multipart/form-data",i.data=s.body):(o["Content-Type"]="application/json; charset=UTF-8",i.data=JSON.stringify(s.body))),s.responseType&&(i.responseType=s.responseType),s.withCredentials&&(i.withCredentials=s.withCredentials),s.timeout&&(i.timeout=s.timeout),s.cancellableToken&&(i.cancelToken=s.cancellableToken.token),i.signerServiceInfo=s.signerServiceInfo,"function"!=typeof r?[3,2]:[4,r()];case 1:return u=e.sent(),[3,3];case 2:u=void 0,e.label=3;case 3:return u=u,i.headers=i2(i2(i2({},o),u),s.headers),c=h.parse(c,!0,!0),c.search,c=a2(c,["search"]),i.url=h.format(i2(i2({},c),{query:i2(i2({},c.query),s.queryStringParameters||{})})),void 0!==i.headers.Authorization?(i.headers=Object.keys(i.headers).reduce(function(e,t){return i.headers[t]&&(e[t]=i.headers[t]),e},{}),[2,this._request(i,a)]):[2,this.Credentials.get().then(function(e){return l._signed(i2({},i),e,a,{region:t,service:n}).catch(function(e){if(_.DateUtils.isClockSkewError(e)){var t=e.response.headers,n=t&&(t.date||t.Date),t=new Date(n),n=_.DateUtils.getDateFromHeaderString(i.headers["x-amz-date"]);if(_.DateUtils.isClockSkewed(n,t))return _.DateUtils.setClockOffset(t.getTime()-n.getTime()),l.ajax(p,d,f)}throw e})},function(e){return u2.debug("No credentials available, the request will be unsigned"),l._request(i,a)})]}})})},l2.prototype.get=function(e,t){return this.ajax(e,"GET",t)},l2.prototype.put=function(e,t){return this.ajax(e,"PUT",t)},l2.prototype.patch=function(e,t){return this.ajax(e,"PATCH",t)},l2.prototype.post=function(e,t){return this.ajax(e,"POST",t)},l2.prototype.del=function(e,t){return this.ajax(e,"DELETE",t)},l2.prototype.head=function(e,t){return this.ajax(e,"HEAD",t)},l2.prototype.cancel=function(e,t){e=this._cancelTokenMap.get(e);return e&&e.cancel(t),!0},l2.prototype.isCancel=function(e){return O.isCancel(e)},l2.prototype.getCancellableToken=function(){return O.CancelToken.source()},l2.prototype.updateRequestToBeCancellable=function(e,t){this._cancelTokenMap.set(e,t)},l2.prototype.endpoint=function(t){var n=this,e=this._options.endpoints,r="";return Array.isArray(e)&&e.forEach(function(e){e.name===t&&(r=e.endpoint,"string"==typeof e.region?n._region=e.region:"string"==typeof n._options.region&&(n._region=n._options.region),"string"==typeof e.service?n._service=e.service||"execute-api":n._service="execute-api","function"==typeof e.custom_header?n._custom_header=e.custom_header:n._custom_header=void 0)}),r},l2.prototype._signed=function(e,t,n,r){var i=r.service,o=r.region,r=e.signerServiceInfo,e=a2(e,["signerServiceInfo"]),o=o||this._region||this._options.region,i=i||this._service||this._options.service,t={secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken},r=Object.assign({region:o,service:i},r),r=_.Signer.sign(e,t,r);return r.data&&(r.body=r.data),u2.debug("Signed Request: ",r),delete r.headers.host,O(r).then(function(e){return n?e:e.data}).catch(function(e){throw u2.debug(e),e})},l2.prototype._request=function(e,t){return void 0===t&&(t=!1),O(e).then(function(e){return t?e:e.data}).catch(function(e){throw u2.debug(e),e})},l2.prototype._parseUrl=function(e){e=e.split("/");return{host:e[2],path:"/"+e.slice(3).join("/")}},l2);function l2(e){this._region="us-east-1",this._service="execute-api",this._custom_header=void 0,this._cancelTokenMap=null,this.Credentials=_.Credentials,this._options=e,u2.debug("API Options",this._options),null==this._cancelTokenMap&&(this._cancelTokenMap=new WeakMap)}var p2=function(){return(p2=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},d2=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},f2=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},h2=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},g2=new _.ConsoleLogger("RestAPI"),v2=(m2.prototype.getModuleName=function(){return"RestAPI"},m2.prototype.configure=function(e){var t=e||{},e=t.API,e=void 0===e?{}:e,t=h2(t,["API"]),t=p2(p2({},t),e);return g2.debug("configure Rest API",{opt:t}),t.aws_project_region&&(t.aws_cloud_logic_custom&&(e=t.aws_cloud_logic_custom,t.endpoints="string"==typeof e?JSON.parse(e):e),t=Object.assign({},t,{region:t.aws_project_region,header:{}})),Array.isArray(t.endpoints)?t.endpoints.forEach(function(e){void 0!==e.custom_header&&"function"!=typeof e.custom_header&&(g2.warn("Rest API "+e.name+", custom_header should be a function"),e.custom_header=void 0)}):this._options&&Array.isArray(this._options.endpoints)?t.endpoints=this._options.endpoints:t.endpoints=[],this._options=Object.assign({},this._options,t),this.createInstance(),this._options},m2.prototype.createInstance=function(){return g2.debug("create Rest API instance"),this._api=new c2(this._options),this._api.Credentials=this.Credentials,!0},m2.prototype.get=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.get(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},m2.prototype.post=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.post(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},m2.prototype.put=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.put(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},m2.prototype.patch=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.patch(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},m2.prototype.del=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.del(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},m2.prototype.head=function(e,t,n){try{var r=this.getEndpointInfo(e,t),i=this._api.getCancellableToken(),o=Object.assign({},n);o.cancellableToken=i;var s=this._api.head(r,o);return this._api.updateRequestToBeCancellable(s,i),s}catch(e){return Promise.reject(e.message)}},m2.prototype.isCancel=function(e){return this._api.isCancel(e)},m2.prototype.cancel=function(e,t){return this._api.cancel(e,t)},m2.prototype.endpoint=function(t){return d2(this,void 0,void 0,function(){return f2(this,function(e){return[2,this._api.endpoint(t)]})})},m2.prototype.getEndpointInfo=function(t,e){var n=this._options.endpoints;if(!Array.isArray(n))throw new Error("API category not configured");n=n.find(function(e){return e.name===t});if(!n)throw new Error("API "+t+" does not exist");e={endpoint:n.endpoint+e};return"string"==typeof n.region?e.region=n.region:"string"==typeof this._options.region&&(e.region=this._options.region),"string"==typeof n.service?e.service=n.service||"execute-api":e.service="execute-api","function"==typeof n.custom_header?e.custom_header=n.custom_header:e.custom_header=void 0,e},m2);function m2(e){this._api=null,this.Credentials=_.Credentials,this._options=e,g2.debug("API Options",this._options)}var y2=new v2(null);function b2(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function S2(e,t){var n=e.locationOffset.column-1,r=w2(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,o=t.line+o,n=1===t.line?n:0,n=t.column+n,r=r.split(/\r\n|[\n\r]/g);return"".concat(e.name," (").concat(o,":").concat(n,")\n")+function(t){var e=t.filter(function(e){e[0];return void 0!==e[1]}),n=0,r=!0,i=!1,t=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value[0];n=Math.max(n,a.length)}}catch(e){i=!0,t=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw t}}return e.map(function(e){var t=e[0],e=e[1];return w2(n-(t=t).length)+t+e}).join("\n")}([["".concat(o-1,": "),r[i-1]],["".concat(o,": "),r[i]],["",w2(n-1)+"^"],["".concat(o+1,": "),r[1+i]]])}function w2(e){return Array(e+1).join(" ")}function C2(e,t,n,r,i,o,s){var a=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,t=n;!n&&a&&(t=(c=a[0])&&c.loc&&c.loc.source);var u,c=r;(c=!c&&a?a.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[]):c)&&0===c.length&&(c=void 0),r&&n?u=r.map(function(e){return b2(n,e)}):a&&(u=a.reduce(function(e,t){return t.loc&&e.push(b2(t.loc.source,t.loc.start)),e},[]));s=s||o&&o.extensions;Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:u||void 0,enumerable:Boolean(u)},path:{value:i||void 0,enumerable:Boolean(i)},nodes:{value:a||void 0},source:{value:t||void 0},positions:{value:c||void 0},originalError:{value:o},extensions:{value:s||void 0,enumerable:Boolean(s)}}),o&&o.stack?Object.defineProperty(this,"stack",{value:o.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,C2):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}_.Amplify.register(y2),C2.prototype=Object.create(Error.prototype,{constructor:{value:C2},name:{value:"GraphQLError"},toString:{value:function(){return function(e){var t=[];if(e.nodes){var n=!0,r=!1,i=void 0;try{for(var o,s=e.nodes[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;a.loc&&t.push(S2(a.loc.source,b2(a.loc.source,a.loc.start)))}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}}else if(e.source&&e.locations){var u=e.source,c=!0,r=!1,i=void 0;try{for(var l,p=e.locations[Symbol.iterator]();!(c=(l=p.next()).done);c=!0){var d=l.value;t.push(S2(u,d))}}catch(e){r=!0,i=e}finally{try{c||null==p.return||p.return()}finally{if(r)throw i}}}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"}(this)}}});var _2={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},E2={};function A2(e,t,n){var r=2<arguments.length&&void 0!==n?n:_2,i=void 0,o=Array.isArray(e),s=[e],a=-1,u=[],c=void 0,l=void 0,p=void 0,d=[],f=[],h=e;do{var g=++a===s.length,v=g&&0!==u.length;if(g){if(l=0===f.length?void 0:d[d.length-1],c=p,p=f.pop(),v){if(o)c=c.slice();else{var m,y={};for(m in c)c.hasOwnProperty(m)&&(y[m]=c[m]);c=y}for(var b=0,S=0;S<u.length;S++){var w=u[S][0],C=u[S][1];o&&(w-=b),o&&null===C?(c.splice(w,1),b++):c[w]=C}}a=i.index,s=i.keys,u=i.edits,o=i.inArray,i=i.prev}else{if(l=p?o?a:s[a]:void 0,null==(c=p?p[l]:h))continue;p&&d.push(l)}var _=void 0;if(!Array.isArray(c)){if(!I2(c))throw new Error("Invalid AST Node: "+JSON.stringify(c));var E=function(e,t,n){var r=e[t];{if(r){if(!n&&"function"==typeof r)return r;r=n?r.leave:r.enter;return"function"==typeof r?r:void 0}e=n?e.leave:e.enter;if(e){if("function"==typeof e)return e;t=e[t];return"function"==typeof t?t:void 0}}}(t,c.kind,g);if(E){if((_=E.call(t,c,l,p,d,f))===E2)break;if(!1===_){if(!g){d.pop();continue}}else if(void 0!==_&&(u.push([l,_]),!g)){if(!I2(_)){d.pop();continue}c=_}}}void 0===_&&v&&u.push([l,c]),g?d.pop():(i={inArray:o,index:a,keys:s,edits:u,prev:i},s=(o=Array.isArray(c))?c:r[c.kind]||[],a=-1,u=[],p&&f.push(p),p=c)}while(void 0!==i);return h=0!==u.length?u[u.length-1][1]:h}function I2(e){return Boolean(e&&"string"==typeof e.kind)}function k2(e){return A2(e,{leave:T2})}var T2={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return O2(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=L2("(",O2(e.variableDefinitions,", "),")"),i=O2(e.directives," "),e=e.selectionSet;return n||i||r||"query"!==t?O2([t,O2([n,r]),i,e]," "):e},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,e=e.directives;return t+": "+n+L2(" = ",r)+L2(" ",O2(e," "))},SelectionSet:function(e){return x2(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,e=e.selectionSet;return O2([L2("",t,": ")+n+L2("(",O2(r,", "),")"),O2(i," "),e]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+L2(" ",O2(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,e=e.selectionSet;return O2(["...",L2("on ",t),O2(n," "),e]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,e=e.selectionSet;return"fragment ".concat(t).concat(L2("(",O2(r,", "),")")," ")+"on ".concat(n," ").concat(L2("",O2(i," ")," "))+e},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n,r=e.value;return e.block?(n="description"===t,t=(e=r).replace(/"""/g,'\\"""')," "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?'"""\n'.concat(n?t:N2(t),'\n"""'):'"""'.concat(t.replace(/"$/,'"\n'),'"""')):JSON.stringify(r)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+O2(e.values,", ")+"]"},ObjectValue:function(e){return"{"+O2(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+L2("(",O2(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,e=e.operationTypes;return O2(["schema",O2(t," "),x2(e)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:P2(function(e){return O2(["scalar",e.name,O2(e.directives," ")]," ")}),ObjectTypeDefinition:P2(function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return O2(["type",t,L2("implements ",O2(n," & ")),O2(r," "),x2(e)]," ")}),FieldDefinition:P2(function(e){var t=e.name,n=e.arguments,r=e.type,e=e.directives;return t+(n.every(function(e){return-1===e.indexOf("\n")})?L2("(",O2(n,", "),")"):L2("(\n",N2(O2(n,"\n")),"\n)"))+": "+r+L2(" ",O2(e," "))}),InputValueDefinition:P2(function(e){var t=e.name,n=e.type,r=e.defaultValue,e=e.directives;return O2([t+": "+n,L2("= ",r),O2(e," ")]," ")}),InterfaceTypeDefinition:P2(function(e){var t=e.name,n=e.directives,e=e.fields;return O2(["interface",t,O2(n," "),x2(e)]," ")}),UnionTypeDefinition:P2(function(e){var t=e.name,n=e.directives,e=e.types;return O2(["union",t,O2(n," "),e&&0!==e.length?"= "+O2(e," | "):""]," ")}),EnumTypeDefinition:P2(function(e){var t=e.name,n=e.directives,e=e.values;return O2(["enum",t,O2(n," "),x2(e)]," ")}),EnumValueDefinition:P2(function(e){return O2([e.name,O2(e.directives," ")]," ")}),InputObjectTypeDefinition:P2(function(e){var t=e.name,n=e.directives,e=e.fields;return O2(["input",t,O2(n," "),x2(e)]," ")}),DirectiveDefinition:P2(function(e){var t=e.name,n=e.arguments,e=e.locations;return"directive @"+t+(n.every(function(e){return-1===e.indexOf("\n")})?L2("(",O2(n,", "),")"):L2("(\n",N2(O2(n,"\n")),"\n)"))+" on "+O2(e," | ")}),SchemaExtension:function(e){var t=e.directives,e=e.operationTypes;return O2(["extend schema",O2(t," "),x2(e)]," ")},ScalarTypeExtension:function(e){return O2(["extend scalar",e.name,O2(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,e=e.fields;return O2(["extend type",t,L2("implements ",O2(n," & ")),O2(r," "),x2(e)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return O2(["extend interface",t,O2(n," "),x2(e)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,e=e.types;return O2(["extend union",t,O2(n," "),e&&0!==e.length?"= "+O2(e," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,e=e.values;return O2(["extend enum",t,O2(n," "),x2(e)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,e=e.fields;return O2(["extend input",t,O2(n," "),x2(e)]," ")}};function P2(t){return function(e){return O2([e.description,t(e)],"\n")}}function O2(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function x2(e){return e&&0!==e.length?"{\n"+N2(O2(e,"\n"))+"\n}":""}function L2(e,t,n){return t?e+t+(n||""):""}function N2(e){return e&&"  "+e.replace(/\n/g,"\n  ")}function R2(e){return(R2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M2(t){return t&&"object"===R2(t)?"function"==typeof t.inspect?t.inspect():Array.isArray(t)?"["+t.map(M2).join(", ")+"]":"{"+Object.keys(t).map(function(e){return"".concat(e,": ").concat(M2(t[e]))}).join(", ")+"}":"string"==typeof t?'"'+t+'"':"function"==typeof t?"[function ".concat(t.name,"]"):String(t)}function U2(e,t){if(!e)throw new Error(t)}function D2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F2(e,t,n){D2(this,"body",void 0),D2(this,"name",void 0),D2(this,"locationOffset",void 0),this.body=e,this.name=t||"GraphQL request",this.locationOffset=n||{line:1,column:1},0<this.locationOffset.line||U2(0,"line in locationOffset is 1-indexed and must be positive"),0<this.locationOffset.column||U2(0,"column in locationOffset is 1-indexed and must be positive")}var j2;function B2(e,t,n){return new C2("Syntax Error: ".concat(n),void 0,e,[t])}function z2(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function V2(e){return z2(e)===e.length}function q2(){return this.lastToken=this.token,this.token=this.lookahead()}function K2(){var e=this.token;if(e.kind!==H2.EOF)for(;(e=e.next||(e.next=function(e,t){var n=e.source,r=n.body,i=r.length,o=function(e,t,n){var r=e.length,i=t;for(;i<r;){var o=W2.call(e,i);if(9===o||32===o||44===o||65279===o)++i;else if(10===o)++i,++n.line,n.lineStart=i;else{if(13!==o)break;10===W2.call(e,i+1)?i+=2:++i,++n.line,n.lineStart=i}}return i}(r,t.end,e),s=e.line,a=1+o-e.lineStart;if(i<=o)return new Y2(H2.EOF,i,i,s,a,t);var u=W2.call(r,o);switch(u){case 33:return new Y2(H2.BANG,o,o+1,s,a,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;for(;o=W2.call(s,++a),null!==o&&(31<o||9===o););return new Y2(H2.COMMENT,t,a,n,r,i,$2.call(s,t+1,a))}(n,o,s,a,t);case 36:return new Y2(H2.DOLLAR,o,o+1,s,a,t);case 38:return new Y2(H2.AMP,o,o+1,s,a,t);case 40:return new Y2(H2.PAREN_L,o,o+1,s,a,t);case 41:return new Y2(H2.PAREN_R,o,o+1,s,a,t);case 46:if(46===W2.call(r,o+1)&&46===W2.call(r,o+2))return new Y2(H2.SPREAD,o,o+3,s,a,t);break;case 58:return new Y2(H2.COLON,o,o+1,s,a,t);case 61:return new Y2(H2.EQUALS,o,o+1,s,a,t);case 64:return new Y2(H2.AT,o,o+1,s,a,t);case 91:return new Y2(H2.BRACKET_L,o,o+1,s,a,t);case 93:return new Y2(H2.BRACKET_R,o,o+1,s,a,t);case 123:return new Y2(H2.BRACE_L,o,o+1,s,a,t);case 124:return new Y2(H2.PIPE,o,o+1,s,a,t);case 125:return new Y2(H2.BRACE_R,o,o+1,s,a,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,i){var o=e.body,s=o.length,a=t+1,u=0;for(;a!==s&&null!==(u=W2.call(o,a))&&(95===u||48<=u&&u<=57||65<=u&&u<=90||97<=u&&u<=122);)++a;return new Y2(H2.NAME,t,a,n,r,i,$2.call(o,t,a))}(n,o,s,a,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s=e.body,a=n,u=t,n=!1;45===a&&(a=W2.call(s,++u));if(48===a){if(48<=(a=W2.call(s,++u))&&a<=57)throw B2(e,u,"Invalid number, unexpected digit after 0: ".concat(J2(a),"."))}else u=Z2(e,u,a),a=W2.call(s,u);46===a&&(n=!0,a=W2.call(s,++u),u=Z2(e,u,a),a=W2.call(s,u));69!==a&&101!==a||(n=!0,43!==(a=W2.call(s,++u))&&45!==a||(a=W2.call(s,++u)),u=Z2(e,u,a));return new Y2(n?H2.FLOAT:H2.INT,t,u,r,i,o,$2.call(s,t,u))}(n,o,u,s,a,t);case 34:return 34===W2.call(r,o+1)&&34===W2.call(r,o+2)?function(e,t,n,r,i){var o=e.body,s=t+3,a=s,u=0,c="";for(;s<o.length&&null!==(u=W2.call(o,s));){if(34===u&&34===W2.call(o,s+1)&&34===W2.call(o,s+2))return c+=$2.call(o,a,s),new Y2(H2.BLOCK_STRING,t,s+3,n,r,i,function(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,r=1;r<t.length;r++){var i=t[r],o=z2(i);if(o<i.length&&(null===n||o<n)&&0===(n=o))break}if(n)for(var s=1;s<t.length;s++)t[s]=t[s].slice(n);for(;0<t.length&&V2(t[0]);)t.shift();for(;0<t.length&&V2(t[t.length-1]);)t.pop();return t.join("\n")}(c));if(u<32&&9!==u&&10!==u&&13!==u)throw B2(e,s,"Invalid character within String: ".concat(J2(u),"."));92===u&&34===W2.call(o,s+1)&&34===W2.call(o,s+2)&&34===W2.call(o,s+3)?(c+=$2.call(o,a,s)+'"""',a=s+=4):++s}throw B2(e,s,"Unterminated string.")}(n,o,s,a,t):function(e,t,n,r,i){var o=e.body,s=t+1,a=s,u=0,c="";for(;s<o.length&&null!==(u=W2.call(o,s))&&10!==u&&13!==u;){if(34===u)return c+=$2.call(o,a,s),new Y2(H2.STRING,t,s+1,n,r,i,c);if(u<32&&9!==u)throw B2(e,s,"Invalid character within String: ".concat(J2(u),"."));if(++s,92===u){switch(c+=$2.call(o,a,s-1),u=W2.call(o,s)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var l=function(e,t,n,r){return X2(e)<<12|X2(t)<<8|X2(n)<<4|X2(r)}(W2.call(o,s+1),W2.call(o,s+2),W2.call(o,s+3),W2.call(o,s+4));if(l<0)throw B2(e,s,"Invalid character escape sequence: "+"\\u".concat(o.slice(s+1,s+5),"."));c+=String.fromCharCode(l),s+=4;break;default:throw B2(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}a=++s}}throw B2(e,s,"Unterminated string.")}(n,o,s,a,t)}throw B2(n,o,function(e){if(e<32&&9!==e&&10!==e&&13!==e)return"Cannot contain the invalid character ".concat(J2(e),".");return 39!==e?"Cannot parse the unexpected character ".concat(J2(e),"."):"Unexpected single quote character ('), did you mean to use a double quote (\")?"}(u))}(this,e))).kind===H2.COMMENT;);return e}j2=F2,"function"==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(j2.prototype,Symbol.toStringTag,{get:function(){return this.constructor.name}});var H2=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function G2(e){var t=e.value;return t?"".concat(e.kind,' "').concat(t,'"'):e.kind}var W2=String.prototype.charCodeAt,$2=String.prototype.slice;function Y2(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}function J2(e){return isNaN(e)?H2.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function Z2(e,t,n){var r=e.body,i=t,o=n;if(48<=o&&o<=57){for(;48<=(o=W2.call(r,++i))&&o<=57;);return i}throw B2(e,i,"Invalid number, expected digit but got: ".concat(J2(o),"."))}function X2(e){return 48<=e&&e<=57?e-48:65<=e&&e<=70?e-55:97<=e&&e<=102?e-87:-1}Y2.prototype.toJSON=Y2.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}};var Q2=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),e_=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function t_(e,t){var n="string"==typeof e?new F2(e):e;if(!(n instanceof F2))throw new TypeError("Must provide Source. Received: ".concat(M2(n)));e=n,n=t||{},t=new Y2(H2.SOF,0,0,0,0,null),n={source:e,options:n,lastToken:t,token:t,line:1,lineStart:0,advance:q2,lookahead:K2};return n=(t=n).token,{kind:Q2.DOCUMENT,definitions:q_(t,H2.SOF,r_,H2.EOF),loc:U_(t,n)}}function n_(e){var t=B_(e,H2.NAME);return{kind:Q2.NAME,value:t.value,loc:U_(e,t)}}function r_(e){if(F_(e,H2.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return i_(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return __(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===H2.NAME)switch(t.value){case"schema":return function(e){var t=e.token;z_(e,"extend"),z_(e,"schema");var n=S_(e,!0),r=F_(e,H2.BRACE_L)?q_(e,H2.BRACE_L,I_,H2.BRACE_R):[];if(0!==n.length||0!==r.length)return{kind:Q2.SCHEMA_EXTENSION,directives:n,operationTypes:r,loc:U_(e,t)};throw V_(e)}(e);case"scalar":return function(e){var t=e.token;z_(e,"extend"),z_(e,"scalar");var n=n_(e),r=S_(e,!0);if(0!==r.length)return{kind:Q2.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:U_(e,t)};throw V_(e)}(e);case"type":return function(e){var t=e.token;z_(e,"extend"),z_(e,"type");var n=n_(e),r=k_(e),i=S_(e,!0),o=T_(e);if(0!==r.length||0!==i.length||0!==o.length)return{kind:Q2.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:i,fields:o,loc:U_(e,t)};throw V_(e)}(e);case"interface":return function(e){var t=e.token;z_(e,"extend"),z_(e,"interface");var n=n_(e),r=S_(e,!0),i=T_(e);if(0!==r.length||0!==i.length)return{kind:Q2.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:U_(e,t)};throw V_(e)}(e);case"union":return function(e){var t=e.token;z_(e,"extend"),z_(e,"union");var n=n_(e),r=S_(e,!0),i=L_(e);if(0!==r.length||0!==i.length)return{kind:Q2.UNION_TYPE_EXTENSION,name:n,directives:r,types:i,loc:U_(e,t)};throw V_(e)}(e);case"enum":return function(e){var t=e.token;z_(e,"extend"),z_(e,"enum");var n=n_(e),r=S_(e,!0),i=N_(e);if(0!==r.length||0!==i.length)return{kind:Q2.ENUM_TYPE_EXTENSION,name:n,directives:r,values:i,loc:U_(e,t)};throw V_(e)}(e);case"input":return function(e){var t=e.token;z_(e,"extend"),z_(e,"input");var n=n_(e),r=S_(e,!0),i=M_(e);if(0!==r.length||0!==i.length)return{kind:Q2.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:i,loc:U_(e,t)};throw V_(e)}(e)}throw V_(e,t)}(e)}else{if(F_(e,H2.BRACE_L))return i_(e);if(E_(e))return __(e)}throw V_(e)}function i_(e){if(F_(e,H2.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return o_(e);case"fragment":return function(e){var t=e.token;if(z_(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:Q2.FRAGMENT_DEFINITION,name:g_(e),variableDefinitions:a_(e),typeCondition:(z_(e,"on"),C_(e)),directives:S_(e,!1),selectionSet:l_(e),loc:U_(e,t)};return{kind:Q2.FRAGMENT_DEFINITION,name:g_(e),typeCondition:(z_(e,"on"),C_(e)),directives:S_(e,!1),selectionSet:l_(e),loc:U_(e,t)}}(e)}else if(F_(e,H2.BRACE_L))return o_(e);throw V_(e)}function o_(e){var t=e.token;if(F_(e,H2.BRACE_L))return{kind:Q2.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:l_(e),loc:U_(e,t)};var n,r=s_(e);return F_(e,H2.NAME)&&(n=n_(e)),{kind:Q2.OPERATION_DEFINITION,operation:r,name:n,variableDefinitions:a_(e),directives:S_(e,!1),selectionSet:l_(e),loc:U_(e,t)}}function s_(e){var t=B_(e,H2.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw V_(e,t)}function a_(e){return F_(e,H2.PAREN_L)?q_(e,H2.PAREN_L,u_,H2.PAREN_R):[]}function u_(e){var t=e.token;return e.options.experimentalVariableDefinitionDirectives?{kind:Q2.VARIABLE_DEFINITION,variable:c_(e),type:(B_(e,H2.COLON),w_(e)),defaultValue:j_(e,H2.EQUALS)?v_(e,!0):void 0,directives:S_(e,!0),loc:U_(e,t)}:{kind:Q2.VARIABLE_DEFINITION,variable:c_(e),type:(B_(e,H2.COLON),w_(e)),defaultValue:j_(e,H2.EQUALS)?v_(e,!0):void 0,loc:U_(e,t)}}function c_(e){var t=e.token;return B_(e,H2.DOLLAR),{kind:Q2.VARIABLE,name:n_(e),loc:U_(e,t)}}function l_(e){var t=e.token;return{kind:Q2.SELECTION_SET,selections:q_(e,H2.BRACE_L,p_,H2.BRACE_R),loc:U_(e,t)}}function p_(e){return(F_(e,H2.SPREAD)?function(e){var t,n=e.token;if(B_(e,H2.SPREAD),F_(e,H2.NAME)&&"on"!==e.token.value)return{kind:Q2.FRAGMENT_SPREAD,name:g_(e),directives:S_(e,!1),loc:U_(e,n)};"on"===e.token.value&&(e.advance(),t=C_(e));return{kind:Q2.INLINE_FRAGMENT,typeCondition:t,directives:S_(e,!1),selectionSet:l_(e),loc:U_(e,n)}}:function(e){var t,n=e.token,r=n_(e);r=j_(e,H2.COLON)?(t=r,n_(e)):r;return{kind:Q2.FIELD,alias:t,name:r,arguments:d_(e,!1),directives:S_(e,!1),selectionSet:F_(e,H2.BRACE_L)?l_(e):void 0,loc:U_(e,n)}})(e)}function d_(e,t){return F_(e,H2.PAREN_L)?q_(e,H2.PAREN_L,t?h_:f_,H2.PAREN_R):[]}function f_(e){var t=e.token;return{kind:Q2.ARGUMENT,name:n_(e),value:(B_(e,H2.COLON),v_(e,!1)),loc:U_(e,t)}}function h_(e){var t=e.token;return{kind:Q2.ARGUMENT,name:n_(e),value:(B_(e,H2.COLON),y_(e)),loc:U_(e,t)}}function g_(e){if("on"===e.token.value)throw V_(e);return n_(e)}function v_(e,t){var n,r,i,o=e.token;switch(o.kind){case H2.BRACKET_L:return r=t,i=(n=e).token,r=t?y_:b_,{kind:Q2.LIST,values:function(e,t,n,r){B_(e,t);var i=[];for(;!j_(e,r);)i.push(n(e));return i}(n,H2.BRACKET_L,r,H2.BRACKET_R),loc:U_(n,i)};case H2.BRACE_L:return function(e,t){var n=e.token;B_(e,H2.BRACE_L);var r=[];for(;!j_(e,H2.BRACE_R);)r.push(function(e,t){var n=e.token;return{kind:Q2.OBJECT_FIELD,name:n_(e),value:(B_(e,H2.COLON),v_(e,t)),loc:U_(e,n)}}(e,t));return{kind:Q2.OBJECT,fields:r,loc:U_(e,n)}}(e,t);case H2.INT:return e.advance(),{kind:Q2.INT,value:o.value,loc:U_(e,o)};case H2.FLOAT:return e.advance(),{kind:Q2.FLOAT,value:o.value,loc:U_(e,o)};case H2.STRING:case H2.BLOCK_STRING:return m_(e);case H2.NAME:return"true"===o.value||"false"===o.value?(e.advance(),{kind:Q2.BOOLEAN,value:"true"===o.value,loc:U_(e,o)}):"null"===o.value?(e.advance(),{kind:Q2.NULL,loc:U_(e,o)}):(e.advance(),{kind:Q2.ENUM,value:o.value,loc:U_(e,o)});case H2.DOLLAR:if(!t)return c_(e)}throw V_(e)}function m_(e){var t=e.token;return e.advance(),{kind:Q2.STRING,value:t.value,block:t.kind===H2.BLOCK_STRING,loc:U_(e,t)}}function y_(e){return v_(e,!0)}function b_(e){return v_(e,!1)}function S_(e,t){for(var n,r,i,o=[];F_(e,H2.AT);)o.push((r=t,i=void 0,i=(n=e).token,B_(n,H2.AT),{kind:Q2.DIRECTIVE,name:n_(n),arguments:d_(n,r),loc:U_(n,i)}));return o}function w_(e){var t=e.token,n=j_(e,H2.BRACKET_L)?(n=w_(e),B_(e,H2.BRACKET_R),{kind:Q2.LIST_TYPE,type:n,loc:U_(e,t)}):C_(e);return j_(e,H2.BANG)?{kind:Q2.NON_NULL_TYPE,type:n,loc:U_(e,t)}:n}function C_(e){var t=e.token;return{kind:Q2.NAMED_TYPE,name:n_(e),loc:U_(e,t)}}function __(e){var t=E_(e)?e.lookahead():e.token;if(t.kind===H2.NAME)switch(t.value){case"schema":return function(e){var t=e.token;z_(e,"schema");var n=S_(e,!0),r=q_(e,H2.BRACE_L,I_,H2.BRACE_R);return{kind:Q2.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:U_(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=A_(e);z_(e,"scalar");var r=n_(e),i=S_(e,!0);return{kind:Q2.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:i,loc:U_(e,t)}}(e);case"type":return function(e){var t=e.token,n=A_(e);z_(e,"type");var r=n_(e),i=k_(e),o=S_(e,!0),s=T_(e);return{kind:Q2.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:i,directives:o,fields:s,loc:U_(e,t)}}(e);case"interface":return function(e){var t=e.token,n=A_(e);z_(e,"interface");var r=n_(e),i=S_(e,!0),o=T_(e);return{kind:Q2.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:U_(e,t)}}(e);case"union":return function(e){var t=e.token,n=A_(e);z_(e,"union");var r=n_(e),i=S_(e,!0),o=L_(e);return{kind:Q2.UNION_TYPE_DEFINITION,description:n,name:r,directives:i,types:o,loc:U_(e,t)}}(e);case"enum":return function(e){var t=e.token,n=A_(e);z_(e,"enum");var r=n_(e),i=S_(e,!0),o=N_(e);return{kind:Q2.ENUM_TYPE_DEFINITION,description:n,name:r,directives:i,values:o,loc:U_(e,t)}}(e);case"input":return function(e){var t=e.token,n=A_(e);z_(e,"input");var r=n_(e),i=S_(e,!0),o=M_(e);return{kind:Q2.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:i,fields:o,loc:U_(e,t)}}(e);case"directive":return function(e){var t=e.token,n=A_(e);z_(e,"directive"),B_(e,H2.AT);var r=n_(e),i=O_(e);z_(e,"on");var o=function(e){j_(e,H2.PIPE);var t=[];for(;t.push(function(e){var t=e.token,n=n_(e);if(e_.hasOwnProperty(n.value))return n;throw V_(e,t)}(e)),j_(e,H2.PIPE););return t}(e);return{kind:Q2.DIRECTIVE_DEFINITION,description:n,name:r,arguments:i,locations:o,loc:U_(e,t)}}(e)}throw V_(e,t)}function E_(e){return F_(e,H2.STRING)||F_(e,H2.BLOCK_STRING)}function A_(e){if(E_(e))return m_(e)}function I_(e){var t=e.token,n=s_(e);B_(e,H2.COLON);var r=C_(e);return{kind:Q2.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:U_(e,t)}}function k_(e){var t=[];if("implements"===e.token.value)for(e.advance(),j_(e,H2.AMP);t.push(C_(e)),j_(e,H2.AMP)||e.options.allowLegacySDLImplementsInterfaces&&F_(e,H2.NAME););return t}function T_(e){return e.options.allowLegacySDLEmptyFields&&F_(e,H2.BRACE_L)&&e.lookahead().kind===H2.BRACE_R?(e.advance(),e.advance(),[]):F_(e,H2.BRACE_L)?q_(e,H2.BRACE_L,P_,H2.BRACE_R):[]}function P_(e){var t=e.token,n=A_(e),r=n_(e),i=O_(e);B_(e,H2.COLON);var o=w_(e),s=S_(e,!0);return{kind:Q2.FIELD_DEFINITION,description:n,name:r,arguments:i,type:o,directives:s,loc:U_(e,t)}}function O_(e){return F_(e,H2.PAREN_L)?q_(e,H2.PAREN_L,x_,H2.PAREN_R):[]}function x_(e){var t=e.token,n=A_(e),r=n_(e);B_(e,H2.COLON);var i,o=w_(e);j_(e,H2.EQUALS)&&(i=y_(e));var s=S_(e,!0);return{kind:Q2.INPUT_VALUE_DEFINITION,description:n,name:r,type:o,defaultValue:i,directives:s,loc:U_(e,t)}}function L_(e){var t=[];if(j_(e,H2.EQUALS))for(j_(e,H2.PIPE);t.push(C_(e)),j_(e,H2.PIPE););return t}function N_(e){return F_(e,H2.BRACE_L)?q_(e,H2.BRACE_L,R_,H2.BRACE_R):[]}function R_(e){var t=e.token,n=A_(e),r=n_(e),i=S_(e,!0);return{kind:Q2.ENUM_VALUE_DEFINITION,description:n,name:r,directives:i,loc:U_(e,t)}}function M_(e){return F_(e,H2.BRACE_L)?q_(e,H2.BRACE_L,x_,H2.BRACE_R):[]}function U_(e,t){if(!e.options.noLocation)return new D_(t,e.lastToken,e.source)}function D_(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function F_(e,t){return e.token.kind===t}function j_(e,t){t=e.token.kind===t;return t&&e.advance(),t}function B_(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw B2(e.source,n.start,"Expected ".concat(t,", found ").concat(G2(n)))}function z_(e,t){var n=e.token;if(n.kind===H2.NAME&&n.value===t)return e.advance(),n;throw B2(e.source,n.start,'Expected "'.concat(t,'", found ').concat(G2(n)))}function V_(e,t){t=t||e.token;return B2(e.source,t.start,"Unexpected ".concat(G2(t)))}function q_(e,t,n,r){B_(e,t);for(var i=[n(e)];!j_(e,r);)i.push(n(e));return i}D_.prototype.toJSON=D_.prototype.inspect=function(){return{start:this.start,end:this.end}};var K_=L,H_=function(){return(H_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},G_=new _.ConsoleLogger("AbstractPubSubProvider"),W_=($_.prototype.configure=function(e){return this._config=H_(H_({},e=void 0===e?{}:e),this._config),G_.debug("configure "+this.getProviderName(),this._config),this.options},$_.prototype.getCategory=function(){return"PubSub"},Object.defineProperty($_.prototype,"options",{get:function(){return H_({},this._config)},enumerable:!0,configurable:!0}),$_);function $_(e){this._config=e=void 0===e?{}:e}var Y_,y2=(Y_=function(e,t){return(Y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Y_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),J_=function(){return(J_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Z_=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},X_=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Q_=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},eE=new _.ConsoleLogger("MqttOverWSProvider");var tE=(nE.prototype.get=function(n,r){return Z_(this,void 0,void 0,function(){var t;return X_(this,function(e){return(t=this.promises.get(n))||(t=r(n),this.promises.set(n,t)),[2,t]})})},Object.defineProperty(nE.prototype,"allClients",{get:function(){return Array.from(this.promises.keys())},enumerable:!0,configurable:!0}),nE.prototype.remove=function(e){this.promises.delete(e)},nE);function nE(){this.promises=new Map}var rE,iE="undefined"!=typeof Symbol?Symbol("topic"):"@@topic",L=(y2(oE,rE=W_),Object.defineProperty(oE.prototype,"clientId",{get:function(){return this.options.clientId},enumerable:!0,configurable:!0}),Object.defineProperty(oE.prototype,"endpoint",{get:function(){return this.options.aws_pubsub_endpoint},enumerable:!0,configurable:!0}),Object.defineProperty(oE.prototype,"clientsQueue",{get:function(){return this._clientsQueue},enumerable:!0,configurable:!0}),Object.defineProperty(oE.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),oE.prototype.getTopicForValue=function(e){return"object"==typeof e&&e[iE]},oE.prototype.getProviderName=function(){return"MqttOverWSProvider"},oE.prototype.onDisconnect=function(e){var r,t=this,n=e.clientId,i=e.errorCode,e=Q_(e,["clientId","errorCode"]);0!==i&&(eE.warn(n,JSON.stringify(J_({errorCode:i},e),null,2)),r=[],(e=this._clientIdObservers.get(n))&&(e.forEach(function(n){n.error("Disconnected, error code: "+i),t._topicObservers.forEach(function(e,t){e.delete(n),0===e.size&&r.push(t)})}),this._clientIdObservers.delete(n),r.forEach(function(e){t._topicObservers.delete(e)})))},oE.prototype.newClient=function(e){var t=e.url,i=e.clientId;return Z_(this,void 0,void 0,function(){var n,r=this;return X_(this,function(e){switch(e.label){case 0:return eE.debug("Creating new MQTT client",i),(n=new N.Client(t,i)).onMessageArrived=function(e){var t=e.destinationName,e=e.payloadString;r._onMessage(t,e)},n.onConnectionLost=function(e){var t=e.errorCode,e=Q_(e,["errorCode"]);r.onDisconnect(J_({clientId:i,errorCode:t},e))},[4,new Promise(function(e,t){n.connect({useSSL:r.isSSLEnabled,mqttVersion:3,onSuccess:function(){return e(n)},onFailure:t})})];case 1:return e.sent(),[2,n]}})})},oE.prototype.connect=function(n,r){return void 0===r&&(r={}),Z_(this,void 0,void 0,function(){var t=this;return X_(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(e){return t.newClient(J_(J_({},r),{clientId:e}))})];case 1:return[2,e.sent()]}})})},oE.prototype.disconnect=function(n){return Z_(this,void 0,void 0,function(){var t;return X_(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(n,function(){return null})];case 1:return(t=e.sent())&&t.isConnected()&&t.disconnect(),this.clientsQueue.remove(n),[2]}})})},oE.prototype.publish=function(o,s){return Z_(this,void 0,void 0,function(){var t,n,r,i;return X_(this,function(e){switch(e.label){case 0:return t=[].concat(o),n=JSON.stringify(s),[4,this.endpoint];case 1:return r=e.sent(),[4,this.connect(this.clientId,{url:r})];case 2:return i=e.sent(),eE.debug("Publishing to topic(s)",t.join(","),n),t.forEach(function(e){return i.send(e,n)}),[2]}})})},oE.prototype._onMessage=function(n,t){try{var r=[];this._topicObservers.forEach(function(e,t){!function(e,t){for(var n=e.split("/"),r=n.length,i=t.split("/"),o=0;o<r;++o){var s=n[o],a=i[o];if("#"===s)return i.length>=r;if("+"!==s&&s!==a)return}return r===i.length}(t,n)||r.push(e)});var i=JSON.parse(t);"object"==typeof i&&(i[iE]=n),r.forEach(function(e){e.forEach(function(e){return e.next(i)})})}catch(e){eE.warn("Error handling message",e,t)}},oE.prototype.subscribe=function(e,a){var n=this;void 0===a&&(a={});var u=[].concat(e);return eE.debug("Subscribing to topic(s)",u.join(",")),new K_(function(i){var o;u.forEach(function(e){var t=n._topicObservers.get(e);t||(t=new Set,n._topicObservers.set(e,t)),t.add(i)});var e=a.clientId,s=void 0===e?n.clientId:e,e=n._clientIdObservers.get(s);return(e=e||new Set).add(i),n._clientIdObservers.set(s,e),Z_(n,void 0,void 0,function(){var t,n,r;return X_(this,function(e){switch(e.label){case 0:return void 0!==(t=a.url)?[3,2]:[4,this.endpoint];case 1:return n=e.sent(),[3,3];case 2:n=t,e.label=3;case 3:r=n,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this.connect(s,{url:r})];case 5:return o=e.sent(),u.forEach(function(e){o.subscribe(e)}),[3,7];case 6:return r=e.sent(),i.error(r),[3,7];case 7:return[2]}})}),function(){return eE.debug("Unsubscribing from topic(s)",u.join(",")),o&&(n._clientIdObservers.get(s).delete(i),0===n._clientIdObservers.get(s).size&&(n.disconnect(s),n._clientIdObservers.delete(s)),u.forEach(function(e){var t=n._topicObservers.get(e)||new Set;t.delete(i),0===t.size&&(n._topicObservers.delete(e),o.isConnected()&&o.unsubscribe(e))})),null}})},oE);function oE(e){e=rE.call(this,J_(J_({},e=void 0===e?{}:e),{clientId:e.clientId||g.v4()}))||this;return e._clientsQueue=new tE,e._topicObservers=new Map,e._clientIdObservers=new Map,e}var sE,aE,y2=(sE=function(e,t){return(sE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}sE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),uE=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},cE=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},lE=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},pE=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},dE=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(pE(arguments[t]));return e},fE=new _.ConsoleLogger("AWSAppSyncProvider"),hE=(y2(gE,aE=L),Object.defineProperty(gE.prototype,"endpoint",{get:function(){throw new Error("Not supported")},enumerable:!0,configurable:!0}),gE.prototype.getProviderName=function(){return"AWSAppSyncProvider"},gE.prototype.publish=function(e,t,n){return uE(this,void 0,void 0,function(){return cE(this,function(e){throw new Error("Operation not supported")})})},gE.prototype._cleanUp=function(t){var n=this;Array.from(this._topicClient.entries()).filter(function(e){return pE(e,2)[1].clientId===t}).map(function(e){return pE(e,1)[0]}).forEach(function(e){return n._cleanUpForTopic(e)})},gE.prototype._cleanUpForTopic=function(e){this._topicClient.delete(e),this._topicAlias.delete(e)},gE.prototype.onDisconnect=function(e){var t=this,n=e.clientId,r=e.errorCode,i=lE(e,["clientId","errorCode"]);0!==r&&(Array.from(this._topicClient.entries()).filter(function(e){return pE(e,2)[1].clientId===n}).map(function(e){return pE(e,1)[0]}).forEach(function(e){t._topicObservers.has(e)&&(t._topicObservers.get(e).forEach(function(e){e.closed||e.error(i)}),t._topicObservers.delete(e))}),this._cleanUp(n))},gE.prototype.disconnect=function(t){return uE(this,void 0,void 0,function(){return cE(this,function(e){switch(e.label){case 0:return[4,this.clientsQueue.get(t,function(){return null})];case 1:return e.sent(),[4,aE.prototype.disconnect.call(this,t)];case 2:return e.sent(),this._cleanUp(t),[2]}})})},gE.prototype.subscribe=function(e,o){var n=this;void 0===o&&(o={});var t=new K_(function(a){var r=[].concat(e);return fE.debug("Subscribing to topic(s)",r.join(",")),uE(n,void 0,void 0,function(){var i,t,n=this;return cE(this,function(e){switch(e.label){case 0:return r.forEach(function(e){n._topicObservers.has(e)||n._topicObservers.set(e,new Set),n._topicObservers.get(e).add(a)}),t=o.mqttConnections,i=void 0===t?[]:t,t=o.newSubscriptions,t=Object.entries(t).map(function(e){var t=pE(e,2),e=t[0];return[t[1].topic,e]}),this._topicAlias=new Map(dE(Array.from(this._topicAlias.entries()),t)),t=Object.entries(r.reduce(function(e,t){var n,r=i.find(function(e){return-1<e.topics.indexOf(t)});return r&&(n=r.client,r=r.url,e[n]||(e[n]={url:r,topics:new Set}),e[n].topics.add(t)),e},{})),[4,Promise.all(t.map(function(e){var e=pE(e,2),i=e[0],e=e[1],o=e.url,s=e.topics;return uE(n,void 0,void 0,function(){var t,n,r=this;return cE(this,function(e){switch(e.label){case 0:t=null,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.connect(i,{clientId:i,url:o})];case 2:return t=e.sent(),[3,4];case 3:return n=e.sent(),a.error({message:"Failed to connect",error:n}),a.complete(),[2,void 0];case 4:return s.forEach(function(e){t.isConnected()&&(t.subscribe(e),r._topicClient.set(e,t))}),[2,t]}})})}))];case 1:return e.sent(),[2]}})}),function(){fE.debug("Unsubscribing from topic(s)",r.join(",")),r.forEach(function(e){var t=n._topicClient.get(e);t&&t.isConnected()&&(t.unsubscribe(e),n._topicClient.delete(e),Array.from(n._topicClient.values()).some(function(e){return e===t})||n.disconnect(t.clientId)),n._topicObservers.delete(e)})}});return K_.from(t).map(function(e){var t=n.getTopicForValue(e),r=n._topicAlias.get(t);return e.data=Object.entries(e.data).reduce(function(e,t){var n=pE(t,2),t=n[0],n=n[1];return e[r||t]=n,e},{}),e})},gE);function gE(){var e=null!==aE&&aE.apply(this,arguments)||this;return e._topicClient=new Map,e._topicAlias=new Map,e}var vE,mE,yE,bE,y2=(vE=function(e,t){return(vE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}vE(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),SE=function(){return(SE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},wE=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},CE=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},_E=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},EE=new _.Logger("AWSAppSyncRealTimeProvider"),AE="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",IE=[400,401,403];(L=mE=mE||{}).GQL_CONNECTION_INIT="connection_init",L.GQL_CONNECTION_ERROR="connection_error",L.GQL_CONNECTION_ACK="connection_ack",L.GQL_START="start",L.GQL_START_ACK="start_ack",L.GQL_DATA="data",L.GQL_CONNECTION_KEEP_ALIVE="ka",L.GQL_STOP="stop",L.GQL_COMPLETE="complete",L.GQL_ERROR="error",(L=yE=yE||{})[L.PENDING=0]="PENDING",L[L.CONNECTED=1]="CONNECTED",L[L.FAILED=2]="FAILED",(L=bE=bE||{})[L.CLOSED=0]="CLOSED",L[L.READY=1]="READY",L[L.CONNECTING=2]="CONNECTING";var kE,TE={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},PE=(y2(OE,kE=W_),OE.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},OE.prototype.newClient=function(){throw new Error("Not used here")},OE.prototype.publish=function(e,t,n){return wE(this,void 0,void 0,function(){return CE(this,function(e){throw new Error("Operation not supported")})})},OE.prototype.subscribe=function(e,r){var i=this,o=r.appSyncGraphqlEndpoint;return new K_(function(t){if(o){var n=g.v4();return i._startSubscriptionWithAWSAppSyncRealTime({options:r,observer:t,subscriptionId:n}).catch(function(e){t.error({errors:[SE({},new C2(UE.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+e))]}),t.complete()}),function(){return wE(i,void 0,void 0,function(){var t;return CE(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,3,4]),[4,this._waitForSubscriptionToBeConnected(n)];case 1:if(e.sent(),!(t=(this.subscriptionObserverMap.get(n)||{}).subscriptionState))return[2];if(t!==yE.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(n),[3,4];case 2:return t=e.sent(),EE.debug("Error while unsubscribing "+t),[3,4];case 3:return this._removeSubscriptionObserver(n),[7];case 4:return[2]}})})}}t.error({errors:[SE({},new C2("Subscribe only available for AWS AppSync endpoint"))]}),t.complete()})},Object.defineProperty(OE.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),OE.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var m=e.options,y=e.observer,b=e.subscriptionId;return wE(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v=this;return CE(this,function(e){switch(e.label){case 0:return t=m.appSyncGraphqlEndpoint,n=m.authenticationType,r=m.query,i=m.variables,o=m.apiKey,s=m.region,p=m.graphql_headers,a=void 0===p?function(){return{}}:p,l=m.additionalHeaders,u=void 0===l?{}:l,c=yE.PENDING,p={query:r,variables:i},this.subscriptionObserverMap.set(b,{observer:y,query:r,variables:i,subscriptionState:c,startAckTimeoutId:null}),l=JSON.stringify(p),p=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,payload:l,canonicalUri:"",region:s})];case 1:return d=[SE.apply(void 0,p.concat([e.sent()]))],[4,a()];case 2:g=SE.apply(void 0,[SE.apply(void 0,[SE.apply(void 0,d.concat([e.sent()])),u]),((g={})[_.USER_AGENT_HEADER]=_.Constants.userAgent,g)]),g={id:b,payload:{data:l,extensions:{authorization:SE({},g)}},type:mE.GQL_START},g=JSON.stringify(g),e.label=3;case 3:return e.trys.push([3,5,,6]),[4,this._initializeWebSocketConnection({apiKey:o,appSyncGraphqlEndpoint:t,authenticationType:n,region:s})];case 4:return e.sent(),[3,6];case 5:return h=e.sent(),EE.debug({err:h}),f=h.message,h=void 0===f?"":f,y.error({errors:[SE({},new C2(UE.CONNECTION_FAILED+": "+h))]}),y.complete(),"function"==typeof(f=(this.subscriptionObserverMap.get(b)||{}).subscriptionFailedCallback)&&f(),[2];case 6:return h=this.subscriptionObserverMap.get(b),f=h.subscriptionFailedCallback,h=h.subscriptionReadyCallback,this.subscriptionObserverMap.set(b,{observer:y,subscriptionState:c,variables:i,query:r,subscriptionReadyCallback:h,subscriptionFailedCallback:f,startAckTimeoutId:setTimeout(function(){v._timeoutStartSubscriptionAck.call(v,b)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(g),[2]}})})},OE.prototype._waitForSubscriptionToBeConnected=function(a){return wE(this,void 0,void 0,function(){var s=this;return CE(this,function(e){return this.subscriptionObserverMap.get(a).subscriptionState===yE.PENDING?[2,new Promise(function(e,t){var n=s.subscriptionObserverMap.get(a),r=n.observer,i=n.subscriptionState,o=n.variables,n=n.query;s.subscriptionObserverMap.set(a,{observer:r,subscriptionState:i,variables:o,query:n,subscriptionReadyCallback:e,subscriptionFailedCallback:t})})]:[2]})})},OE.prototype._sendUnsubscriptionMessage=function(e){try{var t,n;this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===bE.READY&&(t={id:e,type:mE.GQL_STOP},n=JSON.stringify(t),this.awsRealTimeSocket.send(n))}catch(e){EE.debug({err:e})}},OE.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},OE.prototype._closeSocketIfRequired=function(){var e;0<this.subscriptionObserverMap.size||(this.awsRealTimeSocket?0<this.awsRealTimeSocket.bufferedAmount?setTimeout(this._closeSocketIfRequired.bind(this),1e3):(EE.debug("closing WebSocket..."),clearTimeout(this.keepAliveTimeoutId),(e=this.awsRealTimeSocket).onclose=void 0,e.onerror=void 0,e.close(1e3),this.awsRealTimeSocket=null,this.socketStatus=bE.CLOSED):this.socketStatus=bE.CLOSED)},OE.prototype._handleIncomingSubscriptionMessage=function(e){EE.debug("subscription message from AWS AppSync RealTime: "+e.data);var t=JSON.parse(e.data),n=t.id,r=void 0===n?"":n,i=t.payload,o=t.type,s=this.subscriptionObserverMap.get(r)||{},a=s.observer,u=void 0===a?null:a,e=s.query,n=void 0===e?"":e,t=s.variables,a=void 0===t?{}:t,e=s.startAckTimeoutId,t=s.subscriptionReadyCallback,s=s.subscriptionFailedCallback;if(EE.debug({id:r,observer:u,query:n,variables:a}),o===mE.GQL_DATA&&i&&i.data)u?u.next(i):EE.debug("observer not found for id: "+r);else if(o!==mE.GQL_START_ACK){if(o===mE.GQL_CONNECTION_KEEP_ALIVE)return clearTimeout(this.keepAliveTimeoutId),void(this.keepAliveTimeoutId=setTimeout(this._errorDisconnect.bind(this,UE.TIMEOUT_DISCONNECT),this.keepAliveTimeout));o===mE.GQL_ERROR&&(c=yE.FAILED,this.subscriptionObserverMap.set(r,{observer:u,query:n,variables:a,startAckTimeoutId:e,subscriptionReadyCallback:t,subscriptionFailedCallback:s,subscriptionState:c}),u.error({errors:[SE({},new C2(UE.CONNECTION_FAILED+": "+JSON.stringify(i)))]}),clearTimeout(e),u.complete(),"function"==typeof s&&s())}else{EE.debug("subscription ready for "+JSON.stringify({query:n,variables:a})),"function"==typeof t&&t(),clearTimeout(e),o=UE.SUBSCRIPTION_ACK,i={query:n,variables:a},e="Connection established for subscription",_.Hub.dispatch("api",{event:o,data:i,message:e},"PubSub",AE);var c=yE.CONNECTED;this.subscriptionObserverMap.set(r,{observer:u,query:n,variables:a,startAckTimeoutId:null,subscriptionState:c,subscriptionReadyCallback:t,subscriptionFailedCallback:s})}},OE.prototype._errorDisconnect=function(t){EE.debug("Disconnect error: "+t),this.subscriptionObserverMap.forEach(function(e){e=e.observer;e&&!e.closed&&e.error({errors:[SE({},new C2(t))]})}),this.subscriptionObserverMap.clear(),this.awsRealTimeSocket&&this.awsRealTimeSocket.close(),this.socketStatus=bE.CLOSED},OE.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e)||{},n=t.observer,r=t.query,t=t.variables;n&&(this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:t,subscriptionState:yE.FAILED}),n&&!n.closed&&(n.error({errors:[SE({},new C2("Subscription timeout "+JSON.stringify({query:r,variables:t})))]}),n.complete()),EE.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:t})))},OE.prototype._initializeWebSocketConnection=function(e){var t=this,u=e.appSyncGraphqlEndpoint,c=e.authenticationType,l=e.apiKey,p=e.region;if(this.socketStatus!==bE.READY)return new Promise(function(s,a){return wE(t,void 0,void 0,function(){var t,n,r,i,o;return CE(this,function(e){switch(e.label){case 0:if(this.promiseArray.push({res:s,rej:a}),this.socketStatus!==bE.CLOSED)return[3,5];e.label=1;case 1:return e.trys.push([1,4,,5]),this.socketStatus=bE.CONNECTING,n=this.isSSLEnabled?"wss://":"ws://",t=u.replace("https://",n).replace("http://",n).replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),i="{}",n=(r=JSON).stringify,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:c,payload:i,canonicalUri:"/connect",apiKey:l,appSyncGraphqlEndpoint:u,region:p})];case 2:return r=n.apply(r,[e.sent()]),r=d.Buffer.from(r).toString("base64"),i=d.Buffer.from(i).toString("base64"),i=t+"?header="+r+"&payload="+i,[4,this._initializeRetryableHandshake({awsRealTimeUrl:i})];case 3:return e.sent(),this.promiseArray.forEach(function(e){e=e.res;EE.debug("Notifying connection successful"),e()}),this.socketStatus=bE.READY,this.promiseArray=[],[3,5];case 4:return o=e.sent(),this.promiseArray.forEach(function(e){return(0,e.rej)(o)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=null,this.socketStatus=bE.CLOSED,[3,5];case 5:return[2]}})})})},OE.prototype._initializeRetryableHandshake=function(e){var t=e.awsRealTimeUrl;return wE(this,void 0,void 0,function(){return CE(this,function(e){switch(e.label){case 0:return EE.debug("Initializaling retryable Handshake"),[4,_.jitteredExponentialRetry(this._initializeHandshake.bind(this),[{awsRealTimeUrl:t}],5e3)];case 1:return e.sent(),[2]}})})},OE.prototype._initializeHandshake=function(e){var i=e.awsRealTimeUrl;return wE(this,void 0,void 0,function(){var t,n,r,s=this;return CE(this,function(e){switch(e.label){case 0:EE.debug("Initializing handshake "+i),e.label=1;case 1:return e.trys.push([1,4,,5]),[4,new Promise(function(e,t){var n=new WebSocket(i,"graphql-ws");n.onerror=function(){EE.debug("WebSocket connection error")},n.onclose=function(){t(new Error("Connection handshake error"))},n.onopen=function(){return s.awsRealTimeSocket=n,e()}})];case 2:return e.sent(),[4,new Promise(function(r,i){var o=!1;s.awsRealTimeSocket.onerror=function(e){EE.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){EE.debug("WebSocket closed "+e.reason),i(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(e){EE.debug("subscription message from AWS AppSyncRealTime: "+e.data+" ");var t=JSON.parse(e.data),n=t.type,e=t.payload,e=(void 0===e?{}:e).connectionTimeoutMs;if(n===mE.GQL_CONNECTION_ACK)return o=!0,s.keepAliveTimeout=void 0===e?3e5:e,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){EE.debug(e),s._errorDisconnect(UE.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){EE.debug("WebSocket closed "+e.reason),s._errorDisconnect(UE.CONNECTION_CLOSED)},void r("Cool, connected to AWS AppSyncRealTime");n===mE.GQL_CONNECTION_ERROR&&(t=(void 0===(n=t.payload)?{}:n).errors,n=(t=void 0===(n=_E(void 0===t?[]:t,1)[0])?{}:n).errorType,t=t.errorCode,i({errorType:void 0===n?"":n,errorCode:void 0===t?0:t}))};var e={type:mE.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(e)),setTimeout(function(){o||i(new Error("Connection timeout: ack from AWSRealTime was not received on 15000 ms"))}.bind(s),15e3)})];case 3:return e.sent(),[3,5];case 4:throw t=e.sent(),n=t.errorType,r=t.errorCode,IE.includes(r)?new _.NonRetryableError(n):n?new Error(n):t;case 5:return[2]}})})},OE.prototype._awsRealTimeHeaderBasedAuth=function(e){var r=e.authenticationType,i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.apiKey,u=e.region;return wE(this,void 0,void 0,function(){var t,n;return CE(this,function(e){switch(e.label){case 0:return(n={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this)},"function"!=typeof(t=n[r]))?(EE.debug("Authentication type "+r+" not supported"),[2,""]):(n=h.parse(s).host,[4,t({payload:i,canonicalUri:o,appSyncGraphqlEndpoint:s,apiKey:a,region:u,host:n})]);case 1:return[2,e.sent()]}})})},OE.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return wE(this,void 0,void 0,function(){return CE(this,function(e){switch(e.label){case 0:return[4,wv.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}})})},OE.prototype._awsRealTimeOPENIDHeader=function(e){var r=e.host;return wE(this,void 0,void 0,function(){var t,n;return CE(this,function(e){switch(e.label){case 0:return[4,ff.getItem("federatedInfo")];case 1:return(n=e.sent())?(t=n.token,[3,4]):[3,2];case 2:return[4,wv.currentAuthenticatedUser()];case 3:(n=e.sent())&&(t=n.token),e.label=4;case 4:if(!t)throw new Error("No federated jwt");return[2,{Authorization:t,host:r}]}})})},OE.prototype._awsRealTimeApiKeyHeader=function(e){var n=e.apiKey,r=e.host;return wE(this,void 0,void 0,function(){var t;return CE(this,function(e){return t=new Date,t=t.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:r,"x-amz-date":t,"x-api-key":n}]})})},OE.prototype._awsRealTimeIAMHeader=function(e){var i=e.payload,o=e.canonicalUri,s=e.appSyncGraphqlEndpoint,a=e.region;return wE(this,void 0,void 0,function(){var t,n,r;return CE(this,function(e){switch(e.label){case 0:return t={region:a,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!e.sent())throw new Error("No credentials");return[4,_.Credentials.get().then(function(e){return{secret_key:e.secretAccessKey,access_key:e.accessKeyId,session_token:e.sessionToken}})];case 2:return n=e.sent(),r={url:""+s+o,data:i,method:"POST",headers:SE({},TE)},[2,_.Signer.sign(r,n,t).headers]}})})},OE.prototype._ensureCredentials=function(){return _.Credentials.get().then(function(e){if(!e)return!1;e=_.Credentials.shear(e);return EE.debug("set credentials for AWSAppSyncRealTimeProvider",e),!0}).catch(function(e){return EE.warn("ensure credentials error",e),!1})},OE);function OE(){var e=null!==kE&&kE.apply(this,arguments)||this;return e.socketStatus=bE.CLOSED,e.keepAliveTimeout=3e5,e.subscriptionObserverMap=new Map,e.promiseArray=[],e}var xE=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},LE=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},NE=_.browserOrNode().isNode,RE=new _.ConsoleLogger("PubSub");function ME(e){this._options=e,RE.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}var UE,DE,FE=new(Object.defineProperty(ME.prototype,"awsAppSyncProvider",{get:function(){return this._awsAppSyncProvider||(this._awsAppSyncProvider=new hE(this._options)),this._awsAppSyncProvider},enumerable:!0,configurable:!0}),Object.defineProperty(ME.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new PE(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),ME.prototype.getModuleName=function(){return"PubSub"},ME.prototype.configure=function(e){var t=this,e=e?e.PubSub||e:{};return RE.debug("configure PubSub",{opt:e}),this._options=Object.assign({},this._options,e),this._pluggables.map(function(e){return e.configure(t._options)}),this._options},ME.prototype.addPluggable=function(t){return xE(this,void 0,void 0,function(){return LE(this,function(e){return t&&"PubSub"===t.getCategory()?(this._pluggables.push(t),[2,t.configure(this._options)]):[2]})})},ME.prototype.getProviderByName=function(t){return t===_.INTERNAL_AWS_APPSYNC_PUBSUB_PROVIDER?this.awsAppSyncProvider:t===_.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER?this.awsAppSyncRealTimeProvider:this._pluggables.find(function(e){return e.getProviderName()===t})},ME.prototype.getProviders=function(e){var t=(e=void 0===e?{}:e).provider;if(!t)return this._pluggables;e=this.getProviderByName(t);if(!e)throw new Error("Could not find provider named "+t);return[e]},ME.prototype.publish=function(t,n,r){return xE(this,void 0,void 0,function(){return LE(this,function(e){return[2,Promise.all(this.getProviders(r).map(function(e){return e.publish(t,n,r)}))]})})},ME.prototype.subscribe=function(t,r){if(NE&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");RE.debug("subscribe options",r);var i=this.getProviders(r);return new K_(function(n){var e=i.map(function(e){return{provider:e,observable:e.subscribe(t,r)}}).map(function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})});return function(){return e.forEach(function(e){return e.unsubscribe()})}})},ME)(null);_.Amplify.register(FE),(y2=UE=UE||{}).CONNECTION_CLOSED="Connection closed",y2.CONNECTION_FAILED="Connection failed",y2.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",y2.SUBSCRIPTION_ACK="Subscription ack",y2.TIMEOUT_DISCONNECT="Timeout disconnect",(W_={}).API_KEY="API_KEY",W_.AWS_IAM="AWS_IAM",W_.OPENID_CONNECT="OPENID_CONNECT",W_.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",(y2=DE=DE||{}).NO_API_KEY="No api-key configured",y2.NO_CURRENT_USER="No current user",y2.NO_CREDENTIALS="No credentials",y2.NO_FEDERATED_JWT="No federated jwt";var jE=function(){return(jE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},BE=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},zE=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},VE=function(e,t){var n={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n},qE=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},KE=new _.ConsoleLogger("GraphQLAPI"),HE=(GE.prototype.getModuleName=function(){return"GraphQLAPI"},GE.prototype.configure=function(e){var t=e||{},e=t.API,e=void 0===e?{}:e,t=VE(t,["API"]),e=jE(jE({},t),e);return KE.debug("configure GraphQL API",{opt:e}),void 0!==(e=e.aws_project_region?Object.assign({},e,{region:e.aws_project_region,header:{}}):e).graphql_headers&&"function"!=typeof e.graphql_headers&&(KE.warn("graphql_headers should be a function"),e.graphql_headers=void 0),this._options=Object.assign({},this._options,e),this.createInstance(),this._options},GE.prototype.createInstance=function(){return KE.debug("create Rest instance"),this._options?(this._api=new c2(this._options),this._api.Credentials=this.Credentials,!0):Promise.reject("API not configured")},GE.prototype._headerBasedAuth=function(s){return BE(this,void 0,void 0,function(){var t,n,r,i,o;return zE(this,function(e){switch(e.label){case 0:switch(r=this._options,t=r.aws_appsync_authenticationType,n=r.aws_appsync_apiKey,r={},s||t||"AWS_IAM"){case"API_KEY":return[3,1];case"AWS_IAM":return[3,2];case"OPENID_CONNECT":return[3,4];case"AMAZON_COGNITO_USER_POOLS":return[3,11]}return[3,15];case 1:if(!n)throw new Error(DE.NO_API_KEY);return r={Authorization:null,"X-Api-Key":n},[3,16];case 2:return[4,this._ensureCredentials()];case 3:if(!e.sent())throw new Error(DE.NO_CREDENTIALS);return[3,16];case 4:return e.trys.push([4,9,,10]),o=void 0,[4,ff.getItem("federatedInfo")];case 5:return(i=e.sent())?(o=i.token,[3,8]):[3,6];case 6:return[4,wv.currentAuthenticatedUser()];case 7:(i=e.sent())&&(o=i.token),e.label=8;case 8:if(!o)throw new Error(DE.NO_FEDERATED_JWT);return r={Authorization:o},[3,10];case 9:throw e.sent(),new Error(DE.NO_CURRENT_USER);case 10:return[3,16];case 11:return e.trys.push([11,13,,14]),[4,this.Auth.currentSession()];case 12:return o=e.sent(),r={Authorization:o.getAccessToken().getJwtToken()},[3,14];case 13:throw e.sent(),new Error(DE.NO_CURRENT_USER);case 14:return[3,16];case 15:return r={Authorization:null},[3,16];case 16:return[2,r]}})})},GE.prototype.getGraphqlOperationType=function(e){e=t_(e);return qE(e.definitions,1)[0].operation},GE.prototype.graphql=function(e,t){var n=e.query,r=e.variables,i=void 0===r?{}:r,o=e.authMode,s=t_("string"==typeof n?n:k2(n)),n=qE(s.definitions.filter(function(e){return"OperationDefinition"===e.kind}),1)[0],n=(void 0===n?{}:n).operation;switch(n){case"query":case"mutation":var a=this._api.getCancellableToken(),u=this._graphql({query:s,variables:i,authMode:o},t,{cancellableToken:a});return this._api.updateRequestToBeCancellable(u,a),u;case"subscription":return this._graphqlSubscribe({query:s,variables:i,authMode:o},t)}throw new Error("invalid operation type: "+n)},GE.prototype._graphql=function(e,v,m){var y=e.query,b=e.variables,S=e.authMode;return void 0===v&&(v={}),void 0===m&&(m={}),BE(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g;return zE(this,function(e){switch(e.label){case 0:return this._api?[3,2]:[4,this.createInstance()];case 1:e.sent(),e.label=2;case 2:return a=this._options,t=a.aws_appsync_region,n=a.aws_appsync_graphqlEndpoint,s=a.graphql_headers,r=void 0===s?function(){return{}}:s,i=a.graphql_endpoint,o=a.graphql_endpoint_iam_region,s=[{}],(a=!i)?[4,this._headerBasedAuth(S)]:[3,4];case 3:a=e.sent(),e.label=4;case 4:return u=[jE.apply(void 0,s.concat([a]))],(c=i)?o?[4,this._headerBasedAuth(S)]:[3,6]:[3,8];case 5:return l=e.sent(),[3,7];case 6:l={Authorization:null},e.label=7;case 7:c=l,e.label=8;case 8:return p=[jE.apply(void 0,u.concat([c]))],[4,r({query:y,variables:b})];case 9:if(d=jE.apply(void 0,[jE.apply(void 0,[jE.apply(void 0,p.concat([e.sent()])),v]),!i&&((g={})["x-amz-user-agent"]=_.Constants.userAgent,g)]),g={query:k2(y),variables:b},d=Object.assign({headers:d,body:g,signerServiceInfo:{service:i?"execute-api":"appsync",region:i?o:t}},m),!(g=i||n))throw{data:{},errors:[new C2("No graphql endpoint provided.")]};e.label=10;case 10:return e.trys.push([10,12,,13]),[4,this._api.post(g,d)];case 11:return f=e.sent(),[3,13];case 12:if(h=e.sent(),this._api.isCancel(h))throw h;return f={data:{},errors:[new C2(h.message,null,null,null,null,h)]},[3,13];case 13:if((h=f.errors)&&h.length)throw f;return[2,f]}})})},GE.prototype.isCancel=function(e){return this._api.isCancel(e)},GE.prototype.cancel=function(e,t){return this._api.cancel(e,t)},GE.prototype._graphqlSubscribe=function(e,t){var n=e.query,r=e.variables,i=e.authMode;void 0===t&&(t={});var o=this._options,s=o.aws_appsync_region,a=o.aws_appsync_graphqlEndpoint,u=o.aws_appsync_authenticationType,e=o.aws_appsync_apiKey,o=o.graphql_headers,o=void 0===o?function(){return{}}:o;if(FE&&"function"==typeof FE.subscribe)return FE.subscribe("",{provider:_.INTERNAL_AWS_APPSYNC_REALTIME_PUBSUB_PROVIDER,appSyncGraphqlEndpoint:a,authenticationType:i||u||"AWS_IAM",apiKey:e,query:k2(n),region:s,variables:r,graphql_headers:o,additionalHeaders:t});throw KE.debug("No pubsub module applied for subscription"),new Error("No pubsub module applied for subscription")},GE.prototype._ensureCredentials=function(){var t=this;return this.Credentials.get().then(function(e){if(!e)return!1;e=t.Credentials.shear(e);return KE.debug("set credentials for api",e),!0}).catch(function(e){return KE.warn("ensure credentials error",e),!1})},GE);function GE(e){this._api=null,this.Auth=wv,this.Cache=ff,this.Credentials=_.Credentials,this._options=e,KE.debug("API Options",this._options)}W_=new HE(null);_.Amplify.register(W_);var WE=function(){return(WE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},$E=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},YE=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},JE=new _.ConsoleLogger("API");function ZE(e){this.Auth=wv,this.Cache=ff,this.Credentials=_.Credentials,this._options=e,this._restApi=new v2(e),this._graphqlApi=new HE(e),JE.debug("API Options",this._options)}var XE=new(ZE.prototype.getModuleName=function(){return"API"},ZE.prototype.configure=function(e){this._options=Object.assign({},this._options,e),this._restApi.Credentials=this.Credentials,this._graphqlApi.Auth=this.Auth,this._graphqlApi.Cache=this.Cache,this._graphqlApi.Credentials=this.Credentials;var t=this._restApi.configure(this._options),e=this._graphqlApi.configure(this._options);return WE(WE({},t),e)},ZE.prototype.get=function(e,t,n){return this._restApi.get(e,t,n)},ZE.prototype.post=function(e,t,n){return this._restApi.post(e,t,n)},ZE.prototype.put=function(e,t,n){return this._restApi.put(e,t,n)},ZE.prototype.patch=function(e,t,n){return this._restApi.patch(e,t,n)},ZE.prototype.del=function(e,t,n){return this._restApi.del(e,t,n)},ZE.prototype.head=function(e,t,n){return this._restApi.head(e,t,n)},ZE.prototype.isCancel=function(e){return this._restApi.isCancel(e)},ZE.prototype.cancel=function(e,t){return this._restApi.cancel(e,t)},ZE.prototype.endpoint=function(t){return $E(this,void 0,void 0,function(){return YE(this,function(e){return[2,this._restApi.endpoint(t)]})})},ZE.prototype.getGraphqlOperationType=function(e){return this._graphqlApi.getGraphqlOperationType(e)},ZE.prototype.graphql=function(e,t){return this._graphqlApi.graphql(e,t)},ZE)(null);_.Amplify.register(XE);var QE=function(){return(QE=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},e3=new _.ConsoleLogger("AbstractInteractionsProvider"),y2=(t3.prototype.configure=function(e){return void 0===e&&(e={}),this._config=QE(QE({},this._config),e),e3.debug("configure "+this.getProviderName(),this._config),this.options},t3.prototype.getCategory=function(){return"Interactions"},Object.defineProperty(t3.prototype,"options",{get:function(){return QE({},this._config)},enumerable:!0,configurable:!0}),t3);function t3(e){this._config=e=void 0===e?{}:e}var n3=function(e,t){return(n3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function r3(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}n3(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i3=function(){return(i3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o3(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})}function s3(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function a3(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var u3,c3,l3,p3,d3,f3,h3,g3,W_="3.6.1",v3="runtime.lex.{region}.amazonaws.com",m3=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),y3=new Set(["cn-north-1","cn-northwest-1"]),b3=new Set(["us-iso-east-1"]),S3=new Set(["us-isob-east-1"]),w3=new Set(["us-gov-east-1","us-gov-west-1"]),jt={apiVersion:"2016-11-28",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"ap-northeast-1":n={hostname:"runtime.lex.ap-northeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-1":n={hostname:"runtime.lex.ap-southeast-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"ap-southeast-2":n={hostname:"runtime.lex.ap-southeast-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-central-1":n={hostname:"runtime.lex.eu-central-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-1":n={hostname:"runtime.lex.eu-west-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"eu-west-2":n={hostname:"runtime.lex.eu-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-east-1":n={hostname:"runtime.lex.us-east-1.amazonaws.com",partition:"aws",signingService:"lex"};break;case"us-west-2":n={hostname:"runtime.lex.us-west-2.amazonaws.com",partition:"aws",signingService:"lex"};break;default:m3.has(e)&&(n={hostname:v3.replace("{region}",e),partition:"aws",signingService:"lex"}),y3.has(e)&&(n={hostname:"runtime.lex.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),b3.has(e)&&(n={hostname:"runtime.lex.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),S3.has(e)&&(n={hostname:"runtime.lex.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),void 0===(n=w3.has(e)?{hostname:"runtime.lex.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}:n)&&(n={hostname:v3.replace("{region}",e),partition:"aws",signingService:"lex"})}return Promise.resolve(i3({signingService:"lex"},n))},serviceId:"Lex Runtime Service",urlParser:jt},C3=i3(i3({},jt),{runtime:"node",base64Decoder:Su,base64Encoder:wu,bodyLengthChecker:Cu,credentialDefaultProvider:Me,defaultUserAgentProvider:pn({serviceId:jt.serviceId,clientVersion:W_}),maxAttempts:_a(b),region:_a(fn,mn),requestHandler:new Le,sha256:ln.bind(null,"sha256"),streamCollector:Wn,utf8Decoder:Ye,utf8Encoder:ct}),_3=(r3(E3,u3=C),E3.prototype.destroy=function(){u3.prototype.destroy.call(this)},E3);function E3(e){var t=this,e=i3(i3({},C3),e),e=Lo(e),e=wc(xo(e)),e=kc(ha(e));return(t=u3.call(this,e)||this).config=e,t.middlewareStack.use(Ac(t.config)),t.middlewareStack.use(Xs(t.config)),t.middlewareStack.use(Lu(t.config)),t.middlewareStack.use(Mu(t.config)),t.middlewareStack.use(Du(t.config)),t.middlewareStack.use(Tc(t.config)),t}(SI||(SI={})).filterSensitiveLog=function(e){return i3({},e)},(_I||(_I={})).filterSensitiveLog=function(e){return i3(i3({},e),e.parameters&&{parameters:Wc})},(AI||(AI={})).filterSensitiveLog=function(e){return i3({},e)},(II||(II={})).filterSensitiveLog=function(e){return i3({},e)},(LI||(LI={})).filterSensitiveLog=function(e){return i3({},e)},(dA||(dA={})).filterSensitiveLog=function(e){return i3({},e)},(kA||{}).filterSensitiveLog=function(e){return i3({},e)},(xA||(xA={})).filterSensitiveLog=function(e){return i3({},e)},(LA||{}).filterSensitiveLog=function(e){return i3({},e)},(eI||(eI={})).filterSensitiveLog=function(e){return i3({},e)},(SI={}).FAILED="Failed",SI.FULFILLED="Fulfilled",SI.READY_FOR_FULFILLMENT="ReadyForFulfillment",(_I={}).COMPOSITE="Composite",_I.CUSTOM_PAYLOAD="CustomPayload",_I.PLAIN_TEXT="PlainText",_I.SSML="SSML",(AI={}).CLOSE="Close",AI.CONFIRM_INTENT="ConfirmIntent",AI.DELEGATE="Delegate",AI.ELICIT_INTENT="ElicitIntent",AI.ELICIT_SLOT="ElicitSlot",(c3||(c3={})).filterSensitiveLog=function(e){return i3(i3(i3({},e),e.slots&&{slots:Wc}),e.message&&{message:Wc})},(II={}).CONFIRMED="Confirmed",II.DENIED="Denied",II.NONE="None",(l3||(l3={})).filterSensitiveLog=function(e){return i3(i3({},e),e.slots&&{slots:Wc})},(kI||(kI={})).filterSensitiveLog=function(e){return i3(i3(i3(i3(i3({},e),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return l3.filterSensitiveLog(e)})}),e.sessionAttributes&&{sessionAttributes:Wc}),e.dialogAction&&{dialogAction:c3.filterSensitiveLog(e.dialogAction)}),e.activeContexts&&{activeContexts:Wc})},(TI||(TI={})).filterSensitiveLog=function(e){return i3({},e)},(PI||(PI={})).filterSensitiveLog=function(e){return i3({},e)},(OI||(OI={})).filterSensitiveLog=function(e){return i3({},e)},(xI||(xI={})).filterSensitiveLog=function(e){return i3({},e)},(p3||(p3={})).filterSensitiveLog=function(e){return i3(i3(i3(i3({},e),e.sessionAttributes&&{sessionAttributes:Wc}),e.requestAttributes&&{requestAttributes:Wc}),e.activeContexts&&{activeContexts:Wc})},(LI={}).CONFIRM_INTENT="ConfirmIntent",LI.ELICIT_INTENT="ElicitIntent",LI.ELICIT_SLOT="ElicitSlot",LI.FAILED="Failed",LI.FULFILLED="Fulfilled",LI.READY_FOR_FULFILLMENT="ReadyForFulfillment",(d3||(d3={})).filterSensitiveLog=function(e){return i3(i3(i3({},e),e.message&&{message:Wc}),e.activeContexts&&{activeContexts:Wc})},(NI||(NI={})).filterSensitiveLog=function(e){return i3({},e)},(RI||(RI={})).filterSensitiveLog=function(e){return i3({},e)},(f3||(f3={})).filterSensitiveLog=function(e){return i3(i3(i3(i3(i3({},e),e.sessionAttributes&&{sessionAttributes:Wc}),e.requestAttributes&&{requestAttributes:Wc}),e.inputText&&{inputText:Wc}),e.activeContexts&&{activeContexts:Wc})},(MI||(MI={})).filterSensitiveLog=function(e){return i3({},e)},(h3||(h3={})).filterSensitiveLog=function(e){return i3(i3({},e),e.slots&&{slots:Wc})},(UI||(UI={})).filterSensitiveLog=function(e){return i3({},e)},(DI||(DI={})).filterSensitiveLog=function(e){return i3({},e)},(FI||(FI={})).filterSensitiveLog=function(e){return i3({},e)},(jI||(jI={})).filterSensitiveLog=function(e){return i3({},e)},(g3||(g3={})).filterSensitiveLog=function(e){return i3(i3(i3(i3(i3(i3({},e),e.alternativeIntents&&{alternativeIntents:e.alternativeIntents.map(function(e){return h3.filterSensitiveLog(e)})}),e.slots&&{slots:Wc}),e.sessionAttributes&&{sessionAttributes:Wc}),e.message&&{message:Wc}),e.activeContexts&&{activeContexts:Wc})},(BI||(BI={})).filterSensitiveLog=function(e){return i3(i3(i3(i3(i3({},e),e.sessionAttributes&&{sessionAttributes:Wc}),e.dialogAction&&{dialogAction:c3.filterSensitiveLog(e.dialogAction)}),e.recentIntentSummaryView&&{recentIntentSummaryView:e.recentIntentSummaryView.map(function(e){return l3.filterSensitiveLog(e)})}),e.activeContexts&&{activeContexts:Wc})},(zI||(zI={})).filterSensitiveLog=function(e){return i3(i3(i3({},e),e.message&&{message:Wc}),e.activeContexts&&{activeContexts:Wc})};function A3(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:{attachmentLinkUrl:void 0!==(e=e).attachmentLinkUrl&&null!==e.attachmentLinkUrl?e.attachmentLinkUrl:void 0,buttons:void 0!==e.buttons&&null!==e.buttons?J3(e.buttons):void 0,imageUrl:void 0!==e.imageUrl&&null!==e.imageUrl?e.imageUrl:void 0,subTitle:void 0!==e.subTitle&&null!==e.subTitle?e.subTitle:void 0,title:void 0!==e.title&&null!==e.title?e.title:void 0}})}function I3(e,t){return n=t,((e=void 0===(e=e)?new Uint8Array:e)instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)).then(function(e){return t.utf8Encoder(e)});var n}var k3,T3=function(m,y){return o3(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v;return s3(this,function(e){switch(e.label){case 0:return t=[i3({},m)],v={},[4,rA(m.body,y)];case 1:switch(h=i3.apply(void 0,t.concat([(v.body=e.sent(),v)])),g="UnknownError",g=iA(m,h.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotAcceptableException":case"com.amazonaws.lexruntimeservice#NotAcceptableException":return[3,16];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,18];case"RequestTimeoutException":case"com.amazonaws.lexruntimeservice#RequestTimeoutException":return[3,20];case"UnsupportedMediaTypeException":case"com.amazonaws.lexruntimeservice#UnsupportedMediaTypeException":return[3,22]}return[3,24];case 2:return r=[{}],[4,O3(h)];case 3:return n=i3.apply(void 0,[i3.apply(void 0,r.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 4:return i=[{}],[4,x3(h)];case 5:return n=i3.apply(void 0,[i3.apply(void 0,i.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 6:return o=[{}],[4,L3(h)];case 7:return n=i3.apply(void 0,[i3.apply(void 0,o.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 8:return s=[{}],[4,N3(h)];case 9:return n=i3.apply(void 0,[i3.apply(void 0,s.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 10:return a=[{}],[4,R3(h)];case 11:return n=i3.apply(void 0,[i3.apply(void 0,a.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 12:return u=[{}],[4,M3(h)];case 13:return n=i3.apply(void 0,[i3.apply(void 0,u.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 14:return c=[{}],[4,U3(h)];case 15:return n=i3.apply(void 0,[i3.apply(void 0,c.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 16:return l=[{}],[4,D3(h)];case 17:return n=i3.apply(void 0,[i3.apply(void 0,l.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 18:return p=[{}],[4,F3(h)];case 19:return n=i3.apply(void 0,[i3.apply(void 0,p.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 20:return d=[{}],[4,j3(h)];case 21:return n=i3.apply(void 0,[i3.apply(void 0,d.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 22:return f=[{}],[4,B3(h)];case 23:return n=i3.apply(void 0,[i3.apply(void 0,f.concat([e.sent()])),{name:g,$metadata:tA(m)}]),[3,25];case 24:h=h.body,g=h.code||h.Code||g,n=i3(i3({},h),{name:""+g,message:h.message||h.Message||g,$fault:"client",$metadata:tA(m)}),e.label=25;case 25:return g=n.message||n.Message||g,n.message=g,delete n.Message,[2,Promise.reject(Object.assign(new Error(g),n))]}})})},P3=function(h,g){return o3(void 0,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f;return s3(this,function(e){switch(e.label){case 0:return t=[i3({},h)],f={},[4,rA(h.body,g)];case 1:switch(p=i3.apply(void 0,t.concat([(f.body=e.sent(),f)])),d="UnknownError",d=iA(h,p.body)){case"BadGatewayException":case"com.amazonaws.lexruntimeservice#BadGatewayException":return[3,2];case"BadRequestException":case"com.amazonaws.lexruntimeservice#BadRequestException":return[3,4];case"ConflictException":case"com.amazonaws.lexruntimeservice#ConflictException":return[3,6];case"DependencyFailedException":case"com.amazonaws.lexruntimeservice#DependencyFailedException":return[3,8];case"InternalFailureException":case"com.amazonaws.lexruntimeservice#InternalFailureException":return[3,10];case"LimitExceededException":case"com.amazonaws.lexruntimeservice#LimitExceededException":return[3,12];case"LoopDetectedException":case"com.amazonaws.lexruntimeservice#LoopDetectedException":return[3,14];case"NotFoundException":case"com.amazonaws.lexruntimeservice#NotFoundException":return[3,16]}return[3,18];case 2:return r=[{}],[4,O3(p)];case 3:return n=i3.apply(void 0,[i3.apply(void 0,r.concat([e.sent()])),{name:d,$metadata:tA(h)}]),[3,19];case 4:return i=[{}],[4,x3(p)];case 5:return n=i3.apply(void 0,[i3.apply(void 0,i.concat([e.sent()])),{name:d,$metadata:tA(h)}]),[3,19];case 6:return o=[{}],[4,L3(p)];case 7:return n=i3.apply(void 0,[i3.apply(void 0,o.concat([e.sent()])),{name:d,$metadata:tA(h)}]),[3,19];case 8:return s=[{}],[4,N3(p)];case 9:return n=i3.apply(void 0,[i3.apply(void 0,s.concat([e.sent()])),{name:d,$metadata:tA(h)}]),[3,19];case 10:return a=[{}],[4,R3(p)];case 11:return n=i3.apply(void 0,[i3.apply(void 0,a.concat([e.sent()])),{name:d,$metadata:tA(h)}]),[3,19];case 12:return u=[{}],[4,M3(p)];case 13:return n=i3.apply(void 0,[i3.apply(void 0,u.concat([e.sent()])),{name:d,$metadata:tA(h)}]),[3,19];case 14:return c=[{}],[4,U3(p)];case 15:return n=i3.apply(void 0,[i3.apply(void 0,c.concat([e.sent()])),{name:d,$metadata:tA(h)}]),[3,19];case 16:return l=[{}],[4,F3(p)];case 17:return n=i3.apply(void 0,[i3.apply(void 0,l.concat([e.sent()])),{name:d,$metadata:tA(h)}]),[3,19];case 18:p=p.body,d=p.code||p.Code||d,n=i3(i3({},p),{name:""+d,message:p.message||p.Message||d,$fault:"client",$metadata:tA(h)}),e.label=19;case 19:return d=n.message||n.Message||d,n.message=d,delete n.Message,[2,Promise.reject(Object.assign(new Error(d),n))]}})})},O3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"BadGatewayException",$fault:"server",$metadata:tA(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},x3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"BadRequestException",$fault:"client",$metadata:tA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},L3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"ConflictException",$fault:"client",$metadata:tA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},N3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"DependencyFailedException",$fault:"client",$metadata:tA(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},R3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"InternalFailureException",$fault:"server",$metadata:tA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},M3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"LimitExceededException",$fault:"client",$metadata:tA(r),message:void 0,retryAfterSeconds:void 0},void 0!==r.headers["retry-after"]&&(t.retryAfterSeconds=r.headers["retry-after"]),void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},U3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"LoopDetectedException",$fault:"server",$metadata:tA(r),Message:void 0},void 0!==(n=r.body).Message&&null!==n.Message&&(t.Message=n.Message),[2,t]})})},D3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"NotAcceptableException",$fault:"client",$metadata:tA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},F3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"NotFoundException",$fault:"client",$metadata:tA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},j3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"RequestTimeoutException",$fault:"client",$metadata:tA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},B3=function(r,e){return o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return t={name:"UnsupportedMediaTypeException",$fault:"client",$metadata:tA(r),message:void 0},void 0!==(n=r.body).message&&null!==n.message&&(t.message=n.message),[2,t]})})},z3=function(e,t){return Object.entries(e).reduce(function(e,t){var n=a3(t,2),t=n[0],n=n[1];return null===n?e:i3(i3({},e),((e={})[t]=n,e))},{})},V3=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:i3(i3(i3({},void 0!==(e=e).name&&null!==e.name&&{name:e.name}),void 0!==e.parameters&&null!==e.parameters&&{parameters:z3(e.parameters)}),void 0!==e.timeToLive&&null!==e.timeToLive&&{timeToLive:q3(e.timeToLive)})})},q3=function(e,t){return i3(i3({},void 0!==e.timeToLiveInSeconds&&null!==e.timeToLiveInSeconds&&{timeToLiveInSeconds:e.timeToLiveInSeconds}),void 0!==e.turnsToLive&&null!==e.turnsToLive&&{turnsToLive:e.turnsToLive})},K3=function(e,t){return Object.entries(e).reduce(function(e,t){var n=a3(t,2),t=n[0],n=n[1];return null===n?e:i3(i3({},e),((e={})[t]=n,e))},{})},H3=function(e,t){return Object.entries(e).reduce(function(e,t){var n=a3(t,2),t=n[0],n=n[1];return null===n?e:i3(i3({},e),((e={})[t]=n,e))},{})},G3=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:{name:void 0!==(e=e).name&&null!==e.name?e.name:void 0,parameters:void 0!==e.parameters&&null!==e.parameters?H3(e.parameters):void 0,timeToLive:void 0!==e.timeToLive&&null!==e.timeToLive?W3(e.timeToLive):void 0}})},W3=function(e,t){return{timeToLiveInSeconds:void 0!==e.timeToLiveInSeconds&&null!==e.timeToLiveInSeconds?e.timeToLiveInSeconds:void 0,turnsToLive:void 0!==e.turnsToLive&&null!==e.turnsToLive?e.turnsToLive:void 0}},$3=function(e,t){return{score:void 0!==e.score&&null!==e.score?e.score:void 0}},Y3=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:Z3(e)})},J3=function(e,t){return(e||[]).filter(function(e){return null!=e}).map(function(e){return null===e?null:{text:void 0!==(e=e).text&&null!==e.text?e.text:void 0,value:void 0!==e.value&&null!==e.value?e.value:void 0}})},Z3=function(e,t){return{intentName:void 0!==e.intentName&&null!==e.intentName?e.intentName:void 0,nluIntentConfidence:void 0!==e.nluIntentConfidence&&null!==e.nluIntentConfidence?$3(e.nluIntentConfidence):void 0,slots:void 0!==e.slots&&null!==e.slots?eA(e.slots):void 0}},X3=function(e,t){return{contentType:void 0!==e.contentType&&null!==e.contentType?e.contentType:void 0,genericAttachments:void 0!==e.genericAttachments&&null!==e.genericAttachments?A3(e.genericAttachments):void 0,version:void 0!==e.version&&null!==e.version?e.version:void 0}},Q3=function(e,t){return{sentimentLabel:void 0!==e.sentimentLabel&&null!==e.sentimentLabel?e.sentimentLabel:void 0,sentimentScore:void 0!==e.sentimentScore&&null!==e.sentimentScore?e.sentimentScore:void 0}},eA=function(e,t){return Object.entries(e).reduce(function(e,t){var n=a3(t,2),t=n[0],n=n[1];return null===n?e:i3(i3({},e),((e={})[t]=n,e))},{})},tA=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},nA=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},rA=function(e,t){return I3(e,t).then(function(e){return e.length?JSON.parse(e):{}})},iA=function(e,t){function n(e){return e=0<=(e=0<=e.indexOf(":")?e.split(":")[0]:e).indexOf("#")?e.split("#")[1]:e}var r,i,o=(r=e.headers,i="x-amzn-errortype",Object.keys(r).find(function(e){return e.toLowerCase()===i.toLowerCase()}));return void 0!==o?n(e.headers[o]):void 0!==t.code?n(t.code):void 0!==t.__type?n(t.__type):""},oA=(r3(sA,k3=at),sA.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostContentCommand",inputFilterSensitiveLog:p3.filterSensitiveLog,outputFilterSensitiveLog:d3.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},sA.prototype.serialize=function(e,t){return a=e,u=t,o3(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return s3(this,function(e){switch(e.label){case 0:if(t=i3(i3(i3(i3(i3({"content-type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},nA(a.sessionAttributes)&&{"x-amz-lex-session-attributes":Ba.from(zc.fromObject(a.sessionAttributes)).toString("base64")}),nA(a.requestAttributes)&&{"x-amz-lex-request-attributes":Ba.from(zc.fromObject(a.requestAttributes)).toString("base64")}),nA(a.contentType)&&{"content-type":a.contentType}),nA(a.accept)&&{accept:a.accept}),nA(a.activeContexts)&&{"x-amz-lex-active-contexts":Ba.from(zc.fromObject(a.activeContexts)).toString("base64")}),n="/bot/{botName}/alias/{botAlias}/user/{userId}/content",void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",Dc(o)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",Dc(o)),void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",Dc(o)),void 0!==a.inputStream&&(r=a.inputStream),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},sA.prototype.deserialize=function(e,t){return r=e,i=t,o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){return 200!==r.statusCode&&300<=r.statusCode?[2,T3(r,i)]:(t={$metadata:tA(r),activeContexts:void 0,alternativeIntents:void 0,audioStream:void 0,botVersion:void 0,contentType:void 0,dialogState:void 0,inputTranscript:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},void 0!==r.headers["content-type"]&&(t.contentType=r.headers["content-type"]),void 0!==r.headers["x-amz-lex-intent-name"]&&(t.intentName=r.headers["x-amz-lex-intent-name"]),void 0!==r.headers["x-amz-lex-nlu-intent-confidence"]&&(t.nluIntentConfidence=new zc(Ba.from(r.headers["x-amz-lex-nlu-intent-confidence"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-alternative-intents"]&&(t.alternativeIntents=new zc(Ba.from(r.headers["x-amz-lex-alternative-intents"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-slots"]&&(t.slots=new zc(Ba.from(r.headers["x-amz-lex-slots"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-session-attributes"]&&(t.sessionAttributes=new zc(Ba.from(r.headers["x-amz-lex-session-attributes"],"base64").toString("ascii"))),void 0!==r.headers["x-amz-lex-sentiment"]&&(t.sentimentResponse=r.headers["x-amz-lex-sentiment"]),void 0!==r.headers["x-amz-lex-message"]&&(t.message=r.headers["x-amz-lex-message"]),void 0!==r.headers["x-amz-lex-message-format"]&&(t.messageFormat=r.headers["x-amz-lex-message-format"]),void 0!==r.headers["x-amz-lex-dialog-state"]&&(t.dialogState=r.headers["x-amz-lex-dialog-state"]),void 0!==r.headers["x-amz-lex-slot-to-elicit"]&&(t.slotToElicit=r.headers["x-amz-lex-slot-to-elicit"]),void 0!==r.headers["x-amz-lex-input-transcript"]&&(t.inputTranscript=r.headers["x-amz-lex-input-transcript"]),void 0!==r.headers["x-amz-lex-bot-version"]&&(t.botVersion=r.headers["x-amz-lex-bot-version"]),void 0!==r.headers["x-amz-lex-session-id"]&&(t.sessionId=r.headers["x-amz-lex-session-id"]),void 0!==r.headers["x-amz-lex-active-contexts"]&&(t.activeContexts=new zc(Ba.from(r.headers["x-amz-lex-active-contexts"],"base64").toString("ascii"))),n=r.body,t.audioStream=n,[2,Promise.resolve(t)])})});var r,i},sA);function sA(e){var t=k3.call(this)||this;return t.input=e,t}var aA,uA=(r3(cA,aA=at),cA.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(Wd(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),e={logger:t.logger,clientName:"LexRuntimeServiceClient",commandName:"PostTextCommand",inputFilterSensitiveLog:f3.filterSensitiveLog,outputFilterSensitiveLog:g3.filterSensitiveLog},i=t.requestHandler;return r.resolve(function(e){return i.handle(e.request,n||{})},e)},cA.prototype.serialize=function(e,t){return a=e,u=t,o3(void 0,void 0,void 0,function(){var t,n,r,i,o,s;return s3(this,function(e){switch(e.label){case 0:if(t={"content-type":"application/json"},n="/bot/{botName}/alias/{botAlias}/user/{userId}/text",void 0===a.botName)throw new Error("No value provided for input HTTP label: botName.");if((o=a.botName).length<=0)throw new Error("Empty value provided for input HTTP label: botName.");if(n=n.replace("{botName}",Dc(o)),void 0===a.botAlias)throw new Error("No value provided for input HTTP label: botAlias.");if((o=a.botAlias).length<=0)throw new Error("Empty value provided for input HTTP label: botAlias.");if(n=n.replace("{botAlias}",Dc(o)),void 0===a.userId)throw new Error("No value provided for input HTTP label: userId.");if((o=a.userId).length<=0)throw new Error("Empty value provided for input HTTP label: userId.");return n=n.replace("{userId}",Dc(o)),r=JSON.stringify(i3(i3(i3(i3({},void 0!==a.activeContexts&&null!==a.activeContexts&&{activeContexts:V3(a.activeContexts)}),void 0!==a.inputText&&null!==a.inputText&&{inputText:a.inputText}),void 0!==a.requestAttributes&&null!==a.requestAttributes&&{requestAttributes:K3(a.requestAttributes)}),void 0!==a.sessionAttributes&&null!==a.sessionAttributes&&{sessionAttributes:K3(a.sessionAttributes)})),[4,u.endpoint()];case 1:return s=e.sent(),i=s.hostname,o=s.protocol,o=void 0===o?"https":o,s=s.port,[2,new na({protocol:o,hostname:i,port:s,method:"POST",headers:t,path:n,body:r})]}})});var a,u},cA.prototype.deserialize=function(e,t){return r=e,i=t,o3(void 0,void 0,void 0,function(){var t,n;return s3(this,function(e){switch(e.label){case 0:return 200!==r.statusCode&&300<=r.statusCode?[2,P3(r,i)]:(t={$metadata:tA(r),activeContexts:void 0,alternativeIntents:void 0,botVersion:void 0,dialogState:void 0,intentName:void 0,message:void 0,messageFormat:void 0,nluIntentConfidence:void 0,responseCard:void 0,sentimentResponse:void 0,sessionAttributes:void 0,sessionId:void 0,slotToElicit:void 0,slots:void 0},[4,rA(r.body,i)]);case 1:return void 0!==(n=e.sent()).activeContexts&&null!==n.activeContexts&&(t.activeContexts=G3(n.activeContexts)),void 0!==n.alternativeIntents&&null!==n.alternativeIntents&&(t.alternativeIntents=Y3(n.alternativeIntents)),void 0!==n.botVersion&&null!==n.botVersion&&(t.botVersion=n.botVersion),void 0!==n.dialogState&&null!==n.dialogState&&(t.dialogState=n.dialogState),void 0!==n.intentName&&null!==n.intentName&&(t.intentName=n.intentName),void 0!==n.message&&null!==n.message&&(t.message=n.message),void 0!==n.messageFormat&&null!==n.messageFormat&&(t.messageFormat=n.messageFormat),void 0!==n.nluIntentConfidence&&null!==n.nluIntentConfidence&&(t.nluIntentConfidence=$3(n.nluIntentConfidence)),void 0!==n.responseCard&&null!==n.responseCard&&(t.responseCard=X3(n.responseCard)),void 0!==n.sentimentResponse&&null!==n.sentimentResponse&&(t.sentimentResponse=Q3(n.sentimentResponse)),void 0!==n.sessionAttributes&&null!==n.sessionAttributes&&(t.sessionAttributes=eA(n.sessionAttributes)),void 0!==n.sessionId&&null!==n.sessionId&&(t.sessionId=n.sessionId),void 0!==n.slotToElicit&&null!==n.slotToElicit&&(t.slotToElicit=n.slotToElicit),void 0!==n.slots&&null!==n.slots&&(t.slots=eA(n.slots)),[2,Promise.resolve(t)]}})});var r,i},cA);function cA(e){var t=aA.call(this)||this;return t.input=e,t}var lA,pA,dA=(lA=function(e,t){return(lA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}lA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),fA=function(){return(fA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},hA=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},gA=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},vA=new _.ConsoleLogger("AWSLexProvider"),mA=(dA(yA,pA=y2),yA.prototype.getProviderName=function(){return"AWSLexProvider"},yA.prototype.reportBotStatus=function(e,t){var n=this;vA.debug("postContent state",e.dialogState),"ReadyForFulfillment"!==e.dialogState&&"Fulfilled"!==e.dialogState||("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t](null,{slots:e.slots})},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete(null,{slots:e.slots})},0)),"Failed"===e.dialogState&&("function"==typeof this._botsCompleteCallback[t]&&setTimeout(function(){return n._botsCompleteCallback[t]("Bot conversation failed")},0),this._config&&"function"==typeof this._config[t].onComplete&&setTimeout(function(){return n._config[t].onComplete("Bot conversation failed")},0))},yA.prototype.sendMessage=function(a,u){return hA(this,void 0,void 0,function(){var t,n,r,i,o,s;return gA(this,function(e){switch(e.label){case 0:return this._config[a]?[4,_.Credentials.get()]:[2,Promise.reject("Bot "+a+" does not exist")];case 1:if(!(t=e.sent()))return[2,Promise.reject("No credentials")];if(this.lexRuntimeServiceClient=new _3({region:this._config[a].region,credentials:t,customUserAgent:_.getAmplifyUserAgent()}),"string"!=typeof u)return[3,6];i={botAlias:this._config[a].alias,botName:a,inputText:u,userId:t.identityId},vA.debug("postText to lex",u),e.label=2;case 2:return e.trys.push([2,4,,5]),n=new uA(i),[4,this.lexRuntimeServiceClient.send(n)];case 3:return o=e.sent(),this.reportBotStatus(o,a),[2,o];case 4:return r=e.sent(),[2,Promise.reject(r)];case 5:return[3,11];case 6:n=u.content,r=u.options.messageType,i="voice"===r?{botAlias:this._config[a].alias,botName:a,contentType:"audio/x-l16; sample-rate=16000",inputStream:n,userId:t.identityId,accept:"audio/mpeg"}:{botAlias:this._config[a].alias,botName:a,contentType:"text/plain; charset=utf-8",inputStream:n,userId:t.identityId,accept:"audio/mpeg"},vA.debug("postContent to lex",u),e.label=7;case 7:return e.trys.push([7,10,,11]),i=new oA(i),[4,this.lexRuntimeServiceClient.send(i)];case 8:return[4,function(e){if(e instanceof Blob||e instanceof ReadableStream)return new Response(e).arrayBuffer().then(function(e){return new Uint8Array(e)});throw new Error("Readable is not supported.")}((o=e.sent()).audioStream)];case 9:return s=e.sent(),this.reportBotStatus(o,a),[2,fA(fA({},o),{audioStream:s})];case 10:return s=e.sent(),[2,Promise.reject(s)];case 11:return[2]}})})},yA.prototype.onComplete=function(e,t){if(!this._config[e])throw new ErrorEvent("Bot "+e+" does not exist");this._botsCompleteCallback[e]=t},yA);function yA(e){e=pA.call(this,e=void 0===e?{}:e)||this;return e._botsCompleteCallback={},e}var bA=function(){return(bA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},SA=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},wA=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},CA=new _.ConsoleLogger("Interactions");function _A(e){this._options=e,CA.debug("Interactions Options",this._options),this._pluggables={}}var EA=new(_A.prototype.getModuleName=function(){return"Interactions"},_A.prototype.configure=function(e){var t=this,e=e?e.Interactions||e:{};CA.debug("configure Interactions",{opt:e}),this._options=bA(bA({bots:{}},e),e.Interactions);var e=this._options.aws_bots_config,n=this._options.bots;return!Object.keys(n).length&&e&&Array.isArray(e)&&e.forEach(function(e){t._options.bots[e.name]=e}),!this._pluggables.AWSLexProvider&&n&&Object.keys(n).map(function(e){return n[e]}).find(function(e){return!e.providerName||"AWSLexProvider"===e.providerName})&&(this._pluggables.AWSLexProvider=new mA),Object.keys(this._pluggables).map(function(e){t._pluggables[e].configure(t._options.bots)}),this._options},_A.prototype.addPluggable=function(e){if(e&&"Interactions"===e.getCategory()){if(this._pluggables[e.getProviderName()])throw new Error("Bot "+e.getProviderName()+" already plugged");e.configure(this._options.bots),this._pluggables[e.getProviderName()]=e}},_A.prototype.send=function(n,r){return SA(this,void 0,void 0,function(){var t;return wA(this,function(e){switch(e.label){case 0:if(!this._options.bots||!this._options.bots[n])throw new Error("Bot "+n+" does not exist");if(t=this._options.bots[n].providerName||"AWSLexProvider",!this._pluggables[t])throw new Error("Bot "+t+" does not have valid pluggin did you try addPluggable first?");return[4,this._pluggables[t].sendMessage(n,r)];case 1:return[2,e.sent()]}})})},_A.prototype.onComplete=function(e,t){if(!this._options.bots||!this._options.bots[e])throw new Error("Bot "+e+" does not exist");var n=this._options.bots[e].providerName||"AWSLexProvider";if(!this._pluggables[n])throw new Error("Bot "+n+" does not have valid pluggin did you try addPluggable first?");this._pluggables[n].onComplete(e,t)},_A)(null);_.Amplify.register(EA);var AA=function(){return(AA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},IA=new _.ConsoleLogger("AbstractXRProvider"),kA=(TA.prototype.configure=function(e){return this._config=AA(AA({},e=void 0===e?{}:e),this._config),IA.debug("configure "+this.getProviderName(),this._config),this.options},TA.prototype.getCategory=function(){return"XR"},Object.defineProperty(TA.prototype,"options",{get:function(){return AA({},this._config)},enumerable:!0,configurable:!0}),TA);function TA(e){this._config=e=void 0===e?{}:e}var PA,OA,xA=(PA=function(e,t){return(PA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}PA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),LA=(OA=Error,xA(NA,OA),NA);function NA(){return null!==OA&&OA.apply(this,arguments)||this}var RA,MA=(xA(UA,RA=LA),UA);function UA(){return null!==RA&&RA.apply(this,arguments)||this}var DA,FA=(xA(jA,DA=LA),jA);function jA(){return null!==DA&&DA.apply(this,arguments)||this}var BA,zA=(xA(VA,BA=LA),VA);function VA(){return null!==BA&&BA.apply(this,arguments)||this}var qA,KA=(xA(HA,qA=LA),HA);function HA(){return null!==qA&&qA.apply(this,arguments)||this}var GA,WA=(xA($A,GA=LA),$A);function $A(){return null!==GA&&GA.apply(this,arguments)||this}var YA,JA=(xA(ZA,YA=LA),ZA);function ZA(){return null!==YA&&YA.apply(this,arguments)||this}var XA,QA,eI=(XA=function(e,t){return(XA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}XA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),tI=function(){return(tI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},nI=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},rI=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},iI=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},oI=new _.ConsoleLogger("SumerianProvider"),sI=(eI(aI,QA=kA),aI.prototype.getProviderName=function(){return"SumerianProvider"},aI.prototype.loadScript=function(r){return nI(this,void 0,void 0,function(){return rI(this,function(e){return[2,new Promise(function(t,n){var e=document.createElement("script");e.src=r,e.addEventListener("load",function(e){t()}),e.addEventListener("error",function(e){n(new Error("Failed to load script: "+r))}),document.head.appendChild(e)})]})})},aI.prototype.loadScene=function(S,w,C){return nI(this,void 0,void 0,function(){var t,n,r,i,o,s,a,u,c,l,p,d,f,h,g,v,m,y,b;return rI(this,function(e){switch(e.label){case 0:if(!S)throw u="No scene name passed into loadScene",oI.error(u),new WA(u);if(!w)throw u="No dom element id passed into loadScene",oI.error(u),new KA(u);if(!(t=document.getElementById(w)))throw u="DOM element id, "+w+" not found",oI.error(u),new KA(u);if(!(n=this.getScene(S)).sceneConfig)throw u="No scene config configured for scene: "+S,oI.error(u),new WA(u);if(r=n.sceneConfig.url,i=n.sceneConfig.sceneId,n.sceneConfig.hasOwnProperty("region"))c=n.sceneConfig.region;else{if(!this.options.hasOwnProperty("region"))throw u="No region configured for scene: "+S,oI.error(u),new WA(u);c=this.options.region}o={region:c,customUserAgent:_.Constants.userAgent+"-SumerianScene"},s={headers:{"X-Amz-User-Agent":_.Constants.userAgent}},a=r,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,_.Credentials.get()];case 2:return u=e.sent(),o.credentials=u,u={secret_key:u.secretAccessKey,access_key:u.accessKeyId,session_token:u.sessionToken},c={region:c,service:"sumerian"},c=_.Signer.sign({method:"GET",url:r},u,c),s.headers=tI(tI({},s.headers),c.headers),a=c.url,[3,4];case 3:return e.sent(),oI.debug("No credentials available, the request will be unsigned"),[3,4];case 4:return[4,fetch(a,s)];case 5:return[4,(p=e.sent()).json()];case 6:if(l=e.sent(),403===p.status)throw l.message?(oI.error("Failure to authenticate user: "+l.message),new WA("Failure to authenticate user: "+l.message)):(oI.error("Failure to authenticate user"),new WA("Failure to authenticate user"));return p=l.bundleData[i],[4,fetch(p.url,{headers:p.headers})];case 7:return[4,e.sent().json()];case 8:d=e.sent(),e.label=9;case 9:return e.trys.push([9,11,,12]),[4,this.loadScript(d[i].bootstrapperUrl)];case 10:return e.sent(),[3,12];case 11:throw f=e.sent(),oI.error(f),new WA(f);case 12:return f=C.progressCallback||void 0,h=n.publishParamOverrides||void 0,h={element:t,sceneId:i,sceneBundle:d,apiResponse:l,progressCallback:f,publishParamOverrides:h,awsSDKConfigOverride:o},[4,window.SumerianBootstrapper.loadScene(h)];case 13:h=e.sent(),n.sceneController=h,n.isLoaded=!0;try{for(g=iI(h.sceneLoadWarnings),v=g.next();!v.done;v=g.next())m=v.value,oI.warn("loadScene warning: "+m)}catch(e){y={error:e}}finally{try{v&&!v.done&&(b=g.return)&&b.call(g)}finally{if(y)throw y.error}}return[2]}})})},aI.prototype.isSceneLoaded=function(e){return this.getScene(e).isLoaded||!1},aI.prototype.getScene=function(e){var t;if(!this.options.scenes)throw oI.error(t="No scenes were defined in the configuration"),new MA(t);if(!e)throw oI.error(t="No scene name was passed"),new FA(t);if(this.options.scenes[e])return this.options.scenes[e];throw oI.error(t="Scene '"+e+"' is not configured"),new FA(t)},aI.prototype.getSceneController=function(e){if(!this.options.scenes)throw oI.error(n="No scenes were defined in the configuration"),new MA(n);var t=this.options.scenes[e];if(!t)throw oI.error(n="Scene '"+e+"' is not configured"),new FA(n);var n,t=t.sceneController;if(t)return t;throw oI.error(n="Scene controller for '"+e+"' has not been loaded"),new zA(n)},aI.prototype.isVRCapable=function(e){return this.getSceneController(e).vrCapable},aI.prototype.isVRPresentationActive=function(e){return this.getSceneController(e).vrPresentationActive},aI.prototype.start=function(e){this.getSceneController(e).start()},aI.prototype.enterVR=function(e){this.getSceneController(e).enterVR()},aI.prototype.exitVR=function(e){this.getSceneController(e).exitVR()},aI.prototype.isMuted=function(e){return this.getSceneController(e).muted},aI.prototype.setMuted=function(e,t){this.getSceneController(e).muted=t},aI.prototype.onSceneEvent=function(e,t,n){this.getSceneController(e).on(t,n)},aI.prototype.enableAudio=function(e){this.getSceneController(e).enableAudio()},aI);function aI(e){return QA.call(this,e=void 0===e?{}:e)||this}var uI=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},cI=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},lI=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},pI=new _.ConsoleLogger("XR");function dI(e){this._options=e,pI.debug("XR Options",this._options),this._defaultProvider="SumerianProvider",this._pluggables={},this.addPluggable(new sI)}var fI=new(dI.prototype.configure=function(e){var n=this,r=e?e.XR||e:{};return pI.debug("configure XR",{opt:r}),this._options=Object.assign({},this._options,r),Object.entries(this._pluggables).map(function(e){var t=lI(e,2),e=t[0],t=t[1];e!==n._defaultProvider||r[n._defaultProvider]?t.configure(n._options[e]):t.configure(n._options)}),this._options},dI.prototype.addPluggable=function(t){return uI(this,void 0,void 0,function(){return cI(this,function(e){return t&&"XR"===t.getCategory()?(this._pluggables[t.getProviderName()]=t,[2,t.configure(this._options)]):[2]})})},dI.prototype.loadScene=function(t,n,r,i){return void 0===r&&(r={}),void 0===i&&(i=this._defaultProvider),uI(this,void 0,void 0,function(){return cI(this,function(e){switch(e.label){case 0:if(!this._pluggables[i])throw new JA("Provider '"+i+"' not configured");return[4,this._pluggables[i].loadScene(t,n,r)];case 1:return[2,e.sent()]}})})},dI.prototype.isSceneLoaded=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new JA("Provider '"+t+"' not configured");return this._pluggables[t].isSceneLoaded(e)},dI.prototype.getSceneController=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new JA("Provider '"+t+"' not configured");return this._pluggables[t].getSceneController(e)},dI.prototype.isVRCapable=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new JA("Provider '"+t+"' not configured");return this._pluggables[t].isVRCapable(e)},dI.prototype.isVRPresentationActive=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new JA("Provider '"+t+"' not configured");return this._pluggables[t].isVRPresentationActive(e)},dI.prototype.start=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new JA("Provider '"+t+"' not configured");return this._pluggables[t].start(e)},dI.prototype.enterVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new JA("Provider '"+t+"' not configured");return this._pluggables[t].enterVR(e)},dI.prototype.exitVR=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new JA("Provider '"+t+"' not configured");return this._pluggables[t].exitVR(e)},dI.prototype.isMuted=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new JA("Provider '"+t+"' not configured");return this._pluggables[t].isMuted(e)},dI.prototype.setMuted=function(e,t,n){if(void 0===n&&(n=this._defaultProvider),!this._pluggables[n])throw new JA("Provider '"+n+"' not configured");return this._pluggables[n].setMuted(e,t)},dI.prototype.onSceneEvent=function(e,t,n,r){if(void 0===r&&(r=this._defaultProvider),!this._pluggables[r])throw new JA("Provider '"+r+"' not configured");return this._pluggables[r].onSceneEvent(e,t,n)},dI.prototype.enableAudio=function(e,t){if(void 0===t&&(t=this._defaultProvider),!this._pluggables[t])throw new JA("Provider '"+t+"' not configured");return this._pluggables[t].enableAudio(e)},dI)(null);_.Amplify.register(fI);var hI=(gI.prototype.auth=function(){return this._auth||wv},gI.prototype.analytics=function(){return this._analytics||Th},gI.prototype.storage=function(){return this._storage||r2},gI.prototype.api=function(){return this._api||XE},gI.prototype.interactions=function(){return this._interactions||EA},gI.prototype.cache=function(){return this._cache},gI.prototype.pubsub=function(){return this._pubsub||FE},gI.prototype.logger=function(e,t){return new this._logger(e,t)},gI.prototype.xr=function(){return this._xr||fI},gI.prototype.i18n=function(){return this._i18n},gI.prototype.authState=function(){return this._authState},gI.prototype.setAuthState=function(e){this._authState.next(e)},gI.decorators=[{type:f.Injectable}],gI.ctorParameters=function(){return[{type:void 0,decorators:[{type:f.Inject,args:["modules"]},{type:f.Optional}]}]},gI);function gI(e){this.modules=e=void 0===e?{}:e,this._authState=new ye,this.authStateChange$=this._authState.asObservable();e=e||U;Eo(this._authState,e.Auth),this._auth=e.Auth,this._analytics=e.Analytics,this._storage=e.Storage,this._api=e.API,this._cache=e.Cache,this._pubsub=e.PubSub,this._interactions=e.Interactions,this._xr=e.XR,this._i18n=_.I18n,this._logger=_.Logger}var vI=(mI.prototype.ngOnInit=function(){var t=this;if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider");this.amplifyService.auth().currentAuthenticatedUser().then(function(e){"loading"===t.authState.state&&e&&t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){"loading"===t.authState.state&&t.amplifyService.setAuthState({state:"signIn",user:null})})},Object.defineProperty(mI.prototype,"data",{set:function(e){e.signUpConfig&&(this._signUpConfig=e.signUpConfig),e.hide&&(this.hide=e.hide),this._usernameAttributes=e.usernameAttributes||this._usernameAttributes||"username"},enumerable:!0,configurable:!0}),Object.defineProperty(mI.prototype,"signUpConfig",{set:function(e){this._signUpConfig=e},enumerable:!0,configurable:!0}),Object.defineProperty(mI.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e||"username"},enumerable:!0,configurable:!0}),mI.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){t.authState=e},function(){t.authState={state:"signIn",user:null}})},mI.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},mI.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-core",template:'\n  <div class="amplify-authenticator">\n    <amplify-auth-sign-in-core\n      *ngIf="!shouldHide(\'SignIn\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-in-core>\n\n    <amplify-auth-sign-up-core\n      *ngIf="!shouldHide(\'SignUp\')"\n      [authState]="authState"\n      [signUpConfig]="_signUpConfig"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-sign-up-core>\n\n    <amplify-auth-confirm-sign-up-core\n      *ngIf="!shouldHide(\'ConfirmSignUp\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-up-core>\n\n    <amplify-auth-confirm-sign-in-core\n      *ngIf="!shouldHide(\'ConfirmSignIn\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-confirm-sign-in-core>\n\n    <amplify-auth-forgot-password-core\n      *ngIf="!shouldHide(\'ForgotPassword\')"\n      [authState]="authState"\n      [usernameAttributes]="_usernameAttributes"\n      [hide]="hide"\n    ></amplify-auth-forgot-password-core>\n\n    <amplify-auth-greetings-core\n    *ngIf="!shouldHide(\'Greetings\')"\n    [authState]="authState"\n    [usernameAttributes]="_usernameAttributes"\n    ></amplify-auth-greetings-core>\n\n     <amplify-auth-require-new-password-core\n      *ngIf="!shouldHide(\'RequireNewPassword\')"\n      [authState]="authState"\n      [hide]="hide"\n    ></amplify-auth-require-new-password-core>\n  </div>\n'}]}],mI.ctorParameters=function(){return[{type:hI}]},mI.propDecorators={hide:[{type:f.Input}],data:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},mI);function mI(e){this.amplifyService=e,this.authState={state:"loading",user:null},this._signUpConfig={},this._usernameAttributes="username",this.hide=[],this.subscribe()}var yI,bI,SI=(yI=function(e,t){return(yI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}yI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),wI=(SI(CI,bI=vI),CI.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator-ionic",template:'\n<div class="amplify-authenticator amplify-authenticator-ionic ">\n\n<amplify-auth-sign-in-ionic\n  *ngIf="!shouldHide(\'SignIn\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-in-ionic>\n\n<amplify-auth-sign-up-ionic\n  *ngIf="!shouldHide(\'SignUp\')"\n  [authState]="authState"\n  [signUpConfig]="_signUpConfig"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-sign-up-ionic>\n\n<amplify-auth-confirm-sign-up-ionic\n  *ngIf="!shouldHide(\'ConfirmSignUp\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-confirm-sign-up-ionic>\n\n<amplify-auth-confirm-sign-in-ionic\n  *ngIf="!shouldHide(\'ConfirmSignIn\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-confirm-sign-in-ionic>\n\n<amplify-auth-forgot-password-ionic\n  *ngIf="!shouldHide(\'ForgotPassword\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n  [hide]="hide"\n></amplify-auth-forgot-password-ionic>\n\n<amplify-auth-greetings-ionic\n  *ngIf="!shouldHide(\'Greetings\')"\n  [authState]="authState"\n  [usernameAttributes]="_usernameAttributes"\n></amplify-auth-greetings-ionic>\n\n<amplify-auth-require-new-password-ionic\n  *ngIf="!shouldHide(\'RequireNewPassword\')"\n  [authState]="authState"\n  [hide]="hide"\n></amplify-auth-require-new-password-ionic>\n</div>\n'}]}],CI.ctorParameters=function(){return[{type:hI}]},CI);function CI(e){var t=bI.call(this,e)||this;return t.amplifyService=e,t}var _I=(EI.prototype.ngOnInit=function(){this.loadComponent()},EI.prototype.ngOnDestroy=function(){},EI.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(wI,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}):new Co(vI,{hide:this.hide,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},EI.decorators=[{type:f.Component,args:[{selector:"amplify-authenticator",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],EI.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},EI.propDecorators={framework:[{type:f.Input}],hide:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[cn]}]},EI);function EI(e){this.componentFactoryResolver=e,this.hide=[],this.usernameAttributes="username"}var AI="sumerian-scene-container",II="sumerian-scene",kI="sumerian-scene-loading",TI="sumerian-scene-loading-logo",PI="sumerian-scene-loading-scene-name",OI="sumerian-scene-loading-bar",xI="sumerian-scene-error-text",LI="sumerian-scene-bar",NI="sumerian-scene-actions",RI={section:"sign-in-section",headerSection:"sign-in-header-section",bodySection:"sign-in-body-section",footerSection:"sign-in-footer-section",usernameInput:"username-input",passwordInput:"sign-in-password-input",forgotPasswordLink:"sign-in-forgot-password-link",signInButton:"sign-in-sign-in-button",createAccountLink:"sign-in-create-account-link",signInError:"authenticator-error"},MI={section:"sign-up-section",headerSection:"sign-up-header-section",bodySection:"sign-up-body-section",nonPhoneNumberInput:"sign-up-non-phone-number-input",phoneNumberInput:"sign-up-phone-number-input",dialCodeSelect:"sign-up-dial-code-select",footerSection:"sign-up-footer-section",createAccountButton:"sign-up-create-account-button",signInLink:"sign-up-sign-in-link",signUpButton:"sign-up-sign-up-button",signInButton:"sign-up-sign-in-button",confirmButton:"sign-up-confirm-button"},UI={section:"require-new-password-section",headerSection:"require-new-password-header-section",footerSection:"require-new-password-footer-section",bodySection:"require-new-password-body-section",newPasswordInput:"require-new-password-new-password-input",backToSignInLink:"require-new-password-back-to-sign-in-link",submitButton:"require-new-password-submit-button"},DI={usernameInput:"username-input",emailInput:"email-input",phoneNumberInput:"phone-number-input",dialCodeSelect:"dial-code-select"},FI={signOutButton:"sign-out-button",signOutLink:"greeting-sign-out-link",navRight:"greetings-nav-right"},jI={section:"confirm-sign-up-section",headerSection:"confirm-sign-up-header-section",bodySection:"confirm-sign-up-body-section",usernameInput:"confirm-sign-up-username-input",confirmationCodeInput:"confirm-sign-up-confirmation-code-input",resendCodeLink:"confirm-sign-up-resend-code-link",confirmButton:"confirm-sign-up-confirm-button",backToSignInLink:"confirm-sign-up-back-to-sign-in-link"},BI={section:"confirm-sign-in-section",headerSection:"confirm-sign-in-header-section",bodySection:"confirm-sign-in-body-section",codeInput:"confirm-sign-in-code-input",confirmButton:"confirm-sign-in-confirm-button",backToSignInLink:"confirm-sign-in-back-to-sign-in-link"},zI={section:"forgot-password-section",headerSection:"forgot-password-header-section",bodySection:"forgot-password-body-section",submitButton:"forgot-password-submit-button",sendCodeButton:"forgot-password-send-code-button",resendCodeLink:"forgot-password-resend-code-link",backToSignInLink:"forgot-password-back-to-sign-in-link",usernameInput:"username-input",codeInput:"forgot-password-code-input",newPasswordInput:"forgot-password-new-password-input"},at='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+BI.section+'">\n    <div class="amplify-form-body" data-test="'+BI.bodySection+'">\n    <div class="amplify-form-header" data-test="'+BI.headerSection+'">{{ this.amplifyService.i18n().get(\'Confirm Sign in\') }}</div>\n      <div class="amplify-form-row" *ngIf="!shouldHide(\'SignIn\')">\n        <label class="amplify-input-label" for="code">\n          {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n        </label>\n        <input #code\n          (change)="setCode(code.value)"\n          (keyup)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          class="amplify-form-input"\n          type="text"\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n          data-test="'+BI.codeInput+'"\n        />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a \n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+BI.backToSignInLink+'"\n              >\n                {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button\n            class="amplify-form-button"\n            data-test="'+BI.confirmButton+'"\n            (click)="onConfirm()"\n            >\n              {{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n        </div>\n      </div>\n      </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',VI=(Object.defineProperty(qI.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignIn"===e.authState.state},enumerable:!0,configurable:!0}),Object.defineProperty(qI.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignIn"===e.state},enumerable:!0,configurable:!0}),qI.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},qI.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},qI.prototype.setCode=function(e){this.code=e},qI.prototype.onConfirm=function(){var t=this,e=this._authState.user,n=e.challengeName,n="SOFTWARE_TOKEN_MFA"===n?n:null;this.amplifyService.auth().confirmSignIn(e,this.code,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signedIn",user:e})}).catch(function(e){return t._setError(e)})},qI.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},qI.prototype.onAlertClose=function(){this._setError(null)},qI.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},qI.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-core",template:at}]}],qI.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},qI.propDecorators={data:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}]},qI);function qI(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("ConfiSignInComponent")}var KI,HI,dA=(KI=function(e,t){return(KI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}KI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y2='\n<div class="amplify-form-container" *ngIf="_show" data-test="'+BI.section+'">\n  <div class="amplify-form-body" data-test="'+BI.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+BI.headerSection+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Confirm your sign in code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+BI.codeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button expand="block" color="primary"\n          (click)="onConfirm()"\n          data-test="'+BI.confirmButton+'"\n        >{{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',GI=(dA(WI,HI=VI),WI.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in-ionic",template:y2}]}],WI.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},WI);function WI(e){var t=HI.call(this,e)||this;return t.amplifyService=e,t}$I.prototype.ngOnInit=function(){this.loadComponent()},$I.prototype.ngOnDestroy=function(){},$I.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(GI,{authState:this.authState,hide:this.hide}):new Co(VI,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},$I.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],$I.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},$I.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[cn]}]},xA=$I;function $I(e){this.componentFactoryResolver=e,this.hide=[]}function YI(e,t){return 0<e.filter(function(e){return e===t}).length}function JI(e,t){return"+"+e+t.replace(/[-()]/g,"")}var ZI={email:"Email",phone_number:"Phone Number",username:"Username"},LA='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+jI.section+'">\n  <div class="amplify-form-body" data-test="'+jI.bodySection+'">\n    <div\n      class="amplify-form-header"\n      data-test="'+jI.headerSection+'"\n    >\n      {{ this.amplifyService.i18n().get(\'Confirm Sign up\') }}</div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="amplifyUsername">\n        {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n      </label>\n      <input\n        #amplifyUsername\n        class="amplify-form-input"\n        type="text"\n        disabled\n        placeholder="{{ this.amplifyService.i18n().get(getUsernameLabel()) }}"\n        [value]="username"\n        data-test="'+jI.usernameInput+'"\n      />\n    </div>\n    <div class="amplify-form-row">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (change)="setCode(code.value)"\n        (keyup)="setCode(code.value)"\n        (keyup.enter)="onConfirm()"\n        class="amplify-form-input"\n        type="text"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter your Code\') }}"\n        data-test="'+jI.confirmationCodeInput+'"\n      />\n      <span class="amplify-form-action">{{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a class="amplify-form-link"\n            (click)="onResend()"\n            data-test="'+jI.resendCodeLink+'"\n          >{{ this.amplifyService.i18n().get(\'Resend Code\') }}</a></span>\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <div class="amplify-form-actions-left">\n          <a\n            class="amplify-form-link"\n            (click)="onSignIn()"\n            data-test="'+jI.backToSignInLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n          </a>\n        </div>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button\n          class="amplify-form-button"\n          (click)="onConfirm()"\n          data-test="'+jI.confirmButton+'"\n          >{{ this.amplifyService.i18n().get(\'Confirm\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n',XI=(Object.defineProperty(QI.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._authState=e.authState,this._show="confirmSignUp"===e.authState.state,this.username=e.authState.user&&e.authState.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(QI.prototype,"authState",{set:function(e){this._authState=e,this._show="confirmSignUp"===e.state,this.username=e.user&&e.user.username||""},enumerable:!0,configurable:!0}),Object.defineProperty(QI.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),QI.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},QI.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},QI.prototype.setUsername=function(e){this.username=e},QI.prototype.setCode=function(e){this.code=e},QI.prototype.onConfirm=function(){var t=this;this.amplifyService.auth().confirmSignUp(this.username,this.code).then(function(){return t.logger.info("confirm success")}).catch(function(e){return t._setError(e)})},QI.prototype.onResend=function(){var t=this;this.amplifyService.auth().resendSignUp(this.username).then(function(){return t.logger.info("code resent")}).catch(function(e){return t._setError(e)})},QI.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},QI.prototype.onAlertClose=function(){this._setError(null)},QI.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},QI.prototype.getUsernameLabel=function(){return ZI[this._usernameAttributes]||this._usernameAttributes},QI.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-core",template:LA}]}],QI.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},QI.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},QI);function QI(e){this.amplifyService=e,this._usernameAttributes="username",this.hide=[],this.logger=this.amplifyService.logger("ConfirmSignUpComponent")}var e4,t4,eI=(e4=function(e,t){return(e4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}e4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),kA='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+jI.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+jI.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+jI.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Confirm your sign up code\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(getUsernameLabel()) }}\n        </ion-label>\n        <ion-input type="text"\n          class="amplify-form-input"\n          (input)="setUsername($event.target.value)"\n          [value]="username"\n          data-test="'+jI.usernameInput+'"\n        ></ion-input>\n      </ion-item>\n\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Code *\') }}\n        </ion-label>\n        <ion-input\n          #code\n          type="text"\n          class="amplify-form-input"\n          (input)="setCode(code.value)"\n          (keyup.enter)="onConfirm()"\n          data-test="'+jI.confirmationCodeInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div>\n        <ion-button\n          expand="block"\n          color="primary"\n          (click)="onConfirm()"\n          data-test="'+jI.confirmButton+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Confirm Code\') }}</ion-button>\n      </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+jI.backToSignInLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onResend()"\n          data-test="'+jI.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n</div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',n4=(eI(r4,t4=XI),r4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up-ionic",template:kA}]}],r4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},r4);function r4(e){var t=t4.call(this,e)||this;return t.amplifyService=e,t}var i4,SI=(o4.prototype.ngOnInit=function(){this.loadComponent()},o4.prototype.ngOnDestroy=function(){},o4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(n4,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}):new Co(XI,{authState:this.authState,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},o4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-confirm-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],o4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},o4.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[cn]}]},o4);function o4(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}(at=i4=i4||{}).EMAIL="email",at.PHONE_NUMBER="phone_number",at.USERNAME="username";var BI='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+RI.section+'">\n    <div class="amplify-form-body" data-test="'+RI.bodySection+'">\n      <div class="amplify-form-header" data-test="'+RI.headerSection+'">\n        {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n      </div>\n      <amplify-auth-username-field-core\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-core>\n      <div class="amplify-form-row amplify-signin-password">\n        <label class="amplify-input-label" for="passwordField">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </label>\n        <input #passwordField\n          (keyup)="setPassword(passwordField.value)"\n          (keyup.enter)="onSignIn()"\n          class="amplify-form-input"\n          type="password"\n          required\n          placeholder="{{ this.amplifyService.i18n().get(\'Enter your password\') }}"\n          data-test="'+RI.passwordInput+'"\n        />\n        <span class="amplify-form-action" *ngIf="!shouldHide(\'ForgotPassword\')">\n          {{ this.amplifyService.i18n().get(\'Forgot Password?\') }}\n          <a class="amplify-form-link"\n            (click)="onForgotPassword()"\n            data-test="'+RI.forgotPasswordLink+'"\n          >{{ this.amplifyService.i18n().get(\'Reset password\') }}</a>\n        </span>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            (click)="onSignIn()"\n            data-test="'+RI.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignUp\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'No account?\') }}\n            <a\n              class="amplify-form-link"\n              (click)="onSignUp()"\n              data-test="'+RI.createAccountLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Create account\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div\n        class="amplify-alert-message"\n        data-test="'+RI.signInError+'"\n        >\n          {{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',s4=(Object.defineProperty(a4.prototype,"data",{set:function(e){this.hide=e.hide||this.hide,this._usernameAttributes=e.usernameAttributes,this._authState=e.authState,this._show=YI(["signIn","signedOut","signedUp"],e.authState.state)},enumerable:!0,configurable:!0}),Object.defineProperty(a4.prototype,"authState",{set:function(e){this._authState=e,this._show=YI(["signIn","signedOut","signedUp"],e.state),this.username=e.user&&e.user.username||"",this.email=e.user&&e.user.email||"",this.country_code=(e.user&&e.user.country_code?e.user:this).country_code,this.local_phone_number=e.user&&e.user.local_phone_number||""},enumerable:!0,configurable:!0}),Object.defineProperty(a4.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),a4.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},a4.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},a4.prototype.setUsername=function(e){this.username=e},a4.prototype.setPassword=function(e){this.password=e},a4.prototype.onSignIn=function(){var t=this;this.amplifyService.auth().signIn(this.getSignInUsername(),this.password).then(function(e){"SMS_MFA"===e.challengeName||"SOFTWARE_TOKEN_MFA"===e.challengeName?t.amplifyService.setAuthState({state:"confirmSignIn",user:e}):"NEW_PASSWORD_REQUIRED"===e.challengeName?t.amplifyService.setAuthState({state:"requireNewPassword",user:e}):"CUSTOM_CHALLENGE"===e.challengeName&&e.challengeParam&&"true"===e.challengeParam.trigger&&t.amplifyService.setAuthState({state:"customConfirmSignIn",user:e})}).catch(function(e){t._setError(e)})},a4.prototype.onAlertClose=function(){this._setError(null)},a4.prototype.getUserObj=function(){return this.username||this.email||this.local_phone_number?{username:this.username,email:this.email,local_phone_number:this.local_phone_number,courtry_code:this.country_code}:null},a4.prototype.onForgotPassword=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"forgotPassword",user:e})},a4.prototype.onSignUp=function(){var e=this.getUserObj();this.onAlertClose(),this.amplifyService.setAuthState({state:"signUp",user:e})},a4.prototype._setError=function(e){e?(this.errorMessage=e.message||e,this.logger.error(this.errorMessage)):this.errorMessage=null},a4.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},a4.prototype.getSignInUsername=function(){switch(this._usernameAttributes){case i4.EMAIL:return this.email;case i4.PHONE_NUMBER:return JI(this.country_code,this.local_phone_number);default:return this.username}},a4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-core",template:BI}]}],a4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},a4.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},a4);function a4(e){this.amplifyService=e,this._usernameAttributes="username",this.local_phone_number="",this.country_code="1",this.email="",this.signInUsername="",this.hide=[],this.logger=this.amplifyService.logger("SignInComponent"),this.onUsernameFieldChanged=this.onUsernameFieldChanged.bind(this)}var u4,c4,dA=(u4=function(e,t){return(u4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}u4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y2='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+RI.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+RI.bodySection+'">\n    <div class="amplify-form-header" data-test="'+RI.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Sign in to your account\') }}\n    </div>\n    <ion-list lines="none">\n      <amplify-auth-username-field-ionic\n        [usernameAttributes]="_usernameAttributes"\n        (usernameFieldChanged)="onUsernameFieldChanged($event)"\n      ></amplify-auth-username-field-ionic>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label" for="password" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password *\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSignIn()"\n          data-test="'+RI.passwordInput+'"\n        ></ion-input>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignIn()"\n          data-test="'+RI.signInButton+'"\n          >{{ this.amplifyService.i18n().get(\'Sign In\') }}</ion-button>\n      </div>\n\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'No account?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onSignUp()"\n            data-test="'+RI.createAccountLink+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Create account\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'ForgotPassword\')">\n          <a class="amplify-form-link" (click)="onForgotPassword()" data-test="'+RI.forgotPasswordLink+'">\n            {{ this.amplifyService.i18n().get(\'Reset Password\') }}\n          </a>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',l4=(dA(p4,c4=s4),p4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in-ionic",template:y2}]}],p4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},p4);function p4(e){var t=c4.call(this,e)||this;return t.amplifyService=e,t}d4.prototype.ngOnInit=function(){this.loadComponent()},d4.prototype.ngOnDestroy=function(){},d4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework?new Co(l4,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new Co(s4,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},d4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-in",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],d4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},d4.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[cn]}]},LA=d4;function d4(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var f4=[{label:"Username",key:"username",required:!1,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:4}],h4=[{label:"Email",key:"email",required:!0,type:"email",displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Phone Number",key:"phone_number",required:!0,displayOrder:3}],g4=[{label:"Phone Number",key:"phone_number",required:!0,displayOrder:1},{label:"Password",key:"password",required:!0,type:"password",displayOrder:2},{label:"Email",key:"email",required:!0,type:"email",displayOrder:3}],jI='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+MI.section+'">\n    <div class="amplify-form-body" data-test="'+MI.bodySection+'">\n      <div\n        class="amplify-form-header"\n        data-test="'+MI.headerSection+'"\n        >{{ this.amplifyService.i18n().get(this.header) }}</div>\n      <div class="amplify-form-row" *ngFor="let field of signUpFields">\n        <div *ngIf="field.key !== \'phone_number\'">\n          <label class="amplify-input-label">\n            {{ this.amplifyService.i18n().get(field.label) }}\n            <span *ngIf="field.required">*</span>\n          </label>\n          <input #{{field.key}}\n            class="amplify-form-input"\n            [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n            type={{field.type}}\n            [placeholder]="this.amplifyService.i18n().get(field.label)"\n            [(ngModel)]="user[field.key]"\n            name="field.key"\n            data-test="'+MI.nonPhoneNumberInput+'"\n            />\n            <div *ngIf="field.key === \'password\'" class="amplify-form-extra-details">\n              {{passwordPolicy}}\n            </div>\n        </div>\n        <div *ngIf="field.key === \'phone_number\'">\n          <amplify-auth-phone-field-core\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-core>\n        </div>\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-left" *ngIf="!shouldHide(\'SignIn\')">\n          <div class="amplify-form-signup">\n            {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n            <a class="amplify-form-link" (click)="onSignIn()" data-test="'+MI.signInLink+'">\n              {{ this.amplifyService.i18n().get(\'Sign in\') }}\n            </a>\n          </div>\n        </div>\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n          (click)="onSignUp()"\n          data-test="'+MI.createAccountButton+'"\n          >{{ this.amplifyService.i18n().get(\'Create Account\') }}</button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',v4=(Object.defineProperty(m4.prototype,"data",{set:function(e){this._authState=e.authState,this._show="signUp"===e.authState.state,this._usernameAttributes=e.usernameAttributes,e.signUpConfig&&(this._signUpConfig=e.signUpConfig,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._usernameAttributes===i4.EMAIL?(this.signUpFields=h4,this.defaultSignUpFields=h4):this._usernameAttributes===i4.PHONE_NUMBER&&(this.signUpFields=g4,this.defaultSignUpFields=g4),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),Object.defineProperty(m4.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e,this._usernameAttributes===i4.EMAIL?(this.signUpFields=h4,this.defaultSignUpFields=h4):this._usernameAttributes===i4.PHONE_NUMBER&&(this.signUpFields=g4,this.defaultSignUpFields=g4)},enumerable:!0,configurable:!0}),Object.defineProperty(m4.prototype,"authState",{set:function(e){this._authState=e,this._show="signUp"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(m4.prototype,"signUpConfig",{set:function(e){e&&(this._signUpConfig=e,this._signUpConfig.defaultCountryCode&&(this.country_code=this._signUpConfig.defaultCountryCode),this._signUpConfig.signUpFields&&(this.signUpFields=this._signUpConfig.signUpFields),this._signUpConfig.header&&(this.header=this._signUpConfig.header),this._signUpConfig.hiddenDefaults&&(this.hiddenFields=this._signUpConfig.hiddenDefaults),this._signUpConfig.passwordPolicy&&(this.passwordPolicy=this._signUpConfig.passwordPolicy))},enumerable:!0,configurable:!0}),m4.prototype.ngOnInit=function(){this.amplifyService.auth()||this.logger.warn("Auth module not registered on AmplifyService provider"),this.sortFields()},m4.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},m4.prototype.onSignUp=function(){var n=this,e=this.validate();if(e&&0<e.length)return this._setError("The following fields need to be filled out: "+e.join(", "));this.user.attributes={},this.signUpFields.find(function(e){return"phone_number"===e.key})&&(this.user.phone_number=JI(this.country_code,this.local_phone_number));var e=Object.keys(this.user),r=e.map(function(e){return n.user[e]});e.forEach(function(e,t){"username"!==e&&"password"!==e&&"attributes"!==e&&(e=(n.needPrefix(e)?"custom:":"")+e,n.user.attributes[e]=r[t])});var t=!1;if(this.signUpFields.forEach(function(e){e.label===n.getUsernameLabel()&&(n.amplifyService.logger("Changing the username to the value of "+e.label,"DEBUG"),n.user.username=n.user.attributes[e.key]||n.user.username,t=!0)}),!t&&!this.user.username)throw new Error("Couldn't find the label: "+this.getUsernameLabel()+", in sign up fields according to usernameAttributes!");this.amplifyService.auth().signUp(this.user).then(function(e){var t=n.user.username;n.user={},n.onAlertClose(),n.amplifyService.setAuthState({state:"confirmSignUp",user:{username:t}})}).catch(function(e){return n._setError(e)})},m4.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},m4.prototype.needPrefix=function(t){var e=this.signUpFields.find(function(e){return e.key===t});return 0!==t.indexOf("custom:")?e.custom:(0===t.indexOf("custom:")&&!1===e.custom&&this.logger.warn("Custom prefix prepended to key but custom field flag is set to false"),null)},m4.prototype.onConfirmSignUp=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"confirmSignUp",user:{username:this.user.username}})},m4.prototype.sortFields=function(){var n=this;0<this.hiddenFields.length&&(this.defaultSignUpFields=this.defaultSignUpFields.filter(function(e){return!n.hiddenFields.includes(e.key)})),this._signUpConfig&&this._signUpConfig.signUpFields&&0<this._signUpConfig.signUpFields.length&&(this._signUpConfig.hideAllDefaults||this.defaultSignUpFields.forEach(function(t,e){-1===n.signUpFields.findIndex(function(e){return e.key===t.key})&&n.signUpFields.push(t)}),this.signUpFields.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder<t.displayOrder||!(e.displayOrder>t.displayOrder)&&e.key<t.key?-1:1:!e.displayOrder&&t.displayOrder?1:e.displayOrder&&!t.displayOrder?-1:e.displayOrder||t.displayOrder?void 0:e.key<t.key?-1:1}),this.signUpFields=this.removeHiddenFields())},m4.prototype.onAlertClose=function(){this._setError(null)},m4.prototype.removeHiddenFields=function(){return this.signUpFields.filter(function(e){return!e.displayOrder||-1!==e.displayOrder})},m4.prototype.validate=function(){var t=this,n=[];return this.signUpFields.map(function(e){"phone_number"!==e.key?e.required&&!t.user[e.key]?(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label))):e.invalid=!1:!e.required||t.country_code&&t.local_phone_number?e.invalid=!1:(e.invalid=!0,n.push(t.amplifyService.i18n().get(e.label)))}),n},m4.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},m4.prototype.getUsernameLabel=function(){return ZI[this._usernameAttributes]||this._usernameAttributes},m4.prototype.onPhoneFieldChanged=function(e){this.country_code=e.country_code,this.local_phone_number=e.local_phone_number},m4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-core",template:jI}]}],m4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},m4.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],usernameAttributes:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}]},m4);function m4(e){this.amplifyService=e,this._usernameAttributes="username",this.user={},this.local_phone_number="",this.country_code="1",this.header="Create a new account",this.defaultSignUpFields=f4,this.signUpFields=this.defaultSignUpFields,this.hiddenFields=[],this.hide=[],this.logger=this.amplifyService.logger("SignUpComponent")}var y4,b4,eI=(y4=function(e,t){return(y4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}y4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),kA='\n<div\n  class="amplify-authenticator"\n  *ngIf="_show"\n  data-test="'+MI.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+MI.bodySection+'">\n    <div class="amplify-form-header" data-test="'+MI.headerSection+'">\n      {{ this.amplifyService.i18n().get(this.header) }}</div>\n    <ion-list lines="none">\n      <ion-item lines="none" *ngFor="let field of signUpFields">\n        <ion-label class="amplify-input-label"\n        position="stacked"\n        *ngIf="field.key !== \'phone_number\'"\n        >\n          {{ this.amplifyService.i18n().get(field.label) }}\n          <span *ngIf="field.required">*</span>\n        </ion-label>\n        <ion-input\n          [ngClass]="{\'amplify-input-invalid \': field.invalid}"\n          *ngIf="field.key !== \'phone_number\'"\n          #{{field.key}}\n          type="text"\n          class="amplify-form-input"\n          type={{field.type}}\n          [placeholder]="this.amplifyService.i18n().get(field.label)"\n          (keyup)="setProp($event.target)"\n          name={{field.key}}\n          data-test="'+MI.nonPhoneNumberInput+'"\n        ></ion-input>\n        <ion-content *ngIf="field.key === \'phone_number\'" class="amplify-phone-ion-content">\n          <amplify-auth-phone-field-ionic\n            [label]="field.label"\n            [required]="field.required"\n            [placeholder]="field.placeholder"\n            [defaultCountryCode]="country_code"\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n          ></amplify-auth-phone-field-ionic>\n        </ion-content>\n      </ion-item>\n    </ion-list>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button expand="block" color="primary"\n          (click)="onSignUp()"\n          data-test="'+MI.createAccountButton+'"\n        >{{ this.amplifyService.i18n().get(\'Create Account\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <div class="amplify-form-signup">\n          {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n          <a class="amplify-form-link" (click)="onSignIn()" data-test="'+MI.signInButton+'">\n            {{ this.amplifyService.i18n().get(\'Sign In\') }}\n          </a>\n        </div>\n        <div class="amplify-form-signup" *ngIf="!shouldHide(\'SignUp\')">\n          {{ this.amplifyService.i18n().get(\'Have a code?\') }}\n          <a\n            class="amplify-form-link"\n            (click)="onConfirmSignUp()"\n            data-test="'+MI.confirmButton+'"\n            >\n            {{ this.amplifyService.i18n().get(\'Confirm\') }}\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',S4=(eI(w4,b4=v4),w4.prototype.setProp=function(e){return this.user[e.name]=e.value},w4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up-ionic",template:kA}]}],w4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},w4);function w4(e){var t=b4.call(this,e)||this;return t.amplifyService=e,t}C4.prototype.ngOnInit=function(){this.loadComponent()},C4.prototype.ngOnDestroy=function(){},C4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(S4,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}):new Co(v4,{authState:this.authState,signUpConfig:this.signUpConfig,usernameAttributes:this.usernameAttributes,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},C4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-sign-up",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],C4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},C4.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],signUpConfig:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[cn]}]},at=C4;function C4(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var BI='\n<div class="amplify-container" *ngIf="_show">\n<div class="amplify-form-container" data-test="'+UI.section+'">\n  <div class="amplify-form-body" data-test="'+UI.bodySection+'">\n  <div class="amplify-form-header" data-test="'+UI.headerSection+'">\n    {{ this.amplifyService.i18n().get(\'You are required to update your password\') }}\n  </div>\n  <div class="amplify-form-row">\n    <label class="amplify-input-label" for="password">\n      {{ this.amplifyService.i18n().get(\'Password *\') }}\n    </label>\n    <input #password\n      (keyup)="setPassword(password.value)"\n      (keyup.enter)="onSubmit()"\n      class="amplify-form-input"\n      type="password"\n      placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n      data-test="'+UI.newPasswordInput+'"\n    />\n    </div>\n    <div class="amplify-form-actions">\n      <div class="amplify-form-cell-left">\n        <a class="amplify-form-link"\n          (click)="onSignIn()"\n          data-test="'+UI.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</a>\n      </div>\n      <div class="amplify-form-cell-right">\n        <button class="amplify-form-button"\n          (click)="onSubmit()"\n          data-test="'+UI.submitButton+'"\n        >{{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n<div class="amplify-alert-body">\n  <span class="amplify-alert-icon">&#9888;</span>\n  <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n  <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n</div>\n</div>\n</div>\n',_4=(Object.defineProperty(E4.prototype,"authState",{set:function(e){this._authState=e,this._show="requireNewPassword"===e.state},enumerable:!0,configurable:!0}),Object.defineProperty(E4.prototype,"data",{set:function(e){this._authState=e.authState,this._show="requireNewPassword"===e.authState.state,this.hide=e.hide||this.hide},enumerable:!0,configurable:!0}),E4.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},E4.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},E4.prototype.setPassword=function(e){this.password=e},E4.prototype.onSubmit=function(){var t=this,e=this._authState.user,n=e.challengeParam.requiredAttributes;this.amplifyService.auth().completeNewPassword(e,this.password,n).then(function(){t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},E4.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},E4.prototype.onAlertClose=function(){this._setError(null)},E4.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},E4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-core",template:BI}]}],E4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},E4.propDecorators={authState:[{type:f.Input}],hide:[{type:f.Input}],data:[{type:f.Input}]},E4);function E4(e){this.amplifyService=e,this.hide=[],this.logger=this.amplifyService.logger("RequireNewPasswordComponent")}var A4,I4,RI=(A4=function(e,t){return(A4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}A4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dA='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+UI.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+UI.bodySection+'">\n    <div\n      class="amplify-form-header amplify-form-header-ionic"\n      data-test="'+UI.headerSection+'"\n      >\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <ion-list>\n      <ion-item lines="none">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n          {{ this.amplifyService.i18n().get(\'Password\') }}\n        </ion-label>\n        <ion-input\n          #password\n          type="password"\n          class="amplify-form-input"\n          (input)="setPassword(password.value)"\n          (keyup.enter)="onSubmit()"\n          data-test="'+UI.newPasswordInput+'"\n        ></ion-input>\n      </ion-item>\n\n    </ion-list>\n\n    <div class="amplify-form-actions">\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSignIn()"\n          data-test="'+UI.backToSignInLink+'"\n        >{{ this.amplifyService.i18n().get(\'Back to Sign In\') }}</ion-button>\n      </div>\n      <div class="amplify-form-row">\n        <ion-button\n          expand="block"\n          (click)="onSubmit()"\n          data-test="'+UI.submitButton+'"\n        >Submit</ion-button>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ errorMessage }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',k4=(RI(T4,I4=_4),T4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password-ionic",template:dA}]}],T4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},T4);function T4(e){var t=I4.call(this,e)||this;return t.amplifyService=e,t}P4.prototype.ngOnInit=function(){this.loadComponent()},P4.prototype.ngOnDestroy=function(){},P4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(k4,{authState:this.authState,hide:this.hide}):new Co(_4,{authState:this.authState,hide:this.hide}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},P4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-require-new-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],P4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},P4.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[cn]}]},y2=P4;function P4(e){this.componentFactoryResolver=e,this.hide=[]}var jI='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <a class="amplify-form-link amplify-greeting-sign-out"\n      (click)="onSignOut()"\n      data-test="'+FI.signOutButton+"\"\n    >{{ this.amplifyService.i18n().get('Sign Out') }}</a>\n</div>\n",O4=(Object.defineProperty(x4.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),x4.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},x4.prototype.subscribe=function(){var t=this;this.amplifyService.authStateChange$.subscribe(function(e){return t.setAuthState(e)})},x4.prototype.setAuthState=function(e){this.authState=e,this.signedIn="signedIn"===e.state;var t="";e.user&&(t=this._usernameAttributes===i4.EMAIL?e.user.attributes?e.user.attributes.email:e.user.username:this._usernameAttributes===i4.PHONE_NUMBER&&e.user.attributes?e.user.attributes.phone_number:e.user.username),this.greeting=this.signedIn?this.amplifyService.i18n().get("Hello, {{username}}").replace("{{username}}",t):""},x4.prototype.onSignOut=function(){this.amplifyService.auth().signOut()},x4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-core",template:jI}]}],x4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},x4.propDecorators={authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},x4);function x4(e){this.amplifyService=e,this._usernameAttributes="username",this.logger=this.amplifyService.logger("GreetingComponent"),this.subscribe()}var L4,N4,MI=(L4=function(e,t){return(L4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}L4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),eI='\n<div class="amplify-greeting" *ngIf="signedIn">\n    <div class="amplify-greeting-text">{{ greeting }}</div>\n    <div class="amplify-greeting-flex-spacer"></div>\n    <ion-button\n        class="amplify-greeting-sign-out"\n        size="small"\n        *ngIf="signedIn"\n        (click)="onSignOut()"\n        data-test="'+FI.signOutButton+"\"\n      >{{ this.amplifyService.i18n().get('Sign Out') }}</ion-button>\n</div>\n",R4=(MI(M4,N4=O4),M4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings-ionic",template:eI}]}],M4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},M4);function M4(e){var t=N4.call(this,e)||this;return t.amplifyService=e,t}U4.prototype.ngOnInit=function(){this.loadComponent()},U4.prototype.ngOnDestroy=function(){},U4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(R4,{authState:this.authState,usernameAttributes:this.usernameAttributes}):new Co(O4,{authState:this.authState,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},U4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-greetings",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],U4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},U4.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[cn]}]},kA=U4;function U4(e){this.componentFactoryResolver=e,this.usernameAttributes="username"}var BI='\n<div class="amplify-container" *ngIf="_show">\n  <div class="amplify-form-container" data-test="'+zI.section+'">\n    <div class="amplify-form-body" data-test="'+zI.bodySection+'">\n    <div class="amplify-form-header" data-test="'+zI.headerSection+'">\n      {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="!code_sent">\n      {{ this.amplifyService.i18n().get(\'You will receive a verification code\') }}\n    </div>\n    <div class="amplify-form-text" *ngIf="code_sent">\n      {{ this.amplifyService.i18n().get(\'Enter the code you received and set a new password\') }}\n    </div>\n    <amplify-auth-username-field-core\n      *ngIf="!code_sent"\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-core>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="code">\n        {{ this.amplifyService.i18n().get(\'Confirmation Code *\') }}\n      </label>\n      <input #code\n        (keyup)="setCode(code.value)"\n        class="amplify-form-input"\n        type="text"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Enter code\') }}"\n        data-test="'+zI.codeInput+'"\n      />\n      </div>\n      <div class="amplify-form-row" *ngIf="code_sent">\n      <label class="amplify-input-label" for="password">\n        {{ this.amplifyService.i18n().get(\'New Password *\') }}\n      </label>\n      <input #password\n        (keyup)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        class="amplify-form-input"\n        type="password"\n        autocomplete="off"\n        placeholder="{{ this.amplifyService.i18n().get(\'Password\') }}"\n        data-test="'+zI.newPasswordInput+'"\n      />\n      </div>\n      <div class="amplify-form-actions">\n        <div class="amplify-form-cell-right">\n          <button class="amplify-form-button"\n            *ngIf="!code_sent"\n            (click)="onSend()"\n            data-test="'+zI.sendCodeButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Submit\') }}</button>\n          <button class="amplify-form-button"\n            *ngIf="code_sent"\n            (click)="onSubmit()"\n            data-test="'+zI.submitButton+'"\n            >\n              {{ this.amplifyService.i18n().get(\'Verify\') }}</button>\n        </div>\n        <div class="amplify-form-cell-left">\n          <div class="amplify-form-actions-left">\n            <a\n              *ngIf="code_sent"\n              class="amplify-form-link"\n              (click)="onSend()"\n              data-test="'+zI.resendCodeLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Resend Code\') }}\n            </a>\n            <a\n              *ngIf="!code_sent"\n              class="amplify-form-link"\n              (click)="onSignIn()"\n              data-test="'+zI.backToSignInLink+'"\n              >\n              {{ this.amplifyService.i18n().get(\'Back to Sign in\') }}\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n</div>\n',D4=(Object.defineProperty(F4.prototype,"data",{set:function(e){this._authState=e.authState,this._show="forgotPassword"===e.authState.state,this._usernameAttributes=e.usernameAttributes,this.hide=e.hide||this.hide,this.username=e.authState.user&&e.authState.user.username?e.authState.user.username:""},enumerable:!0,configurable:!0}),F4.prototype.shouldHide=function(t){return 0<this.hide.filter(function(e){return e===t}).length},Object.defineProperty(F4.prototype,"authState",{set:function(e){this._authState=e,this._show="forgotPassword"===e.state,this.email=e.user&&e.user.email?e.user.email:"",this.country_code=e.user&&e.user.contry_code?e.user.country_code:"1",this.local_phone_number=e.user&&e.user.local_phone_number?e.user.local_phone_number:"",this.username=e.user&&e.user.username?e.user.username:""},enumerable:!0,configurable:!0}),F4.prototype.ngOnInit=function(){if(!this.amplifyService.auth())throw new Error("Auth module not registered on AmplifyService provider")},Object.defineProperty(F4.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),F4.prototype.setCode=function(e){this.code=e},F4.prototype.setPassword=function(e){this.password=e},F4.prototype.getforgotPwUsername=function(){switch(this._usernameAttributes){case i4.EMAIL:return this.email;case i4.PHONE_NUMBER:return JI(this.country_code,this.local_phone_number);default:return this.username}},F4.prototype.onSend=function(){var t=this,e=this.getforgotPwUsername();e?this.amplifyService.auth().forgotPassword(e).then(function(){t.code_sent=!0}).catch(function(e){t._setError(e),t.code_sent=!1}):this.errorMessage="Username cannot be empty"},F4.prototype.onSubmit=function(){var t=this;this.amplifyService.auth().forgotPasswordSubmit(this.getforgotPwUsername(),this.code,this.password).then(function(){var e={username:t.username};t.onAlertClose(),t.amplifyService.setAuthState({state:"signIn",user:e})}).catch(function(e){return t._setError(e)})},F4.prototype.onSignIn=function(){this.onAlertClose(),this.amplifyService.setAuthState({state:"signIn",user:null})},F4.prototype.onAlertClose=function(){this._setError(null)},F4.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},F4.prototype.getUsernameLabel=function(){return ZI[this._usernameAttributes]||this._usernameAttributes},F4.prototype.onUsernameFieldChanged=function(e){this.email=e.email||this.email,this.username=e.username||this.username,this.country_code=e.country_code||this.country_code,this.local_phone_number=e.local_phone_number||this.local_phone_number},F4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-core",template:BI}]}],F4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},F4.propDecorators={data:[{type:f.Input}],hide:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}]},F4);function F4(e){this.amplifyService=e,this._usernameAttributes="username",this.code_sent=!1,this.country_code="1",this.hide=[],this.logger=this.amplifyService.logger("ForgotPasswordComponent")}var j4,B4,UI=(j4=function(e,t){return(j4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}j4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),RI='\n<div\n  class="amplify-authenticator amplify-authenticator-ionic"\n  *ngIf="_show"\n  data-test="'+zI.section+'"\n  >\n  <div class="amplify-form-body" data-test="'+zI.bodySection+'">\n  <div\n    class="amplify-form-header amplify-form-header-ionic"\n    data-test="'+zI.headerSection+'"\n    >\n    {{ this.amplifyService.i18n().get(\'Reset your password\') }}\n  </div>\n  <div class="amplify-form-text" *ngIf="!code_sent">\n    {{ this.amplifyService.i18n().get(\'You will receive a verification code to reset your password\') }}\n  </div>\n\n  <ion-list>\n    <amplify-auth-username-field-ionic\n      [usernameAttributes]="_usernameAttributes"\n      (usernameFieldChanged)="onUsernameFieldChanged($event)"\n    ></amplify-auth-username-field-ionic>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Code *\') }}\n      </ion-label>\n      <ion-input\n        #code\n        type="text"\n        class="amplify-form-input"\n        (input)="setCode(code.value)"\n        data-test="'+zI.codeInput+'"\n      ></ion-input>\n    </ion-item>\n    <ion-item lines="none" *ngIf="code_sent">\n      <ion-label class="amplify-input-label amplify-input-label-ionic" position="stacked">\n        {{ this.amplifyService.i18n().get(\'Password *\') }}\n      </ion-label>\n      <ion-input\n        #password\n        type="password"\n        class="amplify-form-input"\n        (input)="setPassword(password.value)"\n        (keyup.enter)="onSubmit()"\n        data-test="'+zI.newPasswordInput+'"\n      ></ion-input>\n    </ion-item>\n  </ion-list>\n  <div class="amplify-form-actions">\n    <div>\n      <ion-button expand="block" color="primary"\n        (click)="onSend()"\n        *ngIf="!code_sent"\n        data-test="'+zI.submitButton+'"\n      >\n        {{ this.amplifyService.i18n().get(\'Submit\') }}</ion-button>\n      <ion-button expand="block" color="primary"\n      *ngIf="code_sent"\n      (click)="onSubmit()"\n      >{{ this.amplifyService.i18n().get(\'Verify\') }}</ion-button>\n    </div>\n    <div class="amplify-form-row">\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Have an account?\') }}\n        <a class="amplify-form-link" (click)="onSignIn()">\n          {{ this.amplifyService.i18n().get(\'Sign In\') }}\n        </a>\n      </div>\n      <div class="amplify-form-signup">\n        {{ this.amplifyService.i18n().get(\'Lost your code?\') }}\n        <a\n          class="amplify-form-link"\n          (click)="onSend()"\n          data-test="'+zI.resendCodeLink+'"\n          >\n          {{ this.amplifyService.i18n().get(\'Resend\') }}\n        </a>\n      </div>\n    </div>\n  </div>\n  </div>\n  <div class="amplify-alert" *ngIf="errorMessage">\n    <div class="amplify-alert-body">\n      <span class="amplify-alert-icon">&#9888;</span>\n      <div class="amplify-alert-message">{{ this.amplifyService.i18n().get(errorMessage) }}</div>\n      <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n    </div>\n  </div>\n\n</div>\n',z4=(UI(V4,B4=D4),V4.prototype.onCodeChange=function(e){this.country_code=e},V4.prototype.onNumberChange=function(e){this.local_phone_number=e},V4.prototype.setUsername=function(e){this.username=e},V4.prototype.setEmail=function(e){this.email=e},V4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password-ionic",template:RI}]}],V4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},V4);function V4(e){var t=B4.call(this,e)||this;return t.amplifyService=e,t}q4.prototype.ngOnInit=function(){this.loadComponent()},q4.prototype.ngOnDestroy=function(){},q4.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(z4,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}):new Co(D4,{authState:this.authState,hide:this.hide,usernameAttributes:this.usernameAttributes}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},q4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-forgot-password",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],q4.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},q4.propDecorators={framework:[{type:f.Input}],authState:[{type:f.Input}],usernameAttributes:[{type:f.Input}],hide:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[cn]}]},dA=q4;function q4(e){this.componentFactoryResolver=e,this.usernameAttributes="username",this.hide=[]}var K4=function(){return(K4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},jI='\n<div class="amplify-amplify-form-row amplify-signin-username">\n    <div *ngIf="this._usernameAttributes === \'email\'">\n        <label class="amplify-input-label" for="emailField"> {{ this.amplifyService.i18n().get(\'Email\') }} *</label>\n        <input\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setEmail($event.target.value)"\n            data-test="'+DI.emailInput+'"\n        />\n    </div>\n    <div *ngIf="this._usernameAttributes === \'phone_number\'">\n        <amplify-auth-phone-field-core\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-core>\n    </div>\n    <div *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <label class="amplify-input-label" for="usernameField"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\n        <input\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            value="{{this.username}}"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (keyup)="setUsername($event.target.value)"\n            data-test="'+DI.usernameInput+'"\n        />\n    </div>\n</div>\n',FI=(Object.defineProperty(H4.prototype,"data",{set:function(e){this._usernameAttributes=e.usernameAttributes,this._placeholder=e.placeholder},enumerable:!0,configurable:!0}),Object.defineProperty(H4.prototype,"usernameAttributes",{set:function(e){this._usernameAttributes=e},enumerable:!0,configurable:!0}),Object.defineProperty(H4.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),H4.prototype.ngOnInit=function(){var e;window&&window.location&&window.location.search&&"email"!==this._usernameAttributes&&"phone_number"!==this._usernameAttributes&&(e=(e=new URLSearchParams(window.location.search))?e.get("username"):void 0,this.setUsername(e),this.username=e)},H4.prototype.ngOnDestroy=function(){},H4.prototype.setUsername=function(e){this.usernameFieldChanged.emit({username:e})},H4.prototype.setEmail=function(e){this.usernameFieldChanged.emit({email:e})},H4.prototype.getUsernameLabel=function(){return ZI[this._usernameAttributes]||this._usernameAttributes},H4.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get(""+this.getUsernameLabel()||this._placeholder)},H4.prototype.onPhoneFieldChanged=function(e){this.usernameFieldChanged.emit(K4({},e))},H4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-core",template:jI}]}],H4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},H4.propDecorators={data:[{type:f.Input}],usernameAttributes:[{type:f.Input}],placeholder:[{type:f.Input}],usernameFieldChanged:[{type:f.Output}]},H4);function H4(e){this.amplifyService=e,this._usernameAttributes=i4.USERNAME,this._placeholder="",this.usernameFieldChanged=new f.EventEmitter,this.onPhoneFieldChanged=this.onPhoneFieldChanged.bind(this)}var G4=[{countryCode:"US",value:"1",label:"USA (+1)"},{countryCode:"GB",value:"44",label:"UK (+44)"},{countryCode:"DZ",value:"213",label:"Algeria (+213)"},{countryCode:"AD",value:"376",label:"Andorra (+376)"},{countryCode:"AO",value:"244",label:"Angola (+244)"},{countryCode:"AI",value:"1264",label:"Anguilla (+1264)"},{countryCode:"AG",value:"1268",label:"Antigua & Barbuda (+1268)"},{countryCode:"AR",value:"54",label:"Argentina (+54)"},{countryCode:"AM",value:"374",label:"Armenia (+374)"},{countryCode:"AW",value:"297",label:"Aruba (+297)"},{countryCode:"AU",value:"61",label:"Australia (+61)"},{countryCode:"AT",value:"43",label:"Austria (+43)"},{countryCode:"AZ",value:"994",label:"Azerbaijan (+994)"},{countryCode:"BS",value:"1242",label:"Bahamas (+1242)"},{countryCode:"BH",value:"973",label:"Bahrain (+973)"},{countryCode:"BD",value:"880",label:"Bangladesh (+880)"},{countryCode:"BB",value:"1246",label:"Barbados (+1246)"},{countryCode:"BY",value:"375",label:"Belarus (+375)"},{countryCode:"BE",value:"32",label:"Belgium (+32)"},{countryCode:"BZ",value:"501",label:"Belize (+501)"},{countryCode:"BJ",value:"229",label:"Benin (+229)"},{countryCode:"BM",value:"1441",label:"Bermuda (+1441)"},{countryCode:"BT",value:"975",label:"Bhutan (+975)"},{countryCode:"BO",value:"591",label:"Bolivia (+591)"},{countryCode:"BA",value:"387",label:"Bosnia Herzegovina (+387)"},{countryCode:"BW",value:"267",label:"Botswana (+267)"},{countryCode:"BR",value:"55",label:"Brazil (+55)"},{countryCode:"BN",value:"673",label:"Brunei (+673)"},{countryCode:"BG",value:"359",label:"Bulgaria (+359)"},{countryCode:"BF",value:"226",label:"Burkina Faso (+226)"},{countryCode:"BI",value:"257",label:"Burundi (+257)"},{countryCode:"KH",value:"855",label:"Cambodia (+855)"},{countryCode:"CM",value:"237",label:"Cameroon (+237)"},{countryCode:"CA",value:"1",label:"Canada (+1)"},{countryCode:"CV",value:"238",label:"Cape Verde Islands (+238)"},{countryCode:"KY",value:"1345",label:"Cayman Islands (+1345)"},{countryCode:"CF",value:"236",label:"Central African Republic (+236)"},{countryCode:"CL",value:"56",label:"Chile (+56)"},{countryCode:"CN",value:"86",label:"China (+86)"},{countryCode:"CO",value:"57",label:"Colombia (+57)"},{countryCode:"KM",value:"269",label:"Comoros (+269)"},{countryCode:"CG",value:"242",label:"Congo (+242)"},{countryCode:"CK",value:"682",label:"Cook Islands (+682)"},{countryCode:"CR",value:"506",label:"Costa Rica (+506)"},{countryCode:"HR",value:"385",label:"Croatia (+385)"},{countryCode:"CU",value:"53",label:"Cuba (+53)"},{countryCode:"CW",value:"599",label:"Curacao (+599)"},{countryCode:"CY",value:"90392",label:"Cyprus North (+90392)"},{countryCode:"CY",value:"357",label:"Cyprus South (+357)"},{countryCode:"CZ",value:"420",label:"Czech Republic (+420)"},{countryCode:"DK",value:"45",label:"Denmark (+45)"},{countryCode:"DJ",value:"253",label:"Djibouti (+253)"},{countryCode:"DM",value:"1809",label:"Dominica (+1809)"},{countryCode:"DO",value:"1809",label:"Dominican Republic (+1809)"},{countryCode:"EC",value:"593",label:"Ecuador (+593)"},{countryCode:"EG",value:"20",label:"Egypt (+20)"},{countryCode:"SV",value:"503",label:"El Salvador (+503)"},{countryCode:"GQ",value:"240",label:"Equatorial Guinea (+240)"},{countryCode:"ER",value:"291",label:"Eritrea (+291)"},{countryCode:"EE",value:"372",label:"Estonia (+372)"},{countryCode:"ET",value:"251",label:"Ethiopia (+251)"},{countryCode:"FK",value:"500",label:"Falkland Islands (+500)"},{countryCode:"FO",value:"298",label:"Faroe Islands (+298)"},{countryCode:"FJ",value:"679",label:"Fiji (+679)"},{countryCode:"FI",value:"358",label:"Finland (+358)"},{countryCode:"FR",value:"33",label:"France (+33)"},{countryCode:"GF",value:"594",label:"French Guiana (+594)"},{countryCode:"PF",value:"689",label:"French Polynesia (+689)"},{countryCode:"GA",value:"241",label:"Gabon (+241)"},{countryCode:"GM",value:"220",label:"Gambia (+220)"},{countryCode:"GE",value:"7880",label:"Georgia (+7880)"},{countryCode:"DE",value:"49",label:"Germany (+49)"},{countryCode:"GH",value:"233",label:"Ghana (+233)"},{countryCode:"GI",value:"350",label:"Gibraltar (+350)"},{countryCode:"GR",value:"30",label:"Greece (+30)"},{countryCode:"GL",value:"299",label:"Greenland (+299)"},{countryCode:"GD",value:"1473",label:"Grenada (+1473)"},{countryCode:"GP",value:"590",label:"Guadeloupe (+590)"},{countryCode:"GU",value:"671",label:"Guam (+671)"},{countryCode:"GT",value:"502",label:"Guatemala (+502)"},{countryCode:"GN",value:"224",label:"Guinea (+224)"},{countryCode:"GW",value:"245",label:"Guinea - Bissau (+245)"},{countryCode:"GY",value:"592",label:"Guyana (+592)"},{countryCode:"HT",value:"509",label:"Haiti (+509)"},{countryCode:"HN",value:"504",label:"Honduras (+504)"},{countryCode:"HK",value:"852",label:"Hong Kong (+852)"},{countryCode:"HU",value:"36",label:"Hungary (+36)"},{countryCode:"IS",value:"354",label:"Iceland (+354)"},{countryCode:"IN",value:"91",label:"India (+91)"},{countryCode:"ID",value:"62",label:"Indonesia (+62)"},{countryCode:"IR",value:"98",label:"Iran (+98)"},{countryCode:"IQ",value:"964",label:"Iraq (+964)"},{countryCode:"IE",value:"353",label:"Ireland (+353)"},{countryCode:"IL",value:"972",label:"Israel (+972)"},{countryCode:"IT",value:"39",label:"Italy (+39)"},{countryCode:"JM",value:"1876",label:"Jamaica (+1876)"},{countryCode:"JP",value:"81",label:"Japan (+81)"},{countryCode:"JO",value:"962",label:"Jordan (+962)"},{countryCode:"KZ",value:"7",label:"Kazakhstan (+7)"},{countryCode:"KE",value:"254",label:"Kenya (+254)"},{countryCode:"KI",value:"686",label:"Kiribati (+686)"},{countryCode:"KP",value:"850",label:"Korea North (+850)"},{countryCode:"KR",value:"82",label:"Korea South (+82)"},{countryCode:"KW",value:"965",label:"Kuwait (+965)"},{countryCode:"KG",value:"996",label:"Kyrgyzstan (+996)"},{countryCode:"LA",value:"856",label:"Laos (+856)"},{countryCode:"LV",value:"371",label:"Latvia (+371)"},{countryCode:"LB",value:"961",label:"Lebanon (+961)"},{countryCode:"LS",value:"266",label:"Lesotho (+266)"},{countryCode:"LR",value:"231",label:"Liberia (+231)"},{countryCode:"LY",value:"218",label:"Libya (+218)"},{countryCode:"LI",value:"417",label:"Liechtenstein (+417)"},{countryCode:"LT",value:"370",label:"Lithuania (+370)"},{countryCode:"LU",value:"352",label:"Luxembourg (+352)"},{countryCode:"MO",value:"853",label:"Macao (+853)"},{countryCode:"MK",value:"389",label:"Macedonia (+389)"},{countryCode:"MG",value:"261",label:"Madagascar (+261)"},{countryCode:"MW",value:"265",label:"Malawi (+265)"},{countryCode:"MY",value:"60",label:"Malaysia (+60)"},{countryCode:"MV",value:"960",label:"Maldives (+960)"},{countryCode:"ML",value:"223",label:"Mali (+223)"},{countryCode:"MT",value:"356",label:"Malta (+356)"},{countryCode:"MH",value:"692",label:"Marshall Islands (+692)"},{countryCode:"MQ",value:"596",label:"Martinique (+596)"},{countryCode:"MR",value:"222",label:"Mauritania (+222)"},{countryCode:"YT",value:"269",label:"Mayotte (+269)"},{countryCode:"MX",value:"52",label:"Mexico (+52)"},{countryCode:"FM",value:"691",label:"Micronesia (+691)"},{countryCode:"MD",value:"373",label:"Moldova (+373)"},{countryCode:"MC",value:"377",label:"Monaco (+377)"},{countryCode:"MN",value:"976",label:"Mongolia (+976)"},{countryCode:"MS",value:"1664",label:"Montserrat (+1664)"},{countryCode:"MA",value:"212",label:"Morocco (+212)"},{countryCode:"MZ",value:"258",label:"Mozambique (+258)"},{countryCode:"MN",value:"95",label:"Myanmar (+95)"},{countryCode:"NA",value:"264",label:"Namibia (+264)"},{countryCode:"NR",value:"674",label:"Nauru (+674)"},{countryCode:"NP",value:"977",label:"Nepal (+977)"},{countryCode:"NL",value:"31",label:"Netherlands (+31)"},{countryCode:"NC",value:"687",label:"New Caledonia (+687)"},{countryCode:"NZ",value:"64",label:"New Zealand (+64)"},{countryCode:"NI",value:"505",label:"Nicaragua (+505)"},{countryCode:"NE",value:"227",label:"Niger (+227)"},{countryCode:"NG",value:"234",label:"Nigeria (+234)"},{countryCode:"NU",value:"683",label:"Niue (+683)"},{countryCode:"NF",value:"672",label:"Norfolk Islands (+672)"},{countryCode:"NP",value:"670",label:"Northern Marianas (+670)"},{countryCode:"NO",value:"47",label:"Norway (+47)"},{countryCode:"OM",value:"968",label:"Oman (+968)"},{countryCode:"PW",value:"680",label:"Palau (+680)"},{countryCode:"PA",value:"507",label:"Panama (+507)"},{countryCode:"PG",value:"675",label:"Papua New Guinea (+675)"},{countryCode:"PY",value:"595",label:"Paraguay (+595)"},{countryCode:"PE",value:"51",label:"Peru (+51)"},{countryCode:"PH",value:"63",label:"Philippines (+63)"},{countryCode:"PL",value:"48",label:"Poland (+48)"},{countryCode:"PT",value:"351",label:"Portugal (+351)"},{countryCode:"PR",value:"1787",label:"Puerto Rico (+1787)"},{countryCode:"QA",value:"974",label:"Qatar (+974)"},{countryCode:"RE",value:"262",label:"Reunion (+262)"},{countryCode:"RO",value:"40",label:"Romania (+40)"},{countryCode:"RU",value:"7",label:"Russia (+7)"},{countryCode:"RW",value:"250",label:"Rwanda (+250)"},{countryCode:"SM",value:"378",label:"San Marino (+378)"},{countryCode:"ST",value:"239",label:"Sao Tome & Principe (+239)"},{countryCode:"SA",value:"966",label:"Saudi Arabia (+966)"},{countryCode:"SN",value:"221",label:"Senegal (+221)"},{countryCode:"CS",value:"381",label:"Serbia (+381)"},{countryCode:"SC",value:"248",label:"Seychelles (+248)"},{countryCode:"SL",value:"232",label:"Sierra Leone (+232)"},{countryCode:"SX",value:"1",label:"Sint Maarten (+1)"},{countryCode:"SG",value:"65",label:"Singapore (+65)"},{countryCode:"SK",value:"421",label:"Slovak Republic (+421)"},{countryCode:"SI",value:"386",label:"Slovenia (+386)"},{countryCode:"SB",value:"677",label:"Solomon Islands (+677)"},{countryCode:"SO",value:"252",label:"Somalia (+252)"},{countryCode:"ZA",value:"27",label:"South Africa (+27)"},{countryCode:"ES",value:"34",label:"Spain (+34)"},{countryCode:"LK",value:"94",label:"Sri Lanka (+94)"},{countryCode:"SH",value:"290",label:"St. Helena (+290)"},{countryCode:"KN",value:"1869",label:"St. Kitts (+1869)"},{countryCode:"SC",value:"1758",label:"St. Lucia (+1758)"},{countryCode:"SD",value:"249",label:"Sudan (+249)"},{countryCode:"SR",value:"597",label:"Suriname (+597)"},{countryCode:"SZ",value:"268",label:"Swaziland (+268)"},{countryCode:"SE",value:"46",label:"Sweden (+46)"},{countryCode:"CH",value:"41",label:"Switzerland (+41)"},{countryCode:"SI",value:"963",label:"Syria (+963)"},{countryCode:"TW",value:"886",label:"Taiwan (+886)"},{countryCode:"TJ",value:"7",label:"Tajikstan (+7)"},{countryCode:"TH",value:"66",label:"Thailand (+66)"},{countryCode:"TG",value:"228",label:"Togo (+228)"},{countryCode:"TO",value:"676",label:"Tonga (+676)"},{countryCode:"TT",value:"1868",label:"Trinidad & Tobago (+1868)"},{countryCode:"TN",value:"216",label:"Tunisia (+216)"},{countryCode:"TR",value:"90",label:"Turkey (+90)"},{countryCode:"TM",value:"7",label:"Turkmenistan (+7)"},{countryCode:"TM",value:"993",label:"Turkmenistan (+993)"},{countryCode:"TC",value:"1649",label:"Turks & Caicos Islands (+1649)"},{countryCode:"TV",value:"688",label:"Tuvalu (+688)"},{countryCode:"UG",value:"256",label:"Uganda (+256)"},{countryCode:"UA",value:"380",label:"Ukraine (+380)"},{countryCode:"AE",value:"971",label:"United Arab Emirates (+971)"},{countryCode:"UY",value:"598",label:"Uruguay (+598)"},{countryCode:"UZ",value:"7",label:"Uzbekistan (+7)"},{countryCode:"VU",value:"678",label:"Vanuatu (+678)"},{countryCode:"VA",value:"379",label:"Vatican City (+379)"},{countryCode:"VE",value:"58",label:"Venezuela (+58)"},{countryCode:"VN",value:"84",label:"Vietnam (+84)"},{countryCode:"VG",value:"84",label:"Virgin Islands - British (+1284)"},{countryCode:"VI",value:"84",label:"Virgin Islands - US (+1340)"},{countryCode:"WF",value:"681",label:"Wallis and Futuna (+681)"},{countryCode:"YE",value:"969",label:"Yemen (North) (+969)"},{countryCode:"YE",value:"967",label:"Yemen (South) (+967)"},{countryCode:"ZM",value:"260",label:"Zambia (+260)"},{countryCode:"ZW",value:"263",label:"Zimbabwe (+263)"}],MI='\n<div>\n    <label class="amplify-input-label" for="localPhoneNumberField">\n        {{ this.amplifyService.i18n().get(this._label) }}\n        <span *ngIf="_required">*</span>\n    </label>\n    <div class="amplify-input-group">\n        <div class="amplify-input-group-item">\n            <select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [(ngModel)]="_country_code"\n            (change)="setCountryCode($event.target.value)"\n            data-test="'+DI.dialCodeSelect+'"\n            >\n            <option *ngFor="let country of _countries"\n                value={{country.value}}>\n                {{country.label}}\n            </option>\n            </select>\n        </div>\n        <div class="amplify-input-group-item">\n            <input\n                #localPhoneNumberField\n                class="amplify-form-input"\n                placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n                name="local_phone_number"\n                type="tel"\n                (keyup)="setLocalPhoneNumber($event.target.value)"\n                data-test="'+DI.phoneNumberInput+'"\n            />\n        </div>\n    </div>\n</div>\n',eI=(Object.defineProperty(W4.prototype,"data",{set:function(e){this._placeholder=e.placeholder||this._placeholder,this._label=e.label||this._label,this._country_code=e.defaultCountryCode||this._country_code,this._required=void 0===e.required?this._required:e.required},enumerable:!0,configurable:!0}),Object.defineProperty(W4.prototype,"placeholder",{set:function(e){this._placeholder=e},enumerable:!0,configurable:!0}),Object.defineProperty(W4.prototype,"label",{set:function(e){this._label=e},enumerable:!0,configurable:!0}),Object.defineProperty(W4.prototype,"required",{set:function(e){this._required=e},enumerable:!0,configurable:!0}),Object.defineProperty(W4.prototype,"defaultCountryCode",{set:function(e){this._country_code=e},enumerable:!0,configurable:!0}),W4.prototype.ngOnInit=function(){},W4.prototype.ngOnDestroy=function(){},W4.prototype.setCountryCode=function(e){this._country_code=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},W4.prototype.setLocalPhoneNumber=function(e){this._local_phone_number=e,this.phoneFieldChanged.emit({country_code:this._country_code,local_phone_number:this._local_phone_number})},W4.prototype.getPlaceholder=function(){return this.amplifyService.i18n().get("Enter your phone number")},W4.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-core",template:MI}]}],W4.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},W4.propDecorators={data:[{type:f.Input}],placeholder:[{type:f.Input}],label:[{type:f.Input}],required:[{type:f.Input}],defaultCountryCode:[{type:f.Input}],phoneFieldChanged:[{type:f.Output}]},W4);function W4(e){this.amplifyService=e,this._placeholder="",this._label="Phone Number",this._required=!0,this._country_code="1",this._local_phone_number="",this.phoneFieldChanged=new f.EventEmitter,this._countries=G4}var $4=(Y4.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getList(this._path,this._options)},Y4.prototype.onImageSelected=function(e){this.selected.emit(e)},Object.defineProperty(Y4.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(Y4.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(Y4.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),Y4.prototype.getList=function(e,t){var n=this;e&&this.amplifyService.storage().list(e,t).then(function(e){n.list=e.map(function(e){return{path:e.key}})}).catch(function(e){return console.error(e)})},Y4.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-core",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      [options]="_options"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],Y4.ctorParameters=function(){return[{type:hI}]},Y4.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},Y4);function Y4(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3AlbumComponent")}var J4,Z4,BI=(J4=function(e,t){return(J4=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}J4(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),X4=(BI(Q4,Z4=$4),Q4.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album-ionic",template:'\n<div class="amplify-album">\n  <div class="amplify-album-container">\n    <amplify-s3-image-core\n      class="amplify-image-container"\n      *ngFor="let item of list"\n      path="{{item.path}}"\n      (selected)="onImageSelected($event)"\n    ></amplify-s3-image-core>\n  </div>\n</div>\n'}]}],Q4.ctorParameters=function(){return[{type:hI}]},Q4);function Q4(e){var t=Z4.call(this,e)||this;return t.amplifyService=e,t}ek.prototype.ngOnInit=function(){this.loadComponent()},ek.prototype.ngOnDestroy=function(){},ek.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(X4,{path:this.path,options:this.options}):new Co($4,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},ek.decorators=[{type:f.Component,args:[{selector:"amplify-s3-album",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],ek.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},ek.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[cn]}]},zI=ek;function ek(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}var tk=(Object.defineProperty(nk.prototype,"data",{set:function(e){e.path&&(this._path=e.path,this._options=e.options)},enumerable:!0,configurable:!0}),Object.defineProperty(nk.prototype,"path",{set:function(e){this._path=e},enumerable:!0,configurable:!0}),Object.defineProperty(nk.prototype,"options",{set:function(e){this._options=e},enumerable:!0,configurable:!0}),nk.prototype.ngOnInit=function(){if(this._path){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider");this.getImage(this._path,this._options)}},nk.prototype.onImageClicked=function(){this.selected.emit(this.url)},nk.prototype.getImage=function(e,t){var n=this;this.amplifyService.storage().get(e,t).then(function(e){return n.url=e}).catch(function(e){return console.error(e)})},nk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-core",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],nk.ctorParameters=function(){return[{type:hI}]},nk.propDecorators={selected:[{type:f.Output}],data:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}]},nk);function nk(e){this.amplifyService=e,this._options={},this.selected=new f.EventEmitter,this.logger=this.amplifyService.logger("S3ImageComponent")}var rk,ik,UI=(rk=function(e,t){return(rk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}rk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ok=(UI(sk,ik=tk),sk.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image-ionic",template:'\n  <img\n    class="amplify-image"\n    (click)="onImageClicked()"\n    src="{{url}}"\n  />\n'}]}],sk.ctorParameters=function(){return[{type:hI}]},sk);function sk(e){var t=ik.call(this,e)||this;return t.amplifyService=e,t}ak.prototype.ngOnInit=function(){this.loadComponent()},ak.prototype.ngOnDestroy=function(){},ak.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(ok,{path:this.path,options:this.options}):new Co(tk,{path:this.path,options:this.options}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.selected.subscribe(function(e){t.selected.emit(e)})},ak.decorators=[{type:f.Component,args:[{selector:"amplify-s3-image",template:"\n\t\t<div>\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t"}]}],ak.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},ak.propDecorators={framework:[{type:f.Input}],path:[{type:f.Input}],options:[{type:f.Input}],selected:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[cn]}]},RI=ak;function ak(e){this.componentFactoryResolver=e,this.selected=new f.EventEmitter}var uk=(Object.defineProperty(ck.prototype,"url",{set:function(e){this.photoUrl=e,this.hasPhoto=!0},enumerable:!0,configurable:!0}),Object.defineProperty(ck.prototype,"storageOptions",{set:function(e){this._storageOptions=Object.assign(this._storageOptions,e)},enumerable:!0,configurable:!0}),Object.defineProperty(ck.prototype,"path",{set:function(e){this.s3ImagePath=e},enumerable:!0,configurable:!0}),Object.defineProperty(ck.prototype,"data",{set:function(e){this.photoUrl=e.url,this.s3ImagePath=e.path,this._storageOptions=Object.assign(this._storageOptions,e.storageOptions),this.hasPhoto=!0},enumerable:!0,configurable:!0}),ck.prototype.ngOnInit=function(){if(!this.amplifyService.storage())throw new Error("Storage module not registered on AmplifyService provider")},ck.prototype.pick=function(e){var t,n=e.target.files[0];n&&(this._storageOptions.contentType||(this._storageOptions.contentType=n.type),n.name,n.size,n.type,this.picked.emit(n),this.s3ImagePath=this.s3ImagePath+"/"+n.name,this.s3ImageFile=n,t=this,(e=new FileReader).onload=function(e){e=e.target.result;t.photoUrl=e,t.hasPhoto=!0,t.loaded.emit(e)},e.readAsDataURL(n))},ck.prototype.uploadFile=function(){var t=this;this.uploading=!0,this.amplifyService.storage().put(this.s3ImagePath,this.s3ImageFile,this._storageOptions).then(function(e){t.uploaded.emit(e),t.completeFileUpload()}).catch(function(e){t.completeFileUpload(e)})},ck.prototype.completeFileUpload=function(e){if(e)return this._setError(e);this.s3ImagePath="",this.photoUrl=null,this.s3ImageFile=null,this.uploading=!1},ck.prototype.onPhotoError=function(){this.hasPhoto=!1},ck.prototype.onAlertClose=function(){this._setError(null)},ck.prototype._setError=function(e){this.errorMessage=e?e.message||e:null},ck.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-core",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],ck.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},ck.propDecorators={url:[{type:f.Input}],storageOptions:[{type:f.Input}],path:[{type:f.Input}],data:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}]},ck);function ck(e){this.amplifyService=e,this.hasPhoto=!1,this.uploading=!1,this.s3ImageFile=null,this.s3ImagePath="",this._storageOptions={},this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter,this.logger=this.amplifyService.logger("PhotoPickerComponent")}var lk,pk,jI=(lk=function(e,t){return(lk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}lk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),dk=(jI(fk,pk=uk),fk.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker-ionic",template:'\n<div class="amplify-photo-picker">\n<div class="amplify-photo-picker-container">\n  <div class="amplify-form-header">Select Photos</div>\n  <div class="amplify-photo-picker-upload" *ngIf="!hasPhoto"></div>\n  <div class="amplify-photo-picker-preview">\n    <img\n      class="amplify-photo-picker-preview"\n      src="{{photoUrl}}"\n      *ngIf="hasPhoto"\n      (error)="onPhotoError()"\n    />\n  </div>\n  <div class="amplify-upload-input">\n    <input type="file" \n      accept="image/*"\n      (change)="pick($event)"/>\n      <button \n        *ngIf="hasPhoto" \n        class="amplify-form-button amplify-upload-button" \n        (click)="uploadFile()">\n        Upload Photo\n      </button>\n  </div>\n</div>\n<div class="amplify-alert" *ngIf="errorMessage">\n  <div class="amplify-alert-body">\n    <span class="amplify-alert-icon">&#9888;</span>\n    <div class="amplify-alert-message">{{ errorMessage }}</div>\n    <a class="amplify-alert-close" (click)="onAlertClose()">&times;</a>\n  </div>\n</div>\n</div>\n'}]}],fk.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},fk);function fk(e){var t=pk.call(this,e)||this;return t.amplifyService=e,t}hk.prototype.ngOnInit=function(){this.loadComponent()},hk.prototype.ngOnDestroy=function(){},hk.prototype.loadComponent=function(){var t=this,e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(dk,{url:this.url,path:this.path,storageOptions:this.storageOptions}):new Co(uk,{url:this.url,path:this.path,storageOptions:this.storageOptions}),n=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.componentHost.viewContainerRef;r.clear();n=r.createComponent(n);n.instance.data=e.data,n.instance.picked.subscribe(function(e){t.picked.emit(e)}),n.instance.loaded.subscribe(function(e){t.loaded.emit(e)}),n.instance.uploaded.subscribe(function(e){t.uploaded.emit(e)})},hk.decorators=[{type:f.Component,args:[{selector:"amplify-photo-picker",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],hk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},hk.propDecorators={framework:[{type:f.Input}],url:[{type:f.Input}],path:[{type:f.Input}],storageOptions:[{type:f.Input}],picked:[{type:f.Output}],loaded:[{type:f.Output}],uploaded:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[cn]}]},MI=hk;function hk(e){this.componentFactoryResolver=e,this.picked=new f.EventEmitter,this.loaded=new f.EventEmitter,this.uploaded=new f.EventEmitter}var gk=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},vk=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};require("./aws-lex-audio.js");var mk={INITIAL:{MESSAGE:"Type your message or click  ðŸŽ¤",ICON:"ðŸŽ¤"},LISTENING:{MESSAGE:"Listening... click ðŸ”´ again to cancel",ICON:"ðŸ”´"},SENDING:{MESSAGE:"Please wait...",ICON:"ðŸ”Š"},SPEAKING:{MESSAGE:"Speaking...",ICON:"..."}},yk={silenceDetectionConfig:{time:2e3,amplitude:.2}},bk=(Object.defineProperty(Sk.prototype,"data",{set:function(e){this.botName=e.bot,this.chatTitle=e.title,this.clearComplete=e.clearComplete,this.conversationModeOn=!R.isUndefined(e.conversationModeOn)&&e.conversationModeOn,this.voiceEnabled=!R.isUndefined(e.voiceEnabled)&&e.voiceEnabled,this.textEnabled=!!R.isUndefined(e.textEnabled)||e.textEnabled,this.voiceConfig=e.voiceConfig||this.voiceConfig,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(this.botName,this.performOnComplete),!this.textEnabled&&this.voiceEnabled&&(this.currentVoiceState="Click the mic button",mk.INITIAL.MESSAGE="Click the mic button"),!this.voiceEnabled&&this.textEnabled&&(this.currentVoiceState="Type a message",mk.INITIAL.MESSAGE="Type a message"),this.voiceEnabled&&(this.audioControl=new LexAudio.audioControl)},enumerable:!0,configurable:!0}),Object.defineProperty(Sk.prototype,"bot",{set:function(e){this.botName=e,this.performOnComplete=this.performOnComplete.bind(this),this.amplifyService.interactions().onComplete(e,this.performOnComplete)},enumerable:!0,configurable:!0}),Object.defineProperty(Sk.prototype,"title",{set:function(e){this.chatTitle=e},enumerable:!0,configurable:!0}),Object.defineProperty(Sk.prototype,"clearOnComplete",{set:function(e){this.clearComplete=e},enumerable:!0,configurable:!0}),Sk.prototype.ngOnInit=function(){if(!this.amplifyService.interactions())throw new Error("Interactions module not registered on AmplifyService provider")},Sk.prototype.performOnComplete=function(e){this.complete.emit(e),this.clearComplete&&(this.messages=[])},Sk.prototype.onInputChange=function(e){this.inputText=e},Sk.prototype.onSubmit=function(e){var t,n=this;this.inputText&&(t={me:this.inputText,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.amplifyService.interactions().send(this.botName,this.inputText).then(function(e){n.inputText="",t.bot=e.message,t.botSentTime=(new Date).toLocaleTimeString(),n.messages.push(t)}).catch(function(e){return n.logger.error(e)}))},Sk.prototype.reset=function(){this.audioControl.clear(),this.inputText="",this.currentVoiceState=mk.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=mk.INITIAL.ICON,this.continueConversation=!1,this.micButtonDisabled=!1,this.ref.detectChanges()},Sk.prototype.onError=function(e){this.logger.error(e)},Sk.prototype.lexResponseHandler=function(){return gk(this,void 0,void 0,function(){var t;return vk(this,function(e){switch(e.label){case 0:return this.continueConversation?(t={content:this.audioInput,options:{messageType:"voice"}},[4,this.amplifyService.interactions().send(this.botName,t)]):[2];case 1:return t=e.sent(),this.lexResponse=t,this.currentVoiceState=mk.SPEAKING.MESSAGE,this.micText=mk.SPEAKING.ICON,this.micButtonDisabled=!0,t={me:this.lexResponse.inputTranscript,meSentTime:(new Date).toLocaleTimeString(),bot:"",botSentTime:""},this.inputText="",t.bot=this.lexResponse.message,t.botSentTime=(new Date).toLocaleTimeString(),this.messages.push(t),this.doneSpeakingHandler(),this.ref.detectChanges(),[2]}})})},Sk.prototype.doneSpeakingHandler=function(){var e=this;this.continueConversation&&("audio/mpeg"===this.lexResponse.contentType?this.audioControl.play(this.lexResponse.audioStream,function(){"ReadyForFulfillment"!==e.lexResponse.dialogState&&"Fulfilled"!==e.lexResponse.dialogState&&"Failed"!==e.lexResponse.dialogState&&e.conversationModeOn?(e.currentVoiceState=mk.LISTENING.MESSAGE,e.micText=mk.LISTENING.ICON,e.micButtonDisabled=!1,e.audioControl.startRecording(e.onSilenceHandler,null,e.voiceConfig.silenceDetectionConfig)):(e.inputDisabled=!1,e.currentVoiceState=mk.INITIAL.MESSAGE,e.micText=mk.INITIAL.ICON,e.micButtonDisabled=!1,e.continueConversation=!1),e.ref.detectChanges()}):(this.inputDisabled=!1,this.currentVoiceState=mk.INITIAL.MESSAGE,this.micText=mk.INITIAL.ICON,this.micButtonDisabled=!1,this.continueConversation=!1,this.ref.detectChanges()))},Sk.prototype.micButtonHandler=function(){return gk(this,void 0,void 0,function(){return vk(this,function(e){return this.continueConversation?this.reset():(this.inputDisabled=!0,this.continueConversation=!0,this.currentVoiceState=mk.LISTENING.MESSAGE,this.micText=mk.LISTENING.ICON,this.micButtonDisabled=!1,this.audioControl.startRecording(this.onSilenceHandler,null,this.voiceConfig.silenceDetectionConfig)),this.ref.detectChanges(),[2]})})},Sk.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-core",template:'\n<div class="amplify-interactions">\n\t<div class="amplify-interactions-container">\n\t\t<div class="amplify-form-container">\n\t\t\t<div class="amplify-form-row">\n\t\t\t\t<div class="amplify-interactions-conversation">\n\t\t\t\t\t<div *ngFor="let message of messages">\n\t\t\t\t\t\t<div class="amplify-interactions-input">{{message.me}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-input-timestamp">{{message.meSentTime}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response">{{message.bot}}</div>\n\t\t\t\t\t\t<div class="amplify-interactions-response-timestamp">{{message.botSentTime}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="amplify-interactions-actions">\n\t\t\t\t<input #inputValue\n\t\t\t\t\tdata-test="chatbot-message-input"\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[value]="inputText"\n\t\t\t\t\t(keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t\t(change)="onInputChange($event.target.value)"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\t*ngIf="textEnabled">\n\t\t\t\t<input #inputValue\n\t\t\t\t\ttype=\'text\'\n\t\t\t\t\tclass="amplify-form-input"\n\t\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t\t*ngIf="!textEnabled">\n\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t\t>\n\t\t\t\t\t{{micText}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\ttype="button"\n\t\t\t\t\t*ngIf="textEnabled"\n\t\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t\tclass="amplify-interactions-button"\n\t\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t\tng-click="!inputDisabled || onSubmit(inputValue.value)"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'}]}],Sk.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},Sk.propDecorators={complete:[{type:f.Output}],data:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearOnComplete:[{type:f.Input}]},Sk);function Sk(e,t){var n=this;this.amplifyService=t,this.inputText="",this.clearComplete=!1,this.messages=[],this.completions={},this.currentVoiceState=mk.INITIAL.MESSAGE,this.inputDisabled=!1,this.micText=mk.INITIAL.ICON,this.voiceConfig=yk,this.continueConversation=!1,this.micButtonDisabled=!1,this.conversationModeOn=!1,this.voiceEnabled=!1,this.textEnabled=!0,this.complete=new f.EventEmitter,this.onSilenceHandler=function(){n.continueConversation&&(n.audioControl.exportWAV(function(e){n.currentVoiceState=mk.SENDING.MESSAGE,n.audioInput=e,n.micText=mk.SENDING.ICON,n.micButtonDisabled=!0,n.lexResponseHandler()}),n.ref.detectChanges())},this.ref=e,this.continueConversation=!1,this.logger=this.amplifyService.logger("ChatbotComponent")}var wk,Ck,BI=(wk=function(e,t){return(wk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}wk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_k=(BI(Ek,Ck=bk),Ek.decorators=[{type:f.Component,args:[{selector:"amplify-interactions-ionic",template:'\n<div class="amplify-interactions-container">\n\t<div class="amplify-form-container">\n\t\t<ion-grid>\n\t\t\t<ion-row *ngIf="chatTitle"> \n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t\t<ion-label>{{chatTitle}}</ion-label>\n\t\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t\t<ion-row *ngFor="let message of messages">\n\t\t\t\t<ion-col>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<ion-chip style="float:right">\n\t\t\t\t\t\t\t\t<ion-label>{{message.me}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t\t<ion-row>\n\t\t\t\t\t\t<ion-col align-self-start>\n\t\t\t\t\t\t\t<ion-chip color="primary">\n\t\t\t\t\t\t\t\t<ion-label>{{message.bot}}</ion-label>\n\t\t\t\t\t\t\t</ion-chip>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t\t<ion-col align-self-end>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t&nbsp;\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</ion-col>\n\t\t\t\t\t</ion-row>\n\t\t\t\t</ion-col>\n\t\t\t</ion-row>\n\t\t</ion-grid>\n\t\t<div class="amplify-form-row">\n\t\t    <ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t        class="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t        placeholder="{{currentVoiceState}}"\n\t\t        [value]="inputText"\n\t\t        (keyup.enter)="onSubmit(inputValue.value)"\n\t\t\t\t(ionChange)="onInputChange($event.target.value)"\n\t\t\t\t[disabled]="inputDisabled"\n\t\t\t\t*ngIf="textEnabled"></ion-input>\n\t\t\t<ion-input #inputValue\n\t\t\t\ttype=\'text\'\n\t\t\t\tclass="amplify-form-input amplify-form-input-interactions-ionic"\n\t\t\t\tplaceholder="{{currentVoiceState}}"\n\t\t\t\t[disabled]="!textEnabled"\n\t\t\t\t*ngIf="!textEnabled"></ion-input>\n\t\t\t<ion-button \n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="voiceEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="micButtonHandler()"\n\t\t\t\t[disabled]="micButtonDisabled"\n\t\t\t>\n\t\t\t\t{{micText}}\n\t\t\t</ion-button>\n\t\t\t<ion-button\n\t\t\t\texpand="block"\n\t\t\t\t*ngIf="textEnabled"\n\t\t\t\tng-style="{float: \'right\'}"\n\t\t\t\t(click)="inputDisabled === false || onSubmit(inputValue.value)"\n\t\t\t>\n\t\t\t\tSend\n\t\t\t</ion-button>\n\t\t</div>\n\t</div>\n</div>\n'}]}],Ek.ctorParameters=function(){return[{type:f.ChangeDetectorRef},{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},Ek);function Ek(e,t){e=Ck.call(this,e,t)||this;return e.amplifyService=t,e}Ak.prototype.ngOnInit=function(){this.loadComponent()},Ak.prototype.ngOnDestroy=function(){},Ak.prototype.loadComponent=function(){var t=this,e={bot:this.bot,title:this.title,clearComplete:this.clearComplete,conversationModeOn:this.conversationModeOn,voiceConfig:this.voiceConfig,voiceEnabled:this.voiceEnabled,textEnabled:this.textEnabled},n=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(_k,e):new Co(bk,e),r=this.componentFactoryResolver.resolveComponentFactory(n.component),e=this.componentHost.viewContainerRef;e.clear();r=e.createComponent(r);r.instance.data=n.data,r.instance.complete.subscribe(function(e){t.complete.emit(e)})},Ak.decorators=[{type:f.Component,args:[{selector:"amplify-interactions",template:'\n\t\t<div class="amplify-component">\n\t\t\t<ng-template component-host></ng-template>\n\t\t</div>\n\t'}]}],Ak.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},Ak.propDecorators={framework:[{type:f.Input}],bot:[{type:f.Input}],title:[{type:f.Input}],clearComplete:[{type:f.Input}],conversationModeOn:[{type:f.Input}],voiceConfig:[{type:f.Input}],voiceEnabled:[{type:f.Input}],textEnabled:[{type:f.Input}],complete:[{type:f.Output}],componentHost:[{type:f.ViewChild,args:[cn]}]},UI=Ak;function Ak(e){this.componentFactoryResolver=e,this.complete=new f.EventEmitter}Object.defineProperty(Ik.prototype,"title",{set:function(e){this.title=e},enumerable:!0,configurable:!0}),Ik.decorators=[{type:f.Component,args:[{selector:"amplify-form",template:'\n<div class="amplify-form">\n  <div class="form-header">\n    <div class="form-title">{{ title }}</div>\n  </div>\n  <div class="form-body">\n    <ng-content select="[form-body]"></ng-content>\n  </div>\n  <div class="form-footer">\n    <ng-content select="[form-footer]"></ng-content>\n  </div>\n</div>\n'}]}],Ik.propDecorators={title:[{type:f.Input}]},jI=Ik;function Ik(){}var kk=function(e,s,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{o(u.next(e))}catch(e){t(e)}}function i(e){try{o(u.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,i)}o((u=u.apply(e,s||[])).next())})},Tk=function(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&t[0]?o.return:t[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,t[1])).done)return s;switch(o=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,o=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],o=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},BI='\n<div id="sumerian-scene-container" class={{amplifyUI.sumerianSceneContainer}} data-test="'+AI+'">\n  <div id="sumerian-scene-dom-id" class={{amplifyUI.sumerianScene}} data-test="'+II+'">\n    <sumerian-scene-loading-core *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} sceneError={{sceneError}} data-test="'+kI+'"></sumerian-scene-loading-core>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+LI+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+NI+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',Pk=(Object.defineProperty(Ok.prototype,"data",{set:function(e){this.sceneName=e.sceneName},enumerable:!0,configurable:!0}),Ok.prototype.ngOnInit=function(){if(document.addEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.addEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this)),!this.amplifyService.xr())throw new Error("XR module not registered on AmplifyService provider");this.loadAndStartScene()},Ok.prototype.ngOnDestroy=function(){document.removeEventListener("fullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("webkitfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("mozfullscreenchange",this.onFullscreenChange.bind(this)),document.removeEventListener("MSFullscreenChange",this.onFullscreenChange.bind(this))},Ok.prototype.loadAndStartScene=function(){return kk(this,void 0,void 0,function(){var t,n=this;return Tk(this,function(e){switch(e.label){case 0:this.loading=!0,t={progressCallback:this.progressCallback},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.amplifyService.xr().loadScene(this.sceneName,"sumerian-scene-dom-id",t)];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),this.sceneError="Failed to load scene",this.logger.error(this.sceneError,t),[2];case 4:return this.amplifyService.xr().start(this.sceneName),this.loading=!1,this.muted=this.amplifyService.xr().isMuted(this.sceneName),this.isVRCapable=this.amplifyService.xr().isVRCapable(this.sceneName),this.isVRPresentationActive=this.amplifyService.xr().isVRPresentationActive(this.sceneName),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioEnabled",function(){return n.showEnableAudio=!1}),this.amplifyService.xr().onSceneEvent(this.sceneName,"AudioDisabled",function(){return n.showEnableAudio=!0}),[2]}})})},Ok.prototype.setMuted=function(e){this.muted=e,this.amplifyService.xr().setMuted(this.sceneName,e),this.showEnableAudio&&(this.amplifyService.xr().enableAudio(this.sceneName),this.showEnableAudio=!1)},Ok.prototype.toggleVRPresentation=function(){try{this.isVRPresentationActive?this.amplifyService.xr().exitVR(this.sceneName):this.amplifyService.xr().enterVR(this.sceneName)}catch(e){return void this.logger.error("Unable to start/stop WebVR System: "+e.message)}this.isVRPresentationActive=!this.isVRPresentationActive},Ok.prototype.onFullscreenChange=function(){var e=document;this.isFullscreen=null!==e.fullscreenElement},Ok.prototype.maximize=function(){return kk(this,void 0,void 0,function(){var t;return Tk(this,function(e){return t=document.getElementById("sumerian-scene-container"),(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen).call(t),[2]})})},Ok.prototype.minimize=function(){return kk(this,void 0,void 0,function(){var t;return Tk(this,function(e){return(t=document).exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen(),[2]})})},Ok.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-core",template:BI}]}],Ok.ctorParameters=function(){return[{type:hI}]},Ok.propDecorators={sceneName:[{type:f.Input}],data:[{type:f.Input}]},Ok);function Ok(e){var t=this;this.amplifyService=e,this.loading=!1,this.loadPercentage=0,this.muted=!1,this.showEnableAudio=!1,this.isVRCapable=!1,this.isVRPresentationActive=!1,this.isFullscreen=!1,this.sceneError=null,this.progressCallback=function(e){t.loadPercentage=100*e},this.amplifyUI=M,this.logger=this.amplifyService.logger("SumerianSceneComponentCore")}var xk,Lk,BI=(xk=function(e,t){return(xk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}xk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),LI='\n<div id="sumerian-scene-container" [ngClass]="amplifyUI.sumerianSceneContainer" data-test="'+AI+'">\n  <div id="sumerian-scene-dom-id" [class]="amplifyUI.sumerianScene" data-test="'+II+'">\n    <sumerian-scene-loading-ionic *ngIf="loading" loadPercentage={{loadPercentage}} sceneName={{sceneName}} data-test="'+kI+'"></sumerian-scene-loading-ionic>\n  </div>\n  <div *ngIf="!loading" class={{amplifyUI.sceneBar}} data-test="'+LI+'">\n    <span class={{amplifyUI.sceneActions}} data-test="'+NI+'">\n      <div [ngClass]="[amplifyUI.tooltip, showEnableAudio ? amplifyUI.autoShowTooltip : \'\']" [attr.data-text]="showEnableAudio ? \'The scene is muted. Click to unmute.\' : (muted ? \'Unmute\' : \'Mute\')" (click)="muted ? setMuted(false) : setMuted(true)">\n        <button class={{amplifyUI.actionButton}}>\n          <svg *ngIf="muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOff" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 C3.63825091,12.9630494 3.79237961,13.0108921 3.92264322,13.1003479 L8.77467683,16.8113609 C9.29423971,17.1679383 10,16.7950396 10,16.1637406 L10,3.78619489 C10,3.15489596 9.29423971,2.78199725 8.77467683,3.13857463 L3.92264322,6.84545211 C3.79237961,6.93490793 3.63825091,6.9827506 3.48026899,6.9827506 L1.78294894,6.9827506 C1.3505185,6.9827506 1,7.33409518 1,7.76754476 L1,12.1781306 C1,12.6117048 1.3505185,12.9630494 1.78294894,12.9630494 L3.48026899,12.9630494 Z M17.2118156,7 L15.0918385,9.11997713 L12.9718614,7 L12,7.97174685 L14.1200917,10.091724 L12,12.2118156 L12.9718614,13.1835625 L15.0918385,11.0635854 L17.2118156,13.1835625 L18.1835625,12.2118156 L16.0635854,10.091724 L18.1835625,7.97174685 L17.2118156,7 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n          <svg *ngIf="!muted" width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/volumeOn" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M3.48026899,12.9630494 L1.78294894,12.9630494 C1.3505185,12.9630494 1,12.6117048 1,12.1781306 L1,7.76754476 C1,7.33409518 1.3505185,6.9827506 1.78294894,6.9827506 L3.48026899,6.9827506 C3.63825091,6.9827506 3.79237961,6.93490793 3.92264322,6.84545211 L8.77467683,3.13857463 C9.29423971,2.78199725 10,3.15489596 10,3.78619489 L10,16.1637406 C10,16.7950396 9.29423971,17.1679383 8.77467683,16.8113609 L3.92264322,13.1003479 C3.79237961,13.0108921 3.63825091,12.9630494 3.48026899,12.9630494 Z M14.9270376,3.03232286 C15.1729267,3.03232286 15.4040399,3.12815658 15.5777627,3.3022351 C17.3699891,5.09889099 18.3570052,7.48235058 18.3570052,10.0135053 C18.3570052,12.54466 17.3699891,14.9281196 15.5777627,16.7247755 C15.4041045,16.898854 15.1729914,16.9947524 14.9270052,16.9947524 C14.6820861,16.9947524 14.4515549,16.899436 14.2777674,16.7263598 C13.9192316,16.3684383 13.9185203,15.7852882 14.2762477,15.4264291 C15.7222893,13.9769926 16.5186727,12.0545954 16.5186727,10.0135053 C16.5186727,7.97241524 15.7222893,6.05001801 14.2762154,4.60058152 C13.9184879,4.24175473 13.9191992,3.65857229 14.277832,3.30065081 C14.4514256,3.1275746 14.6819567,3.03232286 14.9270376,3.03232286 Z M13.5730665,6.11570485 C14.6133991,7.15574642 15.1862998,8.54003279 15.1862998,10.0134924 C15.1862998,11.4892799 14.6113945,12.8741159 13.5675376,13.9128965 C13.3942351,14.0855848 13.1639626,14.1806425 12.9191727,14.1806425 C12.6727016,14.1806425 12.4412975,14.0844531 12.2677039,13.9097926 C12.0944984,13.7358111 11.9994406,13.5047303 11.9999903,13.2592291 C12.0005723,13.0136956 12.096794,12.7831644 12.2708079,12.6100882 C12.9654406,11.9185917 13.3479995,10.996467 13.3479995,10.0134924 C13.3479995,9.03119677 12.966346,8.1086194 12.2733298,7.4157649 C11.9150203,7.05745543 11.9149233,6.47436998 12.2731358,6.11589885 C12.4467617,5.94224065 12.6775838,5.84666559 12.923085,5.84666559 C13.1685538,5.84666559 13.3993436,5.94220831 13.5730665,6.11570485 Z" id="Fill-2" fill="#FFFFFF"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && !isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Enter VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 17 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="VRon" fill="#FFFFFF" fill-rule="nonzero">\n                <path d="M15.7856977,0.02395184 L15.8915734,0.02395184 C16.5037405,0.02395184 17,0.520211324 17,1.13237842 L17,1.54663675 L17,8.8915038 C17,9.5034193 16.4560011,10 15.7856977,10 L12.0095825,10 C9.98324439,7.1593807 8.80676009,5.741338 8.48012959,5.74587199 C8.16206045,5.75028714 7.01003321,7.1683298 5.02404785,10 L1.21426911,10 C0.543965735,10 3.32031236e-05,9.5034193 3.32031236e-05,8.8915038 L3.32031236e-05,1.54663675 L3.32031236e-05,1.13237842 L3.32031236e-05,1.13237842 C3.32031236e-05,0.520211324 0.496292687,0.02395184 1.10845978,0.02395184 L1.21426911,0.02395184 L15.7856977,0.02395184 Z M4.5,6 C5.32842712,6 6,5.32842712 6,4.5 C6,3.67157288 5.32842712,3 4.5,3 C3.67157288,3 3,3.67157288 3,4.5 C3,5.32842712 3.67157288,6 4.5,6 Z M12.5,6 C13.3284271,6 14,5.32842712 14,4.5 C14,3.67157288 13.3284271,3 12.5,3 C11.6715729,3 11,3.67157288 11,4.5 C11,5.32842712 11.6715729,6 12.5,6 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isVRCapable && isVRPresentationActive" class={{amplifyUI.tooltip}} data-text="Exit VR" (click)="toggleVRPresentation()">\n        <button class={{amplifyUI.actionButton}}>\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/VRon-Copy" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <g id="Group-7-Copy" transform="translate(1.000000, 3.000000)" fill="#FFFFFF">\n                <path d="M15.7856977,3.02395184 L17,3.02395184 L17,4.13237842 L17,4.54663675 L17,11.8915038 C17,12.5034193 16.4560011,13 15.7856977,13 L12.0095825,13 C9.98324439,10.1593807 8.80676009,8.741338 8.48012959,8.74587199 C8.16206045,8.75028714 7.01003321,10.1683298 5.02404785,13 L1.21426911,13 C0.543965735,13 3.32031236e-05,12.5034193 3.32031236e-05,11.8915038 L3.32031236e-05,4.54663675 L3.32031236e-05,4.13237842 L3.32031236e-05,3.02395184 L1.21426911,3.02395184 L15.7856977,3.02395184 Z M4.5,9 C5.32842712,9 6,8.32842712 6,7.5 C6,6.67157288 5.32842712,6 4.5,6 C3.67157288,6 3,6.67157288 3,7.5 C3,8.32842712 3.67157288,9 4.5,9 Z M12.5,9 C13.3284271,9 14,8.32842712 14,7.5 C14,6.67157288 13.3284271,6 12.5,6 C11.6715729,6 11,6.67157288 11,7.5 C11,8.32842712 11.6715729,9 12.5,9 Z M2.5486669,0 L14.420089,0 C14.7977406,0 15.1613805,0.149260956 15.4374308,0.417695511 L16.9999668,2.00634766 L0,2.00634766 L1.58537972,0.395493117 C1.84682061,0.141306827 2.19106994,0 2.5486669,0 Z" id="Fill-1"></path>\n              </g>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="!isFullscreen" class={{amplifyUI.tooltip}} data-text="Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="maximize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screenfull" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M2.04162598,3 L2.04162598,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z M3,4 L16,4 L16,15 L3,15 L3,4 Z" id="Rectangle-Copy" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n      <div *ngIf="isFullscreen" class={{amplifyUI.tooltip}} data-text="Exit Fullscreen">\n        <button class={{amplifyUI.actionButton}} (click)="minimize()">\n          <svg width="19px" height="19px" viewBox="0 0 19 19" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n            <g id="icons/minis/screensmall" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n              <path d="M11,16 L17.0147705,16 L17.0147705,3 L2.04162598,3 L2.04162598,10 L11,10 L11,16 Z M1,2 L18,2 L18,17 L1,17 L1,2 Z" id="Rectangle" fill="#FFFFFF" fill-rule="nonzero"></path>\n            </g>\n          </svg>\n        </button>\n      </div>\n    </span>\n  </div>\n</div>\n',Nk=(BI(Rk,Lk=Pk),Rk.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-ionic",template:LI}]}],Rk.ctorParameters=function(){return[{type:hI}]},Rk);function Rk(e){var t=Lk.call(this,e)||this;return t.amplifyService=e,t}Mk.prototype.ngOnInit=function(){this.loadComponent()},Mk.prototype.ngOnDestroy=function(){},Mk.prototype.loadComponent=function(){var e=this.framework&&"ionic"===this.framework.toLowerCase()?new Co(Nk,{sceneName:this.sceneName}):new Co(Pk,{sceneName:this.sceneName}),t=this.componentFactoryResolver.resolveComponentFactory(e.component),n=this.componentHost.viewContainerRef;n.clear(),n.createComponent(t).instance.data=e.data},Mk.decorators=[{type:f.Component,args:[{selector:"amplify-sumerian-scene",template:"\n\t\t<ng-template component-host></ng-template>\n\t"}]}],Mk.ctorParameters=function(){return[{type:f.ComponentFactoryResolver}]},Mk.propDecorators={framework:[{type:f.Input}],sceneName:[{type:f.Input}],componentHost:[{type:f.ViewChild,args:[cn]}]},NI=Mk;function Mk(e){this.componentFactoryResolver=e}Uk.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-core",template:'\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+TI+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+PI+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+xI+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+OI+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n"}]}],Uk.ctorParameters=function(){return[]},Uk.propDecorators={loadPercentage:[{type:f.Input}],sceneName:[{type:f.Input}],sceneError:[{type:f.Input}]},BI=Uk;function Uk(){this.AmplifyUI=M}LI=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},NI=[_I,vI,xA,VI,SI,XI,LA,s4,at,v4,y2,_4,kA,O4,dA,D4,FI,eI,zI,$4,RI,tk,MI,uk,UI,bk,jI,NI,Pk,BI],Dk.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,p],declarations:LI([cn],NI),entryComponents:LI(NI),providers:[],exports:LI(NI)}]}],cn=Dk;function Dk(){}var Fk,jk,LI=(Fk=function(e,t){return(Fk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Fk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),NI='\n<ion-grid class="amplify-ionic-grid-padding-left">\n    <ion-row>\n        <ion-col size="6" class="amplify-ionic-grid-padding-left">\n            <ion-label class="amplify-input-label push-right"\n                position="stacked" \n                for="localPhoneNumberField">\n                {{ this.amplifyService.i18n().get(this._label) }}\n                <span *ngIf="_required">*</span>\n            </ion-label>\n            <ion-select \n            #countryCodeField\n            name="countryCode"\n            class="amplify-select-phone-country"\n            [value]="_country_code"\n            (ionChange)="setCountryCode($event.target.value)"\n            data-test="'+DI.dialCodeSelect+'">\n            <ion-select-option *ngFor="let country of _countries"\n            value={{country.value}}>\n                {{country.label}}\n            </ion-select-option>\n            </ion-select>\n        </ion-col>\n        <ion-col size="6">\n            <ion-label class="amplify-input-label push-right">&nbsp;</ion-label>\n            <ion-input\n            #localPhoneNumberField\n            class="amplify-form-input-phone-ionic"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            name="local_phone_number"\n            type="tel"\n            (ionChange)="setLocalPhoneNumber($event.target.value)"\n            data-test="'+DI.phoneNumberInput+'"\n            ></ion-input>\n        </ion-col>\n    </ion-row>\n</ion-grid>',eI=(LI(Bk,jk=eI),Bk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-phone-field-ionic",template:NI}]}],Bk.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},Bk);function Bk(e){var t=jk.call(this,e)||this;return t.amplifyService=e,t}var zk,Vk,NI=(zk=function(e,t){return(zk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}zk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),DI='\n\n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'email\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="emailField" position="stacked">{{ this.amplifyService.i18n().get(\'Email *\') }}</ion-label>\n        <ion-input type="text"\n            #emailField\n            class="amplify-form-input"\n            type="email"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setEmail($event.target.value)"\n            data-test="'+DI.emailInput+'"\n        ></ion-input>\n    </ion-item> \n    <ion-item lines="none" *ngIf="this._usernameAttributes === \'phone_number\'">\n       <amplify-auth-phone-field-ionic\n            (phoneFieldChanged)="onPhoneFieldChanged($event)"\n        ></amplify-auth-phone-field-ionic>\n    </ion-item>\n    <ion-item lines="none" *ngIf="this._usernameAttributes !== \'email\' && this._usernameAttributes !== \'phone_number\'">\n        <ion-label class="amplify-input-label amplify-input-label-ionic" for="usernameField" position="stacked">{{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</ion-label>\n        <ion-input type="text"\n            #usernameField\n            class="amplify-form-input"\n            type="text"\n            placeholder="{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}"\n            (input)="setUsername($event.target.value)"\n            data-test="'+DI.usernameInput+'"\n        ></ion-input>\n    </ion-item>\n\n',FI=(NI(qk,Vk=FI),qk.decorators=[{type:f.Component,args:[{selector:"amplify-auth-username-field-ionic",template:DI}]}],qk.ctorParameters=function(){return[{type:hI,decorators:[{type:f.Inject,args:[hI]}]}]},qk);function qk(e){var t=Vk.call(this,e)||this;return t.amplifyService=e,t}var Kk,Hk,DI=(Kk=function(e,t){return(Kk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Kk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),OI='\n<div class={{AmplifyUI.loadingOverlay}}>\n  <div class={{AmplifyUI.loadingContainer}}>\n    <div class={{AmplifyUI.loadingLogo}} data-test="'+TI+'">\n      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n      viewBox="0 0 2000 1195" style="enable-background:new 0 0 2000 1195;" xml:space="preserve">\n        <g>\n          <path class="st0" d="M1026.8,146.2c-0.7,2.3-1.2,3.7-1.6,5.1C991.8,291,958.5,430.6,925,570.3c-1.6,6.7-3.8,13.3-6.2,19.7\n            c-3.9,10.4-12,16.3-22.8,16.5c-26.3,0.5-52.6,0.5-78.9,0c-9.5-0.2-17.3-5.3-21.2-14.2c-4.1-9.2-7.6-18.7-10.6-28.3\n            c-51-167.3-101.9-334.6-152.7-502c-2.5-8.4-4.7-16.9-6.2-25.5c-2-11.7,3.8-18.9,15.5-19c24.6-0.2,49.2,0.1,73.8,0.4\n            c12,0.2,21.1,5.9,24.8,17.3c5.4,16.3,10.1,32.8,14.4,49.4c33.9,133.3,67.7,266.6,101.5,399.9c0.3,1.3,0.8,2.6,1.5,5\n            c0.7-2,1.3-3,1.5-4.1c19.9-84.2,39.7-168.4,59.6-252.7c14.5-61.3,28.9-122.6,43.4-183.8c0.9-3.6,2.1-7.1,3.2-10.6\n            c4-13.2,13.5-19.8,26.6-20.1c24.1-0.6,48.2-0.5,72.3,0c12.6,0.2,21.5,7.2,25.1,19.2c3.9,12.9,7.1,26,10.1,39.1\n            c32.5,137.8,65,275.6,97.5,413.4c0.3,1.4,0.8,2.8,1.7,5.7c1.7-6.1,3-10.7,4.2-15.3c36.8-142.6,73.6-285.2,110.5-427.8\n            c1.4-5.5,3.7-10.8,5.7-16.2c4.5-12,13.8-17.8,26.1-18.1c21.7-0.6,43.5-0.5,65.2-0.7c2.2,0,4.4,0,6.6,0.3c9.9,1,14.9,5.9,14.3,15.9\n            c-0.4,7.5-1.8,15.1-4.1,22.3c-33.5,107.9-67.2,215.6-100.9,323.5c-20.5,65.7-41,131.4-61.6,197.1c-1.3,4-2.8,7.9-4.3,11.9\n            c-4.9,12.9-14.9,19.1-28.1,19.4c-23.9,0.5-47.9,0.4-71.8,0c-13.6-0.2-23.3-7.1-27.2-20.2c-4.5-15.5-8.3-31.2-12.1-46.9\n            c-31.2-129.6-62.3-259.3-93.4-388.9C1028,150.1,1027.5,148.7,1026.8,146.2z"/>\n          <path class="st0" d="M995.7,1194.2c-23.1,0-46.2,0.8-69.3-0.2c-25.4-1.1-50.7-3.5-76-5.7c-77.9-7-154.6-20.9-230.3-40.5\n            c-68.1-17.6-134.6-40.1-199.4-67.3C330.7,1042.5,245.3,996,164.5,941c-53.7-36.6-104.7-76.7-153-120.1c-3.5-3.1-6.6-6.8-9-10.8\n            c-3.5-5.8-3.4-12.1,0.8-17.5c4.3-5.6,10.5-7.4,17.2-5.7c4.5,1.2,8.8,3.3,12.9,5.5c42.2,22.1,83.9,45.3,126.7,66.4\n            c63.2,31.2,128.6,57.4,195.1,80.8c68.4,24,137.7,44.8,208.4,60.6c48.4,10.8,97.2,19.9,146,28.7c29.8,5.3,59.9,8.8,89.9,12.3\n            c23.4,2.7,46.9,4.6,70.3,6.3c22.8,1.7,45.7,3.3,68.5,4c39.8,1.1,79.5,2.1,119.3,1.8c29.9-0.2,59.9-2,89.8-4\n            c26.2-1.7,52.4-3.7,78.4-7.1c46.8-6.2,93.6-12.7,140.1-20.9c99-17.3,196-42.9,290.8-76.1c40.7-14.3,80.6-30.6,120.8-46.1\n            c12-4.6,23.6-5.4,34.7,2c11.5,7.7,15.3,22.7,7.6,34.2c-4,6-9.6,11.4-15.4,15.7c-81,59.3-169.6,104.7-262.8,141.3\n            c-77,30.2-156,53.6-237,70.3c-37.9,7.8-76.1,13.8-114.3,19.6c-24.7,3.7-49.7,6-74.7,8.2c-22.1,1.9-44.3,3.3-66.5,4.1\n            c-17.8,0.7-35.7,0.1-53.6,0.1C995.7,1194.3,995.7,1194.2,995.7,1194.2z"/>\n          <path class="st0" d="M1714.8,0c39.2,0.9,85.7,8.5,130.2,26.1c9.3,3.7,17.9,9.3,26.1,15.1c9,6.4,13.3,15.9,13.4,27.1\n            c0,12,0.1,23.9,0,35.9c0,2.5-0.4,5.1-1,7.5c-2.1,8.7-7.4,12.7-16.2,11.4c-5.7-0.9-11.6-2.6-16.8-5c-46.6-21.8-95.9-30.1-147-28.3\n            c-21.5,0.8-42.6,3.5-62.7,11.9c-37.6,15.6-54.4,54.2-39.7,91c7.1,17.8,21.1,28.8,37.3,37.7c21.4,11.8,44.5,19.1,67.6,26.5\n            c31.6,10,63.3,19.7,94.6,30.6c28.5,9.9,55.1,24,76.4,46.1c23.3,24.1,36.4,53.2,39.9,86.5c9.1,86.7-40.5,150.8-109.3,180.7\n            c-38.9,16.8-79.7,24.4-122,24.6c-56.9,0.2-112-9.7-164.9-30.7c-9.4-3.8-18.3-9.3-26.9-14.8c-9.7-6.2-13.6-16.1-13.9-27.3\n            c-0.4-13-0.3-26-0.1-38.9c0.3-14.9,8.1-21.1,22.5-17.3c8.2,2.2,16.2,5.6,24.1,9c52.7,22.5,107.7,31.7,164.8,29.6\n            c24.9-0.9,49.4-4.7,72-16c29.7-14.9,45.7-38.5,44.5-72.4c-0.9-23.7-11.9-41.7-31.7-54.4c-17.2-10.9-36.1-18-55.4-24.1\n            c-36.4-11.5-73.1-22.4-109.3-34.6c-30.8-10.4-58.7-26.2-81.4-50.2c-43.4-45.8-56.3-116.8-30.6-172.5c18.1-39.3,48.5-66.6,86.9-85.5\n            C1624,6.4,1664.5,0,1714.8,0z"/>\n          <path class="st0" d="M1860.6,746.5c33.3,0.4,66.3,2.8,98.5,11.6c8.4,2.3,16.5,5.8,24.6,9.1c7.5,3.1,11.9,9.2,13.5,17.2\n            c2.5,12.2,3.1,24.5,2.5,37.1c-1.2,24-5,47.5-10.5,70.8c-12.3,51.3-31.6,99.8-60.1,144.4c-16.5,25.9-36,49.3-59.4,69.2\n            c-5.2,4.4-10.7,8.3-17.9,8.4c-6.8,0-10.7-3.5-10.3-10.2c0.2-4.1,1.3-8.3,2.9-12.1c17-42.7,33.7-85.6,47-129.7\n            c7.6-25.2,14.3-50.6,16.5-76.9c0.7-8.8,0.1-17.9-1.1-26.7c-1.6-12-9.3-19.8-20.2-24.6c-12.5-5.4-25.8-8.2-39.2-9.1\n            c-18.6-1.3-37.4-2.3-56-2c-20.7,0.4-41.3,2.1-62,3.7c-18.8,1.4-37.5,3.3-56.3,5.2c-9.9,1-19.7,2.4-29.5,3.6c-1,0.1-2,0.4-3,0.3\n            c-4.8-0.2-9.7-0.8-12.4-5.4c-2.7-4.6-1.8-9.7,1.5-13.2c5.1-5.5,10.6-10.8,16.9-14.9c36.4-24,76.8-38.4,119.4-46.2\n            c22.1-4,44.6-5.9,67-8.3C1842.1,746.9,1851.4,746.9,1860.6,746.5z"/>\n          <path class="st0" d="M591.6,541.4c-21.4-36.5-29.7-76.2-29.7-117.9c-0.1-70.3,0.1-140.6-0.1-211c-0.1-29.6-3.8-58.8-13-87.1\n            c-15.6-48-45.4-83.2-92.4-102.9C424.8,9.3,391.7,3.9,357.9,2c-63.7-3.6-125.3,6.4-184.7,29.3c-11.7,4.5-23,10.3-34.3,16\n            c-11.6,5.8-17.3,15.4-17.1,28.6c0.2,12.6-0.1,25.3,0,37.9c0,2.9,0.1,5.8,0.7,8.5c2,9.5,7.9,13.7,17.3,11.2c8.4-2.2,16.8-5,24.9-8.2\n            c40.4-15.9,81.7-28.9,125.3-32.1c29.7-2.2,59.3-1.4,88.3,6.5c24.2,6.6,44.8,18.5,57.2,41.5c10.1,18.6,15.1,38.7,16.1,59.5\n            c1.3,24.7,1,49.5,1.4,74.3c0,0.8-0.2,1.6-0.3,2.8c-16.1-3.3-31.5-6.6-47.1-9.5c-46.9-8.6-94.1-13.2-141.8-7.7\n            c-33.5,3.9-65.4,12.9-94.4,30.5c-37.4,22.6-64.8,53.5-78.2,95.7c-10.9,34.3-11.9,69.4-4.4,104.4c12,56.1,44.4,96,97.9,117.4\n            c41.8,16.6,85.2,17.2,128.9,9.5c57.4-10.1,104-39.3,142.3-82.5c1.3-1.5,2.7-2.9,4.3-4.8c1.7,3.4,3.1,6.2,4.5,9\n            c10.4,21.4,22.2,42,38.5,59.7c11.2,12.1,24,14.5,37.5,5.8c14.5-9.3,28.8-18.8,42.9-28.6C597.7,567,600.3,556.1,591.6,541.4z\n              M448.3,436.2c-7.1,29.5-25.4,50.8-49.1,68.2c-22,16.2-47.4,23.8-73.8,28.5c-20.7,3.6-41.6,4.4-62.3-0.2\n            c-35.6-8-59.6-35.5-63.5-72.3c-2.3-21.9-1.9-43.5,7-64.1c11.9-27.6,34-43.2,61.9-51.5c21.4-6.4,43.4-7.9,63.7-7.5\n            c41.1,0.2,79.8,5.3,117.9,14.4c1.6,0.4,4.1,2.4,4.1,3.7C454.7,382.5,454.7,409.6,448.3,436.2z"/>\n        </g>\n      </svg>\n    </div>\n    <div class={{AmplifyUI.loadingSceneName}} data-test="'+PI+'">{{sceneName}}</div>\n    <div *ngIf="sceneError" class={{AmplifyUI.sceneErrorText}} data-test="'+xI+'">{{sceneError}}</div>\n    <div *ngIf="!sceneError" class={{AmplifyUI.loadingBar}} data-test="'+OI+"\">\n      <div class={{AmplifyUI.loadingBarFill}} [ngStyle]=\"{ 'width': loadPercentage + '%' }\"></div>\n    </div>\n  </div>\n</div>\n",BI=(DI(Gk,Hk=BI),Gk.decorators=[{type:f.Component,args:[{selector:"sumerian-scene-loading-ionic",template:OI}]}],Gk.ctorParameters=function(){return[]},Gk);function Gk(){return Hk.call(this)||this}OI=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},BI=[wI,GI,n4,z4,R4,l4,S4,FI,eI,k4,dk,X4,ok,_k,Nk,BI],Wk.decorators=[{type:f.NgModule,args:[{imports:[t.CommonModule,p],declarations:OI(BI),entryComponents:OI(BI),providers:[hI],schemas:[f.CUSTOM_ELEMENTS_SCHEMA],exports:OI(BI)}]}],BI=Wk;function Wk(){}e.AmplifyAngularModule=cn,e.AmplifyIonicModule=BI,e.AmplifyModules=function(e){return new hI(e)},e.AmplifyService=hI,Object.defineProperty(e,"__esModule",{value:!0})});
