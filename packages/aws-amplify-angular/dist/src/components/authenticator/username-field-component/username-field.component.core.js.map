{"version":3,"file":"username-field.component.core.js","sourceRoot":"","sources":["../../../../../src/components/authenticator/username-field-component/username-field.component.core.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAeA,OAAO,EACN,SAAS,EACT,KAAK,EAEL,YAAY,EACZ,MAAM,EACN,MAAM,GACN,MAAM,eAAe,CAAC;AACvB,OAAO,EAAE,QAAQ,EAAE,MAAM,WAAW,CAAC;AACrC,OAAO,EACN,kBAAkB,GAGlB,MAAM,UAAU,CAAC;AAClB,OAAO,EAAE,cAAc,EAAE,MAAM,oCAAoC,CAAC;AACpE,OAAO,EAAE,IAAI,EAAE,MAAM,sCAAsC,CAAC;AAE5D,IAAM,QAAQ,GAAG,ohBAUQ,IAAI,CAAC,YAAY,CAAC,UAAU,2zBAiB5B,IAAI,CAAC,YAAY,CAAC,aAAa,yCAIvD,CAAC;;IAWD,oCAA2C;QAAA,mBAAc,GAAd,cAAc;mCAJ3B,kBAAkB,CAAC,QAAQ;4BAClC,EAAE;oCAwBiC,IAAI,YAAY,EAEvE;QAtBF,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KAC/D;0BAGG,4CAAI;uBAAC,IAAS;YACjB,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,kBAAkB,CAAC;YACnD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,WAAW,CAAC;;;;;0BAIlC,0DAAkB;uBAAC,kBAA0B;YAChD,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC;;;;;0BAI3C,mDAAW;uBAAC,WAAmB;YAClC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;;;;;IAQjC,6CAAQ,GAAR;QACC,IACC,MAAM;YACN,MAAM,CAAC,QAAQ;YACf,MAAM,CAAC,QAAQ,CAAC,MAAM;YACtB,IAAI,CAAC,mBAAmB,KAAK,OAAO;YACpC,IAAI,CAAC,mBAAmB,KAAK,cAAc,EAC1C;YACD,IAAM,YAAY,GAAG,IAAI,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACjE,IAAM,QAAQ,GAAG,YAAY,CAAC,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YACzE,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAC3B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;SACzB;KACD;IAED,gDAAW,GAAX,eAAgB;IAEhB,gDAAW,GAAX,UAAY,QAAgB;QAC3B,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC9B,QAAQ,UAAA;SACR,CAAC,CAAC;KACH;IAED,6CAAQ,GAAR,UAAS,KAAa;QACrB,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC;YAC9B,KAAK,OAAA;SACL,CAAC,CAAC;KACH;IAED,qDAAgB,GAAhB;QACC,OAAO,CACN,QAAQ,CAAC,IAAI,CAAC,mBAA6B,CAAC,IAAI,IAAI,CAAC,mBAAmB,CACxE,CAAC;KACF;IAED,mDAAc,GAAd;QACC,OAAO,IAAI,CAAC,cAAc;aACxB,IAAI,EAAE;aACN,GAAG,CAAC,KAAG,IAAI,CAAC,gBAAgB,EAAI,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC;KACzD;IAED,wDAAmB,GAAnB,UAAoB,KAAuB;QAC1C,IAAI,CAAC,oBAAoB,CAAC,IAAI,cAC1B,KAAK,EACP,CAAC;KACH;;gBA/ED,SAAS,SAAC;oBACV,QAAQ,EAAE,kCAAkC;oBAC5C,QAAQ,UAAA;iBACR;;;;gBAvCQ,cAAc,uBA6CT,MAAM,SAAC,cAAc;;;yBAIjC,KAAK;uCAML,KAAK;gCAKL,KAAK;yCAKL,MAAM;;qCA9FR;;SAqEa,0BAA0B","sourcesContent":["// tslint:disable\r\n/*\r\n * Copyright 2017-2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You may not use this file except in compliance with\r\n * the License. A copy of the License is located at\r\n *\r\n *     http://aws.amazon.com/apache2.0/\r\n *\r\n * or in the \"license\" file accompanying this file. This file is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR\r\n * CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions\r\n * and limitations under the License.\r\n */\r\n// tslint:enable\r\n\r\nimport {\r\n\tComponent,\r\n\tInput,\r\n\tOnInit,\r\n\tEventEmitter,\r\n\tInject,\r\n\tOutput,\r\n} from '@angular/core';\r\nimport { labelMap } from '../common';\r\nimport {\r\n\tUsernameAttributes,\r\n\tUsernameFieldOutput,\r\n\tPhoneFieldOutput,\r\n} from '../types';\r\nimport { AmplifyService } from '../../../providers/amplify.service';\r\nimport { auth } from '../../../assets/data-test-attributes';\r\n\r\nconst template = `\r\n<div class=\"amplify-amplify-form-row amplify-signin-username\">\r\n    <div *ngIf=\"this._usernameAttributes === 'email'\">\r\n        <label class=\"amplify-input-label\" for=\"emailField\"> {{ this.amplifyService.i18n().get('Email') }} *</label>\r\n        <input\r\n            #emailField\r\n            class=\"amplify-form-input\"\r\n            type=\"email\"\r\n            placeholder=\"{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}\"\r\n            (keyup)=\"setEmail($event.target.value)\"\r\n            data-test=\"${auth.genericAttrs.emailInput}\"\r\n        />\r\n    </div>\r\n    <div *ngIf=\"this._usernameAttributes === 'phone_number'\">\r\n        <amplify-auth-phone-field-core\r\n            (phoneFieldChanged)=\"onPhoneFieldChanged($event)\"\r\n        ></amplify-auth-phone-field-core>\r\n    </div>\r\n    <div *ngIf=\"this._usernameAttributes !== 'email' && this._usernameAttributes !== 'phone_number'\">\r\n        <label class=\"amplify-input-label\" for=\"usernameField\"> {{ this.amplifyService.i18n().get(getUsernameLabel()) }} *</label>\r\n        <input\r\n            #usernameField\r\n            class=\"amplify-form-input\"\r\n            type=\"text\"\r\n            value=\"{{this.username}}\"\r\n            placeholder=\"{{ this.amplifyService.i18n().get(this.getPlaceholder()) }}\"\r\n            (keyup)=\"setUsername($event.target.value)\"\r\n            data-test=\"${auth.genericAttrs.usernameInput}\"\r\n        />\r\n    </div>\r\n</div>\r\n`;\r\n\r\n@Component({\r\n\tselector: 'amplify-auth-username-field-core',\r\n\ttemplate,\r\n})\r\nexport class UsernameFieldComponentCore implements OnInit {\r\n\t_usernameAttributes: string = UsernameAttributes.USERNAME;\r\n\t_placeholder: string = '';\r\n\tusername: string;\r\n\r\n\tconstructor(@Inject(AmplifyService) public amplifyService: AmplifyService) {\r\n\t\tthis.onPhoneFieldChanged = this.onPhoneFieldChanged.bind(this);\r\n\t}\r\n\r\n\t@Input()\r\n\tset data(data: any) {\r\n\t\tthis._usernameAttributes = data.usernameAttributes;\r\n\t\tthis._placeholder = data.placeholder;\r\n\t}\r\n\r\n\t@Input()\r\n\tset usernameAttributes(usernameAttributes: string) {\r\n\t\tthis._usernameAttributes = usernameAttributes;\r\n\t}\r\n\r\n\t@Input()\r\n\tset placeholder(placeholder: string) {\r\n\t\tthis._placeholder = placeholder;\r\n\t}\r\n\r\n\t@Output()\r\n\tusernameFieldChanged: EventEmitter<UsernameFieldOutput> = new EventEmitter<\r\n\t\tUsernameFieldOutput\r\n\t>();\r\n\r\n\tngOnInit() {\r\n\t\tif (\r\n\t\t\twindow &&\r\n\t\t\twindow.location &&\r\n\t\t\twindow.location.search &&\r\n\t\t\tthis._usernameAttributes !== 'email' &&\r\n\t\t\tthis._usernameAttributes !== 'phone_number'\r\n\t\t) {\r\n\t\t\tconst searchParams = new URLSearchParams(window.location.search);\r\n\t\t\tconst username = searchParams ? searchParams.get('username') : undefined;\r\n\t\t\tthis.setUsername(username);\r\n\t\t\tthis.username = username;\r\n\t\t}\r\n\t}\r\n\r\n\tngOnDestroy() {}\r\n\r\n\tsetUsername(username: string) {\r\n\t\tthis.usernameFieldChanged.emit({\r\n\t\t\tusername,\r\n\t\t});\r\n\t}\r\n\r\n\tsetEmail(email: string) {\r\n\t\tthis.usernameFieldChanged.emit({\r\n\t\t\temail,\r\n\t\t});\r\n\t}\r\n\r\n\tgetUsernameLabel() {\r\n\t\treturn (\r\n\t\t\tlabelMap[this._usernameAttributes as string] || this._usernameAttributes\r\n\t\t);\r\n\t}\r\n\r\n\tgetPlaceholder() {\r\n\t\treturn this.amplifyService\r\n\t\t\t.i18n()\r\n\t\t\t.get(`${this.getUsernameLabel()}` || this._placeholder);\r\n\t}\r\n\r\n\tonPhoneFieldChanged(event: PhoneFieldOutput) {\r\n\t\tthis.usernameFieldChanged.emit({\r\n\t\t\t...event,\r\n\t\t});\r\n\t}\r\n}\r\n"]}